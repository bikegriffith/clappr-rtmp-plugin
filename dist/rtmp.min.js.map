{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///rtmp.min.js","webpack:///webpack/bootstrap 9a178bb641cdceda385e","webpack:///./index.js","webpack:///./src/main.js","webpack:///./~/@clappr/core/dist/clappr-core.js","webpack:///./public/flash.html","webpack:///./public/flash.scss"],"names":["root","factory","exports","module","define","amd","RTMP","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","default","_interopRequireDefault","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getter","get","parent","getPrototypeOf","_clapprCore","_htmlLoaderPublicFlashHtml","_htmlLoaderPublicFlashHtml2","_rawLoaderSassLoaderPublicFlashScss","_rawLoaderSassLoaderPublicFlashScss2","_Flash","options","rtmpConfig","swfPath","wmode","bufferTime","scaling","playbackType","src","indexOf","useAppInstance","proxyType","startLevel","autoSwitch","switchRules","addListeners","_setupPlaybackType","template","data-rtmp","data","type","width","height","_playbackType","Mediator","on","uniqueId","_progress","_updateTime","_checkState","_playbackReady","_reporLevels","_levelChanging","_levelChange","_bootstrap","off","el","autoPlay","play","_setupSettings","getPlaybackType","trigger","Events","PLAYBACK_TIMEUPDATE","current","total","name","getPosition","getDuration","PLAYBACK_LEVEL_SWITCH_START","PLAYBACK_LEVEL_SWITCH_END","PLAYBACK_BITRATE","level","currentLevel","foundLevel","levels","forEach","settings","left","right","seekEnabled","PLAYBACK_SETTINGSUPDATE","$el","html","cid","playbackId","_switchRulesJSON","Browser","isIE","$","remove","isLegacyIE","attr","IE_CLASSID","style","Styler","getStyleFor","append","getState","PLAYBACK_ERROR","_isReadyState","PLAYBACK_READY","isDynamicStream","PLAYBACK_LEVELS_AVAILABLE","getCurrentLevel","set","setLevel","getNumLevels","isAutoSwitchLevels","numLevels","bitrate","getBitrateForLevel","push","label","JSON","stringify","replace","Flash","canPlay","source","mimeType","debug","s","console","log","global","_typeof","Symbol","iterator","_defineProperties","_defineProperty","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","apply","_objectSpread2","arguments","getOwnPropertyDescriptors","_setPrototypeOf","_getPrototypeOf","o","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","_superPropBase","hasOwnProperty","base","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","_arr","_n","_d","_e","_s","_i","next","done","err","return","minLen","n","slice","test","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","F","_e2","f","normalCompletion","didErr","step","_e3","assign","prop","propDescriptor","extend","properties","Surrogate","_parent","_this","_len","args","_key","_super","concat","initialize","formatTime","time","paddedHours","isFinite","parseInt","seconds","minutes","hours","days","out","trim","seekStringToSeconds","paramName","seekString","QueryString","params","hashParams","parts","match","factor","h","suffix","prefix","idsCounter","isNumber","parseFloat","currentScriptUrl","scripts","document","getElementsByTagName","getBrowserLanguage","window","navigator","language","now","performance","removeArrayItem","item","splice","listContainsIgnoreCase","items","find","itemEach","toLowerCase","canAutoPlayMedia","cb","inline","muted","timeout","Media","mp4","element","createElement","setAttribute","promise","timeoutId","setTimeout","setResult","Error","error","clearTimeout","then","catch","predicate","thisArg","k","kValue","entries","ownProps","resArray","values","varArgs","to","index","nextSource","nextKey","findIndex","Zepto","String","class2type","isFunction","isWindow","isDocument","nodeType","DOCUMENT_NODE","isObject","isPlainObject","likeArray","compact","array","_filter","flatten","fn","dasherize","str","classRE","classCache","RegExp","maybeAddPx","cssNumber","defaultDisplay","nodeName","display","elementDisplay","body","appendChild","getComputedStyle","getPropertyValue","parentNode","removeChild","_children","_slice","children","map","childNodes","node","Z","dom","selector","deep","undefined$1","filtered","nodes","funcArg","context","arg","idx","payload","removeAttribute","className","klass","svg","baseVal","deserializeValue","parseJSON","traverseNode","fun","classList","camelize","uniq","emptyArray","_concat","column-count","columns","font-weight","line-height","opacity","z-index","zoom","fragmentRE","singleTagRE","tagExpanderRE","rootNodeRE","capitalRE","methodAttributes","adjacencyOperators","table","tableRow","containers","tr","tbody","thead","tfoot","td","th","*","readyRE","simpleSelectorRE","zepto","tempParent","propMap","tabindex","readonly","for","class","maxlength","cellspacing","cellpadding","rowspan","colspan","usemap","frameborder","contenteditable","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","temp","qsa","chr","toUpperCase","fragment","container","$1","innerHTML","each","isZ","init","ready","shift","found","maybeID","maybeClass","nameOnly","isSimple","getElementById","getElementsByClassName","querySelectorAll","contains","documentElement","isEmptyObject","isNumeric","val","num","Number","isNaN","inArray","elem","camelCase","uuid","support","expr","noop","elements","callback","grep","parse","split","reduce","sort","toArray","readyState","addEventListener","size","every","not","add","is","excludes","has","eq","first","last","$this","some","closest","collection","_","parents","ancestors","pluck","contents","contentDocument","siblings","child","empty","show","replaceWith","newContent","before","wrap","structure","func","clone","wrapAll","cloneNode","wrapInner","unwrap","hide","css","toggle","setting","prev","_html","originHtml","text","_text","newText","textContent","join","getAttribute","removeAttr","attribute","removeProp","attrName","multiple","selected","offset","coordinates","coords","parentOffset","offsetParent","top","position","getBoundingClientRect","pageXOffset","pageYOffset","Math","round","computedStyle","removeProperty","cssText","hasClass","addClass","cls","newName","removeClass","toggleClass","when","names","scrollTop","hasScrollTop","scrollTo","scrollX","scrollLeft","hasScrollLeft","scrollY","detach","dimension","dimensionProperty","operator","operatorIndex","inside","argType","copyByClone","nextSibling","firstChild","parentInDocument","insertBefore","ownerDocument","defaultView","eval","triggerAndReturn","eventName","event","Event","isDefaultPrevented","triggerGlobal","ajaxStart","active","ajaxStop","ajaxBeforeSend","xhr","beforeSend","ajaxSuccess","deferred","status","success","resolveWith","ajaxComplete","ajaxError","rejectWith","complete","ajaxDataFilter","dataFilter","mimeToDataType","mime","htmlType","jsonType","scriptTypeRE","xmlTypeRE","appendQuery","url","query","serializeData","processData","param","traditional","dataType","parseArguments","serialize","scope","hash","jsonpID","rscript","blankRE","originAnchor","href","location","ajaxJSONP","ajax","responseData","abortTimeout","_callbackName","jsonpCallback","callbackName","script","originalCallback","abort","errorType","triggerHandler","head","ajaxSettings","XMLHttpRequest","accepts","json","xml","crossDomain","cache","urlAnchor","hashIndex","Deferred","protocol","host","hasPlaceholder","jsonp","headers","setHeader","nativeSetHeader","setRequestHeader","overrideMimeType","contentType","onreadystatechange","getResponseHeader","responseType","response","responseText","responseXML","statusText","async","open","username","password","xhrFields","send","post","getJSON","load","escape","encodeURIComponent","Callbacks","memory","_fired","firing","firingStart","firingLength","firingIndex","list","stack","once","fire","stopOnFalse","disable","start","unique","disabled","lock","locked","fireWith","fired","tuples","_state","_promise","state","always","fail","fns","defer","tuple","returned","resolve","reject","progress","notify","stateString","sub","progressValues","progressContexts","resolveContexts","resolveValues","remain","updateFn","ctx","notifyWith","zid","_zid","findHandlers","ns","matcher","matcherFor","handlers","handler","sel","eventCapture","captureSetting","del","focusinSupported","focus","realEvent","hover","events","delegator","capture","related","relatedTarget","proxy","compatible","isImmediatePropagationStopped","_args","preventDefault","stopPropagation","removeEventListener","eventMethods","sourceMethod","returnTrue","returnFalse","timeStamp","defaultPrevented","returnValue","getPreventDefault","createProxy","originalEvent","ignoreProperties","isString","specialEvents","blur","mouseenter","mouseleave","click","mousedown","mouseup","mousemove","proxyFn","unshift","bind","unbind","one","stopImmediatePropagation","delegate","undelegate","live","die","autoRemove","evt","currentTarget","liveFired","dispatchEvent","createEvent","bubbles","initEvent","nativeGetComputedStyle","pseudoElement","_visible","process","filterRe","exec","filters","oldQsa","oldMatches","visible","hidden","checked","childRe","classTag","taggedParent","BROWSER_DATA","group","identifier","versionIdentifier","OS_DATA","version","versionSeparator","hasLocalstorage","localStorage","setItem","removeItem","hasFlash","fo","ActiveXObject","mimeTypes","enabledPlugin","getBrowserInfo","ua","extra","appName","appVersion","getBrowserData","_step","browserObject","userAgent","_iterator","browser","browserRegExp","browserRegExpResult","versionRegExp","versionRegExpResult","setBrowserVersion","splitVersion","fullVersion","majorVersion","minorVersion","getOsData","_step2","osObject","_iterator2","os","osRegExp","osRegExpResult","setOsVersion","separator","finalSeparator","substr","getViewportSize","viewportObject","setViewportOrientation","orientation","viewport","getDevice","platformRegExp","device","browserInfo","isEdge","isChrome","isSafari","isFirefox","isIE11","isChromecast","isMobile","isiOS","isAndroid","isWindowsPhone","isWin8App","isWiiU","isPS4","videoStack","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","Fullscreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","querySelector","webkitEnterFullScreen","cancelFullscreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","Config","volume","_defaultConfig","domain","_createKeyspace","_defaultValueFor","paramsString","pl","search","decode","decodeURIComponent","substring","_urlParams","_hashParams","DomRecycler","recycleVideo","tagName","attributes","DoubleEventHandler","delay","lastTime","prevented","currentTime","getTime","diffTime","Utils","BOLD","INFO","DEBUG","WARN","ERROR","LEVEL_DEBUG","LEVEL_INFO","LEVEL_WARN","LEVEL_ERROR","LEVEL_DISABLED","COLORS","DESCRIPTIONS","Log","offLevel","EXCLUDE_LIST","previousLevel","_level","newLevel","message","color","klassDescription","getInstance","_instance","info","warn","eventSplitter","eventsApi","action","rest","l","triggerEvents","run","ev","a1","a2","a3","exception","_events","_once","retain","j","_callback","allEvents","all","listeningTo","_listeningTo","_listenId","Custom","listenMethods","listenTo","listenToOnce","method","PLAYER_READY","PLAYER_RESIZE","PLAYER_FULLSCREEN","PLAYER_PLAY","PLAYER_PAUSE","PLAYER_STOP","PLAYER_ENDED","PLAYER_SEEK","PLAYER_ERROR","PLAYER_TIMEUPDATE","PLAYER_VOLUMEUPDATE","PLAYER_SUBTITLE_AVAILABLE","PLAYBACK_PROGRESS","PLAYBACK_BUFFERING","PLAYBACK_BUFFERFULL","PLAYBACK_LOADEDMETADATA","PLAYBACK_HIGHDEFINITIONUPDATE","PLAYBACK_PLAYBACKSTATE","PLAYBACK_DVR","PLAYBACK_MEDIACONTROL_DISABLE","PLAYBACK_MEDIACONTROL_ENABLE","PLAYBACK_ENDED","PLAYBACK_PLAY_INTENT","PLAYBACK_PLAY","PLAYBACK_PAUSE","PLAYBACK_SEEK","PLAYBACK_SEEKED","PLAYBACK_STOP","PLAYBACK_STATS_ADD","PLAYBACK_FRAGMENT_LOADED","PLAYBACK_LEVEL_SWITCH","PLAYBACK_SUBTITLE_AVAILABLE","PLAYBACK_SUBTITLE_CHANGED","CORE_CONTAINERS_CREATED","CORE_ACTIVE_CONTAINER_CHANGED","CORE_OPTIONS_CHANGE","CORE_READY","CORE_FULLSCREEN","CORE_RESIZE","CORE_SCREEN_ORIENTATION_CHANGED","CORE_MOUSE_MOVE","CORE_MOUSE_LEAVE","CONTAINER_PLAYBACKSTATE","CONTAINER_PLAYBACKDVRSTATECHANGED","CONTAINER_BITRATE","CONTAINER_STATS_REPORT","CONTAINER_DESTROYED","CONTAINER_READY","CONTAINER_RESIZE","CONTAINER_ERROR","CONTAINER_LOADEDMETADATA","CONTAINER_SUBTITLE_AVAILABLE","CONTAINER_SUBTITLE_CHANGED","CONTAINER_TIMEUPDATE","CONTAINER_PROGRESS","CONTAINER_PLAY","CONTAINER_STOP","CONTAINER_PAUSE","CONTAINER_ENDED","CONTAINER_CLICK","CONTAINER_DBLCLICK","CONTAINER_CONTEXTMENU","CONTAINER_MOUSE_ENTER","CONTAINER_MOUSE_LEAVE","CONTAINER_SEEK","CONTAINER_SEEKED","CONTAINER_VOLUME","CONTAINER_FULLSCREEN","CONTAINER_STATE_BUFFERING","CONTAINER_STATE_BUFFERFULL","CONTAINER_SETTINGSUPDATE","CONTAINER_HIGHDEFINITIONUPDATE","CONTAINER_MEDIACONTROL_SHOW","CONTAINER_MEDIACONTROL_HIDE","CONTAINER_MEDIACONTROL_DISABLE","CONTAINER_MEDIACONTROL_ENABLE","CONTAINER_STATS_ADD","CONTAINER_OPTIONS_CHANGE","MEDIACONTROL_RENDERED","MEDIACONTROL_FULLSCREEN","MEDIACONTROL_SHOW","MEDIACONTROL_HIDE","MEDIACONTROL_MOUSEMOVE_SEEKBAR","MEDIACONTROL_MOUSELEAVE_SEEKBAR","MEDIACONTROL_PLAYING","MEDIACONTROL_NOTPLAYING","MEDIACONTROL_CONTAINERCHANGED","MEDIACONTROL_OPTIONS_CHANGE","BaseObject","_Events","_options","evaluate","interpolate","noMatch","escapes","'","\\","\r","\n","\t"," "," ","escaper","htmlEntities","&","<",">","\"","entityRe","escapeExpr","string","counter","tmpl","render","variable","baseUrl","delegateEventSplitter","UIObject","_BaseObject","_ensureElement","delegateEvents","stopListening","undelegateEvents","setElement","attrs","PlayerError","core","FATAL","ErrorMixin","createError","useCodePrefix","origin","i18n","prefixedCode","code","defaultError","description","Levels","raw","errorData","UI","defaultUI","title","t","playerError","UICorePlugin","_UIObject","enabled","bindEvents","css_248z","Container","_i18n","playback","isReady","mediaControlDisabled","plugins","dblTapHandler","clickTimer","clickDelay","data-container","dblclick","touchend","contextmenu","ended","buffering","hasClosedCaptionsTracks","closedCaptionsTracks","closedCaptionsTrackId","trackId","onProgress","timeUpdated","onBuffering","bufferfull","settingsUpdate","loadedMetadata","highDefinitionUpdate","updateBitrate","playbackStateChanged","playbackDvrStateChanged","disableMediaControl","enableMediaControl","onSeek","onSeeked","onEnded","playing","paused","stopped","subtitleAvailable","subtitleChanged","track","dvrInUse","newBitrate","metrics","dvrEnabled","disableResizeObserver","plugin","destroy","duration","animate","isPlaying","getStartTimeOffset","_error","metadata","timeProgress","stop","pause","_this2","chromeless","allowUserInteraction","cancelClicked","_this3","handle","seek","percentage","getPlugin","isHD","isHighDefinitionInUse","_this4","resizeObserverInterval","setInterval","checkResize","clearInterval","newSize","clientWidth","clientHeight","_ref","currentSize","isResize","updateStyle","configure","enableResizeObserver","Playback","_consented","NO_OP","canAutoPlay","VOD","AOD","LIVE","ContainerFactory","loader","sources","createContainer","playbackPlugins","resolvedSource","playbackPlugin","findPlaybackPlugin","addContainerPlugins","containerPlugins","Plugin","addPlugin","css_248z$1","css_248z$2","Core","configureDomRecycler","firstResize","_boundFullscreenHandler","handleFullscreenChange","handleWindowResize","webkitfullscreenchange","data-player","_mediaControl","dummyMediaControl","_dummyMediaControl","_activeContainer","activeContainer","containerFactory","prepareContainers","createContainers","setupContainers","resolveOnContainersReady","isFullscreen","setFullscreen","setPlayerSize","previousSize","resize","triggerResize","checkSizeCallback","thereWasChange","oldHeight","oldWidth","computedSize","updateSize","innerWidth","innerHeight","_screenOrientation","removeContainer","setupContainer","renderContainers","appendToParent","_this5","activePlayback","playbackEl","_this6","fullscreenEl","_this7","resetStyle","includeResetStyle","hasCoreParent","appendTo","parentElement","CoreFactory","player","addCorePlugins","corePlugins","setupExternalInterface","externalFunctions","getExternalInterface","VERSION_REGEX","Version","major","minor","patch","_matches","other","diff","min","max","compare","filterPluginsByType","_ref2","_ref3","_ref4","Loader","registry","playbacks","currentVersion","externalPlugins","playerId","_Loader$registeredPlu","registeredPlugins","validateExternalPluginsType","addExternalPlugins","entry","_entry$prototype","supportedVersion","maxVersion","inc","minVersion","satisfies","pluginEntry","checkVersionSupport","pluginRegistry","previousEntry","playbackEntry","previousEntryIdx","memo","useReversePrecedence","groupUp","pluginsMap","reduceRight","loadExternalPluginsFirst","loadExternalPlaybacksFirst","groupPluginsByType","removeDups","pluginTypes","errorMessage","Player","playbackDefaultOptions","defaultOptions","persistConfig","_normalizeSources","disableKeyboardShortcuts","_registerOptionEventListeners","_coreFactory","parentId","setParentId","attachTo","_loader","_ready","onReady","onResize","onPlay","onPause","onStop","onError","onTimeUpdate","onVolumeUpdate","onSubtitleAvailable","_addEventListeners","_onReady","_containerChanged","_onFullscreenChange","_onResize","_onPlay","_onPause","_onStop","_onEnded","_onSeek","_onError","_onTimeUpdate","_onVolumeUpdate","_onSubtitleAvailable","newEvents","hasNewEvents","userEvent","eventType","eventsMapping","eventFunction","_addContainerEventListeners","fullscreen","getCurrentTime","getCurrentPlayback","consent","seekPercentage","mute","unmute","isDvrEnabled","isDvrInUse","ContainerPlugin","CorePlugin","UIContainerPlugin","tracksHTML","css_248z$3","MIMETYPES","codec","ogg","3gpp","webm","mkv","m3u8","ogv","AUDIO_MIMETYPES","wav","mp3","aac","oga","KNOWN_AUDIO_MIMETYPES","acc","UNKNOWN_ERROR","HTML5Video","_Playback","_destroyed","_loadStarted","_isBuffering","_playheadMoving","_playheadMovingTimer","_stopped","_ccTrackId","_setupSrc","disableContextMenu","disableVideoTagContextMenu","_minDvrSize","isValidMinimumDVRSizeConfig","minimumDVRSizeConfig","posterUrl","playbackConfig","preload","poster","defaultMuted","loop","crossOrigin","x-webkit-playsinline","playInline","controls","useVideoTagDefaultControls","playsinline","crossorigin","externalTracks","_setupExternalTracks","attemptAutoPlay","isAudioOnly","resourceUrl","_mimeTypesForUrl","audioOnly","data-html5-video","canplay","canplaythrough","durationchange","loadeddata","loadedmetadata","seeking","seeked","stalled","timeupdate","waiting","isLive","minimumDvrSize","disableCanAutoPlay","opts","autoPlayTimeout","tracks","_externalTracks","kind","lang","srcUrl","_ccIsSetup","_src","_handleBufferingEvents","_updateSettings","autoSeekFromUrl","_checkInitialSeek","_onProgress","isSeekEnabled","onDemandType","Infinity","eventHandler","_updateDvr","_stopPlayheadMovingChecks","_playheadMovingTimeOnCheck","_determineIfPlayheadMoving","_checkForClosedCaptions","_startPlayheadMovingChecks","playheadShouldBeMoving","HAVE_FUTURE_DATA","isUnknownError","formattedError","handleTextTrackChange","textTracks","garbage","dvr","seekable","seekTime","end","buffered","bufferedPos","isHTML5Video","_handleTextTrackChange","mode","showingTrack","mimeTypesByExtension","extension","_canPlay","media","mediaType","canPlayType","HTML5Audio","_HTML5Video","mimetypes","css_248z$4","HTMLImg","data-html-img","resource","noOpHTML","css_248z$5","NoOp","_noiseFrameNum","data-no-op","playbackNotSupported","playbackNotSupportedMessage","showForNoOp","_animate","buffer32","idata","createImageData","canvas","Uint32Array","buffer","random","pow","putImageData","_stop","_noise","_animationHandle","_loop","getContext","Strings","_CorePlugin","_initializeMessages","_language","fallbackLang","_messages","en","defaultMessages","back_to_live","playback_not_supported","default_error_title","default_error_message","pt","es","ru","fr","et","ar","strings","SourcesPlugin","onContainersCreated","firstValidSource","registerPlugin","registerPlayback","main"],"mappings":"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","file":"rtmp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RTMP\"] = factory();\n\telse\n\t\troot[\"RTMP\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RTMP\"] = factory();\n\telse\n\t\troot[\"RTMP\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports['default'] = __webpack_require__(/*! ./src/main.js */ 1);module.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/*!*********************!*\\\n  !*** ./src/main.js ***!\n  \\*********************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Copyright 2014 Globo.com Player authors. All rights reserved.\n\t// Use of this source code is governed by a BSD-style\n\t// license that can be found in the LICENSE file.\n\t\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if(\"value\" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function: while(_again) {var object=_x,property=_x2,receiver=_x3;_again = false;if(object === null)object = Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc === undefined){var parent=Object.getPrototypeOf(object);if(parent === null){return undefined;}else {_x = parent;_x2 = property;_x3 = receiver;_again = true;desc = parent = undefined;continue _function;}}else if(\"value\" in desc){return desc.value;}else {var getter=desc.get;if(getter === undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{\"default\":obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _inherits(subClass,superClass){if(typeof superClass !== \"function\" && superClass !== null){throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__ = superClass;}var _clapprCore=__webpack_require__(/*! @clappr/core */ 2);var _htmlLoaderPublicFlashHtml=__webpack_require__(/*! html-loader!../public/flash.html */ 3);var _htmlLoaderPublicFlashHtml2=_interopRequireDefault(_htmlLoaderPublicFlashHtml);var _rawLoaderSassLoaderPublicFlashScss=__webpack_require__(/*! raw-loader!sass-loader!../public/flash.scss */ 4);var _rawLoaderSassLoaderPublicFlashScss2=_interopRequireDefault(_rawLoaderSassLoaderPublicFlashScss);var RTMP=(function(_Flash){_inherits(RTMP,_Flash);_createClass(RTMP,[{key:\"name\",get:function get(){return \"rtmp\";}},{key:\"tagName\",get:function get(){return \"object\";}},{key:\"template\",get:function get(){return (0,_clapprCore.template)(_htmlLoaderPublicFlashHtml2[\"default\"]);}},{key:\"attributes\",get:function get(){return {\"data-rtmp\":\"\",data:this.swfPath,type:\"application/x-shockwave-flash\",width:\"100%\",height:\"100%\"};}}]);function RTMP(options){_classCallCheck(this,RTMP);_get(Object.getPrototypeOf(RTMP.prototype),\"constructor\",this).call(this,options);this.options.rtmpConfig = this.options.rtmpConfig || {};this.options.rtmpConfig.swfPath = this.options.rtmpConfig.swfPath || \"//cdn.jsdelivr.net/clappr.rtmp/latest/assets/RTMP.swf\";this.options.rtmpConfig.wmode = this.options.rtmpConfig.wmode || \"transparent\"; // Default to transparent wmode - IE always uses gpu as per objectIE\n\tthis.options.rtmpConfig.bufferTime = this.options.rtmpConfig.bufferTime === undefined?0.1:this.options.rtmpConfig.bufferTime;this.options.rtmpConfig.scaling = this.options.rtmpConfig.scaling || \"letterbox\";this.options.rtmpConfig.playbackType = this.options.rtmpConfig.playbackType || this.options.src.indexOf(\"live\") > -1;this.options.rtmpConfig.useAppInstance = this.options.rtmpConfig.useAppInstance === undefined?false:this.options.rtmpConfig.useAppInstance;this.options.rtmpConfig.proxyType = this.options.rtmpConfig.proxyType || \"none\";this.options.rtmpConfig.startLevel = this.options.rtmpConfig.startLevel === undefined?-1:this.options.rtmpConfig.startLevel;this.options.rtmpConfig.autoSwitch = this.options.rtmpConfig.autoSwitch === undefined?false:this.options.rtmpConfig.autoSwitch;this.options.rtmpConfig.switchRules = this.options.rtmpConfig.switchRules;this.addListeners();this._setupPlaybackType();}_createClass(RTMP,[{key:\"getPlaybackType\",value:function getPlaybackType(){return this._playbackType;}},{key:\"addListeners\",value:function addListeners(){_clapprCore.Mediator.on(this.uniqueId + \":progress\",this._progress,this);_clapprCore.Mediator.on(this.uniqueId + \":timeupdate\",this._updateTime,this);_clapprCore.Mediator.on(this.uniqueId + \":statechanged\",this._checkState,this);_clapprCore.Mediator.on(this.uniqueId + \":playbackready\",this._playbackReady,this);_clapprCore.Mediator.on(this.uniqueId + \":onloaded\",this._reporLevels,this);_clapprCore.Mediator.on(this.uniqueId + \":levelChanging\",this._levelChanging,this);_clapprCore.Mediator.on(this.uniqueId + \":levelChanged\",this._levelChange,this);_clapprCore.Mediator.on(this.uniqueId + \":flashready\",this._bootstrap,this);}},{key:\"stopListening\",value:function stopListening(){_get(Object.getPrototypeOf(RTMP.prototype),\"stopListening\",this).call(this);_clapprCore.Mediator.off(this.uniqueId + \":progress\");_clapprCore.Mediator.off(this.uniqueId + \":timeupdate\");_clapprCore.Mediator.off(this.uniqueId + \":statechanged\");_clapprCore.Mediator.off(this.uniqueId + \":flashready\");}},{key:\"_bootstrap\",value:function _bootstrap(){this.el.width = \"100%\";this.el.height = \"100%\";this.options.autoPlay && this.play();this._setupSettings();}},{key:\"_updateTime\",value:function _updateTime(){if(this.getPlaybackType() === \"live\"){this.trigger(_clapprCore.Events.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name);}else {this.trigger(_clapprCore.Events.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name);}}},{key:\"_levelChanging\",value:function _levelChanging(){this.trigger(_clapprCore.Events.PLAYBACK_LEVEL_SWITCH_START);}},{key:\"_levelChange\",value:function _levelChange(){this.trigger(_clapprCore.Events.PLAYBACK_LEVEL_SWITCH_END);this.trigger(_clapprCore.Events.PLAYBACK_BITRATE,{level:this.currentLevel});}},{key:\"findLevelBy\",value:function findLevelBy(id){var foundLevel;this.levels.forEach(function(level){if(level.id === id){foundLevel = level;}});return foundLevel;}},{key:\"_setupPlaybackType\",value:function _setupPlaybackType(){this._playbackType = this.options.rtmpConfig.playbackType;}},{key:\"_setupSettings\",value:function _setupSettings(){if(this.getPlaybackType() === \"live\"){this.settings.left = [\"playpause\"];this.settings.right = [\"fullscreen\",\"volume\"];this.settings.seekEnabled = false;}else {this.settings.left = [\"playpause\",\"position\",\"duration\"];this.settings.right = [\"fullscreen\",\"volume\"];}this.trigger(_clapprCore.Events.PLAYBACK_SETTINGSUPDATE,this.name);}},{key:\"render\",value:function render(){this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,playbackId:this.uniqueId,wmode:this.options.rtmpConfig.wmode,scaling:this.options.rtmpConfig.scaling,bufferTime:this.options.rtmpConfig.bufferTime,playbackType:this.options.rtmpConfig.playbackType,startLevel:this.options.rtmpConfig.startLevel,autoSwitch:this.options.rtmpConfig.autoSwitch,switchRules:this._switchRulesJSON,useAppInstance:this.options.rtmpConfig.useAppInstance,proxyType:this.options.rtmpConfig.proxyType}));if(_clapprCore.Browser.isIE){this.$(\"embed\").remove();if(_clapprCore.Browser.isLegacyIE){this.$el.attr(\"classid\",IE_CLASSID);}}this.el.id = this.cid;var style=_clapprCore.Styler.getStyleFor(_rawLoaderSassLoaderPublicFlashScss2[\"default\"]);this.$el.append(style);return this;}},{key:\"_checkState\",value:function _checkState(){_get(Object.getPrototypeOf(RTMP.prototype),\"_checkState\",this).call(this);if(this.el.getState() === \"ERROR\"){this.trigger(_clapprCore.Events.PLAYBACK_ERROR,this.name);}}},{key:\"_playbackReady\",value:function _playbackReady(){this._isReadyState = true;this.trigger(_clapprCore.Events.PLAYBACK_READY,this.name);}},{key:\"_reporLevels\",value:function _reporLevels(){if(this.isDynamicStream){if(this.levels){if(this.options.rtmpConfig.autoSwitch === true){this.trigger(_clapprCore.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels,-1);this.trigger(_clapprCore.Events.PLAYBACK_BITRATE,{level:this.currentLevel});}else {this.trigger(_clapprCore.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels,this.options.rtmpConfig.startLevel);}}}}},{key:\"swfPath\",get:function get(){return this.options.rtmpConfig.swfPath;}},{key:\"currentLevel\",get:function get(){if(this._isReadyState){return this.el.getCurrentLevel();}return undefined;},set:function set(level){this.el.setLevel(level);if(level === -1 && level !== this.currentLevel){this.trigger(_clapprCore.Events.PLAYBACK_LEVEL_SWITCH_END);this.trigger(_clapprCore.Events.PLAYBACK_BITRATE,{level:this.currentLevel});}}},{key:\"numLevels\",get:function get(){if(this._isReadyState){return this.el.getNumLevels();}return undefined;}},{key:\"autoSwitchLevels\",get:function get(){return this.el.isAutoSwitchLevels();}},{key:\"levels\",get:function get(){var levels=[];for(var i=0;i < this.numLevels;i++) {var bitrate=this.el.getBitrateForLevel(i);levels.push({id:i,label:bitrate + \"Kbps\"});}return levels;}},{key:\"isDynamicStream\",get:function get(){return this.el.isDynamicStream();}},{key:\"_switchRulesJSON\",get:function get(){if(this.options.rtmpConfig.switchRules !== undefined){return JSON.stringify(this.options.rtmpConfig.switchRules).replace(/\"/g,\"&quot;\");}return \"\";}}]);return RTMP;})(_clapprCore.Flash);exports[\"default\"] = RTMP;RTMP.canPlay = function(source,mimeType){return !!(source.indexOf(\"rtmp://\") > -1 || source.indexOf(\"rtmps://\") > -1 || source.indexOf(\".smil\") > -1 || mimeType && mimeType.indexOf(\"rtmp\") > -1);};RTMP.debug = function(s){return console.log(s);};module.exports = exports[\"default\"];\n\n/***/ }),\n/* 2 */\n/*!********************************************!*\\\n  !*** ./~/@clappr/core/dist/clappr-core.js ***!\n  \\********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';(function(global,factory){ true?factory(exports):typeof define === 'function' && define.amd?define(['exports'],factory):(global = typeof globalThis !== 'undefined'?globalThis:global || self,factory(global.Clappr = {}));})(undefined,function(exports){'use strict';function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"){_typeof = function(obj){return typeof obj;};}else {_typeof = function(obj){return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype?\"symbol\":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if(\"value\" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key] = value;}return obj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols = symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread2(target){for(var i=1;i < arguments.length;i++) {var source=arguments[i] != null?arguments[i]:{};if(i % 2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else {ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _inherits(subClass,superClass){if(typeof superClass !== \"function\" && superClass !== null){throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _getPrototypeOf(o){_getPrototypeOf = Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _setPrototypeOf(o,p){_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o,p){o.__proto__ = p;return o;};return _setPrototypeOf(o,p);}function _isNativeReflectConstruct(){if(typeof Reflect === \"undefined\" || !Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy === \"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e) {return false;}}function _assertThisInitialized(self){if(self === void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _possibleConstructorReturn(self,call){if(call && (typeof call === \"object\" || typeof call === \"function\")){return call;}return _assertThisInitialized(self);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result = Reflect.construct(Super,arguments,NewTarget);}else {result = Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)) {object = _getPrototypeOf(object);if(object === null)break;}return object;}function _get(target,property,receiver){if(typeof Reflect !== \"undefined\" && Reflect.get){_get = Reflect.get;}else {_get = function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver || target);}function _slicedToArray(arr,i){return _arrayWithHoles(arr) || _iterableToArrayLimit(arr,i) || _unsupportedIterableToArray(arr,i) || _nonIterableRest();}function _toConsumableArray(arr){return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _iterableToArray(iter){if(typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter))return Array.from(iter);}function _iterableToArrayLimit(arr,i){if(typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n = (_s = _i.next()).done);_n = true) {_arr.push(_s.value);if(i && _arr.length === i)break;}}catch(err) {_d = true;_e = err;}finally {try{if(!_n && _i[\"return\"] != null)_i[\"return\"]();}finally {if(_d)throw _e;}}return _arr;}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o === \"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n === \"Object\" && o.constructor)n = o.constructor.name;if(n === \"Map\" || n === \"Set\")return Array.from(o);if(n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len == null || len > arr.length)len = arr.length;for(var i=0,arr2=new Array(len);i < len;i++) arr2[i] = arr[i];return arr2;}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol === \"undefined\" || o[Symbol.iterator] == null){if(Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\"){if(it)o = it;var i=0;var F=function F(){};return {s:F,n:function n(){if(i >= o.length)return {done:true};return {done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}var normalCompletion=true,didErr=false,err;return {s:function s(){it = o[Symbol.iterator]();},n:function n(){var step=it.next();normalCompletion = step.done;return step;},e:function e(_e3){didErr = true;err = _e3;},f:function f(){try{if(!normalCompletion && it['return'] != null)it['return']();}finally {if(didErr)throw err;}}};} // Copyright 2014 Globo.com Player authors. All rights reserved.\n\t// Use of this source code is governed by a BSD-style\n\t// license that can be found in the LICENSE file.\n\t/* istanbul ignore file */ /**\n\t   * Array.prototype.find\n\t   *\n\t   * Original source : https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n\t   * See also : https://tc39.github.io/ecma262/#sec-array.prototype.find\n\t   */if(!Array.prototype.find){ // eslint-disable-next-line\n\tObject.defineProperty(Array.prototype,'find',{ // Note: ES6 arrow function syntax is not used on purpose to avoid this to be undefined\n\tvalue:function value(predicate){ // 1. Let O be ? ToObject(this value).\n\tif(this == null)throw new TypeError('\"this\" is null or not defined');var o=Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\tvar len=o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\tif(typeof predicate !== 'function')throw new TypeError('predicate must be a function'); // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\tvar thisArg=arguments[1]; // 5. Let k be 0.\n\tvar k=0; // 6. Repeat, while k < len\n\twhile(k < len) { // a. Let Pk be ! ToString(k).\n\t// b. Let kValue be ? Get(O, Pk).\n\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\t// d. If testResult is true, return kValue.\n\tvar kValue=o[k];if(predicate.call(thisArg,kValue,k,o))return kValue; // e. Increase k by 1.\n\tk++;} // 7. Return undefined.\n\treturn undefined;}});} // polyfills for smart TVs\n\tif(!Object.entries){Object.entries = function(obj){var ownProps=Object.keys(obj),i=ownProps.length,resArray=new Array(i); // preallocate the Array\n\twhile(i--) {resArray[i] = [ownProps[i],obj[ownProps[i]]];}return resArray;};}if(!Object.values){Object.values = function(obj){var ownProps=Object.keys(obj),i=ownProps.length,resArray=new Array(i); // preallocate the Array\n\twhile(i--) {resArray[i] = obj[ownProps[i]];}return resArray;};} /**\n\t   * Object.assign\n\t   * This polyfill doesn't support symbol properties, since ES5 doesn't have symbols anyway\n\t   *\n\t   * Original source : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\t   */if(typeof Object.assign != 'function'){ // Must be writable: true, enumerable: false, configurable: true\n\tObject.defineProperty(Object,'assign',{ // length of function is 2.\n\tvalue:function assign(target,varArgs){if(target == null){ // TypeError if undefined or null\n\tthrow new TypeError('Cannot convert undefined or null to object');}var to=Object(target);for(var index=1;index < arguments.length;index++) {var nextSource=arguments[index];if(nextSource != null){ // Skip over if undefined or null\n\tfor(var nextKey in nextSource) { // Avoid bugs when hasOwnProperty is shadowed\n\tif(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey] = nextSource[nextKey];}}}}return to;},writable:true,configurable:true});} // https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n\tif(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,'findIndex',{value:function value(predicate){ // 1. Let O be ? ToObject(this value).\n\tif(this == null){throw new TypeError('\"this\" is null or not defined');}var o=Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\tvar len=o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\tif(typeof predicate !== 'function'){throw new TypeError('predicate must be a function');} // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\tvar thisArg=arguments[1]; // 5. Let k be 0.\n\tvar k=0; // 6. Repeat, while k < len\n\twhile(k < len) { // a. Let Pk be ! ToString(k).\n\t// b. Let kValue be ? Get(O, Pk).\n\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\t// d. If testResult is true, return k.\n\tvar kValue=o[k];if(predicate.call(thisArg,kValue,k,o)){return k;} // e. Increase k by 1.\n\tk++;} // 7. Return -1.\n\treturn -1;},configurable:true,writable:true});} /* istanbul ignore file */ // https://github.com/mathiasbynens/small\n\tvar mp4='data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=';var Media={mp4:mp4}; /* Zepto v1.2.0 - zepto ajax callbacks deferred event ie selector - zeptojs.com/license */var Zepto=(function(){var undefined$1,key,$,classList,emptyArray=[],_concat=emptyArray.concat,_filter=emptyArray.filter,_slice=emptyArray.slice,document=window.document,elementDisplay={},classCache={},cssNumber={'column-count':1,'columns':1,'font-weight':1,'line-height':1,'opacity':1,'z-index':1,'zoom':1},fragmentRE=/^\\s*<(\\w+|!)[^>]*>/,singleTagRE=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,tagExpanderRE=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,rootNodeRE=/^(?:body|html)$/i,capitalRE=/([A-Z])/g, // special attributes that should be get/set via method calls\n\tmethodAttributes=['val','css','html','text','data','width','height','offset'],adjacencyOperators=['after','prepend','before','append'],table=document.createElement('table'),tableRow=document.createElement('tr'),containers={'tr':document.createElement('tbody'),'tbody':table,'thead':table,'tfoot':table,'td':tableRow,'th':tableRow,'*':document.createElement('div')},readyRE=/complete|loaded|interactive/,simpleSelectorRE=/^[\\w-]*$/,class2type={},toString=class2type.toString,zepto={},camelize,uniq,tempParent=document.createElement('div'),propMap={'tabindex':'tabIndex','readonly':'readOnly','for':'htmlFor','class':'className','maxlength':'maxLength','cellspacing':'cellSpacing','cellpadding':'cellPadding','rowspan':'rowSpan','colspan':'colSpan','usemap':'useMap','frameborder':'frameBorder','contenteditable':'contentEditable'},isArray=Array.isArray || function(object){return object instanceof Array;};zepto.matches = function(element,selector){if(!selector || !element || element.nodeType !== 1)return false;var matchesSelector=element.matches || element.webkitMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.matchesSelector;if(matchesSelector)return matchesSelector.call(element,selector); // fall back to performing a selector:\n\tvar match,parent=element.parentNode,temp=!parent;if(temp)(parent = tempParent).appendChild(element);match = ~zepto.qsa(parent,selector).indexOf(element);temp && tempParent.removeChild(element);return match;};function type(obj){return obj == null?String(obj):class2type[toString.call(obj)] || \"object\";}function isFunction(value){return type(value) == \"function\";}function isWindow(obj){return obj != null && obj == obj.window;}function isDocument(obj){return obj != null && obj.nodeType == obj.DOCUMENT_NODE;}function isObject(obj){return type(obj) == \"object\";}function isPlainObject(obj){return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype;}function likeArray(obj){var length=!!obj && 'length' in obj && obj.length,type=$.type(obj);return 'function' != type && !isWindow(obj) && ('array' == type || length === 0 || typeof length == 'number' && length > 0 && length - 1 in obj);}function compact(array){return _filter.call(array,function(item){return item != null;});}function flatten(array){return array.length > 0?$.fn.concat.apply([],array):array;}camelize = function(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():'';});};function dasherize(str){return str.replace(/::/g,'/').replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\\d])([A-Z])/g,'$1_$2').replace(/_/g,'-').toLowerCase();}uniq = function(array){return _filter.call(array,function(item,idx){return array.indexOf(item) == idx;});};function classRE(name){return name in classCache?classCache[name]:classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)');}function maybeAddPx(name,value){return typeof value == \"number\" && !cssNumber[dasherize(name)]?value + \"px\":value;}function defaultDisplay(nodeName){var element,display;if(!elementDisplay[nodeName]){element = document.createElement(nodeName);document.body.appendChild(element);display = getComputedStyle(element,'').getPropertyValue(\"display\");element.parentNode.removeChild(element);display == \"none\" && (display = \"block\");elementDisplay[nodeName] = display;}return elementDisplay[nodeName];}function _children(element){return 'children' in element?_slice.call(element.children):$.map(element.childNodes,function(node){if(node.nodeType == 1)return node;});}function Z(dom,selector){var i,len=dom?dom.length:0;for(i = 0;i < len;i++) this[i] = dom[i];this.length = len;this.selector = selector || '';} // `$.zepto.fragment` takes a html string and an optional tag name\n\t// to generate DOM nodes from the given html string.\n\t// The generated DOM nodes are returned as an array.\n\t// This function can be overridden in plugins for example to make\n\t// it compatible with browsers that don't support the DOM fully.\n\tzepto.fragment = function(html,name,properties){var dom,nodes,container; // A special case optimization for a single tag\n\tif(singleTagRE.test(html))dom = $(document.createElement(RegExp.$1));if(!dom){if(html.replace)html = html.replace(tagExpanderRE,\"<$1></$2>\");if(name === undefined$1)name = fragmentRE.test(html) && RegExp.$1;if(!(name in containers))name = '*';container = containers[name];container.innerHTML = '' + html;dom = $.each(_slice.call(container.childNodes),function(){container.removeChild(this);});}if(isPlainObject(properties)){nodes = $(dom);$.each(properties,function(key,value){if(methodAttributes.indexOf(key) > -1)nodes[key](value);else nodes.attr(key,value);});}return dom;}; // `$.zepto.Z` swaps out the prototype of the given `dom` array\n\t// of nodes with `$.fn` and thus supplying all the Zepto functions\n\t// to the array. This method can be overridden in plugins.\n\tzepto.Z = function(dom,selector){return new Z(dom,selector);}; // `$.zepto.isZ` should return `true` if the given object is a Zepto\n\t// collection. This method can be overridden in plugins.\n\tzepto.isZ = function(object){return object instanceof zepto.Z;}; // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\n\t// takes a CSS selector and an optional context (and handles various\n\t// special cases).\n\t// This method can be overridden in plugins.\n\tzepto.init = function(selector,context){var dom; // If nothing given, return an empty Zepto collection\n\tif(!selector)return zepto.Z(); // Optimize for string selectors\n\telse if(typeof selector == 'string'){selector = selector.trim(); // If it's a html fragment, create nodes from it\n\t// Note: In both Chrome 21 and Firefox 15, DOM error 12\n\t// is thrown if the fragment doesn't begin with <\n\tif(selector[0] == '<' && fragmentRE.test(selector))dom = zepto.fragment(selector,RegExp.$1,context),selector = null; // If there's a context, create a collection on that context first, and select\n\t// nodes from there\n\telse if(context !== undefined$1)return $(context).find(selector); // If it's a CSS selector, use it to select nodes.\n\telse dom = zepto.qsa(document,selector);} // If a function is given, call it when the DOM is ready\n\telse if(isFunction(selector))return $(document).ready(selector); // If a Zepto collection is given, just return it\n\telse if(zepto.isZ(selector))return selector;else { // normalize array if an array of nodes is given\n\tif(isArray(selector))dom = compact(selector); // Wrap DOM nodes.\n\telse if(isObject(selector))dom = [selector],selector = null; // If it's a html fragment, create nodes from it\n\telse if(fragmentRE.test(selector))dom = zepto.fragment(selector.trim(),RegExp.$1,context),selector = null; // If there's a context, create a collection on that context first, and select\n\t// nodes from there\n\telse if(context !== undefined$1)return $(context).find(selector); // And last but no least, if it's a CSS selector, use it to select nodes.\n\telse dom = zepto.qsa(document,selector);} // create a new Zepto collection from the nodes found\n\treturn zepto.Z(dom,selector);}; // `$` will be the base `Zepto` object. When calling this\n\t// function just call `$.zepto.init, which makes the implementation\n\t// details of selecting nodes and creating Zepto collections\n\t// patchable in plugins.\n\t$ = function(selector,context){return zepto.init(selector,context);};function extend(target,source,deep){for(key in source) if(deep && (isPlainObject(source[key]) || isArray(source[key]))){if(isPlainObject(source[key]) && !isPlainObject(target[key]))target[key] = {};if(isArray(source[key]) && !isArray(target[key]))target[key] = [];extend(target[key],source[key],deep);}else if(source[key] !== undefined$1)target[key] = source[key];} // Copy all but undefined properties from one or more\n\t// objects to the `target` object.\n\t$.extend = function(target){var deep,args=_slice.call(arguments,1);if(typeof target == 'boolean'){deep = target;target = args.shift();}args.forEach(function(arg){extend(target,arg,deep);});return target;}; // `$.zepto.qsa` is Zepto's CSS selector implementation which\n\t// uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\n\t// This method can be overridden in plugins.\n\tzepto.qsa = function(element,selector){var found,maybeID=selector[0] == '#',maybeClass=!maybeID && selector[0] == '.',nameOnly=maybeID || maybeClass?selector.slice(1):selector, // Ensure that a 1 char tag name still gets checked\n\tisSimple=simpleSelectorRE.test(nameOnly);return element.getElementById && isSimple && maybeID? // Safari DocumentFragment doesn't have getElementById\n\t(found = element.getElementById(nameOnly))?[found]:[]:element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11?[]:_slice.call(isSimple && !maybeID && element.getElementsByClassName? // DocumentFragment doesn't have getElementsByClassName/TagName\n\tmaybeClass?element.getElementsByClassName(nameOnly): // If it's simple, it could be a class\n\telement.getElementsByTagName(selector): // Or a tag\n\telement.querySelectorAll(selector) // Or it's not simple, and we need to query all\n\t);};function filtered(nodes,selector){return selector == null?$(nodes):$(nodes).filter(selector);}$.contains = document.documentElement.contains?function(parent,node){return parent !== node && parent.contains(node);}:function(parent,node){while(node && (node = node.parentNode)) if(node === parent)return true;return false;};function funcArg(context,arg,idx,payload){return isFunction(arg)?arg.call(context,idx,payload):arg;}function setAttribute(node,name,value){value == null?node.removeAttribute(name):node.setAttribute(name,value);} // access className property while respecting SVGAnimatedString\n\tfunction className(node,value){var klass=node.className || '',svg=klass && klass.baseVal !== undefined$1;if(value === undefined$1)return svg?klass.baseVal:klass;svg?klass.baseVal = value:node.className = value;} // \"true\"  => true\n\t// \"false\" => false\n\t// \"null\"  => null\n\t// \"42\"    => 42\n\t// \"42.5\"  => 42.5\n\t// \"08\"    => \"08\"\n\t// JSON    => parse if valid\n\t// String  => self\n\tfunction deserializeValue(value){try{return value?value == \"true\" || (value == \"false\"?false:value == \"null\"?null:+value + \"\" == value?+value:/^[\\[\\{]/.test(value)?$.parseJSON(value):value):value;}catch(e) {return value;}}$.type = type;$.isFunction = isFunction;$.isWindow = isWindow;$.isArray = isArray;$.isPlainObject = isPlainObject;$.isEmptyObject = function(obj){var name;for(name in obj) return false;return true;};$.isNumeric = function(val){var num=Number(val),type=typeof val;return val != null && type != 'boolean' && (type != 'string' || val.length) && !isNaN(num) && isFinite(num) || false;};$.inArray = function(elem,array,i){return emptyArray.indexOf.call(array,elem,i);};$.camelCase = camelize;$.trim = function(str){return str == null?\"\":String.prototype.trim.call(str);}; // plugin compatibility\n\t$.uuid = 0;$.support = {};$.expr = {};$.noop = function(){};$.map = function(elements,callback){var value,values=[],i,key;if(likeArray(elements))for(i = 0;i < elements.length;i++) {value = callback(elements[i],i);if(value != null)values.push(value);}else for(key in elements) {value = callback(elements[key],key);if(value != null)values.push(value);}return flatten(values);};$.each = function(elements,callback){var i,key;if(likeArray(elements)){for(i = 0;i < elements.length;i++) if(callback.call(elements[i],i,elements[i]) === false)return elements;}else {for(key in elements) if(callback.call(elements[key],key,elements[key]) === false)return elements;}return elements;};$.grep = function(elements,callback){return _filter.call(elements,callback);};if(window.JSON)$.parseJSON = JSON.parse; // Populate the class2type map\n\t$.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(i,name){class2type[\"[object \" + name + \"]\"] = name.toLowerCase();}); // Define methods that will be available on all\n\t// Zepto collections\n\t$.fn = {constructor:zepto.Z,length:0, // Because a collection acts like an array\n\t// copy over these useful array functions.\n\tforEach:emptyArray.forEach,reduce:emptyArray.reduce,push:emptyArray.push,sort:emptyArray.sort,splice:emptyArray.splice,indexOf:emptyArray.indexOf,concat:function concat(){var i,value,args=[];for(i = 0;i < arguments.length;i++) {value = arguments[i];args[i] = zepto.isZ(value)?value.toArray():value;}return _concat.apply(zepto.isZ(this)?this.toArray():this,args);}, // `map` and `slice` in the jQuery API work differently\n\t// from their array counterparts\n\tmap:function map(fn){return $($.map(this,function(el,i){return fn.call(el,i,el);}));},slice:function slice(){return $(_slice.apply(this,arguments));},ready:function ready(callback){ // need to check if document.body exists for IE as that browser reports\n\t// document ready when it hasn't yet created the body element\n\tif(readyRE.test(document.readyState) && document.body)callback($);else document.addEventListener('DOMContentLoaded',function(){callback($);},false);return this;},get:function get(idx){return idx === undefined$1?_slice.call(this):this[idx >= 0?idx:idx + this.length];},toArray:function toArray(){return this.get();},size:function size(){return this.length;},remove:function remove(){return this.each(function(){if(this.parentNode != null)this.parentNode.removeChild(this);});},each:function each(callback){emptyArray.every.call(this,function(el,idx){return callback.call(el,idx,el) !== false;});return this;},filter:function filter(selector){if(isFunction(selector))return this.not(this.not(selector));return $(_filter.call(this,function(element){return zepto.matches(element,selector);}));},add:function add(selector,context){return $(uniq(this.concat($(selector,context))));},is:function is(selector){return this.length > 0 && zepto.matches(this[0],selector);},not:function not(selector){var nodes=[];if(isFunction(selector) && selector.call !== undefined$1)this.each(function(idx){if(!selector.call(this,idx))nodes.push(this);});else {var excludes=typeof selector == 'string'?this.filter(selector):likeArray(selector) && isFunction(selector.item)?_slice.call(selector):$(selector);this.forEach(function(el){if(excludes.indexOf(el) < 0)nodes.push(el);});}return $(nodes);},has:function has(selector){return this.filter(function(){return isObject(selector)?$.contains(this,selector):$(this).find(selector).size();});},eq:function eq(idx){return idx === -1?this.slice(idx):this.slice(idx,+idx + 1);},first:function first(){var el=this[0];return el && !isObject(el)?el:$(el);},last:function last(){var el=this[this.length - 1];return el && !isObject(el)?el:$(el);},find:function find(selector){var result,$this=this;if(!selector)result = $();else if(typeof selector == 'object')result = $(selector).filter(function(){var node=this;return emptyArray.some.call($this,function(parent){return $.contains(parent,node);});});else if(this.length == 1)result = $(zepto.qsa(this[0],selector));else result = this.map(function(){return zepto.qsa(this,selector);});return result;},closest:function closest(selector,context){var nodes=[],collection=typeof selector == 'object' && $(selector);this.each(function(_,node){while(node && !(collection?collection.indexOf(node) >= 0:zepto.matches(node,selector))) node = node !== context && !isDocument(node) && node.parentNode;if(node && nodes.indexOf(node) < 0)nodes.push(node);});return $(nodes);},parents:function parents(selector){var ancestors=[],nodes=this;while(nodes.length > 0) nodes = $.map(nodes,function(node){if((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0){ancestors.push(node);return node;}});return filtered(ancestors,selector);},parent:function parent(selector){return filtered(uniq(this.pluck('parentNode')),selector);},children:function children(selector){return filtered(this.map(function(){return _children(this);}),selector);},contents:function contents(){return this.map(function(){return this.contentDocument || _slice.call(this.childNodes);});},siblings:function siblings(selector){return filtered(this.map(function(i,el){return _filter.call(_children(el.parentNode),function(child){return child !== el;});}),selector);},empty:function empty(){return this.each(function(){this.innerHTML = '';});}, // `pluck` is borrowed from Prototype.js\n\tpluck:function pluck(property){return $.map(this,function(el){return el[property];});},show:function show(){return this.each(function(){this.style.display == \"none\" && (this.style.display = '');if(getComputedStyle(this,'').getPropertyValue(\"display\") == \"none\")this.style.display = defaultDisplay(this.nodeName);});},replaceWith:function replaceWith(newContent){return this.before(newContent).remove();},wrap:function wrap(structure){var func=isFunction(structure);if(this[0] && !func)var dom=$(structure).get(0),clone=dom.parentNode || this.length > 1;return this.each(function(index){$(this).wrapAll(func?structure.call(this,index):clone?dom.cloneNode(true):dom);});},wrapAll:function wrapAll(structure){if(this[0]){$(this[0]).before(structure = $(structure));var children; // drill down to the inmost element\n\twhile((children = structure.children()).length) structure = children.first();$(structure).append(this);}return this;},wrapInner:function wrapInner(structure){var func=isFunction(structure);return this.each(function(index){var self=$(this),contents=self.contents(),dom=func?structure.call(this,index):structure;contents.length?contents.wrapAll(dom):self.append(dom);});},unwrap:function unwrap(){this.parent().each(function(){$(this).replaceWith($(this).children());});return this;},clone:function clone(){return this.map(function(){return this.cloneNode(true);});},hide:function hide(){return this.css(\"display\",\"none\");},toggle:function toggle(setting){return this.each(function(){var el=$(this);(setting === undefined$1?el.css(\"display\") == \"none\":setting)?el.show():el.hide();});},prev:function prev(selector){return $(this.pluck('previousElementSibling')).filter(selector || '*');},next:function next(selector){return $(this.pluck('nextElementSibling')).filter(selector || '*');},html:function html(_html){return 0 in arguments?this.each(function(idx){var originHtml=this.innerHTML;$(this).empty().append(funcArg(this,_html,idx,originHtml));}):0 in this?this[0].innerHTML:null;},text:function text(_text){return 0 in arguments?this.each(function(idx){var newText=funcArg(this,_text,idx,this.textContent);this.textContent = newText == null?'':'' + newText;}):0 in this?this.pluck('textContent').join(\"\"):null;},attr:function attr(name,value){var result;return typeof name == 'string' && !(1 in arguments)?0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null?result:undefined$1:this.each(function(idx){if(this.nodeType !== 1)return;if(isObject(name))for(key in name) setAttribute(this,key,name[key]);else setAttribute(this,name,funcArg(this,value,idx,this.getAttribute(name)));});},removeAttr:function removeAttr(name){return this.each(function(){this.nodeType === 1 && name.split(' ').forEach(function(attribute){setAttribute(this,attribute);},this);});},prop:function prop(name,value){name = propMap[name] || name;return 1 in arguments?this.each(function(idx){this[name] = funcArg(this,value,idx,this[name]);}):this[0] && this[0][name];},removeProp:function removeProp(name){name = propMap[name] || name;return this.each(function(){delete this[name];});},data:function data(name,value){var attrName='data-' + name.replace(capitalRE,'-$1').toLowerCase();var data=1 in arguments?this.attr(attrName,value):this.attr(attrName);return data !== null?deserializeValue(data):undefined$1;},val:function val(value){if(0 in arguments){if(value == null)value = \"\";return this.each(function(idx){this.value = funcArg(this,value,idx,this.value);});}else {return this[0] && (this[0].multiple?$(this[0]).find('option').filter(function(){return this.selected;}).pluck('value'):this[0].value);}},offset:function offset(coordinates){if(coordinates)return this.each(function(index){var $this=$(this),coords=funcArg(this,coordinates,index,$this.offset()),parentOffset=$this.offsetParent().offset(),props={top:coords.top - parentOffset.top,left:coords.left - parentOffset.left};if($this.css('position') == 'static')props['position'] = 'relative';$this.css(props);});if(!this.length)return null;if(document.documentElement !== this[0] && !$.contains(document.documentElement,this[0]))return {top:0,left:0};var obj=this[0].getBoundingClientRect();return {left:obj.left + window.pageXOffset,top:obj.top + window.pageYOffset,width:Math.round(obj.width),height:Math.round(obj.height)};},css:function css(property,value){if(arguments.length < 2){var element=this[0];if(typeof property == 'string'){if(!element)return;return element.style[camelize(property)] || getComputedStyle(element,'').getPropertyValue(property);}else if(isArray(property)){if(!element)return;var props={};var computedStyle=getComputedStyle(element,'');$.each(property,function(_,prop){props[prop] = element.style[camelize(prop)] || computedStyle.getPropertyValue(prop);});return props;}}var css='';if(type(property) == 'string'){if(!value && value !== 0)this.each(function(){this.style.removeProperty(dasherize(property));});else css = dasherize(property) + \":\" + maybeAddPx(property,value);}else {for(key in property) if(!property[key] && property[key] !== 0)this.each(function(){this.style.removeProperty(dasherize(key));});else css += dasherize(key) + ':' + maybeAddPx(key,property[key]) + ';';}return this.each(function(){this.style.cssText += ';' + css;});},index:function index(element){return element?this.indexOf($(element)[0]):this.parent().children().indexOf(this[0]);},hasClass:function hasClass(name){if(!name)return false;return emptyArray.some.call(this,function(el){return this.test(className(el));},classRE(name));},addClass:function addClass(name){if(!name)return this;return this.each(function(idx){if(!('className' in this))return;classList = [];var cls=className(this),newName=funcArg(this,name,idx,cls);newName.split(/\\s+/g).forEach(function(klass){if(!$(this).hasClass(klass))classList.push(klass);},this);classList.length && className(this,cls + (cls?\" \":\"\") + classList.join(\" \"));});},removeClass:function removeClass(name){return this.each(function(idx){if(!('className' in this))return;if(name === undefined$1)return className(this,'');classList = className(this);funcArg(this,name,idx,classList).split(/\\s+/g).forEach(function(klass){classList = classList.replace(classRE(klass),\" \");});className(this,classList.trim());});},toggleClass:function toggleClass(name,when){if(!name)return this;return this.each(function(idx){var $this=$(this),names=funcArg(this,name,idx,className(this));names.split(/\\s+/g).forEach(function(klass){(when === undefined$1?!$this.hasClass(klass):when)?$this.addClass(klass):$this.removeClass(klass);});});},scrollTop:function scrollTop(value){if(!this.length)return;var hasScrollTop=('scrollTop' in this[0]);if(value === undefined$1)return hasScrollTop?this[0].scrollTop:this[0].pageYOffset;return this.each(hasScrollTop?function(){this.scrollTop = value;}:function(){this.scrollTo(this.scrollX,value);});},scrollLeft:function scrollLeft(value){if(!this.length)return;var hasScrollLeft=('scrollLeft' in this[0]);if(value === undefined$1)return hasScrollLeft?this[0].scrollLeft:this[0].pageXOffset;return this.each(hasScrollLeft?function(){this.scrollLeft = value;}:function(){this.scrollTo(value,this.scrollY);});},position:function position(){if(!this.length)return;var elem=this[0], // Get *real* offsetParent\n\toffsetParent=this.offsetParent(), // Get correct offsets\n\toffset=this.offset(),parentOffset=rootNodeRE.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset(); // Subtract element margins\n\t// note: when an element has margin: auto the offsetLeft and marginLeft\n\t// are the same in Safari causing offset.left to incorrectly be 0\n\toffset.top -= parseFloat($(elem).css('margin-top')) || 0;offset.left -= parseFloat($(elem).css('margin-left')) || 0; // Add offsetParent borders\n\tparentOffset.top += parseFloat($(offsetParent[0]).css('border-top-width')) || 0;parentOffset.left += parseFloat($(offsetParent[0]).css('border-left-width')) || 0; // Subtract the two offsets\n\treturn {top:offset.top - parentOffset.top,left:offset.left - parentOffset.left};},offsetParent:function offsetParent(){return this.map(function(){var parent=this.offsetParent || document.body;while(parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\") parent = parent.offsetParent;return parent;});}}; // for now\n\t$.fn.detach = $.fn.remove; // Generate the `width` and `height` functions\n\t['width','height'].forEach(function(dimension){var dimensionProperty=dimension.replace(/./,function(m){return m[0].toUpperCase();});$.fn[dimension] = function(value){var offset,el=this[0];if(value === undefined$1)return isWindow(el)?el['inner' + dimensionProperty]:isDocument(el)?el.documentElement['scroll' + dimensionProperty]:(offset = this.offset()) && offset[dimension];else return this.each(function(idx){el = $(this);el.css(dimension,funcArg(this,value,idx,el[dimension]()));});};});function traverseNode(node,fun){fun(node);for(var i=0,len=node.childNodes.length;i < len;i++) traverseNode(node.childNodes[i],fun);} // Generate the `after`, `prepend`, `before`, `append`,\n\t// `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n\tadjacencyOperators.forEach(function(operator,operatorIndex){var inside=operatorIndex % 2; //=> prepend, append\n\t$.fn[operator] = function(){ // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n\tvar argType,nodes=$.map(arguments,function(arg){var arr=[];argType = type(arg);if(argType == \"array\"){arg.forEach(function(el){if(el.nodeType !== undefined$1)return arr.push(el);else if($.zepto.isZ(el))return arr = arr.concat(el.get());arr = arr.concat(zepto.fragment(el));});return arr;}return argType == \"object\" || arg == null?arg:zepto.fragment(arg);}),parent,copyByClone=this.length > 1;if(nodes.length < 1)return this;return this.each(function(_,target){parent = inside?target:target.parentNode; // convert all methods to a \"before\" operation\n\ttarget = operatorIndex == 0?target.nextSibling:operatorIndex == 1?target.firstChild:operatorIndex == 2?target:null;var parentInDocument=$.contains(document.documentElement,parent);nodes.forEach(function(node){if(copyByClone)node = node.cloneNode(true);else if(!parent)return $(node).remove();parent.insertBefore(node,target);if(parentInDocument)traverseNode(node,function(el){if(el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' && (!el.type || el.type === 'text/javascript') && !el.src){var target=el.ownerDocument?el.ownerDocument.defaultView:window;target['eval'].call(target,el.innerHTML);}});});});}; // after    => insertAfter\n\t// prepend  => prependTo\n\t// before   => insertBefore\n\t// append   => appendTo\n\t$.fn[inside?operator + 'To':'insert' + (operatorIndex?'Before':'After')] = function(html){$(html)[operator](this);return this;};});zepto.Z.prototype = Z.prototype = $.fn; // Export internal API functions in the `$.zepto` namespace\n\tzepto.uniq = uniq;zepto.deserializeValue = deserializeValue;$.zepto = zepto;return $;})();window.Zepto = Zepto;window.$ === undefined && (window.$ = Zepto);(function($){var jsonpID=+new Date(),document=window.document,key,name,rscript=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,scriptTypeRE=/^(?:text|application)\\/javascript/i,xmlTypeRE=/^(?:text|application)\\/xml/i,jsonType='application/json',htmlType='text/html',blankRE=/^\\s*$/,originAnchor=document.createElement('a');originAnchor.href = window.location.href; // trigger a custom event and return false if it was cancelled\n\tfunction triggerAndReturn(context,eventName,data){var event=$.Event(eventName);$(context).trigger(event,data);return !event.isDefaultPrevented();} // trigger an Ajax \"global\" event\n\tfunction triggerGlobal(settings,context,eventName,data){if(settings.global)return triggerAndReturn(context || document,eventName,data);} // Number of active Ajax requests\n\t$.active = 0;function ajaxStart(settings){if(settings.global && $.active++ === 0)triggerGlobal(settings,null,'ajaxStart');}function ajaxStop(settings){if(settings.global && ! --$.active)triggerGlobal(settings,null,'ajaxStop');} // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n\tfunction ajaxBeforeSend(xhr,settings){var context=settings.context;if(settings.beforeSend.call(context,xhr,settings) === false || triggerGlobal(settings,context,'ajaxBeforeSend',[xhr,settings]) === false)return false;triggerGlobal(settings,context,'ajaxSend',[xhr,settings]);}function ajaxSuccess(data,xhr,settings,deferred){var context=settings.context,status='success';settings.success.call(context,data,status,xhr);if(deferred)deferred.resolveWith(context,[data,status,xhr]);triggerGlobal(settings,context,'ajaxSuccess',[xhr,settings,data]);ajaxComplete(status,xhr,settings);} // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\tfunction ajaxError(error,type,xhr,settings,deferred){var context=settings.context;settings.error.call(context,xhr,type,error);if(deferred)deferred.rejectWith(context,[xhr,type,error]);triggerGlobal(settings,context,'ajaxError',[xhr,settings,error || type]);ajaxComplete(type,xhr,settings);} // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\tfunction ajaxComplete(status,xhr,settings){var context=settings.context;settings.complete.call(context,xhr,status);triggerGlobal(settings,context,'ajaxComplete',[xhr,settings]);ajaxStop(settings);}function ajaxDataFilter(data,type,settings){if(settings.dataFilter == empty)return data;var context=settings.context;return settings.dataFilter.call(context,data,type);} // Empty function, used as default callback\n\tfunction empty(){}$.ajaxJSONP = function(options,deferred){if(!('type' in options))return $.ajax(options);var _callbackName=options.jsonpCallback,callbackName=($.isFunction(_callbackName)?_callbackName():_callbackName) || 'Zepto' + jsonpID++,script=document.createElement('script'),originalCallback=window[callbackName],responseData,abort=function abort(errorType){$(script).triggerHandler('error',errorType || 'abort');},xhr={abort:abort},abortTimeout;if(deferred)deferred.promise(xhr);$(script).on('load error',function(e,errorType){clearTimeout(abortTimeout);$(script).off().remove();if(e.type == 'error' || !responseData){ajaxError(null,errorType || 'error',xhr,options,deferred);}else {ajaxSuccess(responseData[0],xhr,options,deferred);}window[callbackName] = originalCallback;if(responseData && $.isFunction(originalCallback))originalCallback(responseData[0]);originalCallback = responseData = undefined;});if(ajaxBeforeSend(xhr,options) === false){abort('abort');return xhr;}window[callbackName] = function(){responseData = arguments;};script.src = options.url.replace(/\\?(.+)=\\?/,'?$1=' + callbackName);document.head.appendChild(script);if(options.timeout > 0)abortTimeout = setTimeout(function(){abort('timeout');},options.timeout);return xhr;};$.ajaxSettings = { // Default type of request\n\ttype:'GET', // Callback that is executed before request\n\tbeforeSend:empty, // Callback that is executed if the request succeeds\n\tsuccess:empty, // Callback that is executed the the server drops error\n\terror:empty, // Callback that is executed on request complete (both: error and success)\n\tcomplete:empty, // The context for the callbacks\n\tcontext:null, // Whether to trigger \"global\" Ajax events\n\tglobal:true, // Transport\n\txhr:function xhr(){return new window.XMLHttpRequest();}, // MIME types mapping\n\t// IIS returns Javascript as \"application/x-javascript\"\n\taccepts:{script:'text/javascript, application/javascript, application/x-javascript',json:jsonType,xml:'application/xml, text/xml',html:htmlType,text:'text/plain'}, // Whether the request is to another domain\n\tcrossDomain:false, // Default timeout\n\ttimeout:0, // Whether data should be serialized to string\n\tprocessData:true, // Whether the browser should be allowed to cache GET responses\n\tcache:true, //Used to handle the raw response data of XMLHttpRequest.\n\t//This is a pre-filtering function to sanitize the response.\n\t//The sanitized response should be returned\n\tdataFilter:empty};function mimeToDataType(mime){if(mime)mime = mime.split(';',2)[0];return mime && (mime == htmlType?'html':mime == jsonType?'json':scriptTypeRE.test(mime)?'script':xmlTypeRE.test(mime) && 'xml') || 'text';}function appendQuery(url,query){if(query == '')return url;return (url + '&' + query).replace(/[&?]{1,2}/,'?');} // serialize payload and append it to the URL for GET requests\n\tfunction serializeData(options){if(options.processData && options.data && $.type(options.data) != \"string\")options.data = $.param(options.data,options.traditional);if(options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType))options.url = appendQuery(options.url,options.data),options.data = undefined;}$.ajax = function(options){var settings=$.extend({},options || {}),deferred=$.Deferred && $.Deferred(),urlAnchor,hashIndex;for(key in $.ajaxSettings) if(settings[key] === undefined)settings[key] = $.ajaxSettings[key];ajaxStart(settings);if(!settings.crossDomain){urlAnchor = document.createElement('a');urlAnchor.href = settings.url; // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049\n\turlAnchor.href = urlAnchor.href;settings.crossDomain = originAnchor.protocol + '//' + originAnchor.host !== urlAnchor.protocol + '//' + urlAnchor.host;}if(!settings.url)settings.url = window.location.toString();if((hashIndex = settings.url.indexOf('#')) > -1)settings.url = settings.url.slice(0,hashIndex);serializeData(settings);var dataType=settings.dataType,hasPlaceholder=/\\?.+=\\?/.test(settings.url);if(hasPlaceholder)dataType = 'jsonp';if(settings.cache === false || (!options || options.cache !== true) && ('script' == dataType || 'jsonp' == dataType))settings.url = appendQuery(settings.url,'_=' + Date.now());if('jsonp' == dataType){if(!hasPlaceholder)settings.url = appendQuery(settings.url,settings.jsonp?settings.jsonp + '=?':settings.jsonp === false?'':'callback=?');return $.ajaxJSONP(settings,deferred);}var mime=settings.accepts[dataType],headers={},setHeader=function setHeader(name,value){headers[name.toLowerCase()] = [name,value];},protocol=/^([\\w-]+:)\\/\\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;if(deferred)deferred.promise(xhr);if(!settings.crossDomain)setHeader('X-Requested-With','XMLHttpRequest');setHeader('Accept',mime || '*/*');if(mime = settings.mimeType || mime){if(mime.indexOf(',') > -1)mime = mime.split(',',2)[0];xhr.overrideMimeType && xhr.overrideMimeType(mime);}if(settings.contentType || settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET')setHeader('Content-Type',settings.contentType || 'application/x-www-form-urlencoded');if(settings.headers)for(name in settings.headers) setHeader(name,settings.headers[name]);xhr.setRequestHeader = setHeader;xhr.onreadystatechange = function(){if(xhr.readyState == 4){xhr.onreadystatechange = empty;clearTimeout(abortTimeout);var result,error=false;if(xhr.status >= 200 && xhr.status < 300 || xhr.status == 304 || xhr.status == 0 && protocol == 'file:'){dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));if(xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob')result = xhr.response;else {result = xhr.responseText;try{ // http://perfectionkills.com/global-eval-what-are-the-options/\n\t// sanitize response accordingly if data filter callback provided\n\tresult = ajaxDataFilter(result,dataType,settings);if(dataType == 'script')(1,eval)(result);else if(dataType == 'xml')result = xhr.responseXML;else if(dataType == 'json')result = blankRE.test(result)?null:$.parseJSON(result);}catch(e) {error = e;}if(error)return ajaxError(error,'parsererror',xhr,settings,deferred);}ajaxSuccess(result,xhr,settings,deferred);}else {ajaxError(xhr.statusText || null,xhr.status?'error':'abort',xhr,settings,deferred);}}};if(ajaxBeforeSend(xhr,settings) === false){xhr.abort();ajaxError(null,'abort',xhr,settings,deferred);return xhr;}var async='async' in settings?settings.async:true;xhr.open(settings.type,settings.url,async,settings.username,settings.password);if(settings.xhrFields)for(name in settings.xhrFields) xhr[name] = settings.xhrFields[name];for(name in headers) nativeSetHeader.apply(xhr,headers[name]);if(settings.timeout > 0)abortTimeout = setTimeout(function(){xhr.onreadystatechange = empty;xhr.abort();ajaxError(null,'timeout',xhr,settings,deferred);},settings.timeout); // avoid sending empty string (#319)\n\txhr.send(settings.data?settings.data:null);return xhr;}; // handle optional data/success arguments\n\tfunction parseArguments(url,data,success,dataType){if($.isFunction(data))dataType = success,success = data,data = undefined;if(!$.isFunction(success))dataType = success,success = undefined;return {url:url,data:data,success:success,dataType:dataType};}$.get = function() /* url, data, success, dataType */{return $.ajax(parseArguments.apply(null,arguments));};$.post = function() /* url, data, success, dataType */{var options=parseArguments.apply(null,arguments);options.type = 'POST';return $.ajax(options);};$.getJSON = function() /* url, data, success */{var options=parseArguments.apply(null,arguments);options.dataType = 'json';return $.ajax(options);};$.fn.load = function(url,data,success){if(!this.length)return this;var self=this,parts=url.split(/\\s/),selector,options=parseArguments(url,data,success),callback=options.success;if(parts.length > 1)options.url = parts[0],selector = parts[1];options.success = function(response){self.html(selector?$('<div>').html(response.replace(rscript,\"\")).find(selector):response);callback && callback.apply(self,arguments);};$.ajax(options);return this;};var escape=encodeURIComponent;function serialize(params,obj,traditional,scope){var type,array=$.isArray(obj),hash=$.isPlainObject(obj);$.each(obj,function(key,value){type = $.type(value);if(scope)key = traditional?scope:scope + '[' + (hash || type == 'object' || type == 'array'?key:'') + ']'; // handle data in serializeArray() format\n\tif(!scope && array)params.add(value.name,value.value); // recurse into nested objects\n\telse if(type == \"array\" || !traditional && type == \"object\")serialize(params,value,traditional,key);else params.add(key,value);});}$.param = function(obj,traditional){var params=[];params.add = function(key,value){if($.isFunction(value))value = value();if(value == null)value = \"\";this.push(escape(key) + '=' + escape(value));};serialize(params,obj,traditional);return params.join('&').replace(/%20/g,'+');};})(Zepto);(function($){ // Create a collection of callbacks to be fired in a sequence, with configurable behaviour\n\t// Option flags:\n\t//   - once: Callbacks fired at most one time.\n\t//   - memory: Remember the most recent context and arguments\n\t//   - stopOnFalse: Cease iterating over callback list\n\t//   - unique: Permit adding at most one instance of the same callback\n\t$.Callbacks = function(options){options = $.extend({},options);var memory, // Last fire value (for non-forgettable lists)\n\t_fired, // Flag to know if list was already fired\n\tfiring, // Flag to know if list is currently firing\n\tfiringStart, // First callback to fire (used internally by add and fireWith)\n\tfiringLength, // End of the loop when firing\n\tfiringIndex, // Index of currently firing callback (modified by remove if needed)\n\tlist=[], // Actual callback list\n\tstack=!options.once && [], // Stack of fire calls for repeatable lists\n\tfire=function fire(data){memory = options.memory && data;_fired = true;firingIndex = firingStart || 0;firingStart = 0;firingLength = list.length;firing = true;for(;list && firingIndex < firingLength;++firingIndex) {if(list[firingIndex].apply(data[0],data[1]) === false && options.stopOnFalse){memory = false;break;}}firing = false;if(list){if(stack)stack.length && fire(stack.shift());else if(memory)list.length = 0;else Callbacks.disable();}},Callbacks={add:function add(){if(list){var start=list.length,add=function add(args){$.each(args,function(_,arg){if(typeof arg === \"function\"){if(!options.unique || !Callbacks.has(arg))list.push(arg);}else if(arg && arg.length && typeof arg !== 'string')add(arg);});};add(arguments);if(firing)firingLength = list.length;else if(memory){firingStart = start;fire(memory);}}return this;},remove:function remove(){if(list){$.each(arguments,function(_,arg){var index;while((index = $.inArray(arg,list,index)) > -1) {list.splice(index,1); // Handle firing indexes\n\tif(firing){if(index <= firingLength)--firingLength;if(index <= firingIndex)--firingIndex;}}});}return this;},has:function has(fn){return !!(list && (fn?$.inArray(fn,list) > -1:list.length));},empty:function empty(){firingLength = list.length = 0;return this;},disable:function disable(){list = stack = memory = undefined;return this;},disabled:function disabled(){return !list;},lock:function lock(){stack = undefined;if(!memory)Callbacks.disable();return this;},locked:function locked(){return !stack;},fireWith:function fireWith(context,args){if(list && (!_fired || stack)){args = args || [];args = [context,args.slice?args.slice():args];if(firing)stack.push(args);else fire(args);}return this;},fire:function fire(){return Callbacks.fireWith(this,arguments);},fired:function fired(){return !!_fired;}};return Callbacks;};})(Zepto);(function($){var slice=Array.prototype.slice;function Deferred(func){var tuples=[ // action, add listener, listener list, final state\n\t[\"resolve\",\"done\",$.Callbacks({once:1,memory:1}),\"resolved\"],[\"reject\",\"fail\",$.Callbacks({once:1,memory:1}),\"rejected\"],[\"notify\",\"progress\",$.Callbacks({memory:1})]],_state=\"pending\",_promise={state:function state(){return _state;},always:function always(){deferred.done(arguments).fail(arguments);return this;},then:function then() /* fnDone [, fnFailed [, fnProgress]] */{var fns=arguments;return Deferred(function(defer){$.each(tuples,function(i,tuple){var fn=$.isFunction(fns[i]) && fns[i];deferred[tuple[1]](function(){var returned=fn && fn.apply(this,arguments);if(returned && $.isFunction(returned.promise)){returned.promise().done(defer.resolve).fail(defer.reject).progress(defer.notify);}else {var context=this === _promise?defer.promise():this,values=fn?[returned]:arguments;defer[tuple[0] + \"With\"](context,values);}});});fns = null;}).promise();},promise:function promise(obj){return obj != null?$.extend(obj,_promise):_promise;}},deferred={};$.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];_promise[tuple[1]] = list.add;if(stateString){list.add(function(){_state = stateString;},tuples[i ^ 1][2].disable,tuples[2][2].lock);}deferred[tuple[0]] = function(){deferred[tuple[0] + \"With\"](this === deferred?_promise:this,arguments);return this;};deferred[tuple[0] + \"With\"] = list.fireWith;});_promise.promise(deferred);if(func)func.call(deferred,deferred);return deferred;}$.when = function(sub){var resolveValues=slice.call(arguments),len=resolveValues.length,i=0,remain=len !== 1 || sub && $.isFunction(sub.promise)?len:0,deferred=remain === 1?sub:Deferred(),progressValues,progressContexts,resolveContexts,updateFn=function updateFn(i,ctx,val){return function(value){ctx[i] = this;val[i] = arguments.length > 1?slice.call(arguments):value;if(val === progressValues){deferred.notifyWith(ctx,val);}else if(! --remain){deferred.resolveWith(ctx,val);}};};if(len > 1){progressValues = new Array(len);progressContexts = new Array(len);resolveContexts = new Array(len);for(;i < len;++i) {if(resolveValues[i] && $.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFn(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFn(i,progressContexts,progressValues));}else {--remain;}}}if(!remain)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise();};$.Deferred = Deferred;})(Zepto);(function($){var _zid=1,undefined$1,slice=Array.prototype.slice,isFunction=$.isFunction,isString=function isString(obj){return typeof obj == 'string';},handlers={},specialEvents={},focusinSupported=('onfocusin' in window),focus={focus:'focusin',blur:'focusout'},hover={mouseenter:'mouseover',mouseleave:'mouseout'};specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents';function zid(element){return element._zid || (element._zid = _zid++);}function findHandlers(element,event,fn,selector){event = parse(event);if(event.ns)var matcher=matcherFor(event.ns);return (handlers[zid(element)] || []).filter(function(handler){return handler && (!event.e || handler.e == event.e) && (!event.ns || matcher.test(handler.ns)) && (!fn || zid(handler.fn) === zid(fn)) && (!selector || handler.sel == selector);});}function parse(event){var parts=('' + event).split('.');return {e:parts[0],ns:parts.slice(1).sort().join(' ')};}function matcherFor(ns){return new RegExp('(?:^| )' + ns.replace(' ',' .* ?') + '(?: |$)');}function eventCapture(handler,captureSetting){return handler.del && !focusinSupported && handler.e in focus || !!captureSetting;}function realEvent(type){return hover[type] || focusinSupported && focus[type] || type;}function add(element,events,fn,data,selector,delegator,capture){var id=zid(element),set=handlers[id] || (handlers[id] = []);events.split(/\\s/).forEach(function(event){if(event == 'ready')return $(document).ready(fn);var handler=parse(event);handler.fn = fn;handler.sel = selector; // emulate mouseenter, mouseleave\n\tif(handler.e in hover)fn = function(e){var related=e.relatedTarget;if(!related || related !== this && !$.contains(this,related))return handler.fn.apply(this,arguments);};handler.del = delegator;var callback=delegator || fn;handler.proxy = function(e){e = compatible(e);if(e.isImmediatePropagationStopped())return;e.data = data;var result=callback.apply(element,e._args == undefined$1?[e]:[e].concat(e._args));if(result === false)e.preventDefault(),e.stopPropagation();return result;};handler.i = set.length;set.push(handler);if('addEventListener' in element)element.addEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture));});}function remove(element,events,fn,selector,capture){var id=zid(element);(events || '').split(/\\s/).forEach(function(event){findHandlers(element,event,fn,selector).forEach(function(handler){delete handlers[id][handler.i];if('removeEventListener' in element)element.removeEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture));});});}$.event = {add:add,remove:remove};$.proxy = function(fn,context){var args=2 in arguments && slice.call(arguments,2);if(isFunction(fn)){var proxyFn=function proxyFn(){return fn.apply(context,args?args.concat(slice.call(arguments)):arguments);};proxyFn._zid = zid(fn);return proxyFn;}else if(isString(context)){if(args){args.unshift(fn[context],fn);return $.proxy.apply(null,args);}else {return $.proxy(fn[context],fn);}}else {throw new TypeError(\"expected function\");}};$.fn.bind = function(event,data,callback){return this.on(event,data,callback);};$.fn.unbind = function(event,callback){return this.off(event,callback);};$.fn.one = function(event,selector,data,callback){return this.on(event,selector,data,callback,1);};var returnTrue=function returnTrue(){return true;},returnFalse=function returnFalse(){return false;},ignoreProperties=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,eventMethods={preventDefault:'isDefaultPrevented',stopImmediatePropagation:'isImmediatePropagationStopped',stopPropagation:'isPropagationStopped'};function compatible(event,source){if(source || !event.isDefaultPrevented){source || (source = event);$.each(eventMethods,function(name,predicate){var sourceMethod=source[name];event[name] = function(){this[predicate] = returnTrue;return sourceMethod && sourceMethod.apply(source,arguments);};event[predicate] = returnFalse;});event.timeStamp || (event.timeStamp = Date.now());if(source.defaultPrevented !== undefined$1?source.defaultPrevented:'returnValue' in source?source.returnValue === false:source.getPreventDefault && source.getPreventDefault())event.isDefaultPrevented = returnTrue;}return event;}function createProxy(event){var key,proxy={originalEvent:event};for(key in event) if(!ignoreProperties.test(key) && event[key] !== undefined$1)proxy[key] = event[key];return compatible(proxy,event);}$.fn.delegate = function(selector,event,callback){return this.on(event,selector,callback);};$.fn.undelegate = function(selector,event,callback){return this.off(event,selector,callback);};$.fn.live = function(event,callback){$(document.body).delegate(this.selector,event,callback);return this;};$.fn.die = function(event,callback){$(document.body).undelegate(this.selector,event,callback);return this;};$.fn.on = function(event,selector,data,callback,one){var autoRemove,delegator,$this=this;if(event && !isString(event)){$.each(event,function(type,fn){$this.on(type,selector,data,fn,one);});return $this;}if(!isString(selector) && !isFunction(callback) && callback !== false)callback = data,data = selector,selector = undefined$1;if(callback === undefined$1 || data === false)callback = data,data = undefined$1;if(callback === false)callback = returnFalse;return $this.each(function(_,element){if(one)autoRemove = function(e){remove(element,e.type,callback);return callback.apply(this,arguments);};if(selector)delegator = function(e){var evt,match=$(e.target).closest(selector,element).get(0);if(match && match !== element){evt = $.extend(createProxy(e),{currentTarget:match,liveFired:element});return (autoRemove || callback).apply(match,[evt].concat(slice.call(arguments,1)));}};add(element,event,callback,data,selector,delegator || autoRemove);});};$.fn.off = function(event,selector,callback){var $this=this;if(event && !isString(event)){$.each(event,function(type,fn){$this.off(type,selector,fn);});return $this;}if(!isString(selector) && !isFunction(callback) && callback !== false)callback = selector,selector = undefined$1;if(callback === false)callback = returnFalse;return $this.each(function(){remove(this,event,callback,selector);});};$.fn.trigger = function(event,args){event = isString(event) || $.isPlainObject(event)?$.Event(event):compatible(event);event._args = args;return this.each(function(){ // handle focus(), blur() by calling them directly\n\tif(event.type in focus && typeof this[event.type] == \"function\")this[event.type](); // items in the collection might not be DOM elements\n\telse if('dispatchEvent' in this)this.dispatchEvent(event);else $(this).triggerHandler(event,args);});}; // triggers event handlers on current element just as if an event occurred,\n\t// doesn't trigger an actual event, doesn't bubble\n\t$.fn.triggerHandler = function(event,args){var e,result;this.each(function(i,element){e = createProxy(isString(event)?$.Event(event):event);e._args = args;e.target = element;$.each(findHandlers(element,event.type || event),function(i,handler){result = handler.proxy(e);if(e.isImmediatePropagationStopped())return false;});});return result;}; // shortcut methods for `.bind(event, fn)` for each event type\n\t('focusin focusout focus blur load resize scroll unload click dblclick ' + 'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' + 'change select keydown keypress keyup error').split(' ').forEach(function(event){$.fn[event] = function(callback){return 0 in arguments?this.bind(event,callback):this.trigger(event);};});$.Event = function(type,props){if(!isString(type))props = type,type = props.type;var event=document.createEvent(specialEvents[type] || 'Events'),bubbles=true;if(props)for(var name in props) name == 'bubbles'?bubbles = !!props[name]:event[name] = props[name];event.initEvent(type,bubbles,true);return compatible(event);};})(Zepto);(function(){ // getComputedStyle shouldn't freak out when called\n\t// without a valid element as argument\n\ttry{getComputedStyle(undefined);}catch(e) {var nativeGetComputedStyle=getComputedStyle;window.getComputedStyle = function(element,pseudoElement){try{return nativeGetComputedStyle(element,pseudoElement);}catch(e) {return null;}};}})();(function($){var zepto=$.zepto,oldQsa=zepto.qsa,oldMatches=zepto.matches;function _visible(elem){elem = $(elem);return !!(elem.width() || elem.height()) && elem.css(\"display\") !== \"none\";} // Implements a subset from:\n\t// http://api.jquery.com/category/selectors/jquery-selector-extensions/\n\t//\n\t// Each filter function receives the current index, all nodes in the\n\t// considered set, and a value if there were parentheses. The value\n\t// of `this` is the node currently being considered. The function returns the\n\t// resulting node(s), null, or undefined.\n\t//\n\t// Complex selectors are not supported:\n\t//   li:has(label:contains(\"foo\")) + li:has(label:contains(\"bar\"))\n\t//   ul.inner:first > li\n\tvar filters=$.expr[':'] = {visible:function visible(){if(_visible(this))return this;},hidden:function hidden(){if(!_visible(this))return this;},selected:function selected(){if(this.selected)return this;},checked:function checked(){if(this.checked)return this;},parent:function parent(){return this.parentNode;},first:function first(idx){if(idx === 0)return this;},last:function last(idx,nodes){if(idx === nodes.length - 1)return this;},eq:function eq(idx,_,value){if(idx === value)return this;},contains:function contains(idx,_,text){if($(this).text().indexOf(text) > -1)return this;},has:function has(idx,_,sel){if(zepto.qsa(this,sel).length)return this;}};var filterRe=new RegExp('(.*):(\\\\w+)(?:\\\\(([^)]+)\\\\))?$\\\\s*'),childRe=/^\\s*>/,classTag='Zepto' + +new Date();function process(sel,fn){ // quote the hash in `a[href^=#]` expression\n\tsel = sel.replace(/=#\\]/g,'=\"#\"]');var filter,arg,match=filterRe.exec(sel);if(match && match[2] in filters){filter = filters[match[2]],arg = match[3];sel = match[1];if(arg){var num=Number(arg);if(isNaN(num))arg = arg.replace(/^[\"']|[\"']$/g,'');else arg = num;}}return fn(sel,filter,arg);}zepto.qsa = function(node,selector){return process(selector,function(sel,filter,arg){try{var taggedParent;if(!sel && filter)sel = '*';else if(childRe.test(sel)) // support \"> *\" child queries by tagging the parent node with a\n\t// unique class and prepending that classname onto the selector\n\ttaggedParent = $(node).addClass(classTag),sel = '.' + classTag + ' ' + sel;var nodes=oldQsa(node,sel);}catch(e) {console.error('error performing selector: %o',selector);throw e;}finally {if(taggedParent)taggedParent.removeClass(classTag);}return !filter?nodes:zepto.uniq($.map(nodes,function(n,i){return filter.call(n,i,nodes,arg);}));});};zepto.matches = function(node,selector){return process(selector,function(sel,filter,arg){return (!sel || oldMatches(node,sel)) && (!filter || filter.call(node,null,arg) === node);});};})(Zepto);var zepto=Zepto; /* eslint-disable no-useless-escape */ // The order of the following arrays is important, be careful if you change it.\n\tvar BROWSER_DATA=[{name:'Chromium',group:'Chrome',identifier:'Chromium/([0-9\\.]*)'},{name:'Chrome Mobile',group:'Chrome',identifier:'Chrome/([0-9\\.]*) Mobile',versionIdentifier:'Chrome/([0-9\\.]*)'},{name:'Chrome',group:'Chrome',identifier:'Chrome/([0-9\\.]*)'},{name:'Chrome for iOS',group:'Chrome',identifier:'CriOS/([0-9\\.]*)'},{name:'Android Browser',group:'Chrome',identifier:'CrMo/([0-9\\.]*)'},{name:'Firefox',group:'Firefox',identifier:'Firefox/([0-9\\.]*)'},{name:'Opera Mini',group:'Opera',identifier:'Opera Mini/([0-9\\.]*)'},{name:'Opera',group:'Opera',identifier:'Opera ([0-9\\.]*)'},{name:'Opera',group:'Opera',identifier:'Opera/([0-9\\.]*)',versionIdentifier:'Version/([0-9\\.]*)'},{name:'IEMobile',group:'Explorer',identifier:'IEMobile/([0-9\\.]*)'},{name:'Internet Explorer',group:'Explorer',identifier:'MSIE ([a-zA-Z0-9\\.]*)'},{name:'Internet Explorer',group:'Explorer',identifier:'Trident/([0-9\\.]*)',versionIdentifier:'rv:([0-9\\.]*)'},{name:'Spartan',group:'Spartan',identifier:'Edge/([0-9\\.]*)',versionIdentifier:'Edge/([0-9\\.]*)'},{name:'Safari',group:'Safari',identifier:'Safari/([0-9\\.]*)',versionIdentifier:'Version/([0-9\\.]*)'}]; /* eslint-disable no-useless-escape */ // The order of the following arrays is important, be careful if you change it.\n\tvar OS_DATA=[{name:'Windows 2000',group:'Windows',identifier:'Windows NT 5.0',version:'5.0'},{name:'Windows XP',group:'Windows',identifier:'Windows NT 5.1',version:'5.1'},{name:'Windows Vista',group:'Windows',identifier:'Windows NT 6.0',version:'6.0'},{name:'Windows 7',group:'Windows',identifier:'Windows NT 6.1',version:'7.0'},{name:'Windows 8',group:'Windows',identifier:'Windows NT 6.2',version:'8.0'},{name:'Windows 8.1',group:'Windows',identifier:'Windows NT 6.3',version:'8.1'},{name:'Windows 10',group:'Windows',identifier:'Windows NT 10.0',version:'10.0'},{name:'Windows Phone',group:'Windows Phone',identifier:'Windows Phone ([0-9\\.]*)'},{name:'Windows Phone',group:'Windows Phone',identifier:'Windows Phone OS ([0-9\\.]*)'},{name:'Windows',group:'Windows',identifier:'Windows'},{name:'Chrome OS',group:'Chrome OS',identifier:'CrOS'},{name:'Android',group:'Android',identifier:'Android',versionIdentifier:'Android ([a-zA-Z0-9\\.-]*)'},{name:'iPad',group:'iOS',identifier:'iPad',versionIdentifier:'OS ([0-9_]*)',versionSeparator:'[_|\\.]'},{name:'iPod',group:'iOS',identifier:'iPod',versionIdentifier:'OS ([0-9_]*)',versionSeparator:'[_|\\.]'},{name:'iPhone',group:'iOS',identifier:'iPhone OS',versionIdentifier:'OS ([0-9_]*)',versionSeparator:'[_|\\.]'},{name:'Mac OS X High Sierra',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])13([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Sierra',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])12([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X El Capitan',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])11([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Yosemite',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])10([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Mavericks',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])9([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Mountain Lion',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])8([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Lion',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])7([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Snow Leopard',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])6([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Leopard',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])5([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Tiger',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])4([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Panther',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])3([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Jaguar',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])2([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Puma',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])1([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Cheetah',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])0([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS',group:'Mac OS',identifier:'Mac OS'},{name:'Ubuntu',group:'Linux',identifier:'Ubuntu',versionIdentifier:'Ubuntu/([0-9\\.]*)'},{name:'Debian',group:'Linux',identifier:'Debian'},{name:'Gentoo',group:'Linux',identifier:'Gentoo'},{name:'Linux',group:'Linux',identifier:'Linux'},{name:'BlackBerry',group:'BlackBerry',identifier:'BlackBerry'}];var Browser={};var hasLocalstorage=function hasLocalstorage(){try{localStorage.setItem('clappr','clappr');localStorage.removeItem('clappr');return true;}catch(e) {return false;}};var hasFlash=function hasFlash(){try{var fo=new ActiveXObject('ShockwaveFlash.ShockwaveFlash');return !!fo;}catch(e) {return !!(navigator.mimeTypes && navigator.mimeTypes['application/x-shockwave-flash'] !== undefined && navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin);}};var getBrowserInfo=function getBrowserInfo(ua){var parts=ua.match(/\\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [],extra;if(/trident/i.test(parts[1])){extra = /\\brv[ :]+(\\d+)/g.exec(ua) || [];return {name:'IE',version:parseInt(extra[1] || '')};}else if(parts[1] === 'Chrome'){extra = ua.match(/\\bOPR\\/(\\d+)/);if(extra != null)return {name:'Opera',version:parseInt(extra[1])};extra = ua.match(/\\bEdge\\/(\\d+)/);if(extra != null)return {name:'Edge',version:parseInt(extra[1])};}else if(/android/i.test(ua) && (extra = ua.match(/version\\/(\\d+)/i))){parts.splice(1,1,'Android WebView');parts.splice(2,1,extra[1]);}parts = parts[2]?[parts[1],parts[2]]:[navigator.appName,navigator.appVersion,'-?'];return {name:parts[0],version:parseInt(parts[1])};}; //  Get browser data\n\tvar getBrowserData=function getBrowserData(){var browserObject={};var userAgent=Browser.userAgent.toLowerCase(); // Check browser type\n\tvar _iterator=_createForOfIteratorHelper(BROWSER_DATA),_step;try{for(_iterator.s();!(_step = _iterator.n()).done;) {var browser=_step.value;var browserRegExp=new RegExp(browser.identifier.toLowerCase());var browserRegExpResult=browserRegExp.exec(userAgent);if(browserRegExpResult != null && browserRegExpResult[1]){browserObject.name = browser.name;browserObject.group = browser.group; // Check version\n\tif(browser.versionIdentifier){var versionRegExp=new RegExp(browser.versionIdentifier.toLowerCase());var versionRegExpResult=versionRegExp.exec(userAgent);if(versionRegExpResult != null && versionRegExpResult[1])setBrowserVersion(versionRegExpResult[1],browserObject);}else {setBrowserVersion(browserRegExpResult[1],browserObject);}break;}}}catch(err) {_iterator.e(err);}finally {_iterator.f();}return browserObject;}; // Set browser version\n\tvar setBrowserVersion=function setBrowserVersion(version,browserObject){var splitVersion=version.split('.',2);browserObject.fullVersion = version; // Major version\n\tif(splitVersion[0])browserObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\tif(splitVersion[1])browserObject.minorVersion = parseInt(splitVersion[1]);}; //  Get OS data\n\tvar getOsData=function getOsData(){var osObject={};var userAgent=Browser.userAgent.toLowerCase(); // Check browser type\n\tvar _iterator2=_createForOfIteratorHelper(OS_DATA),_step2;try{for(_iterator2.s();!(_step2 = _iterator2.n()).done;) {var os=_step2.value;var osRegExp=new RegExp(os.identifier.toLowerCase());var osRegExpResult=osRegExp.exec(userAgent);if(osRegExpResult != null){osObject.name = os.name;osObject.group = os.group; // Version defined\n\tif(os.version){setOsVersion(os.version,os.versionSeparator?os.versionSeparator:'.',osObject); // Version detected\n\t}else if(osRegExpResult[1]){setOsVersion(osRegExpResult[1],os.versionSeparator?os.versionSeparator:'.',osObject); // Version identifier\n\t}else if(os.versionIdentifier){var versionRegExp=new RegExp(os.versionIdentifier.toLowerCase());var versionRegExpResult=versionRegExp.exec(userAgent);if(versionRegExpResult != null && versionRegExpResult[1])setOsVersion(versionRegExpResult[1],os.versionSeparator?os.versionSeparator:'.',osObject);}break;}}}catch(err) {_iterator2.e(err);}finally {_iterator2.f();}return osObject;}; // Set OS version\n\tvar setOsVersion=function setOsVersion(version,separator,osObject){var finalSeparator=separator.substr(0,1) == '['?new RegExp(separator,'g'):separator;var splitVersion=version.split(finalSeparator,2);if(separator != '.')version = version.replace(new RegExp(separator,'g'),'.');osObject.fullVersion = version; // Major version\n\tif(splitVersion && splitVersion[0])osObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\tif(splitVersion && splitVersion[1])osObject.minorVersion = parseInt(splitVersion[1]);}; // Set viewport size\n\tvar getViewportSize=function getViewportSize(){var viewportObject={};viewportObject.width = zepto(window).width();viewportObject.height = zepto(window).height();return viewportObject;}; // Set viewport orientation\n\tvar setViewportOrientation=function setViewportOrientation(){switch(window.orientation){case -90:case 90:Browser.viewport.orientation = 'landscape';break;default:Browser.viewport.orientation = 'portrait';break;}};var getDevice=function getDevice(ua){var platformRegExp=/\\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\\)))/;var matches=platformRegExp.exec(ua);var device=matches && (matches[1] || matches[2]) || '';return device;};var browserInfo=getBrowserInfo(navigator.userAgent);Browser.isEdge = /edge/i.test(navigator.userAgent);Browser.isChrome = /chrome|CriOS/i.test(navigator.userAgent) && !Browser.isEdge;Browser.isSafari = /safari/i.test(navigator.userAgent) && !Browser.isChrome && !Browser.isEdge;Browser.isFirefox = /firefox/i.test(navigator.userAgent);Browser.isLegacyIE = !!window.ActiveXObject;Browser.isIE = Browser.isLegacyIE || /trident.*rv:1\\d/i.test(navigator.userAgent);Browser.isIE11 = /trident.*rv:11/i.test(navigator.userAgent);Browser.isChromecast = Browser.isChrome && /CrKey/i.test(navigator.userAgent);Browser.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent);Browser.isiOS = /iPad|iPhone|iPod/i.test(navigator.userAgent);Browser.isAndroid = /Android/i.test(navigator.userAgent);Browser.isWindowsPhone = /Windows Phone/i.test(navigator.userAgent);Browser.isWin8App = /MSAppHost/i.test(navigator.userAgent);Browser.isWiiU = /WiiU/i.test(navigator.userAgent);Browser.isPS4 = /PlayStation 4/i.test(navigator.userAgent);Browser.hasLocalstorage = hasLocalstorage();Browser.hasFlash = hasFlash(); /**\n\t  * @deprecated\n\t  * This parameter currently exists for retrocompatibility reasons.\n\t  * Use Browser.data.name instead.\n\t  */Browser.name = browserInfo.name; /**\n\t  * @deprecated\n\t  * This parameter currently exists for retrocompatibility reasons.\n\t  * Use Browser.data.fullVersion instead.\n\t  */Browser.version = browserInfo.version;Browser.userAgent = navigator.userAgent;Browser.data = getBrowserData();Browser.os = getOsData();Browser.viewport = getViewportSize();Browser.device = getDevice(Browser.userAgent);typeof window.orientation !== 'undefined' && setViewportOrientation();var idsCounter={};var videoStack=[];var requestAnimationFrame=(window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function(fn){window.setTimeout(fn,1000 / 60);}).bind(window);var cancelAnimationFrame=(window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout).bind(window);function assign(obj,source){if(source){for(var prop in source) {var propDescriptor=Object.getOwnPropertyDescriptor(source,prop);propDescriptor?Object.defineProperty(obj,prop,propDescriptor):obj[prop] = source[prop];}}return obj;}function extend(parent,properties){var Surrogate= /*#__PURE__*/(function(_parent){_inherits(Surrogate,_parent);var _super=_createSuper(Surrogate);function Surrogate(){var _this;_classCallCheck(this,Surrogate);for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}_this = _super.call.apply(_super,[this].concat(args));if(properties.initialize)properties.initialize.apply(_assertThisInitialized(_this),args);return _this;}return Surrogate;})(parent);assign(Surrogate.prototype,properties);return Surrogate;}function formatTime(time,paddedHours){if(!isFinite(time))return '--:--';time = time * 1000;time = parseInt(time / 1000);var seconds=time % 60;time = parseInt(time / 60);var minutes=time % 60;time = parseInt(time / 60);var hours=time % 24;var days=parseInt(time / 24);var out='';if(days && days > 0){out += days + ':';if(hours < 1)out += '00:';}if(hours && hours > 0 || paddedHours)out += ('0' + hours).slice(-2) + ':';out += ('0' + minutes).slice(-2) + ':';out += ('0' + seconds).slice(-2);return out.trim();}var Fullscreen={fullscreenElement:function fullscreenElement(){return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;},requestFullscreen:function requestFullscreen(el){if(el.requestFullscreen){return el.requestFullscreen();}else if(el.webkitRequestFullscreen){if(typeof el.then === 'function')return el.webkitRequestFullscreen();el.webkitRequestFullscreen();}else if(el.mozRequestFullScreen){return el.mozRequestFullScreen();}else if(el.msRequestFullscreen){return el.msRequestFullscreen();}else if(el.querySelector && el.querySelector('video') && el.querySelector('video').webkitEnterFullScreen){el.querySelector('video').webkitEnterFullScreen();}else if(el.webkitEnterFullScreen){el.webkitEnterFullScreen();}},cancelFullscreen:function cancelFullscreen(){var el=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:document;if(el.exitFullscreen)el.exitFullscreen();else if(el.webkitCancelFullScreen)el.webkitCancelFullScreen();else if(el.webkitExitFullscreen)el.webkitExitFullscreen();else if(el.mozCancelFullScreen)el.mozCancelFullScreen();else if(el.msExitFullscreen)el.msExitFullscreen();},fullscreenEnabled:function fullscreenEnabled(){return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled);}};var Config= /*#__PURE__*/(function(){function Config(){_classCallCheck(this,Config);}_createClass(Config,null,[{key:\"_defaultConfig\",value:function _defaultConfig(){return {volume:{value:100,parse:parseInt}};}},{key:\"_defaultValueFor\",value:function _defaultValueFor(key){try{return this._defaultConfig()[key].parse(this._defaultConfig()[key].value);}catch(e) {return undefined;}}},{key:\"_createKeyspace\",value:function _createKeyspace(key){return \"clappr.\".concat(document.domain,\".\").concat(key);}},{key:\"restore\",value:function restore(key){if(Browser.hasLocalstorage && localStorage[this._createKeyspace(key)])return this._defaultConfig()[key].parse(localStorage[this._createKeyspace(key)]);return this._defaultValueFor(key);}},{key:\"persist\",value:function persist(key,value){if(Browser.hasLocalstorage){try{localStorage[this._createKeyspace(key)] = value;return true;}catch(e) {return false;}}}}]);return Config;})();var QueryString= /*#__PURE__*/(function(){function QueryString(){_classCallCheck(this,QueryString);}_createClass(QueryString,null,[{key:\"parse\",value:function parse(paramsString){var match;var pl=/\\+/g, // Regex for replacing addition symbol with a space\n\tsearch=/([^&=]+)=?([^&]*)/g,decode=function decode(s){return decodeURIComponent(s.replace(pl,' '));},params={};while(match = search.exec(paramsString)) { // eslint-disable-line no-cond-assign\n\tparams[decode(match[1]).toLowerCase()] = decode(match[2]);}return params;}},{key:\"params\",get:function get(){var query=window.location.search.substring(1);if(query !== this.query){this._urlParams = this.parse(query);this.query = query;}return this._urlParams;}},{key:\"hashParams\",get:function get(){var hash=window.location.hash.substring(1);if(hash !== this.hash){this._hashParams = this.parse(hash);this.hash = hash;}return this._hashParams;}}]);return QueryString;})();function seekStringToSeconds(){var paramName=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:'t';var seconds=0;var seekString=QueryString.params[paramName] || QueryString.hashParams[paramName] || '';var parts=seekString.match(/[0-9]+[hms]+/g) || [];if(parts.length > 0){var factor={'h':3600,'m':60,'s':1};parts.forEach(function(el){if(el){var suffix=el[el.length - 1];var time=parseInt(el.slice(0,el.length - 1),10);seconds += time * factor[suffix];}});}else if(seekString){seconds = parseInt(seekString,10);}return seconds;}function uniqueId(prefix){idsCounter[prefix] || (idsCounter[prefix] = 0);var id=++idsCounter[prefix];return prefix + id;}function isNumber(value){return value - parseFloat(value) + 1 >= 0;}function currentScriptUrl(){var scripts=document.getElementsByTagName('script');return scripts.length?scripts[scripts.length - 1].src:'';}function getBrowserLanguage(){return window.navigator && window.navigator.language;}function now(){if(window.performance && window.performance.now)return performance.now();return Date.now();} // remove the item from the array if it exists in the array\n\tfunction removeArrayItem(arr,item){var i=arr.indexOf(item);if(i >= 0)arr.splice(i,1);} // find an item regardless of its letter case\n\tfunction listContainsIgnoreCase(item,items){if(item === undefined || items === undefined)return false;return items.find(function(itemEach){return item.toLowerCase() === itemEach.toLowerCase();}) !== undefined;} // https://github.com/video-dev/can-autoplay\n\tfunction canAutoPlayMedia(cb,options){options = Object.assign({inline:false,muted:false,timeout:250,type:'video',source:Media.mp4,element:null},options);var element=options.element?options.element:document.createElement(options.type);element.muted = options.muted;if(options.muted === true)element.setAttribute('muted','muted');if(options.inline === true)element.setAttribute('playsinline','playsinline');element.src = options.source;var promise=element.play();var timeoutId=setTimeout(function(){setResult(false,new Error(\"Timeout \".concat(options.timeout,\" ms has been reached\")));},options.timeout);var setResult=function setResult(result){var error=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:null;clearTimeout(timeoutId);cb(result,error);};if(promise !== undefined){promise.then(function(){return setResult(true);})[\"catch\"](function(err){return setResult(false,err);});}else {setResult(true);}} // Simple element factory with video recycle feature.\n\tvar DomRecycler= /*#__PURE__*/(function(){function DomRecycler(){_classCallCheck(this,DomRecycler);}_createClass(DomRecycler,null,[{key:\"configure\",value:function configure(options){this.options = zepto.extend(true,this.options,options);}},{key:\"create\",value:function create(name){if(this.options.recycleVideo && name === 'video' && videoStack.length > 0)return videoStack.shift();return document.createElement(name);}},{key:\"garbage\",value:function garbage(el){if(!this.options.recycleVideo || el.tagName.toUpperCase() !== 'VIDEO')return;zepto(el).children().remove();Object.values(el.attributes).forEach(function(attr){return el.removeAttribute(attr.name);});videoStack.push(el);}}]);return DomRecycler;})();DomRecycler.options = {recycleVideo:false};var DoubleEventHandler= /*#__PURE__*/(function(){function DoubleEventHandler(){var delay=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:500;_classCallCheck(this,DoubleEventHandler);this.delay = delay;this.lastTime = 0;}_createClass(DoubleEventHandler,[{key:\"handle\",value:function handle(event,cb){var prevented=arguments.length > 2 && arguments[2] !== undefined?arguments[2]:true; // Based on http://jsfiddle.net/brettwp/J4djY/\n\tvar currentTime=new Date().getTime();var diffTime=currentTime - this.lastTime;if(diffTime < this.delay && diffTime > 0){cb();prevented && event.preventDefault();}this.lastTime = currentTime;}}]);return DoubleEventHandler;})();var Utils={Config:Config,Fullscreen:Fullscreen,QueryString:QueryString,DomRecycler:DomRecycler,assign:assign,extend:extend,formatTime:formatTime,seekStringToSeconds:seekStringToSeconds,uniqueId:uniqueId,currentScriptUrl:currentScriptUrl,isNumber:isNumber,requestAnimationFrame:requestAnimationFrame,cancelAnimationFrame:cancelAnimationFrame,getBrowserLanguage:getBrowserLanguage,now:now,removeArrayItem:removeArrayItem,listContainsIgnoreCase:listContainsIgnoreCase,canAutoPlayMedia:canAutoPlayMedia,Media:Media,DoubleEventHandler:DoubleEventHandler}; // Use of this source code is governed by a BSD-style\n\t// license that can be found in the LICENSE file.\n\tvar BOLD='font-weight: bold; font-size: 13px;';var INFO='color: #006600;' + BOLD;var DEBUG='color: #0000ff;' + BOLD;var WARN='color: #ff8000;' + BOLD;var ERROR='color: #ff0000;' + BOLD;var LEVEL_DEBUG=0;var LEVEL_INFO=1;var LEVEL_WARN=2;var LEVEL_ERROR=3;var LEVEL_DISABLED=LEVEL_ERROR;var COLORS=[DEBUG,INFO,WARN,ERROR,ERROR];var DESCRIPTIONS=['debug','info','warn','error','disabled'];var Log= /*#__PURE__*/(function(){_createClass(Log,[{key:\"level\",get:function get(){return this._level;},set:function set(newLevel){this._level = newLevel;}}]);function Log(){var level=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:LEVEL_INFO;var offLevel=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:LEVEL_DISABLED;_classCallCheck(this,Log);this.EXCLUDE_LIST = ['timeupdate','playback:timeupdate','playback:progress','container:hover','container:timeupdate','container:progress'];this.level = level;this.previousLevel = this.level;this.offLevel = offLevel;}_createClass(Log,[{key:\"debug\",value:function debug(klass){this.log(klass,LEVEL_DEBUG,Array.prototype.slice.call(arguments,1));}},{key:\"info\",value:function info(klass){this.log(klass,LEVEL_INFO,Array.prototype.slice.call(arguments,1));}},{key:\"warn\",value:function warn(klass){this.log(klass,LEVEL_WARN,Array.prototype.slice.call(arguments,1));}},{key:\"error\",value:function error(klass){this.log(klass,LEVEL_ERROR,Array.prototype.slice.call(arguments,1));}},{key:\"onOff\",value:function onOff(){if(this.level === this.offLevel){this.level = this.previousLevel;}else {this.previousLevel = this.level;this.level = this.offLevel;} // handle instances where console.log is unavailable\n\twindow.console && window.console.log && window.console.log('%c[Clappr.Log] set log level to ' + DESCRIPTIONS[this.level],WARN);}},{key:\"log\",value:function log(klass,level,message){if(this.EXCLUDE_LIST.indexOf(message[0]) >= 0)return;if(level < this.level)return;if(!message){message = klass;klass = null;}var color=COLORS[level];var klassDescription='';if(klass)klassDescription = '[' + klass + ']';window.console && window.console.log && window.console.log.apply(console,['%c[' + DESCRIPTIONS[level] + ']' + klassDescription,color].concat(message));}}]);return Log;})();Log.LEVEL_DEBUG = LEVEL_DEBUG;Log.LEVEL_INFO = LEVEL_INFO;Log.LEVEL_WARN = LEVEL_WARN;Log.LEVEL_ERROR = LEVEL_ERROR;Log.getInstance = function(){if(this._instance === undefined)this._instance = new this();return this._instance;};Log.setLevel = function(level){this.getInstance().level = level;};Log.debug = function(){this.getInstance().debug.apply(this.getInstance(),arguments);};Log.info = function(){this.getInstance().info.apply(this.getInstance(),arguments);};Log.warn = function(){this.getInstance().warn.apply(this.getInstance(),arguments);};Log.error = function(){this.getInstance().error.apply(this.getInstance(),arguments);};var slice=Array.prototype.slice;var eventSplitter=/\\s+/;var eventsApi=function eventsApi(obj,action,name,rest){if(!name)return true; // Handle event maps.\n\tif(_typeof(name) === 'object'){for(var key in name) {obj[action].apply(obj,[key,name[key]].concat(rest));}return false;} // Handle space separated event names.\n\tif(eventSplitter.test(name)){var names=name.split(eventSplitter);for(var i=0,l=names.length;i < l;i++) {obj[action].apply(obj,[names[i]].concat(rest));}return false;}return true;};var triggerEvents=function triggerEvents(events,args,klass,name){var ev,i=-1;var l=events.length,a1=args[0],a2=args[1],a3=args[2];run();function run(){try{switch(args.length){ /* eslint-disable curly */case 0:while(++i < l) {(ev = events[i]).callback.call(ev.ctx);}return;case 1:while(++i < l) {(ev = events[i]).callback.call(ev.ctx,a1);}return;case 2:while(++i < l) {(ev = events[i]).callback.call(ev.ctx,a1,a2);}return;case 3:while(++i < l) {(ev = events[i]).callback.call(ev.ctx,a1,a2,a3);}return;default:while(++i < l) {(ev = events[i]).callback.apply(ev.ctx,args);}return;}}catch(exception) {Log.error.apply(Log,[klass,'error on event',name,'trigger','-',exception]);run();}}}; /**\n\t   * @class Events\n\t   * @constructor\n\t   * @module base\n\t   */var Events= /*#__PURE__*/(function(){function Events(){_classCallCheck(this,Events);}_createClass(Events,[{key:\"on\", /**\n\t       * listen to an event indefinitely, if you want to stop you need to call `off`\n\t       * @method on\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       * @param {Object} context\n\t       */value:function on(name,callback,context){if(!eventsApi(this,'on',name,[callback,context]) || !callback)return this;this._events || (this._events = {});var events=this._events[name] || (this._events[name] = []);events.push({callback:callback,context:context,ctx:context || this});return this;} /**\n\t       * listen to an event only once\n\t       * @method once\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       * @param {Object} context\n\t       */},{key:\"once\",value:function once(name,callback,context){var _this=this;var _once;if(!eventsApi(this,'once',name,[callback,context]) || !callback)return this;var off=function off(){return _this.off(name,_once);};_once = function once(){off();callback.apply(this,arguments);};return this.on(name,_once,context);} /**\n\t       * stop listening to an event\n\t       * @method off\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       * @param {Object} context\n\t       */},{key:\"off\",value:function off(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events || !eventsApi(this,'off',name,[callback,context]))return this;if(!name && !callback && !context){this._events = void 0;return this;}names = name?[name]:Object.keys(this._events); // jshint maxdepth:5\n\tfor(i = 0,l = names.length;i < l;i++) {name = names[i];events = this._events[name];if(events){this._events[name] = retain = [];if(callback || context){for(j = 0,k = events.length;j < k;j++) {ev = events[j];if(callback && callback !== ev.callback && callback !== ev.callback._callback || context && context !== ev.context)retain.push(ev);}}if(!retain.length)delete this._events[name];}}return this;} /**\n\t       * triggers an event given its `name`\n\t       * @method trigger\n\t       * @param {String} name\n\t       */},{key:\"trigger\",value:function trigger(name){var klass=this.name || this.constructor.name;Log.debug.apply(Log,[klass].concat(Array.prototype.slice.call(arguments)));if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,'trigger',name,args))return this;var events=this._events[name];var allEvents=this._events.all;if(events)triggerEvents(events,args,klass,name);if(allEvents)triggerEvents(allEvents,arguments,klass,name);return this;} /**\n\t       * stop listening an event for a given object\n\t       * @method stopListening\n\t       * @param {Object} obj\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       */},{key:\"stopListening\",value:function stopListening(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name && !callback;if(!callback && _typeof(name) === 'object')callback = this;if(obj)(listeningTo = {})[obj._listenId] = obj;for(var id in listeningTo) {obj = listeningTo[id];obj.off(name,callback,this);if(remove || Object.keys(obj._events).length === 0)delete this._listeningTo[id];}return this;}}],[{key:\"register\",value:function register(eventName){Events.Custom || (Events.Custom = {});var property=typeof eventName === 'string' && eventName.toUpperCase().trim();if(property && !Events.Custom[property]){Events.Custom[property] = property.toLowerCase().split('_').map(function(value,index){return index === 0?value:value = value[0].toUpperCase() + value.slice(1);}).join('');}else Log.error('Events','Error when register event: ' + eventName);}},{key:\"listAvailableCustomEvents\",value:function listAvailableCustomEvents(){Events.Custom || (Events.Custom = {});return Object.keys(Events.Custom).filter(function(property){return typeof Events.Custom[property] === 'string';});}}]);return Events;})();var listenMethods={listenTo:'on',listenToOnce:'once'};Object.keys(listenMethods).forEach(function(method){Events.prototype[method] = function(obj,name,callback){var listeningTo=this._listeningTo || (this._listeningTo = {});var id=obj._listenId || (obj._listenId = uniqueId('l'));listeningTo[id] = obj;if(!callback && _typeof(name) === 'object')callback = this;obj[listenMethods[method]](name,callback,this);return this;};}); // PLAYER EVENTS\n\t/**\n\t   * Fired when the player is ready on startup\n\t   *\n\t   * @event PLAYER_READY\n\t   */Events.PLAYER_READY = 'ready'; /**\n\t   * Fired when player resizes\n\t   *\n\t   * @event PLAYER_RESIZE\n\t   * @param {Object} currentSize an object with the current size\n\t   */Events.PLAYER_RESIZE = 'resize'; /**\n\t   * Fired when player changes its fullscreen state\n\t   *\n\t   * @event PLAYER_FULLSCREEN\n\t   * @param {Boolean} whether or not the player is on fullscreen mode\n\t   */Events.PLAYER_FULLSCREEN = 'fullscreen'; /**\n\t   * Fired when player starts to play\n\t   *\n\t   * @event PLAYER_PLAY\n\t   */Events.PLAYER_PLAY = 'play'; /**\n\t   * Fired when player pauses\n\t   *\n\t   * @event PLAYER_PAUSE\n\t   */Events.PLAYER_PAUSE = 'pause'; /**\n\t   * Fired when player stops\n\t   *\n\t   * @event PLAYER_STOP\n\t   */Events.PLAYER_STOP = 'stop'; /**\n\t   * Fired when player ends the video\n\t   *\n\t   * @event PLAYER_ENDED\n\t   */Events.PLAYER_ENDED = 'ended'; /**\n\t   * Fired when player seeks the video\n\t   *\n\t   * @event PLAYER_SEEK\n\t   * @param {Number} time the current time in seconds\n\t   */Events.PLAYER_SEEK = 'seek'; /**\n\t   * Fired when player receives an error\n\t   *\n\t   * @event PLAYER_ERROR\n\t   * @param {Object} error the error\n\t   */Events.PLAYER_ERROR = 'playererror'; /**\n\t   * Fired when there is an error\n\t   *\n\t   * @event ERROR\n\t   * @param {Object} error\n\t   * the error with the following format `{code, description, level, raw, origin, scope}`\n\t   * @param {String} [options.code]\n\t   * error's code: code to identify error in the following format: origin:code\n\t   * @param {String} [options.description]\n\t   * error's description: description of the error\n\t   * @param {String} [options.level]\n\t   * error's level: FATAL or WARN.\n\t   * @param {String} [options.origin]\n\t   * error's origin. Example: hls, html5, etc\n\t   * @param {String} [options.scope]\n\t   * error's scope. Example: playback, container, etc\n\t   * @param {String} [options.raw]\n\t   * raw error: the initial error received\n\t   */Events.ERROR = 'error'; /**\n\t   * Fired when the time is updated on player\n\t   *\n\t   * @event PLAYER_TIMEUPDATE\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.current]\n\t   * current time (in seconds)\n\t   * @param {Number} [progress.total]\n\t   * total time (in seconds)\n\t   */Events.PLAYER_TIMEUPDATE = 'timeupdate'; /**\n\t   * Fired when player updates its volume\n\t   *\n\t   * @event PLAYER_VOLUMEUPDATE\n\t   * @param {Number} volume the current volume\n\t   */Events.PLAYER_VOLUMEUPDATE = 'volumeupdate'; /**\n\t   * Fired when subtitle is available\n\t   *\n\t   * @event PLAYER_SUBTITLE_AVAILABLE\n\t   */Events.PLAYER_SUBTITLE_AVAILABLE = 'subtitleavailable'; // Playback Events\n\t/**\n\t   * Fired when the playback is downloading the media\n\t   *\n\t   * @event PLAYBACK_PROGRESS\n\t   * @param progress {Object}\n\t   * Data progress object\n\t   * @param [progress.start] {Number}\n\t   * start position of buffered content at current position\n\t   * @param [progress.current] {Number}\n\t   * end position of buffered content at current position\n\t   * @param [progress.total] {Number}\n\t   * total content to be downloaded\n\t   * @param buffered {Array}\n\t   * array of buffered segments ({start, end}). [Only for supported playbacks]\n\t   */Events.PLAYBACK_PROGRESS = 'playback:progress'; /**\n\t   * Fired when the time is updated on playback\n\t   *\n\t   * @event PLAYBACK_TIMEUPDATE\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.current]\n\t   * current time (in seconds)\n\t   * @param {Number} [progress.total]\n\t   * total time (in seconds)\n\t   */Events.PLAYBACK_TIMEUPDATE = 'playback:timeupdate'; /**\n\t   * Fired when playback is ready\n\t   *\n\t   * @event PLAYBACK_READY\n\t   */Events.PLAYBACK_READY = 'playback:ready'; /**\n\t   * Fired when the playback starts having to buffer because\n\t   * playback can currently not be smooth.\n\t   *\n\t   * This corresponds to the playback `buffering` property being\n\t   * `true`.\n\t   *\n\t   * @event PLAYBACK_BUFFERING\n\t   */Events.PLAYBACK_BUFFERING = 'playback:buffering'; /**\n\t   * Fired when the playback has enough in the buffer to be\n\t   * able to play smoothly, after previously being unable to\n\t   * do this.\n\t   *\n\t   * This corresponds to the playback `buffering` property being\n\t   * `false`.\n\t   *\n\t   * @event PLAYBACK_BUFFERFULL\n\t   */Events.PLAYBACK_BUFFERFULL = 'playback:bufferfull'; /**\n\t   * Fired when playback changes any settings (volume, seek and etc)\n\t   *\n\t   * @event PLAYBACK_SETTINGSUPDATE\n\t   */Events.PLAYBACK_SETTINGSUPDATE = 'playback:settingsupdate'; /**\n\t   * Fired when playback loaded its metadata\n\t   *\n\t   * @event PLAYBACK_LOADEDMETADATA\n\t   * @param {Object} metadata Data\n\t   * settings object\n\t   * @param {Number} [metadata.duration]\n\t   * the playback duration\n\t   * @param {Object} [metadata.data]\n\t   * extra meta data\n\t   */Events.PLAYBACK_LOADEDMETADATA = 'playback:loadedmetadata'; /**\n\t   * Fired when playback updates its video quality\n\t   *\n\t   * @event PLAYBACK_HIGHDEFINITIONUPDATE\n\t   * @param {Boolean} isHD\n\t   * true when is on HD, false otherwise\n\t   */Events.PLAYBACK_HIGHDEFINITIONUPDATE = 'playback:highdefinitionupdate'; /**\n\t   * Fired when playback updates its bitrate\n\t   *\n\t   * @event PLAYBACK_BITRATE\n\t   * @param {Object} bitrate Data\n\t   * bitrate object\n\t   * @param {Number} [bitrate.bandwidth]\n\t   * bitrate bandwidth when it's available\n\t   * @param {Number} [bitrate.width]\n\t   * playback width (ex: 720, 640, 1080)\n\t   * @param {Number} [bitrate.height]\n\t   * playback height (ex: 240, 480, 720)\n\t   * @param {Number} [bitrate.level]\n\t   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n\t   */Events.PLAYBACK_BITRATE = 'playback:bitrate'; /**\n\t   * Fired when the playback has its levels\n\t   *\n\t   * @event PLAYBACK_LEVELS_AVAILABLE\n\t   * @param {Array} levels\n\t   * the ordered levels, each one with the following format `{id: 1, label: '500kbps'}` ps: id should be a number >= 0\n\t   * @param {Number} initial\n\t   * the initial level otherwise -1 (AUTO)\n\t   */Events.PLAYBACK_LEVELS_AVAILABLE = 'playback:levels:available'; /**\n\t   * Fired when the playback starts to switch level\n\t   *\n\t   * @event PLAYBACK_LEVEL_SWITCH_START\n\t   *\n\t   */Events.PLAYBACK_LEVEL_SWITCH_START = 'playback:levels:switch:start'; /**\n\t   * Fired when the playback ends the level switch\n\t   *\n\t   * @event PLAYBACK_LEVEL_SWITCH_END\n\t   *\n\t   */Events.PLAYBACK_LEVEL_SWITCH_END = 'playback:levels:switch:end'; /**\n\t   * Fired when playback internal state changes\n\t   *\n\t   * @event PLAYBACK_PLAYBACKSTATE\n\t   * @param {Object} state Data\n\t   * state object\n\t   * @param {String} [state.type]\n\t   * the playback type\n\t   */Events.PLAYBACK_PLAYBACKSTATE = 'playback:playbackstate'; /**\n\t   * Fired when DVR becomes enabled/disabled.\n\t   *\n\t   * @event PLAYBACK_DVR\n\t   * @param {boolean} state true if dvr enabled\n\t   */Events.PLAYBACK_DVR = 'playback:dvr'; // TODO doc\n\tEvents.PLAYBACK_MEDIACONTROL_DISABLE = 'playback:mediacontrol:disable'; // TODO doc\n\tEvents.PLAYBACK_MEDIACONTROL_ENABLE = 'playback:mediacontrol:enable'; /**\n\t   * Fired when the media for a playback ends.\n\t   *\n\t   * @event PLAYBACK_ENDED\n\t   * @param {String} name the name of the playback\n\t   */Events.PLAYBACK_ENDED = 'playback:ended'; /**\n\t   * Fired when user requests `play()`\n\t   *\n\t   * @event PLAYBACK_PLAY_INTENT\n\t   */Events.PLAYBACK_PLAY_INTENT = 'playback:play:intent'; /**\n\t   * Fired when the media for a playback starts playing.\n\t   * This is not necessarily when the user requests `play()`\n\t   * The media may have to buffer first.\n\t   * I.e. `isPlaying()` might return `true` before this event is fired,\n\t   * because `isPlaying()` represents the intended state.\n\t   *\n\t   * @event PLAYBACK_PLAY\n\t   */Events.PLAYBACK_PLAY = 'playback:play'; /**\n\t   * Fired when the media for a playback pauses.\n\t   *\n\t   * @event PLAYBACK_PAUSE\n\t   */Events.PLAYBACK_PAUSE = 'playback:pause'; /**\n\t   * Fired when the media for a playback is seeking.\n\t   *\n\t   * @event PLAYBACK_SEEK\n\t   */Events.PLAYBACK_SEEK = 'playback:seek'; /**\n\t   * Fired when the media for a playback is seeked.\n\t   *\n\t   * @event PLAYBACK_SEEKED\n\t   */Events.PLAYBACK_SEEKED = 'playback:seeked'; /**\n\t   * Fired when the media for a playback is stopped.\n\t   *\n\t   * @event PLAYBACK_STOP\n\t   */Events.PLAYBACK_STOP = 'playback:stop'; /**\n\t   * Fired if an error occurs in the playback.\n\t   *\n\t   * @event PLAYBACK_ERROR\n\t   * @param {Object} error An object containing the error details\n\t   * @param {String} name Playback name\n\t   */Events.PLAYBACK_ERROR = 'playback:error'; // TODO doc\n\tEvents.PLAYBACK_STATS_ADD = 'playback:stats:add'; // TODO doc\n\tEvents.PLAYBACK_FRAGMENT_LOADED = 'playback:fragment:loaded'; // TODO doc\n\tEvents.PLAYBACK_LEVEL_SWITCH = 'playback:level:switch'; /**\n\t   * Fired when subtitle is available on playback for display\n\t   *\n\t   * @event PLAYBACK_SUBTITLE_AVAILABLE\n\t   */Events.PLAYBACK_SUBTITLE_AVAILABLE = 'playback:subtitle:available'; /**\n\t   * Fired when playback subtitle track has changed\n\t   *\n\t   * @event CONTAINER_SUBTITLE_CHANGED\n\t   * @param {Object} track Data\n\t   * track object\n\t   * @param {Number} [track.id]\n\t   * selected track id\n\t   */Events.PLAYBACK_SUBTITLE_CHANGED = 'playback:subtitle:changed'; // Core Events\n\t/**\n\t   * Fired when the containers are created\n\t   *\n\t   * @event CORE_CONTAINERS_CREATED\n\t   */Events.CORE_CONTAINERS_CREATED = 'core:containers:created'; /**\n\t   * Fired when the active container changed\n\t   *\n\t   * @event CORE_ACTIVE_CONTAINER_CHANGED\n\t   */Events.CORE_ACTIVE_CONTAINER_CHANGED = 'core:active:container:changed'; /**\n\t   * Fired when the options were changed for the core\n\t   *\n\t   * @event CORE_OPTIONS_CHANGE\n\t   * @param {Object} new options provided to configure() method\n\t   */Events.CORE_OPTIONS_CHANGE = 'core:options:change'; /**\n\t   * Fired after creating containers, when the core is ready\n\t   *\n\t   * @event CORE_READY\n\t   */Events.CORE_READY = 'core:ready'; /**\n\t   * Fired when the fullscreen state change\n\t   *\n\t   * @event CORE_FULLSCREEN\n\t   * @param {Boolean} whether or not the player is on fullscreen mode\n\t   */Events.CORE_FULLSCREEN = 'core:fullscreen'; /**\n\t   * Fired when core updates size\n\t   *\n\t   * @event CORE_RESIZE\n\t   * @param {Object} currentSize an object with the current size\n\t   */Events.CORE_RESIZE = 'core:resize'; /**\n\t   * Fired when the screen orientation has changed.\n\t   * This event is trigger only for mobile devices.\n\t   *\n\t   * @event CORE_SCREEN_ORIENTATION_CHANGED\n\t   * @param {Object} screen An object with screen orientation\n\t   * screen object\n\t   * @param {Object} [screen.event]\n\t   * window resize event object\n\t   * @param {String} [screen.orientation]\n\t   * screen orientation (ie: 'landscape' or 'portrait')\n\t   */Events.CORE_SCREEN_ORIENTATION_CHANGED = 'core:screen:orientation:changed'; /**\n\t   * Fired when occurs mouse move event on core element\n\t   *\n\t   * @event CORE_MOUSE_MOVE\n\t   * @param {Object} event a DOM event\n\t   */Events.CORE_MOUSE_MOVE = 'core:mousemove'; /**\n\t   * Fired when occurs mouse leave event on core element\n\t   *\n\t   * @event CORE_MOUSE_LEAVE\n\t   * @param {Object} event a DOM event\n\t   */Events.CORE_MOUSE_LEAVE = 'core:mouseleave'; // Container Events\n\t/**\n\t   * Fired when the container internal state changes\n\t   *\n\t   * @event CONTAINER_PLAYBACKSTATE\n\t   * @param {Object} state Data\n\t   * state object\n\t   * @param {String} [state.type]\n\t   * the playback type\n\t   */Events.CONTAINER_PLAYBACKSTATE = 'container:playbackstate';Events.CONTAINER_PLAYBACKDVRSTATECHANGED = 'container:dvr'; /**\n\t   * Fired when the container updates its bitrate\n\t   *\n\t   * @event CONTAINER_BITRATE\n\t   * @param {Object} bitrate Data\n\t   * bitrate object\n\t   * @param {Number} [bitrate.bandwidth]\n\t   * bitrate bandwidth when it's available\n\t   * @param {Number} [bitrate.width]\n\t   * playback width (ex: 720, 640, 1080)\n\t   * @param {Number} [bitrate.height]\n\t   * playback height (ex: 240, 480, 720)\n\t   * @param {Number} [bitrate.level]\n\t   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n\t   */Events.CONTAINER_BITRATE = 'container:bitrate';Events.CONTAINER_STATS_REPORT = 'container:stats:report';Events.CONTAINER_DESTROYED = 'container:destroyed'; /**\n\t   * Fired when the container is ready\n\t   *\n\t   * @event CONTAINER_READY\n\t   */Events.CONTAINER_READY = 'container:ready'; /**\n\t   * Fired when the container was resized.\n\t   *\n\t   * Some fullscreen modes won't trigger this resize since they don't affect the container, only the playback contents.\n\t   *\n\t   * @event CONTAINER_RESIZE\n\t   */Events.CONTAINER_RESIZE = 'container:resize';Events.CONTAINER_ERROR = 'container:error'; /**\n\t   * Fired when the container loaded its metadata\n\t   *\n\t   * @event CONTAINER_LOADEDMETADATA\n\t   * @param {Object} metadata Data\n\t   * settings object\n\t   * @param {Number} [metadata.duration]\n\t   * the playback duration\n\t   * @param {Object} [metadata.data]\n\t   * extra meta data\n\t   */Events.CONTAINER_LOADEDMETADATA = 'container:loadedmetadata'; /**\n\t   * Fired when subtitle is available on container for display\n\t   *\n\t   * @event CONTAINER_SUBTITLE_AVAILABLE\n\t   */Events.CONTAINER_SUBTITLE_AVAILABLE = 'container:subtitle:available'; /**\n\t   * Fired when subtitle track has changed\n\t   *\n\t   * @event CONTAINER_SUBTITLE_CHANGED\n\t   * @param {Object} track Data\n\t   * track object\n\t   * @param {Number} [track.id]\n\t   * selected track id\n\t   */Events.CONTAINER_SUBTITLE_CHANGED = 'container:subtitle:changed'; /**\n\t   * Fired when the time is updated on container\n\t   *\n\t   * @event CONTAINER_TIMEUPDATE\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.current]\n\t   * current time (in seconds)\n\t   * @param {Number} [progress.total]\n\t   * total time (in seconds)\n\t   */Events.CONTAINER_TIMEUPDATE = 'container:timeupdate'; /**\n\t   * Fired when the container is downloading the media\n\t   *\n\t   * @event CONTAINER_PROGRESS\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.start]\n\t   * initial downloaded content\n\t   * @param {Number} [progress.current]\n\t   * current dowloaded content\n\t   * @param {Number} [progress.total]\n\t   * total content to be downloaded\n\t   */Events.CONTAINER_PROGRESS = 'container:progress';Events.CONTAINER_PLAY = 'container:play';Events.CONTAINER_STOP = 'container:stop';Events.CONTAINER_PAUSE = 'container:pause';Events.CONTAINER_ENDED = 'container:ended';Events.CONTAINER_CLICK = 'container:click';Events.CONTAINER_DBLCLICK = 'container:dblclick';Events.CONTAINER_CONTEXTMENU = 'container:contextmenu';Events.CONTAINER_MOUSE_ENTER = 'container:mouseenter';Events.CONTAINER_MOUSE_LEAVE = 'container:mouseleave'; /**\n\t   * Fired when the container seeks the video\n\t   *\n\t   * @event CONTAINER_SEEK\n\t   * @param {Number} time the current time in seconds\n\t   */Events.CONTAINER_SEEK = 'container:seek'; /**\n\t   * Fired when the container was finished the seek video\n\t   *\n\t   * @event CONTAINER_SEEKED\n\t   * @param {Number} time the current time in seconds\n\t   */Events.CONTAINER_SEEKED = 'container:seeked';Events.CONTAINER_VOLUME = 'container:volume';Events.CONTAINER_FULLSCREEN = 'container:fullscreen'; /**\n\t   * Fired when container is buffering\n\t   *\n\t   * @event CONTAINER_STATE_BUFFERING\n\t   */Events.CONTAINER_STATE_BUFFERING = 'container:state:buffering'; /**\n\t   * Fired when the container filled the buffer\n\t   *\n\t   * @event CONTAINER_STATE_BUFFERFULL\n\t   */Events.CONTAINER_STATE_BUFFERFULL = 'container:state:bufferfull'; /**\n\t   * Fired when the container changes any settings (volume, seek and etc)\n\t   *\n\t   * @event CONTAINER_SETTINGSUPDATE\n\t   */Events.CONTAINER_SETTINGSUPDATE = 'container:settingsupdate'; /**\n\t   * Fired when container updates its video quality\n\t   *\n\t   * @event CONTAINER_HIGHDEFINITIONUPDATE\n\t   * @param {Boolean} isHD\n\t   * true when is on HD, false otherwise\n\t   */Events.CONTAINER_HIGHDEFINITIONUPDATE = 'container:highdefinitionupdate'; /**\n\t   * Fired when the media control shows\n\t   *\n\t   * @event CONTAINER_MEDIACONTROL_SHOW\n\t   */Events.CONTAINER_MEDIACONTROL_SHOW = 'container:mediacontrol:show'; /**\n\t   * Fired when the media control hides\n\t   *\n\t   * @event CONTAINER_MEDIACONTROL_HIDE\n\t   */Events.CONTAINER_MEDIACONTROL_HIDE = 'container:mediacontrol:hide';Events.CONTAINER_MEDIACONTROL_DISABLE = 'container:mediacontrol:disable';Events.CONTAINER_MEDIACONTROL_ENABLE = 'container:mediacontrol:enable';Events.CONTAINER_STATS_ADD = 'container:stats:add'; /**\n\t   * Fired when the options were changed for the container\n\t   *\n\t   * @event CONTAINER_OPTIONS_CHANGE\n\t   */Events.CONTAINER_OPTIONS_CHANGE = 'container:options:change'; // MediaControl Events\n\tEvents.MEDIACONTROL_RENDERED = 'mediacontrol:rendered'; /**\n\t   * Fired when the player enters/exit on fullscreen\n\t   *\n\t   * @event MEDIACONTROL_FULLSCREEN\n\t   */Events.MEDIACONTROL_FULLSCREEN = 'mediacontrol:fullscreen'; /**\n\t   * Fired when the media control shows\n\t   *\n\t   * @event MEDIACONTROL_SHOW\n\t   */Events.MEDIACONTROL_SHOW = 'mediacontrol:show'; /**\n\t   * Fired when the media control hides\n\t   *\n\t   * @event MEDIACONTROL_HIDE\n\t   */Events.MEDIACONTROL_HIDE = 'mediacontrol:hide'; /**\n\t   * Fired when mouse enters on the seekbar\n\t   *\n\t   * @event MEDIACONTROL_MOUSEMOVE_SEEKBAR\n\t   * @param {Object} event\n\t   * the javascript event\n\t   */Events.MEDIACONTROL_MOUSEMOVE_SEEKBAR = 'mediacontrol:mousemove:seekbar'; /**\n\t   * Fired when mouse leaves the seekbar\n\t   *\n\t   * @event MEDIACONTROL_MOUSELEAVE_SEEKBAR\n\t   * @param {Object} event\n\t   * the javascript event\n\t   */Events.MEDIACONTROL_MOUSELEAVE_SEEKBAR = 'mediacontrol:mouseleave:seekbar'; /**\n\t   * Fired when the media is being played\n\t   *\n\t   * @event MEDIACONTROL_PLAYING\n\t   */Events.MEDIACONTROL_PLAYING = 'mediacontrol:playing'; /**\n\t   * Fired when the media is not being played\n\t   *\n\t   * @event MEDIACONTROL_NOTPLAYING\n\t   */Events.MEDIACONTROL_NOTPLAYING = 'mediacontrol:notplaying'; /**\n\t   * Fired when the container was changed\n\t   *\n\t   * @event MEDIACONTROL_CONTAINERCHANGED\n\t   */Events.MEDIACONTROL_CONTAINERCHANGED = 'mediacontrol:containerchanged'; /**\n\t   * Fired when the options were changed for the mediacontrol\n\t   *\n\t   * @event MEDIACONTROL_OPTIONS_CHANGE\n\t   */Events.MEDIACONTROL_OPTIONS_CHANGE = 'mediacontrol:options:change'; /**\n\t   * @class BaseObject\n\t   * @constructor\n\t   * @extends Events\n\t   * @module base\n\t   */var BaseObject= /*#__PURE__*/(function(_Events){_inherits(BaseObject,_Events);var _super=_createSuper(BaseObject);_createClass(BaseObject,[{key:\"options\", /**\n\t       * returns the object options\n\t       * @property options\n\t       * @type Object\n\t       */get:function get(){return this._options;} /**\n\t       * @method constructor\n\t       * @param {Object} options\n\t       */}]);function BaseObject(){var _this;var options=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};_classCallCheck(this,BaseObject);_this = _super.call(this,options);_this._options = options;_this.uniqueId = uniqueId('o');return _this;} /**\n\t    * a unique id prefixed with `'o'`, `o1, o232`\n\t    *\n\t    * @property uniqueId\n\t    * @type String\n\t    */return BaseObject;})(Events); /* eslint-disable no-var */ // Simple JavaScript Templating\n\t// Paul Miller (http://paulmillr.com)\n\t// http://underscorejs.org\n\t// (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t// By default, Underscore uses ERB-style template delimiters, change the\n\t// following template settings to use alternative delimiters.\n\tvar settings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g}; // When customizing `templateSettings`, if you don't want to define an\n\t// interpolation, evaluation or escaping regex, we need one that is\n\t// guaranteed not to match.\n\tvar noMatch=/(.)^/; // Certain characters need to be escaped so that they can be put into a\n\t// string literal.\n\tvar escapes={'\\'':'\\'','\\\\':'\\\\','\\r':'r','\\n':'n','\\t':'t','\\u2028':'u2028','\\u2029':'u2029'};var escaper=/\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g; // List of HTML entities for escaping.\n\tvar htmlEntities={'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;','\\'':'&#x27;'};var entityRe=new RegExp('[&<>\"\\']','g');var escapeExpr=function escapeExpr(string){if(string === null)return '';return ('' + string).replace(entityRe,function(match){return htmlEntities[match];});};var counter=0; // JavaScript micro-templating, similar to John Resig's implementation.\n\t// Underscore templating handles arbitrary delimiters, preserves whitespace,\n\t// and correctly escapes quotes within interpolated code.\n\tvar tmpl=function tmpl(text,data){var render; // Combine delimiters into one regular expression via alternation.\n\tvar matcher=new RegExp([(settings.escape || noMatch).source,(settings.interpolate || noMatch).source,(settings.evaluate || noMatch).source].join('|') + '|$','g'); // Compile the template source, escaping string literals appropriately.\n\tvar index=0;var source='__p+=\\'';text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source += text.slice(index,offset).replace(escaper,function(match){return '\\\\' + escapes[match];});if(escape)source += '\\'+\\n((__t=(' + escape + '))==null?\\'\\':escapeExpr(__t))+\\n\\'';if(interpolate)source += '\\'+\\n((__t=(' + interpolate + '))==null?\\'\\':__t)+\\n\\'';if(evaluate)source += '\\';\\n' + evaluate + '\\n__p+=\\'';index = offset + match.length;return match;});source += '\\';\\n'; // If a variable is not specified, place data values in local scope.\n\tif(!settings.variable)source = 'with(obj||{}){\\n' + source + '}\\n';source = 'var __t,__p=\\'\\',__j=Array.prototype.join,' + 'print=function(){__p+=__j.call(arguments,\\'\\');};\\n' + source + 'return __p;\\n//# sourceURL=/microtemplates/source[' + counter++ + ']';try{ /*jshint -W054 */ // TODO: find a way to avoid eval\n\trender = new Function(settings.variable || 'obj','escapeExpr',source);}catch(e) {e.source = source;throw e;}if(data)return render(data,escapeExpr);var template=function template(data){return render.call(this,data,escapeExpr);}; // Provide the compiled function source as a convenience for precompilation.\n\ttemplate.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';return template;};tmpl.settings = settings; // Copyright 2014 Globo.com Player authors. All rights reserved.\n\tvar Styler={getStyleFor:function getStyleFor(style){var options=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:{baseUrl:''};return zepto('<style class=\"clappr-style\"></style>').html(tmpl(style.toString())(options));}};var delegateEventSplitter=/^(\\S+)\\s*(.*)$/; /**\n\t   * A base class to create ui object.\n\t   * @class UIObject\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module base\n\t   */var UIObject= /*#__PURE__*/(function(_BaseObject){_inherits(UIObject,_BaseObject);var _super=_createSuper(UIObject);_createClass(UIObject,[{key:\"tagName\", /**\n\t       * a unique id prefixed with `'c'`, `c1, c232`\n\t       *\n\t       * @property cid\n\t       * @type String\n\t       */ /**\n\t       * the dom element itself\n\t       *\n\t       * @property el\n\t       * @type HTMLElement\n\t       */ /**\n\t       * the dom element wrapped by `$`\n\t       *\n\t       * @property $el\n\t       * @type HTMLElement\n\t       */ /**\n\t       * gets the tag name for the ui component\n\t       * @method tagName\n\t       * @default div\n\t       * @return {String} tag's name\n\t       */get:function get(){return 'div';} /**\n\t       * a literal object mapping element's events to methods\n\t       * @property events\n\t       * @type Object\n\t       * @example\n\t       *\n\t       *```javascript\n\t       *\n\t       * class MyButton extends UIObject {\n\t       *   constructor(options) {\n\t       *     super(options)\n\t       *     this.myId = 0\n\t       *   }\n\t       *   get events() { return { 'click': 'myClick' } }\n\t       *   myClick(){ this.myId = 42 }\n\t       * }\n\t       *\n\t       * // when you click on MyButton the method `myClick` will be called\n\t       *```\n\t       */},{key:\"events\",get:function get(){return {};} /**\n\t       * a literal object mapping attributes and values to the element\n\t       * element's attribute name and the value the attribute value\n\t       * @property attributes\n\t       * @type Object\n\t       * @example\n\t       *\n\t       *```javascript\n\t       *\n\t       * class MyButton extends UIObject {\n\t       *    constructor(options) { super(options) }\n\t       *    get attributes() { return { class: 'my-button'} }\n\t       * }\n\t       *\n\t       * // MyButton.el.className will be 'my-button'\n\t       * ```\n\t       */},{key:\"attributes\",get:function get(){return {};} /**\n\t       * it builds an ui component by:\n\t       *  * creating an id for the component `cid`\n\t       *  * making sure the element is created `$el`\n\t       *  * delegating all `events` to the element\n\t       * @method constructor\n\t       * @param {Object} options the options object\n\t       */}]);function UIObject(options){var _this;_classCallCheck(this,UIObject);_this = _super.call(this,options);_this.cid = uniqueId('c');_this._ensureElement();_this.delegateEvents();return _this;} /**\n\t     * selects within the component.\n\t     * @method $\n\t     * @param {String} selector a selector to find within the component.\n\t     * @return {HTMLElement} an element, if it exists.\n\t     * @example\n\t     * ```javascript\n\t     * fullScreenBarUIComponent.$('.button-full') //will return only `.button-full` within the component\n\t     * ```\n\t     */_createClass(UIObject,[{key:\"$\",value:function $(selector){return this.$el.find(selector);} /**\n\t       * render the component, usually attach it to a real existent `element`\n\t       * @method render\n\t       * @return {UIObject} itself\n\t       */},{key:\"render\",value:function render(){return this;} /**\n\t       * removes the ui component from DOM\n\t       * @method destroy\n\t       * @return {UIObject} itself\n\t       */},{key:\"destroy\",value:function destroy(){this.$el.remove();this.stopListening();this.undelegateEvents();return this;} /**\n\t       * set element to `el` and `$el`\n\t       * @method setElement\n\t       * @param {HTMLElement} element\n\t       * @param {Boolean} delegate whether is delegate or not\n\t       * @return {UIObject} itself\n\t       */},{key:\"setElement\",value:function setElement(element,delegate){if(this.$el)this.undelegateEvents();this.$el = zepto.zepto.isZ(element)?element:zepto(element);this.el = this.$el[0];if(delegate !== false)this.delegateEvents();return this;} /**\n\t       * delegates all the original `events` on `element` to its callbacks\n\t       * @method delegateEvents\n\t       * @param {Object} events\n\t       * @return {UIObject} itself\n\t       */},{key:\"delegateEvents\",value:function delegateEvents(events){if(!events)events = this.events;this.undelegateEvents();for(var key in events) {var method=events[key];if(method && method.constructor !== Function)method = this[events[key]];if(!method)continue;var match=key.match(delegateEventSplitter);var eventName=match[1],selector=match[2];eventName += '.delegateEvents' + this.cid;if(selector === '')this.$el.on(eventName,method.bind(this));else this.$el.on(eventName,selector,method.bind(this));}return this;} /**\n\t       * undelegats all the `events`\n\t       * @method undelegateEvents\n\t       * @return {UIObject} itself\n\t       */},{key:\"undelegateEvents\",value:function undelegateEvents(){this.$el.off('.delegateEvents' + this.cid);return this;} /**\n\t       * ensures the creation of this ui component\n\t       * @method _ensureElement\n\t       * @private\n\t       */},{key:\"_ensureElement\",value:function _ensureElement(){if(!this.el){var attrs=zepto.extend(true,{},this.attributes);if(this.id)attrs.id = this.id;if(this.className)attrs['class'] = this.className;var $el=zepto(DomRecycler.create(this.tagName)).attr(attrs);this.setElement($el,false);}else {this.setElement(this.el,false);}}}]);return UIObject;})(BaseObject); /**\n\t   * The PlayerError is responsible to receive and propagate errors.\n\t   * @class PlayerError\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   */var PlayerError= /*#__PURE__*/(function(_BaseObject){_inherits(PlayerError,_BaseObject);var _super=_createSuper(PlayerError);_createClass(PlayerError,[{key:\"name\",get:function get(){return 'error';} /**\n\t       * @property Levels\n\t       * @type {Object} object with error levels\n\t       */}],[{key:\"Levels\",get:function get(){return {FATAL:'FATAL',WARN:'WARN',INFO:'INFO'};}}]);function PlayerError(){var _this;var options=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};var core=arguments.length > 1?arguments[1]:undefined;_classCallCheck(this,PlayerError);_this = _super.call(this,options);_this.core = core;return _this;} /**\n\t     * creates and trigger an error.\n\t     * @method createError\n\t     * @param {Object} err should be an object with code, description, level, origin, scope and raw error.\n\t     */_createClass(PlayerError,[{key:\"createError\",value:function createError(err){if(!this.core){Log.warn(this.name,'Core is not set. Error: ',err);return;}this.core.trigger(Events.ERROR,err);}}]);return PlayerError;})(BaseObject);var ErrorMixin={ /**\n\t     * creates an error.\n\t     * @method createError\n\t     * @param {Object} error should be an object with code, description, level and raw error.\n\t     * @return {Object} Object with formatted error data including origin and scope\n\t     */createError:function createError(error){var options=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:{useCodePrefix:true};var scope=this.constructor && this.constructor.type || '';var origin=this.name || scope;var i18n=this.i18n || this.core && this.core.i18n || this.container && this.container.i18n;var prefixedCode=\"\".concat(origin,\":\").concat(error && error.code || 'unknown');var defaultError={description:'',level:PlayerError.Levels.FATAL,origin:origin,scope:scope,raw:{}};var errorData=Object.assign({},defaultError,error,{code:options.useCodePrefix?prefixedCode:error.code});if(i18n && errorData.level == PlayerError.Levels.FATAL && !errorData.UI){var defaultUI={title:i18n.t('default_error_title'),message:i18n.t('default_error_message')};errorData.UI = defaultUI;}this.playerError?this.playerError.createError(errorData):Log.warn(origin,'PlayerError is not defined. Error: ',errorData);return errorData;}};var UICorePlugin= /*#__PURE__*/(function(_UIObject){_inherits(UICorePlugin,_UIObject);var _super=_createSuper(UICorePlugin);_createClass(UICorePlugin,[{key:\"playerError\",get:function get(){return this.core.playerError;}}]);function UICorePlugin(core){var _this;_classCallCheck(this,UICorePlugin);_this = _super.call(this,core.options);_this.core = core;_this.enabled = true;_this.bindEvents();_this.render();return _this;}_createClass(UICorePlugin,[{key:\"bindEvents\",value:function bindEvents(){}},{key:\"getExternalInterface\",value:function getExternalInterface(){return {};}},{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.$el.show();this.enabled = true;}}},{key:\"disable\",value:function disable(){this.stopListening();this.$el.hide();this.enabled = false;}},{key:\"render\",value:function render(){return this;}}]);return UICorePlugin;})(UIObject);Object.assign(UICorePlugin.prototype,ErrorMixin);UICorePlugin.extend = function(properties){return extend(UICorePlugin,properties);};UICorePlugin.type = 'core';var css_248z=\".container[data-container] {\\n  position: absolute;\\n  background-color: black;\\n  height: 100%;\\n  width: 100%;\\n  max-width: 100%; }\\n  .container[data-container] .chromeless {\\n    cursor: default; }\\n\\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\\n  cursor: pointer; }\\n\"; /**\n\t   * An abstraction to represent a container for a given playback\n\t   * TODO: describe its responsabilities\n\t   * @class Container\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module base\n\t   */var Container= /*#__PURE__*/(function(_UIObject){_inherits(Container,_UIObject);var _super=_createSuper(Container);_createClass(Container,[{key:\"name\", /**\n\t       * container's name\n\t       * @method name\n\t       * @default Container\n\t       * @return {String} container's name\n\t       */get:function get(){return 'Container';}},{key:\"attributes\",get:function get(){return {\"class\":'container','data-container':''};}},{key:\"events\",get:function get(){return {'click':'clicked','dblclick':'dblClicked','touchend':'dblTap','contextmenu':'onContextMenu','mouseenter':'mouseEnter','mouseleave':'mouseLeave'};} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return this.playback.ended;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * (i.e if a live stream is playing smoothly, this will be false)\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return this.playback.buffering;} /**\n\t       * The internationalization plugin.\n\t       * @property i18n\n\t       * @type {Strings}\n\t       */},{key:\"i18n\",get:function get(){return this._i18n;} /**\n\t       * checks if has closed caption tracks.\n\t       * @property hasClosedCaptionsTracks\n\t       * @type {Boolean}\n\t       */},{key:\"hasClosedCaptionsTracks\",get:function get(){return this.playback.hasClosedCaptionsTracks;} /**\n\t       * gets the available closed caption tracks.\n\t       * @property closedCaptionsTracks\n\t       * @type {Array} an array of objects with at least 'id' and 'name' properties\n\t       */},{key:\"closedCaptionsTracks\",get:function get(){return this.playback.closedCaptionsTracks;} /**\n\t       * gets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */},{key:\"closedCaptionsTrackId\",get:function get(){return this.playback.closedCaptionsTrackId;}, /**\n\t       * sets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */set:function set(trackId){this.playback.closedCaptionsTrackId = trackId;} /**\n\t       * it builds a container\n\t       * @method constructor\n\t       * @param {Object} options the options object\n\t       * @param {Strings} i18n the internationalization component\n\t       */}]);function Container(options,i18n,playerError){var _this;_classCallCheck(this,Container);_this = _super.call(this,options);_this._i18n = i18n;_this.currentTime = 0;_this.volume = 100;_this.playback = options.playback;_this.playerError = playerError;_this.settings = zepto.extend(true,{},_this.playback.settings);_this.isReady = false;_this.mediaControlDisabled = false;_this.plugins = [_this.playback];_this.dblTapHandler = new DoubleEventHandler(500);_this.clickTimer = null;_this.clickDelay = 200; // FIXME: could be a player option\n\t_this.bindEvents();return _this;} /**\n\t     * binds playback events to the methods of the container.\n\t     * it listens to playback's events and triggers them as container events.\n\t     *\n\t     * | Playback |\n\t     * |----------|\n\t     * | progress |\n\t     * | timeupdate |\n\t     * | ready |\n\t     * | buffering |\n\t     * | bufferfull |\n\t     * | settingsupdate |\n\t     * | loadedmetadata |\n\t     * | highdefinitionupdate |\n\t     * | bitrate |\n\t     * | playbackstate |\n\t     * | dvr |\n\t     * | mediacontrol_disable |\n\t     * | mediacontrol_enable |\n\t     * | ended |\n\t     * | play |\n\t     * | pause |\n\t     * | error |\n\t     *\n\t     * ps: the events usually translate from PLABACK_x to CONTAINER_x, you can check all the events at `Event` class.\n\t     *\n\t     * @method bindEvents\n\t     */_createClass(Container,[{key:\"bindEvents\",value:function bindEvents(){this.listenTo(this.playback,Events.PLAYBACK_PROGRESS,this.onProgress);this.listenTo(this.playback,Events.PLAYBACK_TIMEUPDATE,this.timeUpdated);this.listenTo(this.playback,Events.PLAYBACK_READY,this.ready);this.listenTo(this.playback,Events.PLAYBACK_BUFFERING,this.onBuffering);this.listenTo(this.playback,Events.PLAYBACK_BUFFERFULL,this.bufferfull);this.listenTo(this.playback,Events.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate);this.listenTo(this.playback,Events.PLAYBACK_LOADEDMETADATA,this.loadedMetadata);this.listenTo(this.playback,Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate);this.listenTo(this.playback,Events.PLAYBACK_BITRATE,this.updateBitrate);this.listenTo(this.playback,Events.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged);this.listenTo(this.playback,Events.PLAYBACK_DVR,this.playbackDvrStateChanged);this.listenTo(this.playback,Events.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl);this.listenTo(this.playback,Events.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl);this.listenTo(this.playback,Events.PLAYBACK_SEEK,this.onSeek);this.listenTo(this.playback,Events.PLAYBACK_SEEKED,this.onSeeked);this.listenTo(this.playback,Events.PLAYBACK_ENDED,this.onEnded);this.listenTo(this.playback,Events.PLAYBACK_PLAY,this.playing);this.listenTo(this.playback,Events.PLAYBACK_PAUSE,this.paused);this.listenTo(this.playback,Events.PLAYBACK_STOP,this.stopped);this.listenTo(this.playback,Events.PLAYBACK_ERROR,this.error);this.listenTo(this.playback,Events.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable);this.listenTo(this.playback,Events.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged);}},{key:\"subtitleAvailable\",value:function subtitleAvailable(){this.trigger(Events.CONTAINER_SUBTITLE_AVAILABLE);}},{key:\"subtitleChanged\",value:function subtitleChanged(track){this.trigger(Events.CONTAINER_SUBTITLE_CHANGED,track);}},{key:\"playbackStateChanged\",value:function playbackStateChanged(state){this.trigger(Events.CONTAINER_PLAYBACKSTATE,state);}},{key:\"playbackDvrStateChanged\",value:function playbackDvrStateChanged(dvrInUse){this.settings = this.playback.settings;this.dvrInUse = dvrInUse;this.trigger(Events.CONTAINER_PLAYBACKDVRSTATECHANGED,dvrInUse);}},{key:\"updateBitrate\",value:function updateBitrate(newBitrate){this.trigger(Events.CONTAINER_BITRATE,newBitrate);}},{key:\"statsReport\",value:function statsReport(metrics){this.trigger(Events.CONTAINER_STATS_REPORT,metrics);}},{key:\"getPlaybackType\",value:function getPlaybackType(){return this.playback.getPlaybackType();} /**\n\t       * returns `true` if DVR is enable otherwise `false`.\n\t       * @method isDvrEnabled\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrEnabled\",value:function isDvrEnabled(){return !!this.playback.dvrEnabled;} /**\n\t       * returns `true` if DVR is in use otherwise `false`.\n\t       * @method isDvrInUse\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrInUse\",value:function isDvrInUse(){return !!this.dvrInUse;} /**\n\t       * destroys the container\n\t       * @method destroy\n\t       */},{key:\"destroy\",value:function destroy(){this.disableResizeObserver();this.trigger(Events.CONTAINER_DESTROYED,this,this.name);this.stopListening();this.plugins.forEach(function(plugin){return plugin.destroy();});this.$el.remove();}},{key:\"setStyle\",value:function setStyle(style){this.$el.css(style);}},{key:\"animate\",value:function animate(style,duration){return this.$el.animate(style,duration).promise();}},{key:\"ready\",value:function ready(){this.isReady = true;this.trigger(Events.CONTAINER_READY,this.name);}},{key:\"isPlaying\",value:function isPlaying(){return this.playback.isPlaying();}},{key:\"getStartTimeOffset\",value:function getStartTimeOffset(){return this.playback.getStartTimeOffset();}},{key:\"getCurrentTime\",value:function getCurrentTime(){return this.currentTime;}},{key:\"getDuration\",value:function getDuration(){return this.playback.getDuration();}},{key:\"error\",value:function error(_error){if(!this.isReady)this.ready();this.trigger(Events.CONTAINER_ERROR,_error,this.name);}},{key:\"loadedMetadata\",value:function loadedMetadata(metadata){this.trigger(Events.CONTAINER_LOADEDMETADATA,metadata);}},{key:\"timeUpdated\",value:function timeUpdated(timeProgress){this.currentTime = timeProgress.current;this.trigger(Events.CONTAINER_TIMEUPDATE,timeProgress,this.name);}},{key:\"onProgress\",value:function onProgress(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}this.trigger.apply(this,[Events.CONTAINER_PROGRESS].concat(args,[this.name]));}},{key:\"playing\",value:function playing(){this.trigger(Events.CONTAINER_PLAY,this.name);}},{key:\"paused\",value:function paused(){this.trigger(Events.CONTAINER_PAUSE,this.name);} /**\n\t       * plays the playback\n\t       * @method play\n\t       */},{key:\"play\",value:function play(){this.playback.play();} /**\n\t       * stops the playback\n\t       * @method stop\n\t       */},{key:\"stop\",value:function stop(){this.playback.stop();this.currentTime = 0;} /**\n\t       * pauses the playback\n\t       * @method pause\n\t       */},{key:\"pause\",value:function pause(){this.playback.pause();}},{key:\"onEnded\",value:function onEnded(){this.trigger(Events.CONTAINER_ENDED,this,this.name);this.currentTime = 0;}},{key:\"stopped\",value:function stopped(){this.trigger(Events.CONTAINER_STOP);}},{key:\"clicked\",value:function clicked(){var _this2=this;if(!this.options.chromeless || this.options.allowUserInteraction){ // The event is delayed because it can be canceled by a double-click event\n\t// An example of use is to prevent playback from pausing when switching to full screen\n\tthis.clickTimer = setTimeout(function(){_this2.clickTimer && _this2.trigger(Events.CONTAINER_CLICK,_this2,_this2.name);},this.clickDelay);}}},{key:\"cancelClicked\",value:function cancelClicked(){clearTimeout(this.clickTimer);this.clickTimer = null;}},{key:\"dblClicked\",value:function dblClicked(){if(!this.options.chromeless || this.options.allowUserInteraction){this.cancelClicked();this.trigger(Events.CONTAINER_DBLCLICK,this,this.name);}}},{key:\"dblTap\",value:function dblTap(evt){var _this3=this;if(!this.options.chromeless || this.options.allowUserInteraction){this.dblTapHandler.handle(evt,function(){_this3.cancelClicked();_this3.trigger(Events.CONTAINER_DBLCLICK,_this3,_this3.name);});}}},{key:\"onContextMenu\",value:function onContextMenu(event){if(!this.options.chromeless || this.options.allowUserInteraction)this.trigger(Events.CONTAINER_CONTEXTMENU,event,this.name);}},{key:\"seek\",value:function seek(time){this.playback.seek(time);}},{key:\"onSeek\",value:function onSeek(time){this.trigger(Events.CONTAINER_SEEK,time,this.name);}},{key:\"onSeeked\",value:function onSeeked(){this.trigger(Events.CONTAINER_SEEKED,this.name);}},{key:\"seekPercentage\",value:function seekPercentage(percentage){var duration=this.getDuration();if(percentage >= 0 && percentage <= 100){var time=duration * (percentage / 100);this.seek(time);}}},{key:\"setVolume\",value:function setVolume(value){this.volume = parseFloat(value);this.trigger(Events.CONTAINER_VOLUME,this.volume,this.name);this.playback.volume(this.volume);}},{key:\"fullscreen\",value:function fullscreen(){this.trigger(Events.CONTAINER_FULLSCREEN,this.name);}},{key:\"onBuffering\",value:function onBuffering(){this.trigger(Events.CONTAINER_STATE_BUFFERING,this.name);}},{key:\"bufferfull\",value:function bufferfull(){this.trigger(Events.CONTAINER_STATE_BUFFERFULL,this.name);} /**\n\t       * adds plugin to the container\n\t       * @method addPlugin\n\t       * @param {Object} plugin\n\t       */},{key:\"addPlugin\",value:function addPlugin(plugin){this.plugins.push(plugin);} /**\n\t       * checks if a plugin, given its name, exist\n\t       * @method hasPlugin\n\t       * @param {String} name\n\t       * @return {Boolean}\n\t       */},{key:\"hasPlugin\",value:function hasPlugin(name){return !!this.getPlugin(name);} /**\n\t       * get the plugin given its name\n\t       * @method getPlugin\n\t       * @param {String} name\n\t       */},{key:\"getPlugin\",value:function getPlugin(name){return this.plugins.filter(function(plugin){return plugin.name === name;})[0];}},{key:\"mouseEnter\",value:function mouseEnter(){if(!this.options.chromeless || this.options.allowUserInteraction)this.trigger(Events.CONTAINER_MOUSE_ENTER);}},{key:\"mouseLeave\",value:function mouseLeave(){if(!this.options.chromeless || this.options.allowUserInteraction)this.trigger(Events.CONTAINER_MOUSE_LEAVE);}},{key:\"settingsUpdate\",value:function settingsUpdate(){this.settings = this.playback.settings;this.trigger(Events.CONTAINER_SETTINGSUPDATE);}},{key:\"highDefinitionUpdate\",value:function highDefinitionUpdate(isHD){this.trigger(Events.CONTAINER_HIGHDEFINITIONUPDATE,isHD);}},{key:\"isHighDefinitionInUse\",value:function isHighDefinitionInUse(){return this.playback.isHighDefinitionInUse();}},{key:\"disableMediaControl\",value:function disableMediaControl(){if(!this.mediaControlDisabled){this.mediaControlDisabled = true;this.trigger(Events.CONTAINER_MEDIACONTROL_DISABLE);}}},{key:\"enableMediaControl\",value:function enableMediaControl(){if(this.mediaControlDisabled){this.mediaControlDisabled = false;this.trigger(Events.CONTAINER_MEDIACONTROL_ENABLE);}}},{key:\"updateStyle\",value:function updateStyle(){if(!this.options.chromeless || this.options.allowUserInteraction)this.$el.removeClass('chromeless');else this.$el.addClass('chromeless');}},{key:\"enableResizeObserver\",value:function enableResizeObserver(){var _this4=this;this.disableResizeObserver();this.resizeObserverInterval = setInterval(function(){return _this4.checkResize();},500);}},{key:\"disableResizeObserver\",value:function disableResizeObserver(){this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);}},{key:\"checkResize\",value:function checkResize(){var newSize={width:this.el.clientWidth,height:this.el.clientHeight};var _ref=this.currentSize || {},width=_ref.width,height=_ref.height;var isResize=height !== newSize.height || width !== newSize.width;if(isResize){this.currentSize = newSize;this.trigger(Events.CONTAINER_RESIZE,newSize);}} /**\n\t       * enables to configure the container after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       */},{key:\"configure\",value:function configure(options){this._options = zepto.extend(true,this._options,options);this.updateStyle();this.playback.configure(this.options);this.trigger(Events.CONTAINER_OPTIONS_CHANGE);}},{key:\"render\",value:function render(){var style=Styler.getStyleFor(css_248z.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.$el.append(this.playback.render().el);this.updateStyle();this.checkResize();this.enableResizeObserver();return this;}}]);return Container;})(UIObject);Object.assign(Container.prototype,ErrorMixin); /**\n\t   * An abstraction to represent a generic playback, it's like an interface to be implemented by subclasses.\n\t   * @class Playback\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module base\n\t   */var Playback= /*#__PURE__*/(function(_UIObject){_inherits(Playback,_UIObject);var _super=_createSuper(Playback);_createClass(Playback,[{key:\"isAudioOnly\", /**\n\t      * Determine if the playback does not contain video/has video but video should be ignored.\n\t      * @property isAudioOnly\n\t      * @type Boolean\n\t      */get:function get(){return false;}},{key:\"isAdaptive\",get:function get(){return false;} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return false;} /**\n\t       * The internationalization plugin.\n\t       * @property i18n\n\t       * @type {Strings}\n\t       */},{key:\"i18n\",get:function get(){return this._i18n;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * (i.e if a live stream is playing smoothly, this will be false)\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return false;} /**\n\t       * @method constructor\n\t       * @param {Object} options the options object\n\t       * @param {Strings} i18n the internationalization component\n\t       */}]);function Playback(options,i18n,playerError){var _this;_classCallCheck(this,Playback);_this = _super.call(this,options);_this.settings = {};_this._i18n = i18n;_this.playerError = playerError;_this._consented = false;return _this;} /**\n\t     * Gives user consent to playback (mobile devices).\n\t     * @method consent\n\t     * @param {Function} callback function called when playback is consented\n\t     */_createClass(Playback,[{key:\"consent\",value:function consent(cb){typeof cb === 'function' && cb();} /**\n\t       * plays the playback.\n\t       * @method play\n\t       */},{key:\"play\",value:function play(){} /**\n\t       * pauses the playback.\n\t       * @method pause\n\t       */},{key:\"pause\",value:function pause(){} /**\n\t       * stops the playback.\n\t       * @method stop\n\t       */},{key:\"stop\",value:function stop(){} /**\n\t       * seeks the playback to a given `time` in seconds\n\t       * @method seek\n\t       * @param {Number} time should be a number between 0 and the video duration\n\t       */},{key:\"seek\",value:function seek(time){} // eslint-disable-line no-unused-vars\n\t/**\n\t       * seeks the playback to a given `percentage` in percentage\n\t       * @method seekPercentage\n\t       * @param {Number} time should be a number between 0 and 100\n\t       */},{key:\"seekPercentage\",value:function seekPercentage(percentage){} // eslint-disable-line no-unused-vars\n\t/**\n\t       * The time that \"0\" now represents relative to when playback started.\n\t       * For a stream with a sliding window this will increase as content is\n\t       * removed from the beginning.\n\t       * @method getStartTimeOffset\n\t       * @return {Number} time (in seconds) that time \"0\" represents.\n\t       */},{key:\"getStartTimeOffset\",value:function getStartTimeOffset(){return 0;} /**\n\t       * gets the duration in seconds\n\t       * @method getDuration\n\t       * @return {Number} duration (in seconds) of the current source\n\t       */},{key:\"getDuration\",value:function getDuration(){return 0;} /**\n\t       * checks if the playback is playing.\n\t       * @method isPlaying\n\t       * @return {Boolean} `true` if the current playback is playing, otherwise `false`\n\t       */},{key:\"isPlaying\",value:function isPlaying(){return false;} /**\n\t       * checks if the playback is ready.\n\t       * @property isReady\n\t       * @type {Boolean} `true` if the current playback is ready, otherwise `false`\n\t       */},{key:\"getPlaybackType\", // eslint-disable-line no-unused-vars\n\t/**\n\t       * gets the playback type (`'vod', 'live', 'aod'`)\n\t       * @method getPlaybackType\n\t       * @return {String} you should write the playback type otherwise it'll assume `'no_op'`\n\t       * @example\n\t       * ```javascript\n\t       * html5VideoPlayback.getPlaybackType() //vod\n\t       * html5AudioPlayback.getPlaybackType() //aod\n\t       * html5VideoPlayback.getPlaybackType() //live\n\t       * flashHlsPlayback.getPlaybackType() //live\n\t       * ```\n\t       */value:function getPlaybackType(){return Playback.NO_OP;} /**\n\t       * checks if the playback is in HD.\n\t       * @method isHighDefinitionInUse\n\t       * @return {Boolean} `true` if the playback is playing in HD, otherwise `false`\n\t       */},{key:\"isHighDefinitionInUse\",value:function isHighDefinitionInUse(){return false;} /**\n\t       * mutes the playback\n\t       * @method mute\n\t       */},{key:\"mute\",value:function mute(){} /**\n\t       * restores the playback volume\n\t       * @method unmute\n\t       */},{key:\"unmute\",value:function unmute(){} /**\n\t       * sets the volume for the playback\n\t       * @method volume\n\t       * @param {Number} value a number between 0 (`muted`) to 100 (`max`)\n\t       */},{key:\"volume\",value:function volume(value){} // eslint-disable-line no-unused-vars\n\t/**\n\t       * enables to configure the playback after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       */},{key:\"configure\",value:function configure(options){this._options = zepto.extend(true,this._options,options);} /**\n\t       * attempt to autoplays the playback.\n\t       * @method attemptAutoPlay\n\t       */},{key:\"attemptAutoPlay\",value:function attemptAutoPlay(){var _this2=this;this.canAutoPlay(function(result,error){ // eslint-disable-line no-unused-vars\n\tresult && _this2.play();});} /**\n\t       * checks if the playback can autoplay.\n\t       * @method canAutoPlay\n\t       * @param {Function} callback function where first param is Boolean and second param is playback Error or null\n\t       */},{key:\"canAutoPlay\",value:function canAutoPlay(cb){cb(true,null); // Assume playback can autoplay by default\n\t}},{key:\"isReady\",get:function get(){return false;} /**\n\t       * checks if the playback has closed caption tracks.\n\t       * @property hasClosedCaptionsTracks\n\t       * @type {Boolean}\n\t       */},{key:\"hasClosedCaptionsTracks\",get:function get(){return this.closedCaptionsTracks.length > 0;} /**\n\t       * gets the playback available closed caption tracks.\n\t       * @property closedCaptionsTracks\n\t       * @type {Array} an array of objects with at least 'id' and 'name' properties\n\t       */},{key:\"closedCaptionsTracks\",get:function get(){return [];} /**\n\t       * gets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */},{key:\"closedCaptionsTrackId\",get:function get(){return -1;}, /**\n\t       * sets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */set:function set(trackId){}}]);return Playback;})(UIObject);Object.assign(Playback.prototype,ErrorMixin);Playback.extend = function(properties){return extend(Playback,properties);}; /**\n\t   * checks if the playback can play a given `source`\n\t   * If a mimeType is provided then this will be used instead of inferring the mimetype\n\t   * from the source extension.\n\t   * @method canPlay\n\t   * @static\n\t   * @param {String} source the given source ex: `http://example.com/play.mp4`\n\t   * @param {String} [mimeType] the given mime type, ex: `'application/vnd.apple.mpegurl'`\n\t   * @return {Boolean} `true` if the playback is playable, otherwise `false`\n\t   */Playback.canPlay = function(source,mimeType){ // eslint-disable-line no-unused-vars\n\treturn false;}; /**\n\t   * a playback type for video on demand\n\t   *\n\t   * @property VOD\n\t   * @static\n\t   * @type String\n\t   */Playback.VOD = 'vod'; /**\n\t   * a playback type for audio on demand\n\t   *\n\t   * @property AOD\n\t   * @static\n\t   * @type String\n\t   */Playback.AOD = 'aod'; /**\n\t   * a playback type for live video\n\t   *\n\t   * @property LIVE\n\t   * @static\n\t   * @type String\n\t   */Playback.LIVE = 'live'; /**\n\t   * a default playback type\n\t   *\n\t   * @property NO_OP\n\t   * @static\n\t   * @type String\n\t   */Playback.NO_OP = 'no_op'; /**\n\t   * the plugin type\n\t   *\n\t   * @property type\n\t   * @static\n\t   * @type String\n\t   */Playback.type = 'playback';var ContainerFactory= /*#__PURE__*/(function(_BaseObject){_inherits(ContainerFactory,_BaseObject);var _super=_createSuper(ContainerFactory);_createClass(ContainerFactory,[{key:\"options\",get:function get(){return this._options;},set:function set(options){this._options = options;}}]);function ContainerFactory(options,loader,i18n,playerError){var _this;_classCallCheck(this,ContainerFactory);_this = _super.call(this,options);_this._i18n = i18n;_this.loader = loader;_this.playerError = playerError;return _this;}_createClass(ContainerFactory,[{key:\"createContainers\",value:function createContainers(){var _this2=this;return zepto.Deferred(function(promise){promise.resolve(_this2.options.sources.map(function(source){return _this2.createContainer(source);}));});}},{key:\"findPlaybackPlugin\",value:function findPlaybackPlugin(source,mimeType){return this.loader.playbackPlugins.filter(function(p){return p.canPlay(source,mimeType);})[0];}},{key:\"createContainer\",value:function createContainer(source){var resolvedSource=null;var mimeType=this.options.mimeType;if(_typeof(source) === 'object'){resolvedSource = source.source.toString();if(source.mimeType)mimeType = source.mimeType;}else {resolvedSource = source.toString();}if(resolvedSource.match(/^\\/\\//))resolvedSource = window.location.protocol + resolvedSource;var options=_objectSpread2(_objectSpread2({},this.options),{},{src:resolvedSource,mimeType:mimeType});var playbackPlugin=this.findPlaybackPlugin(resolvedSource,mimeType); // Fallback to empty playback object until we sort out unsupported sources error without NoOp playback\n\tvar playback=playbackPlugin?new playbackPlugin(options,this._i18n,this.playerError):new Playback();options = _objectSpread2(_objectSpread2({},options),{},{playback:playback});var container=new Container(options,this._i18n,this.playerError);var defer=zepto.Deferred();defer.promise(container);this.addContainerPlugins(container);this.listenToOnce(container,Events.CONTAINER_READY,function(){return defer.resolve(container);});return container;}},{key:\"addContainerPlugins\",value:function addContainerPlugins(container){this.loader.containerPlugins.forEach(function(Plugin){container.addPlugin(new Plugin(container));});}}]);return ContainerFactory;})(BaseObject);var css_248z$1=\"[data-player] {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  -o-user-select: none;\\n  user-select: none;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  transform: translate3d(0, 0, 0);\\n  position: relative;\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-style: normal;\\n  font-weight: normal;\\n  text-align: center;\\n  overflow: hidden;\\n  font-size: 100%;\\n  font-family: \\\"Roboto\\\", \\\"Open Sans\\\", Arial, sans-serif;\\n  text-shadow: 0 0 0;\\n  box-sizing: border-box; }\\n  [data-player]:focus {\\n    outline: 0; }\\n  [data-player] * {\\n    box-sizing: inherit; }\\n  [data-player] > * {\\n    float: none;\\n    max-width: none; }\\n  [data-player] > div {\\n    display: block; }\\n  [data-player].fullscreen {\\n    width: 100% !important;\\n    height: 100% !important;\\n    top: 0;\\n    left: 0; }\\n  [data-player].nocursor {\\n    cursor: none; }\\n\\n.clappr-style {\\n  display: none !important; }\\n\";var css_248z$2=\"[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font: inherit;\\n  font-size: 100%;\\n  vertical-align: baseline; }\\n\\n[data-player] table {\\n  border-collapse: collapse;\\n  border-spacing: 0; }\\n\\n[data-player] caption, [data-player] th, [data-player] td {\\n  text-align: left;\\n  font-weight: normal;\\n  vertical-align: middle; }\\n\\n[data-player] q, [data-player] blockquote {\\n  quotes: none; }\\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\\n    content: \\\"\\\";\\n    content: none; }\\n\\n[data-player] a img {\\n  border: none; }\\n\"; /**\n\t   * The Core is responsible to manage Containers and the player state.\n\t   * @class Core\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module components\n\t   */var Core= /*#__PURE__*/(function(_UIObject){_inherits(Core,_UIObject);var _super=_createSuper(Core);_createClass(Core,[{key:\"events\",get:function get(){return {'webkitfullscreenchange':'handleFullscreenChange','mousemove':'onMouseMove','mouseleave':'onMouseLeave'};}},{key:\"attributes\",get:function get(){return {'data-player':'',tabindex:9999};} /**\n\t       * checks if the core is ready.\n\t       * @property isReady\n\t       * @type {Boolean} `true` if the core is ready, otherwise `false`\n\t       */},{key:\"isReady\",get:function get(){return !!this.ready;} /**\n\t       * The internationalization plugin.\n\t       * @property i18n\n\t       * @type {Strings}\n\t       */},{key:\"i18n\",get:function get(){return this.getPlugin('strings') || {t:function t(key){return key;}};} /**\n\t       * @deprecated\n\t       * This property currently exists for backward compatibility reasons.\n\t       * If you need to access the media control instance, use the method getPlugin('media_control').\n\t       * This approach is still not recommended.\n\t       */},{key:\"mediaControl\",get:function get(){return this._mediaControl || (this._mediaControl = this.getPlugin('media_control')) || this.dummyMediaControl;}},{key:\"dummyMediaControl\",get:function get(){if(this._dummyMediaControl)return this._dummyMediaControl;this._dummyMediaControl = new UICorePlugin(this);return this._dummyMediaControl;} /**\n\t       * gets the active container reference.\n\t       * @property activeContainer\n\t       * @type {Object}\n\t       */},{key:\"activeContainer\",get:function get(){return this._activeContainer;}, /**\n\t       * sets the active container reference and trigger a event with the new reference.\n\t       * @property activeContainer\n\t       * @type {Object}\n\t       */set:function set(container){this._activeContainer = container;this.trigger(Events.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer);} /**\n\t       * gets the active playback reference.\n\t       * @property activePlayback\n\t       * @type {Object}\n\t       */},{key:\"activePlayback\",get:function get(){return this.activeContainer && this.activeContainer.playback;}}]);function Core(options){var _this;_classCallCheck(this,Core);_this = _super.call(this,options);_this.playerError = new PlayerError(options,_assertThisInitialized(_this));_this.configureDomRecycler();_this.firstResize = true;_this.plugins = [];_this.containers = []; //FIXME fullscreen api sucks\n\t_this._boundFullscreenHandler = function(){return _this.handleFullscreenChange();};zepto(document).bind('fullscreenchange',_this._boundFullscreenHandler);zepto(document).bind('MSFullscreenChange',_this._boundFullscreenHandler);zepto(document).bind('mozfullscreenchange',_this._boundFullscreenHandler);Browser.isMobile && zepto(window).bind('resize',function(o){_this.handleWindowResize(o);});return _this;}_createClass(Core,[{key:\"configureDomRecycler\",value:function configureDomRecycler(){var recycleVideo=this.options && this.options.playback && this.options.playback.recycleVideo;DomRecycler.configure({recycleVideo:recycleVideo});}},{key:\"createContainers\",value:function createContainers(options){this.defer = zepto.Deferred();this.defer.promise(this);this.containerFactory = new ContainerFactory(options,options.loader,this.i18n,this.playerError);this.prepareContainers();}},{key:\"prepareContainers\",value:function prepareContainers(){var _this2=this;this.containerFactory.createContainers().then(function(containers){return _this2.setupContainers(containers);}).then(function(containers){return _this2.resolveOnContainersReady(containers);});}},{key:\"updateSize\",value:function updateSize(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize();}},{key:\"setFullscreen\",value:function setFullscreen(){if(!Browser.isiOS){this.$el.addClass('fullscreen');this.$el.removeAttr('style');this.previousSize = {width:this.options.width,height:this.options.height};this.currentSize = {width:zepto(window).width(),height:zepto(window).height()};}}},{key:\"setPlayerSize\",value:function setPlayerSize(){this.$el.removeClass('fullscreen');this.currentSize = this.previousSize;this.previousSize = {width:zepto(window).width(),height:zepto(window).height()};this.resize(this.currentSize);}},{key:\"resize\",value:function resize(options){if(!isNumber(options.height) && !isNumber(options.width)){this.el.style.height = \"\".concat(options.height);this.el.style.width = \"\".concat(options.width);}else {this.el.style.height = \"\".concat(options.height,\"px\");this.el.style.width = \"\".concat(options.width,\"px\");}this.previousSize = {width:this.options.width,height:this.options.height};this.options.width = options.width;this.options.height = options.height;this.currentSize = options;this.triggerResize(this.currentSize);}},{key:\"enableResizeObserver\",value:function enableResizeObserver(){var _this3=this;this.disableResizeObserver();var checkSizeCallback=function checkSizeCallback(){_this3.triggerResize({width:_this3.el.clientWidth,height:_this3.el.clientHeight});};this.resizeObserverInterval = setInterval(checkSizeCallback,500);}},{key:\"triggerResize\",value:function triggerResize(newSize){var thereWasChange=this.firstResize || this.oldHeight !== newSize.height || this.oldWidth !== newSize.width;if(thereWasChange){this.oldHeight = newSize.height;this.oldWidth = newSize.width;this.computedSize = newSize;this.firstResize = false;this.trigger(Events.CORE_RESIZE,newSize);}}},{key:\"disableResizeObserver\",value:function disableResizeObserver(){this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);this.resizeObserverInterval = null;}},{key:\"resolveOnContainersReady\",value:function resolveOnContainersReady(containers){var _this4=this;zepto.when.apply(zepto,containers).done(function(){_this4.defer.resolve(_this4);_this4.ready = true;_this4.trigger(Events.CORE_READY);});}},{key:\"addPlugin\",value:function addPlugin(plugin){this.plugins.push(plugin);}},{key:\"hasPlugin\",value:function hasPlugin(name){return !!this.getPlugin(name);}},{key:\"getPlugin\",value:function getPlugin(name){return this.plugins.filter(function(plugin){return plugin.name === name;})[0];}},{key:\"load\",value:function load(sources,mimeType){this.options.mimeType = mimeType;sources = sources && sources.constructor === Array?sources:[sources];this.options.sources = sources;this.containers.forEach(function(container){return container.destroy();});this.containerFactory.options = zepto.extend(true,this.options,{sources:sources});this.prepareContainers();}},{key:\"destroy\",value:function destroy(){this.disableResizeObserver();this.containers.forEach(function(container){return container.destroy();});this.plugins.forEach(function(plugin){return plugin.destroy();});this.$el.remove();zepto(document).unbind('fullscreenchange',this._boundFullscreenHandler);zepto(document).unbind('MSFullscreenChange',this._boundFullscreenHandler);zepto(document).unbind('mozfullscreenchange',this._boundFullscreenHandler);this.stopListening();}},{key:\"handleFullscreenChange\",value:function handleFullscreenChange(){this.trigger(Events.CORE_FULLSCREEN,this.isFullscreen());this.updateSize();}},{key:\"handleWindowResize\",value:function handleWindowResize(event){var orientation=window.innerWidth > window.innerHeight?'landscape':'portrait';if(this._screenOrientation === orientation)return;this._screenOrientation = orientation;this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight});this.trigger(Events.CORE_SCREEN_ORIENTATION_CHANGED,{event:event,orientation:this._screenOrientation});}},{key:\"removeContainer\",value:function removeContainer(container){this.stopListening(container);this.containers = this.containers.filter(function(c){return c !== container;});}},{key:\"setupContainer\",value:function setupContainer(container){this.listenTo(container,Events.CONTAINER_DESTROYED,this.removeContainer);this.containers.push(container);}},{key:\"setupContainers\",value:function setupContainers(containers){containers.forEach(this.setupContainer.bind(this));this.trigger(Events.CORE_CONTAINERS_CREATED);this.renderContainers();this.activeContainer = containers[0];this.render();this.appendToParent();return this.containers;}},{key:\"renderContainers\",value:function renderContainers(){var _this5=this;this.containers.forEach(function(container){return _this5.el.appendChild(container.render().el);});}},{key:\"createContainer\",value:function createContainer(source,options){var container=this.containerFactory.createContainer(source,options);this.setupContainer(container);this.el.appendChild(container.render().el);return container;} /**\n\t       * @deprecated\n\t       * This method currently exists for retrocompatibility reasons.\n\t       * If you want the current container reference, use the activeContainer getter.\n\t       */},{key:\"getCurrentContainer\",value:function getCurrentContainer(){return this.activeContainer;} /**\n\t       * @deprecated\n\t       * This method currently exists for retrocompatibility reasons.\n\t       * If you want the current playback reference, use the activePlayback getter.\n\t       */},{key:\"getCurrentPlayback\",value:function getCurrentPlayback(){return this.activePlayback;}},{key:\"getPlaybackType\",value:function getPlaybackType(){return this.activeContainer && this.activeContainer.getPlaybackType();}},{key:\"isFullscreen\",value:function isFullscreen(){ // Ensure current instance is in fullscreen mode by checking fullscreen element\n\tvar fullscreenElement=Fullscreen.fullscreenElement();if(!fullscreenElement)return false;var playbackEl=this.activePlayback && this.activePlayback.el;return fullscreenElement === this.el || fullscreenElement === playbackEl;}},{key:\"toggleFullscreen\",value:function toggleFullscreen(){var _this6=this;if(this.isFullscreen()){Fullscreen.cancelFullscreen();!Browser.isiOS && this.$el.removeClass('fullscreen nocursor');}else {var fullscreenEl=Browser.isiOS?this.activePlayback && this.activePlayback.el:this.el;if(!fullscreenEl)return;Browser.isSafari || Browser.isiOS? // Safari doesn't return a promise like the other browsers. See more in https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullScreen\n\tFullscreen.requestFullscreen(fullscreenEl):Fullscreen.requestFullscreen(fullscreenEl).then(function(_){return _;},function(error){return setTimeout(function(){ // fixes the issue https://github.com/clappr/clappr/issues/1860\n\tif(!_this6.isFullscreen())throw new ReferenceError(error);},600);});!Browser.isiOS && this.$el.addClass('fullscreen');}}},{key:\"onMouseMove\",value:function onMouseMove(event){this.trigger(Events.CORE_MOUSE_MOVE,event);}},{key:\"onMouseLeave\",value:function onMouseLeave(event){this.trigger(Events.CORE_MOUSE_LEAVE,event);} /**\n\t       * enables to configure the container after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       */},{key:\"configure\",value:function configure(options){var _this7=this;this._options = zepto.extend(true,this._options,options);this.configureDomRecycler();var sources=options.source || options.sources;sources && this.load(sources,options.mimeType || this.options.mimeType);this.trigger(Events.CORE_OPTIONS_CHANGE,options); // Trigger with newly provided options\n\tthis.containers.forEach(function(container){return container.configure(_this7.options);});}},{key:\"appendToParent\",value:function appendToParent(){var style=Styler.getStyleFor(css_248z$1.toString(),{baseUrl:this.options.baseUrl});var resetStyle=Styler.getStyleFor(css_248z$2.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.options.includeResetStyle && this.$el.append(resetStyle[0]);var hasCoreParent=this.$el.parent() && this.$el.parent().length;!hasCoreParent && this.$el.appendTo(this.options.parentElement);}},{key:\"render\",value:function render(){this.options.width = this.options.width || this.$el.width();this.options.height = this.options.height || this.$el.height();var size={width:this.options.width,height:this.options.height};this.previousSize = this.currentSize = this.computedSize = size;this.updateSize();this.enableResizeObserver();return this;}}]);return Core;})(UIObject);Object.assign(Core.prototype,ErrorMixin); /**\n\t   * The Core Factory is responsible for instantiate the core and it's plugins.\n\t   * @class CoreFactory\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   */var CoreFactory= /*#__PURE__*/(function(_BaseObject){_inherits(CoreFactory,_BaseObject);var _super=_createSuper(CoreFactory);_createClass(CoreFactory,[{key:\"loader\",get:function get(){return this.player.loader;} /**\n\t       * it builds the core factory\n\t       * @method constructor\n\t       * @param {Player} player the player object\n\t       */}]);function CoreFactory(player){var _this;_classCallCheck(this,CoreFactory);_this = _super.call(this,player.options);_this.player = player;return _this;} /**\n\t     * creates a core and its plugins\n\t     * @method create\n\t     * @return {Core} created core\n\t     */_createClass(CoreFactory,[{key:\"create\",value:function create(){this.options.loader = this.loader;this.core = new Core(this.options);this.addCorePlugins();this.core.createContainers(this.options);return this.core;} /**\n\t       * given the core plugins (`loader.corePlugins`) it builds each one\n\t       * @method addCorePlugins\n\t       * @return {Core} the core with all plugins\n\t       */},{key:\"addCorePlugins\",value:function addCorePlugins(){var _this2=this;this.loader.corePlugins.forEach(function(Plugin){var plugin=new Plugin(_this2.core);_this2.core.addPlugin(plugin);_this2.setupExternalInterface(plugin);});return this.core;}},{key:\"setupExternalInterface\",value:function setupExternalInterface(plugin){var externalFunctions=plugin.getExternalInterface();for(var key in externalFunctions) {this.player[key] = externalFunctions[key].bind(plugin);}}}]);return CoreFactory;})(BaseObject);var VERSION_REGEX=/(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?/;var Version= /*#__PURE__*/(function(){_createClass(Version,null,[{key:\"parse\",value:function parse(){var str=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:'';var matches=str.match(VERSION_REGEX) || [];var _matches=_slicedToArray(matches,4),major=_matches[1],minor=_matches[2],patch=_matches[3];if(typeof major === 'undefined')return null;return new Version(major,minor,patch);}}]);function Version(major,minor,patch){_classCallCheck(this,Version);this.major = parseInt(major || 0,10);this.minor = parseInt(minor || 0,10);this.patch = parseInt(patch || 0,10);}_createClass(Version,[{key:\"compare\",value:function compare(other){var diff=this.major - other.major;diff = diff || this.minor - other.minor;diff = diff || this.patch - other.patch;return diff;}},{key:\"inc\",value:function inc(){var type=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:'patch';typeof this[type] !== 'undefined' && (this[type] += 1);return this;}},{key:\"satisfies\",value:function satisfies(min,max){return this.compare(min) >= 0 && (!max || this.compare(max) < 0);}},{key:\"toString\",value:function toString(){return \"\".concat(this.major,\".\").concat(this.minor,\".\").concat(this.patch);}}]);return Version;})();var filterPluginsByType=function filterPluginsByType(plugins,type){if(!plugins || !type)return {};return Object.entries(plugins).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),value=_ref2[1];return value.type === type;}).reduce(function(obj,_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return obj[key] = value,obj;},{});}; /**\n\t   * It keeps a list of the default plugins (playback, container, core) and it merges external plugins with its internals.\n\t   * @class Loader\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   */var Loader=(function(){var registry={plugins:{},playbacks:[]};var currentVersion=\"0.4.17\";return  (/*#__PURE__*/(function(){_createClass(Loader,null,[{key:\"checkVersionSupport\",value:function checkVersionSupport(entry){var _entry$prototype=entry.prototype,supportedVersion=_entry$prototype.supportedVersion,name=_entry$prototype.name;if(!supportedVersion || !supportedVersion.min){Log.warn('Loader',\"missing version information for \".concat(name));return false;}var maxVersion=supportedVersion.max?Version.parse(supportedVersion.max):Version.parse(supportedVersion.min).inc('minor');var minVersion=Version.parse(supportedVersion.min);if(!Version.parse(currentVersion).satisfies(minVersion,maxVersion)){Log.warn('Loader',\"unsupported plugin \".concat(name,\": Clappr version \").concat(currentVersion,\" does not match required range [\").concat(minVersion,\",\").concat(maxVersion,\")\"));return false;}return true;}},{key:\"registerPlugin\",value:function registerPlugin(pluginEntry){if(!pluginEntry || !pluginEntry.prototype.name){Log.warn('Loader',\"missing information to register plugin: \".concat(pluginEntry));return false;}Loader.checkVersionSupport(pluginEntry);var pluginRegistry=registry.plugins;if(!pluginRegistry)return false;var previousEntry=pluginRegistry[pluginEntry.prototype.name];if(previousEntry)Log.warn('Loader',\"overriding plugin entry: \".concat(pluginEntry.prototype.name,\" - \").concat(previousEntry));pluginRegistry[pluginEntry.prototype.name] = pluginEntry;return true;}},{key:\"registerPlayback\",value:function registerPlayback(playbackEntry){if(!playbackEntry || !playbackEntry.prototype.name)return false;Loader.checkVersionSupport(playbackEntry);var playbacks=registry.playbacks;var previousEntryIdx=playbacks.findIndex(function(entry){return entry.prototype.name === playbackEntry.prototype.name;});if(previousEntryIdx >= 0){var previousEntry=playbacks[previousEntryIdx];playbacks.splice(previousEntryIdx,1);Log.warn('Loader',\"overriding playback entry: \".concat(previousEntry.name,\" - \").concat(previousEntry));}registry.playbacks = [playbackEntry].concat(_toConsumableArray(playbacks));return true;}},{key:\"unregisterPlugin\",value:function unregisterPlugin(name){if(!name)return false;var plugins=registry.plugins;var plugin=plugins[name];if(!plugin)return false;delete plugins[name];return true;}},{key:\"unregisterPlayback\",value:function unregisterPlayback(name){if(!name)return false;var playbacks=registry.playbacks;var index=playbacks.findIndex(function(entry){return entry.prototype.name === name;});if(index < 0)return false;playbacks.splice(index,1);registry.playbacks = playbacks;return true;}},{key:\"clearPlugins\",value:function clearPlugins(){registry.plugins = {};}},{key:\"clearPlaybacks\",value:function clearPlaybacks(){registry.playbacks = [];} /**\n\t         * builds the loader\n\t         * @method constructor\n\t         * @param {Object} externalPlugins the external plugins\n\t         * @param {Number} playerId you can embed multiple instances of clappr, therefore this is the unique id of each one.\n\t         */},{key:\"registeredPlaybacks\",get:function get(){return _toConsumableArray(registry.playbacks);}},{key:\"registeredPlugins\",get:function get(){var plugins=registry.plugins;var core=filterPluginsByType(plugins,'core');var container=filterPluginsByType(plugins,'container');return {core:core,container:container};}}]);function Loader(){var externalPlugins=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:[];var playerId=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:0;_classCallCheck(this,Loader);this.playerId = playerId;this.playbackPlugins = _toConsumableArray(registry.playbacks);var _Loader$registeredPlu=Loader.registeredPlugins,core=_Loader$registeredPlu.core,container=_Loader$registeredPlu.container;this.containerPlugins = Object.values(container);this.corePlugins = Object.values(core);if(!Array.isArray(externalPlugins))this.validateExternalPluginsType(externalPlugins);this.addExternalPlugins(externalPlugins);} /**\n\t       * groups by type the external plugins that were passed through `options.plugins` it they're on a flat array\n\t       * @method addExternalPlugins\n\t       * @private\n\t       * @param {Object} an config object or an array of plugins\n\t       * @return {Object} plugins the config object with the plugins separated by type\n\t       */_createClass(Loader,[{key:\"groupPluginsByType\",value:function groupPluginsByType(plugins){if(Array.isArray(plugins)){plugins = plugins.reduce(function(memo,plugin){memo[plugin.type] || (memo[plugin.type] = []);memo[plugin.type].push(plugin);return memo;},{});}return plugins;}},{key:\"removeDups\",value:function removeDups(list){var useReversePrecedence=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:false;var groupUp=function groupUp(plugins,plugin){if(plugins[plugin.prototype.name] && useReversePrecedence)return plugins;plugins[plugin.prototype.name] && delete plugins[plugin.prototype.name];plugins[plugin.prototype.name] = plugin;return plugins;};var pluginsMap=list.reduceRight(groupUp,Object.create(null));var plugins=[];for(var key in pluginsMap) {plugins.unshift(pluginsMap[key]);}return plugins;} /**\n\t         * adds all the external plugins that were passed through `options.plugins`\n\t         * @method addExternalPlugins\n\t         * @private\n\t         * @param {Object} plugins the config object with all plugins\n\t         */},{key:\"addExternalPlugins\",value:function addExternalPlugins(plugins){var loadExternalPluginsFirst=typeof plugins.loadExternalPluginsFirst === 'boolean'?plugins.loadExternalPluginsFirst:true;var loadExternalPlaybacksFirst=typeof plugins.loadExternalPlaybacksFirst === 'boolean'?plugins.loadExternalPlaybacksFirst:true;plugins = this.groupPluginsByType(plugins);if(plugins.playback){var playbacks=plugins.playback.filter(function(playback){return Loader.checkVersionSupport(playback),true;});this.playbackPlugins = loadExternalPlaybacksFirst?this.removeDups(playbacks.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(playbacks),true);}if(plugins.container){var containerPlugins=plugins.container.filter(function(plugin){return Loader.checkVersionSupport(plugin),true;});this.containerPlugins = loadExternalPluginsFirst?this.removeDups(containerPlugins.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(containerPlugins),true);}if(plugins.core){var corePlugins=plugins.core.filter(function(plugin){return Loader.checkVersionSupport(plugin),true;});this.corePlugins = loadExternalPluginsFirst?this.removeDups(corePlugins.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(corePlugins),true);}} /**\n\t         * validate if the external plugins that were passed through `options.plugins` are associated to the correct type\n\t         * @method validateExternalPluginsType\n\t         * @private\n\t         * @param {Object} plugins the config object with all plugins\n\t         */},{key:\"validateExternalPluginsType\",value:function validateExternalPluginsType(plugins){var pluginTypes=['playback','container','core'];pluginTypes.forEach(function(type){(plugins[type] || []).forEach(function(el){var errorMessage='external ' + el.type + ' plugin on ' + type + ' array';if(el.type !== type)throw new ReferenceError(errorMessage);});});}}]);return Loader;})());})();var baseUrl=currentScriptUrl().replace(/\\/[^/]+$/,''); /**\n\t   * @class Player\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   * @example\n\t   * ### Using the Player\n\t   *\n\t   * Add the following script on your HTML:\n\t   * ```html\n\t   * <head>\n\t   *   <script type=\"text/javascript\" src=\"http://cdn.clappr.io/latest/clappr.min.js\"></script>\n\t   * </head>\n\t   * ```\n\t   * Now, create the player:\n\t   * ```html\n\t   * <body>\n\t   *   <div id=\"player\"></div>\n\t   *   <script>\n\t   *     var player = new Clappr.Player({source: \"http://your.video/here.mp4\", parentId: \"#player\"});\n\t   *   </script>\n\t   * </body>\n\t   * ```\n\t   */var Player= /*#__PURE__*/(function(_BaseObject){_inherits(Player,_BaseObject);var _super=_createSuper(Player);_createClass(Player,[{key:\"loader\",set:function set(loader){this._loader = loader;},get:function get(){if(!this._loader)this._loader = new Loader(this.options.plugins || {},this.options.playerId);return this._loader;} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return this.core.activeContainer.ended;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * (i.e if a live stream is playing smoothly, this will be false)\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return this.core.activeContainer.buffering;} /*\n\t       * determine if the player is ready.\n\t       * @property isReady\n\t       * @type {Boolean} `true` if the player is ready. ie PLAYER_READY event has fired\n\t       */},{key:\"isReady\",get:function get(){return !!this._ready;} /**\n\t       * An events map that allows the user to add custom callbacks in player's options.\n\t       * @property eventsMapping\n\t       * @type {Object}\n\t       */},{key:\"eventsMapping\",get:function get(){return {onReady:Events.PLAYER_READY,onResize:Events.PLAYER_RESIZE,onPlay:Events.PLAYER_PLAY,onPause:Events.PLAYER_PAUSE,onStop:Events.PLAYER_STOP,onEnded:Events.PLAYER_ENDED,onSeek:Events.PLAYER_SEEK,onError:Events.PLAYER_ERROR,onTimeUpdate:Events.PLAYER_TIMEUPDATE,onVolumeUpdate:Events.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:Events.PLAYER_SUBTITLE_AVAILABLE};} /**\n\t       * @typedef {Object} PlaybackConfig\n\t       * @prop {boolean} disableContextMenu\n\t       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n\t       * @prop {boolean} preload\n\t       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n\t       * @prop {boolean} controls\n\t       * enabled/disables displaying controls\n\t       * @prop {boolean} crossOrigin\n\t       * enables cross-origin capability for media-resources\n\t       * @prop {boolean} playInline\n\t       * enables in-line video elements\n\t       * @prop {boolean} audioOnly\n\t       * enforce audio-only playback (when possible)\n\t       * @prop {Object} externalTracks\n\t       * pass externaly loaded track to playback\n\t       * @prop {Number} [maxBufferLength]\n\t       * The default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n\t       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n\t       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n\t       * @prop {Number} [maxBackBufferLength]\n\t       * After how much distance of the playhead data should be pruned from the buffer (influences memory consumption\n\t       * of adaptive media-engines like Hls.js or Shaka)\n\t       * @prop {Number} [minBufferLength]\n\t       * After how much data in the buffer at least we attempt to consume it (influences QoS-related behavior\n\t       * of adaptive media-engines like Hls.js or Shaka). If this is too low, and the available bandwidth is varying a lot\n\t       * and too close to the streamed bitrate, we may continuously hit under-runs.\n\t       * @prop {Number} [initialBandwidthEstimate]\n\t       * define an initial bandwidth \"guess\" (or previously stored/established value) for underlying adaptive-bitreate engines\n\t       * of adaptive playback implementations, like Hls.js or Shaka\n\t       * @prop {Number} [maxAdaptiveBitrate]\n\t       * Limits the streamed bitrate (for adaptive media-engines in underlying playback implementations)\n\t       * @prop {Object} [maxAdaptiveVideoDimensions]\n\t       * Limits the video dimensions in adaptive media-engines. Should be a literal object with `height` and `width`.\n\t       * @prop {Boolean}[enableAutomaticABR] **default**: `true`\n\t       * Allows to enable/disable automatic bitrate switching in adaptive media-engines\n\t       * @prop {String} [preferredTextLanguage] **default**: `'pt-BR'`\n\t       * Allows to set a preferred text language, that may be enabled by the media-engine if available.\n\t       * @prop {String} [preferredAudioLanguage] **default**: `'pt-BR'`\n\t       * Allows to set a preferred audio language, that may be enabled by the media-engine if available.\n\t       */ /**\n\t       * ## Player's constructor\n\t       *\n\t       * You might pass the options object to build the player.\n\t       * ```javascript\n\t       * var options = {source: \"http://example.com/video.mp4\", param1: \"val1\"};\n\t       * var player = new Clappr.Player(options);\n\t       * ```\n\t       *\n\t       * @method constructor\n\t       * @param {Object} options Data\n\t       * options to build a player instance\n\t       * @param {Number} [options.width]\n\t       * player's width **default**: `640`\n\t       * @param {Number} [options.height]\n\t       * player's height **default**: `360`\n\t       * @param {String} [options.parentId]\n\t       * the id of the element on the page that the player should be inserted into\n\t       * @param {Object} [options.parent]\n\t       * a reference to a dom element that the player should be inserted into\n\t       * @param {String} [options.source]\n\t       * The media source URL, or {source: <<source URL>>, mimeType: <<source mime type>>}\n\t       * @param {Object} [options.sources]\n\t       * An array of media source URL's, or an array of {source: <<source URL>>, mimeType: <<source mime type>>}\n\t       * @param {Boolean} [options.autoPlay]\n\t       * automatically play after page load **default**: `false`\n\t       * @param {Boolean} [options.loop]\n\t       * automatically replay after it ends **default**: `false`\n\t       * @param {Boolean} [options.chromeless]\n\t       * player acts in chromeless mode **default**: `false`\n\t       * @param {Boolean} [options.allowUserInteraction]\n\t       * whether or not the player should handle click events when in chromeless mode **default**: `false` on desktops browsers, `true` on mobile.\n\t       * @param {Boolean} [options.disableKeyboardShortcuts]\n\t       * disable keyboard shortcuts. **default**: `false`. `true` if `allowUserInteraction` is `false`.\n\t       * @param {Boolean} [options.mute]\n\t       * start the video muted **default**: `false`\n\t       * @param {String} [options.mimeType]\n\t       * add `mimeType: \"application/vnd.apple.mpegurl\"` if you need to use a url without extension.\n\t       * @param {Boolean} [options.actualLiveTime]\n\t       * show duration and seek time relative to actual time.\n\t       * @param {String} [options.actualLiveServerTime]\n\t       * specify server time as a string, format: \"2015/11/26 06:01:03\". This option is meant to be used with actualLiveTime.\n\t       * @param {Boolean} [options.persistConfig]\n\t       * persist player's settings (volume) through the same domain **default**: `true`\n\t       * @param {String} [options.preload] @deprecated\n\t       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n\t       * @param {Number} [options.maxBufferLength] @deprecated\n\t       * the default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n\t       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n\t       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n\t       * @param {String} [options.gaAccount]\n\t       * enable Google Analytics events dispatch **(play/pause/stop/buffering/etc)** by adding your `gaAccount`\n\t       * @param {String} [options.gaTrackerName]\n\t       * besides `gaAccount` you can optionally, pass your favorite trackerName as `gaTrackerName`\n\t       * @param {Object} [options.mediacontrol]\n\t       * customize control bar colors, example: `mediacontrol: {seekbar: \"#E113D3\", buttons: \"#66B2FF\"}`\n\t       * @param {Boolean} [options.hideMediaControl]\n\t       * control media control auto hide **default**: `true`\n\t       * @param {Boolean} [options.hideVolumeBar]\n\t       * when embedded with width less than 320, volume bar will hide. You can force this behavior for all sizes by adding `true` **default**: `false`\n\t       * @param {String} [options.watermark]\n\t       * put `watermark: 'http://url/img.png'` on your embed parameters to automatically add watermark on your video.\n\t       * You can customize corner position by defining position parameter. Positions can be `bottom-left`, `bottom-right`, `top-left` and `top-right`.\n\t       * @param {String} [options.watermarkLink]\n\t       * `watermarkLink: 'http://example.net/'` - define URL to open when the watermark is clicked. If not provided watermark will not be clickable.\n\t       * @param {Boolean} [options.disableVideoTagContextMenu] @deprecated\n\t       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n\t       * @param {Boolean} [options.autoSeekFromUrl]\n\t       * Automatically seek to the seconds provided in the url (e.g example.com?t=100) **default**: `true`\n\t       * @param {Boolean} [options.exitFullscreenOnEnd]\n\t       * Automatically exit full screen when the media finishes. **default**: `true`\n\t       * @param {String} [options.poster]\n\t       * define a poster by adding its address `poster: 'http://url/img.png'`. It will appear after video embed, disappear on play and go back when user stops the video.\n\t       * @param {String} [options.playbackNotSupportedMessage]\n\t       * define a custom message to be displayed when a playback is not supported.\n\t       * @param {Object} [options.events]\n\t       * Specify listeners which will be registered with their corresponding player events.\n\t       * E.g. onReady -> \"PLAYER_READY\", onTimeUpdate -> \"PLAYER_TIMEUPDATE\"\n\t       * @param {PlaybackConfig} [options.playback]\n\t       * Generic `Playback` component related configuration\n\t       * @param {Boolean} [options.disableErrorScreen]\n\t       * disables the error screen plugin.\n\t       * @param {Number} [options.autoPlayTimeout]\n\t       * autoplay check timeout.\n\t       */}]);function Player(options){var _this;_classCallCheck(this,Player);_this = _super.call(this,options);var playbackDefaultOptions={recycleVideo:true};var defaultOptions={playerId:uniqueId(''),persistConfig:true,width:640,height:360,baseUrl:baseUrl,allowUserInteraction:Browser.isMobile,includeResetStyle:true,playback:playbackDefaultOptions};_this._options = zepto.extend(true,defaultOptions,options);_this.options.sources = _this._normalizeSources(options);if(!_this.options.chromeless){ // \"allowUserInteraction\" cannot be false if not in chromeless mode.\n\t_this.options.allowUserInteraction = true;}if(!_this.options.allowUserInteraction){ // if user iteraction is not allowed ensure keyboard shortcuts are disabled\n\t_this.options.disableKeyboardShortcuts = true;}_this._registerOptionEventListeners(_this.options.events);_this._coreFactory = new CoreFactory(_assertThisInitialized(_this));if(_this.options.parentId)_this.setParentId(_this.options.parentId);else if(_this.options.parent)_this.attachTo(_this.options.parent);return _this;} /**\n\t     * Specify a `parentId` to the player.\n\t     * @method setParentId\n\t     * @param {String} parentId the element parent id.\n\t     * @return {Player} itself\n\t     */_createClass(Player,[{key:\"setParentId\",value:function setParentId(parentId){var el=document.querySelector(parentId);if(el)this.attachTo(el);return this;} /**\n\t       * You can use this method to attach the player to a given element. You don't need to do this when you specify it during the player instantiation passing the `parentId` param.\n\t       * @method attachTo\n\t       * @param {Object} element a given element.\n\t       * @return {Player} itself\n\t       */},{key:\"attachTo\",value:function attachTo(element){this.options.parentElement = element;this.core = this._coreFactory.create();this._addEventListeners();return this;}},{key:\"_addEventListeners\",value:function _addEventListeners(){if(!this.core.isReady)this.listenToOnce(this.core,Events.CORE_READY,this._onReady);else this._onReady();this.listenTo(this.core,Events.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged);this.listenTo(this.core,Events.CORE_FULLSCREEN,this._onFullscreenChange);this.listenTo(this.core,Events.CORE_RESIZE,this._onResize);return this;}},{key:\"_addContainerEventListeners\",value:function _addContainerEventListeners(){var container=this.core.activeContainer;if(container){this.listenTo(container,Events.CONTAINER_PLAY,this._onPlay);this.listenTo(container,Events.CONTAINER_PAUSE,this._onPause);this.listenTo(container,Events.CONTAINER_STOP,this._onStop);this.listenTo(container,Events.CONTAINER_ENDED,this._onEnded);this.listenTo(container,Events.CONTAINER_SEEK,this._onSeek);this.listenTo(container,Events.CONTAINER_ERROR,this._onError);this.listenTo(container,Events.CONTAINER_TIMEUPDATE,this._onTimeUpdate);this.listenTo(container,Events.CONTAINER_VOLUME,this._onVolumeUpdate);this.listenTo(container,Events.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable);}return this;}},{key:\"_registerOptionEventListeners\",value:function _registerOptionEventListeners(){var _this2=this;var newEvents=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};var events=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:{};var hasNewEvents=Object.keys(newEvents).length > 0;hasNewEvents && Object.keys(events).forEach(function(userEvent){var eventType=_this2.eventsMapping[userEvent];eventType && _this2.off(eventType,events[userEvent]);});Object.keys(newEvents).forEach(function(userEvent){var eventType=_this2.eventsMapping[userEvent];if(eventType){var eventFunction=newEvents[userEvent];eventFunction = typeof eventFunction === 'function' && eventFunction;eventFunction && _this2.on(eventType,eventFunction);}});return this;}},{key:\"_containerChanged\",value:function _containerChanged(){this.stopListening();this._addEventListeners();}},{key:\"_onReady\",value:function _onReady(){this._ready = true;this._addContainerEventListeners();this.trigger(Events.PLAYER_READY);}},{key:\"_onFullscreenChange\",value:function _onFullscreenChange(fullscreen){this.trigger(Events.PLAYER_FULLSCREEN,fullscreen);}},{key:\"_onVolumeUpdate\",value:function _onVolumeUpdate(volume){this.trigger(Events.PLAYER_VOLUMEUPDATE,volume);}},{key:\"_onSubtitleAvailable\",value:function _onSubtitleAvailable(){this.trigger(Events.PLAYER_SUBTITLE_AVAILABLE);}},{key:\"_onResize\",value:function _onResize(size){this.trigger(Events.PLAYER_RESIZE,size);}},{key:\"_onPlay\",value:function _onPlay(){this.trigger(Events.PLAYER_PLAY);}},{key:\"_onPause\",value:function _onPause(){this.trigger(Events.PLAYER_PAUSE);}},{key:\"_onStop\",value:function _onStop(){this.trigger(Events.PLAYER_STOP,this.getCurrentTime());}},{key:\"_onEnded\",value:function _onEnded(){this.trigger(Events.PLAYER_ENDED);}},{key:\"_onSeek\",value:function _onSeek(time){this.trigger(Events.PLAYER_SEEK,time);}},{key:\"_onTimeUpdate\",value:function _onTimeUpdate(timeProgress){this.trigger(Events.PLAYER_TIMEUPDATE,timeProgress);}},{key:\"_onError\",value:function _onError(error){this.trigger(Events.PLAYER_ERROR,error);}},{key:\"_normalizeSources\",value:function _normalizeSources(options){var sources=options.sources || (options.source !== undefined?[options.source]:[]);return sources.length === 0?[{source:'',mimeType:''}]:sources;} /**\n\t       * resizes the current player canvas.\n\t       * @method resize\n\t       * @param {Object} size should be a literal object with `height` and `width`.\n\t       * @return {Player} itself\n\t       * @example\n\t       * ```javascript\n\t       * player.resize({height: 360, width: 640})\n\t       * ```\n\t       */},{key:\"resize\",value:function resize(size){this.core.resize(size);return this;} /**\n\t       * loads a new source.\n\t       * @method load\n\t       * @param {Array|String} sources source or sources of video.\n\t       * An array item can be a string or {source: <<source URL>>, mimeType: <<source mime type>>}\n\t       * @param {String} mimeType a mime type, example: `'application/vnd.apple.mpegurl'`\n\t       * @param {Boolean} [autoPlay=false] whether playing should be started immediately\n\t       * @return {Player} itself\n\t       */},{key:\"load\",value:function load(sources,mimeType,autoPlay){if(autoPlay !== undefined)this.configure({autoPlay:!!autoPlay});this.core.load(sources,mimeType);return this;} /**\n\t       * destroys the current player and removes it from the DOM.\n\t       * @method destroy\n\t       * @return {Player} itself\n\t       */},{key:\"destroy\",value:function destroy(){this.stopListening();this.core.destroy();return this;} /**\n\t       * Gives user consent to playback. Required by mobile device after a click event before Player.load().\n\t       * @method consent\n\t       * @param {Function} callback function called when current playback is consented\n\t       * @example\n\t       * ```javascript\n\t       * player.consent(function() { doSomethingNext(); });\n\t       * ```\n\t       */},{key:\"consent\",value:function consent(cb){this.core.getCurrentPlayback().consent(cb);} /**\n\t       * plays the current video (`source`).\n\t       * @method play\n\t       * @return {Player} itself\n\t       */},{key:\"play\",value:function play(){this.core.activeContainer.play();return this;} /**\n\t       * pauses the current video (`source`).\n\t       * @method pause\n\t       * @return {Player} itself\n\t       */},{key:\"pause\",value:function pause(){this.core.activeContainer.pause();return this;} /**\n\t       * stops the current video (`source`).\n\t       * @method stop\n\t       * @return {Player} itself\n\t       */},{key:\"stop\",value:function stop(){this.core.activeContainer.stop();return this;} /**\n\t       * seeks the current video (`source`). For example, `player.seek(120)` will seek to second 120 (2minutes) of the current video.\n\t       * @method seek\n\t       * @param {Number} time should be a number between 0 and the video duration.\n\t       * @return {Player} itself\n\t       */},{key:\"seek\",value:function seek(time){this.core.activeContainer.seek(time);return this;} /**\n\t       * seeks the current video (`source`). For example, `player.seek(50)` will seek to the middle of the current video.\n\t       * @method seekPercentage\n\t       * @param {Number} time should be a number between 0 and 100.\n\t       * @return {Player} itself\n\t       */},{key:\"seekPercentage\",value:function seekPercentage(percentage){this.core.activeContainer.seekPercentage(percentage);return this;} /**\n\t       * mutes the current video (`source`).\n\t       * @method mute\n\t       * @return {Player} itself\n\t       */},{key:\"mute\",value:function mute(){this.core.activePlayback.mute();return this;} /**\n\t       * unmutes the current video (`source`).\n\t       * @method unmute\n\t       * @return {Player} itself\n\t       */},{key:\"unmute\",value:function unmute(){this.core.activePlayback.unmute();return this;} /**\n\t       * checks if the player is playing.\n\t       * @method isPlaying\n\t       * @return {Boolean} `true` if the current source is playing, otherwise `false`\n\t       */},{key:\"isPlaying\",value:function isPlaying(){return this.core.activeContainer.isPlaying();} /**\n\t       * returns `true` if DVR is enable otherwise `false`.\n\t       * @method isDvrEnabled\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrEnabled\",value:function isDvrEnabled(){return this.core.activeContainer.isDvrEnabled();} /**\n\t       * returns `true` if DVR is in use otherwise `false`.\n\t       * @method isDvrInUse\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrInUse\",value:function isDvrInUse(){return this.core.activeContainer.isDvrInUse();} /**\n\t       * enables to configure a player after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       * @return {Player} itself\n\t       */},{key:\"configure\",value:function configure(){var options=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};this._registerOptionEventListeners(options.events,this.options.events);this.core.configure(options);return this;} /**\n\t       * get a plugin by its name.\n\t       * @method getPlugin\n\t       * @param {String} name of the plugin.\n\t       * @return {Object} the plugin instance\n\t       * @example\n\t       * ```javascript\n\t       * var poster = player.getPlugin('poster');\n\t       * poster.hidePlayButton();\n\t       * ```\n\t       */},{key:\"getPlugin\",value:function getPlugin(name){var plugins=this.core.plugins.concat(this.core.activeContainer.plugins);return plugins.filter(function(plugin){return plugin.name === name;})[0];} /**\n\t       * the current time in seconds.\n\t       * @method getCurrentTime\n\t       * @return {Number} current time (in seconds) of the current source\n\t       */},{key:\"getCurrentTime\",value:function getCurrentTime(){return this.core.activeContainer.getCurrentTime();} /**\n\t       * The time that \"0\" now represents relative to when playback started.\n\t       * For a stream with a sliding window this will increase as content is\n\t       * removed from the beginning.\n\t       * @method getStartTimeOffset\n\t       * @return {Number} time (in seconds) that time \"0\" represents.\n\t       */},{key:\"getStartTimeOffset\",value:function getStartTimeOffset(){return this.core.activeContainer.getStartTimeOffset();} /**\n\t       * the duration time in seconds.\n\t       * @method getDuration\n\t       * @return {Number} duration time (in seconds) of the current source\n\t       */},{key:\"getDuration\",value:function getDuration(){return this.core.activeContainer.getDuration();}}]);return Player;})(BaseObject);Object.assign(Player.prototype,ErrorMixin); /**\n\t   * The base class for a container plugin\n\t   * @class ContainerPlugin\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module base\n\t   */var ContainerPlugin= /*#__PURE__*/(function(_BaseObject){_inherits(ContainerPlugin,_BaseObject);var _super=_createSuper(ContainerPlugin);_createClass(ContainerPlugin,[{key:\"playerError\",get:function get(){return this.container.playerError;}}]);function ContainerPlugin(container){var _this;_classCallCheck(this,ContainerPlugin);_this = _super.call(this,container.options);_this.container = container;_this.enabled = true;_this.bindEvents();return _this;}_createClass(ContainerPlugin,[{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.enabled = true;}}},{key:\"disable\",value:function disable(){if(this.enabled){this.stopListening();this.enabled = false;}}},{key:\"bindEvents\",value:function bindEvents(){}},{key:\"destroy\",value:function destroy(){this.stopListening();}}]);return ContainerPlugin;})(BaseObject);Object.assign(ContainerPlugin.prototype,ErrorMixin);ContainerPlugin.extend = function(properties){return extend(ContainerPlugin,properties);};ContainerPlugin.type = 'container';var CorePlugin= /*#__PURE__*/(function(_BaseObject){_inherits(CorePlugin,_BaseObject);var _super=_createSuper(CorePlugin);_createClass(CorePlugin,[{key:\"playerError\",get:function get(){return this.core.playerError;}}]);function CorePlugin(core){var _this;_classCallCheck(this,CorePlugin);_this = _super.call(this,core.options);_this.core = core;_this.enabled = true;_this.bindEvents();return _this;}_createClass(CorePlugin,[{key:\"bindEvents\",value:function bindEvents(){}},{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.enabled = true;}}},{key:\"disable\",value:function disable(){if(this.enabled){this.stopListening();this.enabled = false;}}},{key:\"getExternalInterface\",value:function getExternalInterface(){return {};}},{key:\"destroy\",value:function destroy(){this.stopListening();}}]);return CorePlugin;})(BaseObject);Object.assign(CorePlugin.prototype,ErrorMixin);CorePlugin.extend = function(properties){return extend(CorePlugin,properties);};CorePlugin.type = 'core'; /**\n\t   * The base class for an ui container plugin\n\t   * @class UIContainerPlugin\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module base\n\t   */var UIContainerPlugin= /*#__PURE__*/(function(_UIObject){_inherits(UIContainerPlugin,_UIObject);var _super=_createSuper(UIContainerPlugin);_createClass(UIContainerPlugin,[{key:\"playerError\",get:function get(){return this.container.playerError;}}]);function UIContainerPlugin(container){var _this;_classCallCheck(this,UIContainerPlugin);_this = _super.call(this,container.options);_this.container = container;_this.enabled = true;_this.bindEvents();return _this;}_createClass(UIContainerPlugin,[{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.$el.show();this.enabled = true;}}},{key:\"disable\",value:function disable(){this.stopListening();this.$el.hide();this.enabled = false;}},{key:\"bindEvents\",value:function bindEvents(){}}]);return UIContainerPlugin;})(UIObject);Object.assign(UIContainerPlugin.prototype,ErrorMixin);UIContainerPlugin.extend = function(properties){return extend(UIContainerPlugin,properties);};UIContainerPlugin.type = 'container';var tracksHTML=\"<% for (var i = 0; i < tracks.length; i++) { %>\\n  <track data-html5-video-track=\\\"<%= i %>\\\" kind=\\\"<%= tracks[i].kind %>\\\" label=\\\"<%= tracks[i].label %>\\\" srclang=\\\"<%= tracks[i].lang %>\\\" src=\\\"<%= tracks[i].src %>\\\">\\n<% }; %>\\n\";var css_248z$3=\"[data-html5-video] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  display: block; }\\n\";var MIMETYPES={'mp4':['avc1.42E01E','avc1.58A01E','avc1.4D401E','avc1.64001E','mp4v.20.8','mp4v.20.240','mp4a.40.2'].map(function(codec){return 'video/mp4; codecs=\"' + codec + ', mp4a.40.2\"';}),'ogg':['video/ogg; codecs=\"theora, vorbis\"','video/ogg; codecs=\"dirac\"','video/ogg; codecs=\"theora, speex\"'],'3gpp':['video/3gpp; codecs=\"mp4v.20.8, samr\"'],'webm':['video/webm; codecs=\"vp8, vorbis\"'],'mkv':['video/x-matroska; codecs=\"theora, vorbis\"'],'m3u8':['application/x-mpegurl']};MIMETYPES['ogv'] = MIMETYPES['ogg'];MIMETYPES['3gp'] = MIMETYPES['3gpp'];var AUDIO_MIMETYPES={'wav':['audio/wav'],'mp3':['audio/mp3','audio/mpeg;codecs=\"mp3\"'],'aac':['audio/mp4;codecs=\"mp4a.40.5\"'],'oga':['audio/ogg']};var KNOWN_AUDIO_MIMETYPES=Object.keys(AUDIO_MIMETYPES).reduce(function(acc,k){return [].concat(_toConsumableArray(acc),_toConsumableArray(AUDIO_MIMETYPES[k]));},[]);var UNKNOWN_ERROR={code:'unknown',message:'unknown'}; // TODO: rename this Playback to HTML5Playback (breaking change, only after 0.3.0)\n\tvar HTML5Video= /*#__PURE__*/(function(_Playback){_inherits(HTML5Video,_Playback);var _super=_createSuper(HTML5Video);_createClass(HTML5Video,[{key:\"name\",get:function get(){return 'html5_video';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"tagName\",get:function get(){return this.isAudioOnly?'audio':'video';}},{key:\"isAudioOnly\",get:function get(){var resourceUrl=this.options.src;var mimeTypes=HTML5Video._mimeTypesForUrl(resourceUrl,AUDIO_MIMETYPES,this.options.mimeType);return this.options.playback && this.options.playback.audioOnly || this.options.audioOnly || KNOWN_AUDIO_MIMETYPES.indexOf(mimeTypes[0]) >= 0;}},{key:\"attributes\",get:function get(){return {'data-html5-video':''};}},{key:\"events\",get:function get(){return {'canplay':'_onCanPlay','canplaythrough':'_handleBufferingEvents','durationchange':'_onDurationChange','ended':'_onEnded','error':'_onError','loadeddata':'_onLoadedData','loadedmetadata':'_onLoadedMetadata','pause':'_onPause','playing':'_onPlaying','progress':'_onProgress','seeking':'_onSeeking','seeked':'_onSeeked','stalled':'_handleBufferingEvents','timeupdate':'_onTimeUpdate','waiting':'_onWaiting'};} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return this.el.ended;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * This is related to the PLAYBACK_BUFFERING and PLAYBACK_BUFFERFULL events\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return this._isBuffering;}},{key:\"isLive\",get:function get(){return this.getPlaybackType() === Playback.LIVE;}},{key:\"dvrEnabled\",get:function get(){return this.getDuration() >= this._minDvrSize && this.isLive;}},{key:\"minimumDVRSizeConfig\",get:function get(){return this.options.playback && this.options.playback.minimumDvrSize;}},{key:\"isValidMinimumDVRSizeConfig\",get:function get(){return typeof this.minimumDVRSizeConfig !== 'undefined' && typeof this.minimumDVRSizeConfig === 'number';}}]);function HTML5Video(){var _this;_classCallCheck(this,HTML5Video);for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}_this = _super.call.apply(_super,[this].concat(args));_this._destroyed = false;_this._loadStarted = false;_this._isBuffering = false;_this._playheadMoving = false;_this._playheadMovingTimer = null;_this._stopped = false;_this._ccTrackId = -1;_this._setupSrc(_this.options.src); // backwards compatibility (TODO: remove on 0.3.0)\n\t_this.options.playback || (_this.options.playback = _this.options || {});_this.options.playback.disableContextMenu = _this.options.playback.disableContextMenu || _this.options.disableVideoTagContextMenu;_this._minDvrSize = _this.isValidMinimumDVRSizeConfig?_this.minimumDVRSizeConfig:60;var playbackConfig=_this.options.playback;var preload=playbackConfig.preload || (Browser.isSafari?'auto':_this.options.preload);var posterUrl; // FIXME: poster plugin should always convert poster to object with expected properties ?\n\tif(_this.options.poster){if(typeof _this.options.poster === 'string')posterUrl = _this.options.poster;else if(typeof _this.options.poster.url === 'string')posterUrl = _this.options.poster.url;}zepto.extend(true,_this.el,{muted:_this.options.mute,defaultMuted:_this.options.mute,loop:_this.options.loop,poster:posterUrl,preload:preload || 'metadata',crossOrigin:playbackConfig.crossOrigin,'x-webkit-playsinline':playbackConfig.playInline});if(playbackConfig.controls || _this.options.useVideoTagDefaultControls)_this.$el.attr('controls','');playbackConfig.playInline && _this.$el.attr({playsinline:'playsinline'});playbackConfig.crossOrigin && _this.$el.attr({crossorigin:playbackConfig.crossOrigin}); // TODO should settings be private?\n\t_this.settings = {\"default\":['seekbar']};_this.settings.left = ['playpause','position','duration'];_this.settings.right = ['fullscreen','volume','hd-indicator'];playbackConfig.externalTracks && _this._setupExternalTracks(playbackConfig.externalTracks);_this.options.autoPlay && _this.attemptAutoPlay();return _this;}_createClass(HTML5Video,[{key:\"configure\",value:function configure(options){_get(_getPrototypeOf(HTML5Video.prototype),\"configure\",this).call(this,options);this.el.loop = !!options.loop;} // See Playback.attemptAutoPlay()\n\t},{key:\"attemptAutoPlay\",value:function attemptAutoPlay(){var _this2=this;this.canAutoPlay(function(result,error){error && Log.warn(_this2.name,'autoplay error.',{result:result,error:error}); // https://github.com/clappr/clappr/issues/1076\n\tresult && setTimeout(function(){return !_this2._destroyed && _this2.play();},0);});} // See Playback.canAutoPlay()\n\t},{key:\"canAutoPlay\",value:function canAutoPlay(cb){if(this.options.disableCanAutoPlay){cb(true,null);return;}var opts={timeout:this.options.autoPlayTimeout || 500,inline:this.options.playback.playInline || false,muted:this.options.mute || false // Known issue: mediacontrols may asynchronously mute video\n\t}; // Use current video element if recycling feature enabled with mobile devices\n\tif(Browser.isMobile && DomRecycler.options.recycleVideo)opts.element = this.el; // Desktop browser autoplay policy may require user action\n\t// Mobile browser autoplay require user consent and video recycling feature enabled\n\t// It may returns a false positive with source-less player consent\n\tcanAutoPlayMedia(cb,opts);}},{key:\"_setupExternalTracks\",value:function _setupExternalTracks(tracks){this._externalTracks = tracks.map(function(track){return {kind:track.kind || 'subtitles', // Default is 'subtitles'\n\tlabel:track.label,lang:track.lang,src:track.src};});} /**\n\t       * Sets the source url on the <video> element, and also the 'src' property.\n\t       * @method setupSrc\n\t       * @private\n\t       * @param {String} srcUrl The source URL.\n\t       */},{key:\"_setupSrc\",value:function _setupSrc(srcUrl){if(this.el.src === srcUrl)return;this._ccIsSetup = false;this.el.src = srcUrl;this._src = this.el.src;}},{key:\"_onLoadedMetadata\",value:function _onLoadedMetadata(e){this._handleBufferingEvents();this.trigger(Events.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e});this._updateSettings();var autoSeekFromUrl=typeof this._options.autoSeekFromUrl === 'undefined' || this._options.autoSeekFromUrl;if(this.getPlaybackType() !== Playback.LIVE && autoSeekFromUrl)this._checkInitialSeek();}},{key:\"_onDurationChange\",value:function _onDurationChange(){this._updateSettings();this._onTimeUpdate(); // onProgress uses the duration\n\tthis._onProgress();}},{key:\"_updateSettings\",value:function _updateSettings(){ // we can't figure out if hls resource is VoD or not until it is being loaded or duration has changed.\n\t// that's why we check it again and update media control accordingly.\n\tif(this.getPlaybackType() === Playback.VOD || this.getPlaybackType() === Playback.AOD)this.settings.left = ['playpause','position','duration'];else this.settings.left = ['playstop'];this.settings.seekEnabled = this.isSeekEnabled();this.trigger(Events.PLAYBACK_SETTINGSUPDATE);}},{key:\"isSeekEnabled\",value:function isSeekEnabled(){return isFinite(this.getDuration());}},{key:\"getPlaybackType\",value:function getPlaybackType(){var onDemandType=this.tagName === 'audio'?Playback.AOD:Playback.VOD;return [0,undefined,Infinity].indexOf(this.el.duration) >= 0?Playback.LIVE:onDemandType;}},{key:\"isHighDefinitionInUse\",value:function isHighDefinitionInUse(){return false;} // On mobile device, HTML5 video element \"retains\" user action consent if\n\t// load() method is called. See Player.consent().\n\t},{key:\"consent\",value:function consent(cb){var _this3=this;if(this.isPlaying() || this.el._consented){_get(_getPrototypeOf(HTML5Video.prototype),\"consent\",this).call(this,cb);}else {var eventHandler=function eventHandler(){_this3.el.removeEventListener('loadedmetadata',eventHandler,false);_this3.el.removeEventListener('error',eventHandler,false);_this3.el._consented = true; // Flag to call load() only once\n\t_get(_getPrototypeOf(HTML5Video.prototype),\"consent\",_this3).call(_this3,cb);};this.el.addEventListener('loadedmetadata',eventHandler,false);this.el.addEventListener('error',eventHandler,false);this.el.load();}}},{key:\"play\",value:function play(){this.trigger(Events.PLAYBACK_PLAY_INTENT);this._stopped = false;this._setupSrc(this._src);this._handleBufferingEvents();var promise=this.el.play(); // For more details, see https://developers.google.com/web/updates/2016/03/play-returns-promise\n\tif(promise && promise[\"catch\"])promise[\"catch\"](function(){});}},{key:\"pause\",value:function pause(){this.el.pause();this.dvrEnabled && this._updateDvr(true);}},{key:\"stop\",value:function stop(){this.pause();this._stopped = true; // src will be added again in play()\n\tthis.el.removeAttribute('src');this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\tthis._stopPlayheadMovingChecks();this._handleBufferingEvents();this.trigger(Events.PLAYBACK_STOP);}},{key:\"volume\",value:function volume(value){if(value === 0){this.$el.attr({muted:'true'});this.el.muted = true;}else {this.$el.attr({muted:null});this.el.muted = false;this.el.volume = value / 100;}} /**\n\t       * @deprecated\n\t       * @private\n\t       */},{key:\"mute\",value:function mute(){this.el.muted = true;} /**\n\t       * @deprecated\n\t       * @private\n\t       */},{key:\"unmute\",value:function unmute(){this.el.muted = false;}},{key:\"isMuted\",value:function isMuted(){return this.el.muted === true || this.el.volume === 0;}},{key:\"isPlaying\",value:function isPlaying(){return !this.el.paused && !this.el.ended;}},{key:\"_startPlayheadMovingChecks\",value:function _startPlayheadMovingChecks(){if(this._playheadMovingTimer !== null)return;this._playheadMovingTimeOnCheck = null;this._determineIfPlayheadMoving();this._playheadMovingTimer = setInterval(this._determineIfPlayheadMoving.bind(this),500);}},{key:\"_stopPlayheadMovingChecks\",value:function _stopPlayheadMovingChecks(){if(this._playheadMovingTimer === null)return;clearInterval(this._playheadMovingTimer);this._playheadMovingTimer = null;this._playheadMoving = false;}},{key:\"_determineIfPlayheadMoving\",value:function _determineIfPlayheadMoving(){var before=this._playheadMovingTimeOnCheck;var now=this.el.currentTime;this._playheadMoving = before !== now;this._playheadMovingTimeOnCheck = now;this._handleBufferingEvents();} // this seems to happen when the user is having to wait\n\t// for something to happen AFTER A USER INTERACTION\n\t// e.g the player might be buffering, but when `play()` is called\n\t// only at this point will this be called.\n\t// Or the user may seek somewhere but the new area requires buffering,\n\t// so it will fire then as well.\n\t// On devices where playing is blocked until requested with a user action,\n\t// buffering may start, but never finish until the user initiates a play,\n\t// but this only happens when play is actually requested\n\t},{key:\"_onWaiting\",value:function _onWaiting(){this._loadStarted = true;this._handleBufferingEvents();} // called after the first frame has loaded\n\t// note this doesn't fire on ios before the user has requested play\n\t// ideally the \"loadstart\" event would be used instead, but this fires\n\t// before a user has requested play on iOS, and also this is always fired\n\t// even if the preload setting is \"none\". In both these cases this causes\n\t// infinite buffering until the user does something which isn't great.\n\t},{key:\"_onLoadedData\",value:function _onLoadedData(){this._loadStarted = true;this._handleBufferingEvents();} // note this doesn't fire on ios before user has requested play\n\t},{key:\"_onCanPlay\",value:function _onCanPlay(){this._handleBufferingEvents();}},{key:\"_onPlaying\",value:function _onPlaying(){this._checkForClosedCaptions();this._startPlayheadMovingChecks();this._handleBufferingEvents();this.trigger(Events.PLAYBACK_PLAY);}},{key:\"_onPause\",value:function _onPause(){this._stopPlayheadMovingChecks();this._handleBufferingEvents();this.trigger(Events.PLAYBACK_PAUSE);}},{key:\"_onSeeking\",value:function _onSeeking(){this.trigger(Events.PLAYBACK_SEEK,this.getCurrentTime());this._handleBufferingEvents();}},{key:\"_onSeeked\",value:function _onSeeked(){this._handleBufferingEvents();this.trigger(Events.PLAYBACK_SEEKED);}},{key:\"_onEnded\",value:function _onEnded(){this._handleBufferingEvents();this.trigger(Events.PLAYBACK_ENDED,this.name);} // The playback should be classed as buffering if the following are true:\n\t// - the ready state is less then HAVE_FUTURE_DATA or the playhead isn't moving and it should be\n\t// - the media hasn't \"ended\",\n\t// - the media hasn't been stopped\n\t// - loading has started\n\t},{key:\"_handleBufferingEvents\",value:function _handleBufferingEvents(){var playheadShouldBeMoving=!this.el.ended && !this.el.paused;var buffering=this._loadStarted && !this.el.ended && !this._stopped && (playheadShouldBeMoving && !this._playheadMoving || this.el.readyState < this.el.HAVE_FUTURE_DATA);if(this._isBuffering !== buffering){this._isBuffering = buffering;if(buffering)this.trigger(Events.PLAYBACK_BUFFERING,this.name);else this.trigger(Events.PLAYBACK_BUFFERFULL,this.name);}}},{key:\"_onError\",value:function _onError(){var _ref=this.el.error || UNKNOWN_ERROR,code=_ref.code,message=_ref.message;var isUnknownError=code === UNKNOWN_ERROR.code;var formattedError=this.createError({code:code,description:message,raw:this.el.error,level:isUnknownError?PlayerError.Levels.WARN:PlayerError.Levels.FATAL});if(isUnknownError)Log.warn(this.name,'HTML5 unknown error: ',formattedError);else this.trigger(Events.PLAYBACK_ERROR,formattedError);}},{key:\"destroy\",value:function destroy(){this._destroyed = true;this.handleTextTrackChange && this.el.textTracks.removeEventListener('change',this.handleTextTrackChange);_get(_getPrototypeOf(HTML5Video.prototype),\"destroy\",this).call(this);this.el.removeAttribute('src');this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\tthis._src = null;DomRecycler.garbage(this.el);}},{key:\"_updateDvr\",value:function _updateDvr(status){this.trigger(Events.PLAYBACK_DVR,status);this.trigger(Events.PLAYBACK_STATS_ADD,{'dvr':status});}},{key:\"seek\",value:function seek(time){if(time < 0){Log.warn('Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point.');time = this.getDuration();} // assume live if time within 3 seconds of end of stream\n\tthis.dvrEnabled && this._updateDvr(time < this.getDuration() - 3);time += this.el.seekable.start(0);this.el.currentTime = time;}},{key:\"seekPercentage\",value:function seekPercentage(percentage){var time=this.el.duration * (percentage / 100);this.seek(time);}},{key:\"_checkInitialSeek\",value:function _checkInitialSeek(){var seekTime=seekStringToSeconds();if(seekTime !== 0)this.seek(seekTime);}},{key:\"getCurrentTime\",value:function getCurrentTime(){return this.el.currentTime;}},{key:\"getDuration\",value:function getDuration(){var _this4=this;if(this.isLive){try{return this.el.seekable.end(0) - this.el.seekable.start(0);}catch(e) {setTimeout(function(){return _this4._updateSettings();},1000);}}return this.el.duration;}},{key:\"_onTimeUpdate\",value:function _onTimeUpdate(){var duration=this.isLive?this.getDuration():this.el.duration;this.trigger(Events.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:duration},this.name);}},{key:\"_onProgress\",value:function _onProgress(){if(!this.el.buffered.length)return;var buffered=[];var bufferedPos=0;for(var i=0;i < this.el.buffered.length;i++) {buffered = [].concat(_toConsumableArray(buffered),[{start:this.el.buffered.start(i),end:this.el.buffered.end(i)}]);if(this.el.currentTime >= buffered[i].start && this.el.currentTime <= buffered[i].end)bufferedPos = i;}var progress={start:buffered[bufferedPos].start,current:buffered[bufferedPos].end,total:this.el.duration};this.trigger(Events.PLAYBACK_PROGRESS,progress,buffered);}},{key:\"_typeFor\",value:function _typeFor(src){var mimeTypes=HTML5Video._mimeTypesForUrl(src,MIMETYPES,this.options.mimeType);if(mimeTypes.length === 0)mimeTypes = HTML5Video._mimeTypesForUrl(src,AUDIO_MIMETYPES,this.options.mimeType);var mimeType=mimeTypes[0] || '';return mimeType.split(';')[0];}},{key:\"_ready\",value:function _ready(){if(this._isReadyState)return;this._isReadyState = true;this.trigger(Events.PLAYBACK_READY,this.name);}},{key:\"_checkForClosedCaptions\",value:function _checkForClosedCaptions(){ // Check if CC available only if current playback is HTML5Video\n\tif(this.isHTML5Video && !this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(Events.PLAYBACK_SUBTITLE_AVAILABLE);var trackId=this.closedCaptionsTrackId;this.closedCaptionsTrackId = trackId;this.handleTextTrackChange = this._handleTextTrackChange.bind(this);this.el.textTracks.addEventListener('change',this.handleTextTrackChange);}this._ccIsSetup = true;}}},{key:\"_handleTextTrackChange\",value:function _handleTextTrackChange(){var tracks=this.closedCaptionsTracks;var track=tracks.find(function(track){return track.track.mode === 'showing';}) || {id:-1};if(this._ccTrackId !== track.id){this._ccTrackId = track.id;this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED,{id:track.id});}}},{key:\"render\",value:function render(){if(this.options.playback.disableContextMenu){this.$el.on('contextmenu',function(){return false;});}if(this._externalTracks && this._externalTracks.length > 0){this.$el.html(this.template({tracks:this._externalTracks}));}this._ready();var style=Styler.getStyleFor(css_248z$3.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);return this;}},{key:\"isReady\",get:function get(){return this._isReadyState;}},{key:\"isHTML5Video\",get:function get(){return this.name === HTML5Video.prototype.name;}},{key:\"closedCaptionsTracks\",get:function get(){var id=0;var trackId=function trackId(){return id++;};var textTracks=this.el.textTracks?Array.from(this.el.textTracks):[];return textTracks.filter(function(track){return track.kind === 'subtitles' || track.kind === 'captions';}).map(function(track){return {id:trackId(),name:track.label,track:track};});}},{key:\"closedCaptionsTrackId\",get:function get(){return this._ccTrackId;},set:function set(trackId){if(!isNumber(trackId))return;var tracks=this.closedCaptionsTracks;var showingTrack; // Note: -1 is for hide all tracks\n\tif(trackId !== -1){showingTrack = tracks.find(function(track){return track.id === trackId;});if(!showingTrack)return; // Track id not found\n\tif(showingTrack.track.mode === 'showing')return; // Track already showing\n\t} // Since it is possible to display multiple tracks,\n\t// ensure that all tracks are hidden.\n\ttracks.filter(function(track){return track.track.mode !== 'hidden';}).forEach(function(track){return track.track.mode = 'hidden';});showingTrack && (showingTrack.track.mode = 'showing');this._ccTrackId = trackId;this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED,{id:trackId});}},{key:\"template\",get:function get(){return tmpl(tracksHTML);}}]);return HTML5Video;})(Playback);HTML5Video._mimeTypesForUrl = function(resourceUrl,mimeTypesByExtension,mimeType){var extension=(resourceUrl.split('?')[0].match(/.*\\.(.*)$/) || [])[1];var mimeTypes=mimeType || extension && mimeTypesByExtension[extension.toLowerCase()] || [];return mimeTypes.constructor === Array?mimeTypes:[mimeTypes];};HTML5Video._canPlay = function(type,mimeTypesByExtension,resourceUrl,mimeType){var mimeTypes=HTML5Video._mimeTypesForUrl(resourceUrl,mimeTypesByExtension,mimeType);var media=document.createElement(type);return !!mimeTypes.filter(function(mediaType){return !!media.canPlayType(mediaType).replace(/no/,'');})[0];};HTML5Video.canPlay = function(resourceUrl,mimeType){return HTML5Video._canPlay('audio',AUDIO_MIMETYPES,resourceUrl,mimeType) || HTML5Video._canPlay('video',MIMETYPES,resourceUrl,mimeType);};var HTML5Audio= /*#__PURE__*/(function(_HTML5Video){_inherits(HTML5Audio,_HTML5Video);var _super=_createSuper(HTML5Audio);function HTML5Audio(){_classCallCheck(this,HTML5Audio);return _super.apply(this,arguments);}_createClass(HTML5Audio,[{key:\"updateSettings\",value:function updateSettings(){this.settings.left = ['playpause','position','duration'];this.settings.seekEnabled = this.isSeekEnabled();this.trigger(Events.PLAYBACK_SETTINGSUPDATE);}},{key:\"getPlaybackType\",value:function getPlaybackType(){return Playback.AOD;}},{key:\"name\",get:function get(){return 'html5_audio';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"tagName\",get:function get(){return 'audio';}},{key:\"isAudioOnly\",get:function get(){return true;}}]);return HTML5Audio;})(HTML5Video);HTML5Audio.canPlay = function(resourceUrl,mimeType){var mimetypes={'wav':['audio/wav'],'mp3':['audio/mp3','audio/mpeg;codecs=\"mp3\"'],'aac':['audio/mp4;codecs=\"mp4a.40.5\"'],'oga':['audio/ogg']};return HTML5Video._canPlay('audio',mimetypes,resourceUrl,mimeType);};var css_248z$4=\"[data-html-img] {\\n  max-width: 100%;\\n  max-height: 100%; }\\n\";var HTMLImg= /*#__PURE__*/(function(_Playback){_inherits(HTMLImg,_Playback);var _super=_createSuper(HTMLImg);_createClass(HTMLImg,[{key:\"getPlaybackType\",value:function getPlaybackType(){return Playback.NO_OP;}},{key:\"name\",get:function get(){return 'html_img';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"tagName\",get:function get(){return 'img';}},{key:\"attributes\",get:function get(){return {'data-html-img':''};}},{key:\"events\",get:function get(){return {'load':'_onLoad','abort':'_onError','error':'_onError'};}}]);function HTMLImg(params){var _this;_classCallCheck(this,HTMLImg);_this = _super.call(this,params);_this.el.src = params.src;return _this;}_createClass(HTMLImg,[{key:\"render\",value:function render(){var style=Styler.getStyleFor(css_248z$4.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.trigger(Events.PLAYBACK_READY,this.name);return this;}},{key:\"_onLoad\",value:function _onLoad(){this.trigger(Events.PLAYBACK_ENDED,this.name);}},{key:\"_onError\",value:function _onError(evt){var m=evt.type === 'error'?'load error':'loading aborted';this.trigger(Events.PLAYBACK_ERROR,{message:m},this.name);}}]);return HTMLImg;})(Playback);HTMLImg.canPlay = function(resource){return (/\\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\\?.*)$/i.test(resource));};var noOpHTML=\"<canvas data-no-op-canvas></canvas>\\n<p data-no-op-msg><%=message%></p><p>\\n</p>\";var css_248z$5=\"[data-no-op] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  text-align: center; }\\n\\n[data-no-op] p[data-no-op-msg] {\\n  position: absolute;\\n  text-align: center;\\n  font-size: 25px;\\n  left: 0;\\n  right: 0;\\n  color: white;\\n  padding: 10px;\\n  /* center vertically */\\n  top: 50%;\\n  transform: translateY(-50%);\\n  max-height: 100%;\\n  overflow: auto; }\\n\\n[data-no-op] canvas[data-no-op-canvas] {\\n  background-color: #777;\\n  height: 100%;\\n  width: 100%; }\\n\";var NoOp= /*#__PURE__*/(function(_Playback){_inherits(NoOp,_Playback);var _super=_createSuper(NoOp);_createClass(NoOp,[{key:\"name\",get:function get(){return 'no_op';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"template\",get:function get(){return tmpl(noOpHTML);}},{key:\"attributes\",get:function get(){return {'data-no-op':''};}}]);function NoOp(){var _this;_classCallCheck(this,NoOp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}_this = _super.call.apply(_super,[this].concat(args));_this._noiseFrameNum = -1;return _this;}_createClass(NoOp,[{key:\"render\",value:function render(){var playbackNotSupported=this.options.playbackNotSupportedMessage || this.i18n.t('playback_not_supported');var style=Styler.getStyleFor(css_248z$5.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.$el.html(this.template({message:playbackNotSupported}));this.trigger(Events.PLAYBACK_READY,this.name);var showForNoOp=!!(this.options.poster && this.options.poster.showForNoOp);if(this.options.autoPlay || !showForNoOp)this._animate();return this;}},{key:\"_noise\",value:function _noise(){this._noiseFrameNum = (this._noiseFrameNum + 1) % 5;if(this._noiseFrameNum){ // only update noise every 5 frames to save cpu\n\treturn;}var idata=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);var buffer32;try{buffer32 = new Uint32Array(idata.data.buffer);}catch(err) {buffer32 = new Uint32Array(this.context.canvas.width * this.context.canvas.height * 4);var data=idata.data;for(var i=0;i < data.length;i++) {buffer32[i] = data[i];}}var len=buffer32.length,m=Math.random() * 6 + 4;var run=0,color=0;for(var _i=0;_i < len;) {if(run < 0){run = m * Math.random();var p=Math.pow(Math.random(),0.4);color = 255 * p << 24;}run -= 1;buffer32[_i++] = color;}this.context.putImageData(idata,0,0);}},{key:\"_loop\",value:function _loop(){var _this2=this;if(this._stop)return;this._noise();this._animationHandle = requestAnimationFrame(function(){return _this2._loop();});}},{key:\"destroy\",value:function destroy(){if(this._animationHandle){cancelAnimationFrame(this._animationHandle);this._stop = true;}}},{key:\"_animate\",value:function _animate(){this.canvas = this.$el.find('canvas[data-no-op-canvas]')[0];this.context = this.canvas.getContext('2d');this._loop();}}]);return NoOp;})(Playback);NoOp.canPlay = function(source){ // eslint-disable-line no-unused-vars\n\treturn true;}; /**\n\t   * The internationalization (i18n) plugin\n\t   * @class Strings\n\t   * @constructor\n\t   * @extends CorePlugin\n\t   * @module plugins\n\t   */var Strings= /*#__PURE__*/(function(_CorePlugin){_inherits(Strings,_CorePlugin);var _super=_createSuper(Strings);_createClass(Strings,[{key:\"name\",get:function get(){return 'strings';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}}]);function Strings(core){var _this;_classCallCheck(this,Strings);_this = _super.call(this,core);_this._initializeMessages();return _this;} /**\n\t     * Gets a translated string for the given key.\n\t     * @method t\n\t     * @param {String} key the key to all messages\n\t     * @return {String} translated label\n\t     */_createClass(Strings,[{key:\"t\",value:function t(key){var lang=this._language();var fallbackLang=this._messages['en'];var i18n=lang && this._messages[lang] || fallbackLang;return i18n[key] || fallbackLang[key] || key;}},{key:\"_language\",value:function _language(){return this.core.options.language || getBrowserLanguage();}},{key:\"_initializeMessages\",value:function _initializeMessages(){var defaultMessages={'en':{'live':'live','back_to_live':'back to live','disabled':'Disabled','playback_not_supported':'Your browser does not support the playback of this video. Please try using a different browser.','default_error_title':'Could not play video.','default_error_message':'There was a problem trying to load the video.'},'pt':{'live':'ao vivo','back_to_live':'voltar para o ao vivo','disabled':'Desativado','playback_not_supported':'Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.','default_error_title':'Não foi possível reproduzir o vídeo.','default_error_message':'Ocorreu um problema ao tentar carregar o vídeo.'},'es':{'live':'vivo','back_to_live':'volver en vivo','disabled':'Discapacitado','playback_not_supported':'Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente.'},'ru':{'live':'прямой эфир','back_to_live':'к прямому эфиру','disabled':'Отключено','playback_not_supported':'Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер.'},'fr':{'live':'en direct','back_to_live':'retour au direct','disabled':'Désactivé','playback_not_supported':'Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.','default_error_title':'Impossible de lire la vidéo.','default_error_message':'Un problème est survenu lors du chargement de la vidéo.'},'tr':{'live':'canlı','back_to_live':'canlı yayına dön','disabled':'Engelli','playback_not_supported':'Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin.'},'et':{'live':'Otseülekanne','back_to_live':'Tagasi otseülekande juurde','disabled':'Keelatud','playback_not_supported':'Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit.'},'ar':{'live':'مباشر','back_to_live':'الرجوع إلى المباشر','disabled':'معطّل','playback_not_supported':'المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.','default_error_title':'غير قادر الى التشغيل.','default_error_message':'حدثت مشكلة أثناء تحميل الفيديو.'}};this._messages = zepto.extend(true,defaultMessages,this.core.options.strings || {});this._messages['pt-BR'] = this._messages['pt'];this._messages['en-US'] = this._messages['en'];this._messages['es-419'] = this._messages['es'];this._messages['fr-FR'] = this._messages['fr'];this._messages['tr-TR'] = this._messages['tr'];this._messages['et-EE'] = this._messages['et'];this._messages['ar-IQ'] = this._messages['ar'];}}]);return Strings;})(CorePlugin);var SourcesPlugin= /*#__PURE__*/(function(_CorePlugin){_inherits(SourcesPlugin,_CorePlugin);var _super=_createSuper(SourcesPlugin);function SourcesPlugin(){_classCallCheck(this,SourcesPlugin);return _super.apply(this,arguments);}_createClass(SourcesPlugin,[{key:\"bindEvents\",value:function bindEvents(){this.listenTo(this.core,Events.CORE_CONTAINERS_CREATED,this.onContainersCreated);}},{key:\"onContainersCreated\",value:function onContainersCreated(){var firstValidSource=this.core.containers.filter(function(container){return container.playback.name !== 'no_op';})[0] || this.core.containers[0];firstValidSource && this.core.containers.forEach(function(container){if(container !== firstValidSource)container.destroy();});}},{key:\"name\",get:function get(){return 'sources';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}}]);return SourcesPlugin;})(CorePlugin); // Copyright 2014 Globo.com Player authors. All rights reserved.\n\tvar version=\"0.4.17\"; // Built-in Plugins/Playbacks\n\tLoader.registerPlugin(Strings);Loader.registerPlugin(SourcesPlugin);Loader.registerPlayback(NoOp);Loader.registerPlayback(HTMLImg);Loader.registerPlayback(HTML5Audio);Loader.registerPlayback(HTML5Video);var main={Player:Player,Events:Events,Browser:Browser,ContainerPlugin:ContainerPlugin,UIContainerPlugin:UIContainerPlugin,CorePlugin:CorePlugin,UICorePlugin:UICorePlugin,Playback:Playback,Container:Container,Core:Core,PlayerError:PlayerError,Loader:Loader,BaseObject:BaseObject,UIObject:UIObject,Utils:Utils,HTML5Audio:HTML5Audio,HTML5Video:HTML5Video,HTMLImg:HTMLImg,Log:Log,Styler:Styler,version:version,template:tmpl,$:zepto};exports.$ = zepto;exports.BaseObject = BaseObject;exports.Browser = Browser;exports.Container = Container;exports.ContainerPlugin = ContainerPlugin;exports.Core = Core;exports.CorePlugin = CorePlugin;exports.Events = Events;exports.HTML5Audio = HTML5Audio;exports.HTML5Video = HTML5Video;exports.HTMLImg = HTMLImg;exports.Loader = Loader;exports.Log = Log;exports.Playback = Playback;exports.Player = Player;exports.PlayerError = PlayerError;exports.Styler = Styler;exports.UIContainerPlugin = UIContainerPlugin;exports.UICorePlugin = UICorePlugin;exports.UIObject = UIObject;exports.Utils = Utils;exports['default'] = main;exports.template = tmpl;exports.version = version;Object.defineProperty(exports,'__esModule',{value:true});}); //# sourceMappingURL=clappr-core.js.map\n\n/***/ }),\n/* 3 */\n/*!*******************************************!*\\\n  !*** ./~/html-loader!./public/flash.html ***!\n  \\*******************************************/\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<param name=movie value=\\\"<%= swfPath %>?inline=1\\\"> <param name=quality value=autohigh> <param name=swliveconnect value=true> <param name=allowScriptAccess value=always> <param name=allownetworking value=all> <param name=bgcolor value=#000000> <param name=allowFullScreen value=false> <param name=wmode value=\\\"<%= wmode %>\\\"> <param name=tabindex value=1> <param name=FlashVars value=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\"/> <embed name=\\\"<%= cid %>\\\" type=application/x-shockwave-flash disabled=disabled tabindex=-1 enablecontextmenu=false allowscriptaccess=always allownetworking=all quality=autohigh pluginspage=http://www.macromedia.com/go/getflashplayer wmode=\\\"<%= wmode %>\\\" swliveconnect=true allowfullscreen=false bgcolor=#000000 flashvars=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\" data=\\\"<%= swfPath %>\\\" src=\\\"<%= swfPath %>\\\" width=100% height=100%> \";\n\n/***/ }),\n/* 4 */\n/*!**********************************************************!*\\\n  !*** ./~/raw-loader!./~/sass-loader!./public/flash.scss ***!\n  \\**********************************************************/\n/***/ (function(module, exports) {\n\n\tmodule.exports = \".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}\\n\"\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// rtmp.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9a178bb641cdceda385e","export default require('./src/main.js')\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","// Copyright 2014 Globo.com Player authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\n\nimport {\n  Browser,\n  Events,\n  Flash,\n  Mediator,\n  Styler,\n  UICorePlugin,\n  template,\n} from \"@clappr/core\";\n\nimport flashHTML from \"!html-loader!../public/flash.html\";\nimport flashStyle from \"!raw-loader!sass-loader!../public/flash.scss\";\n\nexport default class RTMP extends Flash {\n  get name() {\n    return \"rtmp\";\n  }\n  get tagName() {\n    return \"object\";\n  }\n  get template() {\n    return template(flashHTML);\n  }\n  get attributes() {\n    return {\n      \"data-rtmp\": \"\",\n      data: this.swfPath,\n      type: \"application/x-shockwave-flash\",\n      width: \"100%\",\n      height: \"100%\",\n    };\n  }\n\n  constructor(options) {\n    super(options);\n    this.options.rtmpConfig = this.options.rtmpConfig || {};\n    this.options.rtmpConfig.swfPath =\n      this.options.rtmpConfig.swfPath ||\n      \"//cdn.jsdelivr.net/clappr.rtmp/latest/assets/RTMP.swf\";\n    this.options.rtmpConfig.wmode =\n      this.options.rtmpConfig.wmode || \"transparent\"; // Default to transparent wmode - IE always uses gpu as per objectIE\n    this.options.rtmpConfig.bufferTime =\n      this.options.rtmpConfig.bufferTime === undefined\n        ? 0.1\n        : this.options.rtmpConfig.bufferTime;\n    this.options.rtmpConfig.scaling =\n      this.options.rtmpConfig.scaling || \"letterbox\";\n    this.options.rtmpConfig.playbackType =\n      this.options.rtmpConfig.playbackType ||\n      this.options.src.indexOf(\"live\") > -1;\n    this.options.rtmpConfig.useAppInstance =\n      this.options.rtmpConfig.useAppInstance === undefined\n        ? false\n        : this.options.rtmpConfig.useAppInstance;\n    this.options.rtmpConfig.proxyType =\n      this.options.rtmpConfig.proxyType || \"none\";\n    this.options.rtmpConfig.startLevel =\n      this.options.rtmpConfig.startLevel === undefined\n        ? -1\n        : this.options.rtmpConfig.startLevel;\n    this.options.rtmpConfig.autoSwitch =\n      this.options.rtmpConfig.autoSwitch === undefined\n        ? false\n        : this.options.rtmpConfig.autoSwitch;\n    this.options.rtmpConfig.switchRules = this.options.rtmpConfig.switchRules;\n\n    this.addListeners();\n    this._setupPlaybackType();\n  }\n\n  getPlaybackType() {\n    return this._playbackType;\n  }\n\n  get swfPath() {\n    return this.options.rtmpConfig.swfPath;\n  }\n\n  get currentLevel() {\n    if (this._isReadyState) {\n      return this.el.getCurrentLevel();\n    }\n\n    return undefined;\n  }\n\n  get numLevels() {\n    if (this._isReadyState) {\n      return this.el.getNumLevels();\n    }\n\n    return undefined;\n  }\n\n  set currentLevel(level) {\n    this.el.setLevel(level);\n\n    if (level === -1 && level !== this.currentLevel) {\n      this.trigger(Events.PLAYBACK_LEVEL_SWITCH_END);\n      this.trigger(Events.PLAYBACK_BITRATE, { level: this.currentLevel });\n    }\n  }\n\n  get autoSwitchLevels() {\n    return this.el.isAutoSwitchLevels();\n  }\n\n  get levels() {\n    var levels = [];\n\n    for (var i = 0; i < this.numLevels; i++) {\n      var bitrate = this.el.getBitrateForLevel(i);\n\n      levels.push({\n        id: i,\n        label: bitrate + \"Kbps\",\n      });\n    }\n\n    return levels;\n  }\n\n  get isDynamicStream() {\n    return this.el.isDynamicStream();\n  }\n\n  addListeners() {\n    Mediator.on(this.uniqueId + \":progress\", this._progress, this);\n    Mediator.on(this.uniqueId + \":timeupdate\", this._updateTime, this);\n    Mediator.on(this.uniqueId + \":statechanged\", this._checkState, this);\n    Mediator.on(this.uniqueId + \":playbackready\", this._playbackReady, this);\n    Mediator.on(this.uniqueId + \":onloaded\", this._reporLevels, this);\n    Mediator.on(this.uniqueId + \":levelChanging\", this._levelChanging, this);\n    Mediator.on(this.uniqueId + \":levelChanged\", this._levelChange, this);\n    Mediator.on(this.uniqueId + \":flashready\", this._bootstrap, this);\n  }\n\n  stopListening() {\n    super.stopListening();\n    Mediator.off(this.uniqueId + \":progress\");\n    Mediator.off(this.uniqueId + \":timeupdate\");\n    Mediator.off(this.uniqueId + \":statechanged\");\n    Mediator.off(this.uniqueId + \":flashready\");\n  }\n\n  _bootstrap() {\n    this.el.width = \"100%\";\n    this.el.height = \"100%\";\n    this.options.autoPlay && this.play();\n    this._setupSettings();\n  }\n\n  _updateTime() {\n    if (this.getPlaybackType() === \"live\") {\n      this.trigger(\n        Events.PLAYBACK_TIMEUPDATE,\n        { current: 1, total: 1 },\n        this.name\n      );\n    } else {\n      this.trigger(\n        Events.PLAYBACK_TIMEUPDATE,\n        { current: this.el.getPosition(), total: this.el.getDuration() },\n        this.name\n      );\n    }\n  }\n\n  _levelChanging() {\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_START);\n  }\n\n  _levelChange() {\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_END);\n    this.trigger(Events.PLAYBACK_BITRATE, { level: this.currentLevel });\n  }\n\n  findLevelBy(id) {\n    var foundLevel;\n    this.levels.forEach((level) => {\n      if (level.id === id) {\n        foundLevel = level;\n      }\n    });\n    return foundLevel;\n  }\n\n  _setupPlaybackType() {\n    this._playbackType = this.options.rtmpConfig.playbackType;\n  }\n\n  _setupSettings() {\n    if (this.getPlaybackType() === \"live\") {\n      this.settings.left = [\"playpause\"];\n      this.settings.right = [\"fullscreen\", \"volume\"];\n      this.settings.seekEnabled = false;\n    } else {\n      this.settings.left = [\"playpause\", \"position\", \"duration\"];\n      this.settings.right = [\"fullscreen\", \"volume\"];\n    }\n\n    this.trigger(Events.PLAYBACK_SETTINGSUPDATE, this.name);\n  }\n\n  get _switchRulesJSON() {\n    if (this.options.rtmpConfig.switchRules !== undefined) {\n      return JSON.stringify(this.options.rtmpConfig.switchRules).replace(\n        /\"/g,\n        \"&quot;\"\n      );\n    }\n\n    return \"\";\n  }\n\n  render() {\n    this.$el.html(\n      this.template({\n        cid: this.cid,\n        swfPath: this.swfPath,\n        playbackId: this.uniqueId,\n        wmode: this.options.rtmpConfig.wmode,\n        scaling: this.options.rtmpConfig.scaling,\n        bufferTime: this.options.rtmpConfig.bufferTime,\n        playbackType: this.options.rtmpConfig.playbackType,\n        startLevel: this.options.rtmpConfig.startLevel,\n        autoSwitch: this.options.rtmpConfig.autoSwitch,\n        switchRules: this._switchRulesJSON,\n        useAppInstance: this.options.rtmpConfig.useAppInstance,\n        proxyType: this.options.rtmpConfig.proxyType,\n      })\n    );\n\n    if (Browser.isIE) {\n      this.$(\"embed\").remove();\n      if (Browser.isLegacyIE) {\n        this.$el.attr(\"classid\", IE_CLASSID);\n      }\n    }\n    this.el.id = this.cid;\n    var style = Styler.getStyleFor(flashStyle);\n    this.$el.append(style);\n    return this;\n  }\n\n  _checkState() {\n    super._checkState();\n\n    if (this.el.getState() === \"ERROR\") {\n      this.trigger(Events.PLAYBACK_ERROR, this.name);\n    }\n  }\n\n  _playbackReady() {\n    this._isReadyState = true;\n    this.trigger(Events.PLAYBACK_READY, this.name);\n  }\n\n  _reporLevels() {\n    if (this.isDynamicStream) {\n      if (this.levels) {\n        if (this.options.rtmpConfig.autoSwitch === true) {\n          this.trigger(Events.PLAYBACK_LEVELS_AVAILABLE, this.levels, -1);\n          this.trigger(Events.PLAYBACK_BITRATE, { level: this.currentLevel });\n        } else {\n          this.trigger(\n            Events.PLAYBACK_LEVELS_AVAILABLE,\n            this.levels,\n            this.options.rtmpConfig.startLevel\n          );\n        }\n      }\n    }\n  }\n}\n\nRTMP.canPlay = function (source, mimeType) {\n  return !!(\n    source.indexOf(\"rtmp://\") > -1 ||\n    source.indexOf(\"rtmps://\") > -1 ||\n    source.indexOf(\".smil\") > -1 ||\n    (mimeType && mimeType.indexOf(\"rtmp\") > -1)\n  );\n};\n\nRTMP.debug = (s) => console.log(s);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Clappr = {}));\n}(this, (function (exports) { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _createForOfIteratorHelper(o, allowArrayLike) {\n    var it;\n\n    if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n\n        var F = function () {};\n\n        return {\n          s: F,\n          n: function () {\n            if (i >= o.length) return {\n              done: true\n            };\n            return {\n              done: false,\n              value: o[i++]\n            };\n          },\n          e: function (e) {\n            throw e;\n          },\n          f: F\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    var normalCompletion = true,\n        didErr = false,\n        err;\n    return {\n      s: function () {\n        it = o[Symbol.iterator]();\n      },\n      n: function () {\n        var step = it.next();\n        normalCompletion = step.done;\n        return step;\n      },\n      e: function (e) {\n        didErr = true;\n        err = e;\n      },\n      f: function () {\n        try {\n          if (!normalCompletion && it.return != null) it.return();\n        } finally {\n          if (didErr) throw err;\n        }\n      }\n    };\n  }\n\n  // Copyright 2014 Globo.com Player authors. All rights reserved.\n  // Use of this source code is governed by a BSD-style\n  // license that can be found in the LICENSE file.\n\n  /* istanbul ignore file */\n\n  /**\n   * Array.prototype.find\n   *\n   * Original source : https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n   * See also : https://tc39.github.io/ecma262/#sec-array.prototype.find\n   */\n  if (!Array.prototype.find) {\n    // eslint-disable-next-line\n    Object.defineProperty(Array.prototype, 'find', {\n      // Note: ES6 arrow function syntax is not used on purpose to avoid this to be undefined\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) throw new TypeError('\"this\" is null or not defined');\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') throw new TypeError('predicate must be a function'); // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return kValue.\n          var kValue = o[k];\n          if (predicate.call(thisArg, kValue, k, o)) return kValue; // e. Increase k by 1.\n\n          k++;\n        } // 7. Return undefined.\n\n\n        return undefined;\n      }\n    });\n  } // polyfills for smart TVs\n\n\n  if (!Object.entries) {\n    Object.entries = function (obj) {\n      var ownProps = Object.keys(obj),\n          i = ownProps.length,\n          resArray = new Array(i); // preallocate the Array\n\n      while (i--) {\n        resArray[i] = [ownProps[i], obj[ownProps[i]]];\n      }\n\n      return resArray;\n    };\n  }\n\n  if (!Object.values) {\n    Object.values = function (obj) {\n      var ownProps = Object.keys(obj),\n          i = ownProps.length,\n          resArray = new Array(i); // preallocate the Array\n\n      while (i--) {\n        resArray[i] = obj[ownProps[i]];\n      }\n\n      return resArray;\n    };\n  }\n  /**\n   * Object.assign\n   * This polyfill doesn't support symbol properties, since ES5 doesn't have symbols anyway\n   *\n   * Original source : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n   */\n\n\n  if (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n      // length of function is 2.\n      value: function assign(target, varArgs) {\n\n        if (target == null) {\n          // TypeError if undefined or null\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n\n          if (nextSource != null) {\n            // Skip over if undefined or null\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  } // https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n\n\n  if (!Array.prototype.findIndex) {\n    Object.defineProperty(Array.prototype, 'findIndex', {\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        }\n\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') {\n          throw new TypeError('predicate must be a function');\n        } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return k.\n          var kValue = o[k];\n\n          if (predicate.call(thisArg, kValue, k, o)) {\n            return k;\n          } // e. Increase k by 1.\n\n\n          k++;\n        } // 7. Return -1.\n\n\n        return -1;\n      },\n      configurable: true,\n      writable: true\n    });\n  }\n\n  /* istanbul ignore file */\n  // https://github.com/mathiasbynens/small\n  var mp4 = 'data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=';\n  var Media = {\n    mp4: mp4\n  };\n\n  /* Zepto v1.2.0 - zepto ajax callbacks deferred event ie selector - zeptojs.com/license */\n  var Zepto = function () {\n    var undefined$1,\n        key,\n        $,\n        classList,\n        emptyArray = [],\n        concat = emptyArray.concat,\n        filter = emptyArray.filter,\n        slice = emptyArray.slice,\n        document = window.document,\n        elementDisplay = {},\n        classCache = {},\n        cssNumber = {\n      'column-count': 1,\n      'columns': 1,\n      'font-weight': 1,\n      'line-height': 1,\n      'opacity': 1,\n      'z-index': 1,\n      'zoom': 1\n    },\n        fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\n        singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n        tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\n        rootNodeRE = /^(?:body|html)$/i,\n        capitalRE = /([A-Z])/g,\n        // special attributes that should be get/set via method calls\n    methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\n        adjacencyOperators = ['after', 'prepend', 'before', 'append'],\n        table = document.createElement('table'),\n        tableRow = document.createElement('tr'),\n        containers = {\n      'tr': document.createElement('tbody'),\n      'tbody': table,\n      'thead': table,\n      'tfoot': table,\n      'td': tableRow,\n      'th': tableRow,\n      '*': document.createElement('div')\n    },\n        readyRE = /complete|loaded|interactive/,\n        simpleSelectorRE = /^[\\w-]*$/,\n        class2type = {},\n        toString = class2type.toString,\n        zepto = {},\n        camelize,\n        uniq,\n        tempParent = document.createElement('div'),\n        propMap = {\n      'tabindex': 'tabIndex',\n      'readonly': 'readOnly',\n      'for': 'htmlFor',\n      'class': 'className',\n      'maxlength': 'maxLength',\n      'cellspacing': 'cellSpacing',\n      'cellpadding': 'cellPadding',\n      'rowspan': 'rowSpan',\n      'colspan': 'colSpan',\n      'usemap': 'useMap',\n      'frameborder': 'frameBorder',\n      'contenteditable': 'contentEditable'\n    },\n        isArray = Array.isArray || function (object) {\n      return object instanceof Array;\n    };\n\n    zepto.matches = function (element, selector) {\n      if (!selector || !element || element.nodeType !== 1) return false;\n      var matchesSelector = element.matches || element.webkitMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.matchesSelector;\n      if (matchesSelector) return matchesSelector.call(element, selector); // fall back to performing a selector:\n\n      var match,\n          parent = element.parentNode,\n          temp = !parent;\n      if (temp) (parent = tempParent).appendChild(element);\n      match = ~zepto.qsa(parent, selector).indexOf(element);\n      temp && tempParent.removeChild(element);\n      return match;\n    };\n\n    function type(obj) {\n      return obj == null ? String(obj) : class2type[toString.call(obj)] || \"object\";\n    }\n\n    function isFunction(value) {\n      return type(value) == \"function\";\n    }\n\n    function isWindow(obj) {\n      return obj != null && obj == obj.window;\n    }\n\n    function isDocument(obj) {\n      return obj != null && obj.nodeType == obj.DOCUMENT_NODE;\n    }\n\n    function isObject(obj) {\n      return type(obj) == \"object\";\n    }\n\n    function isPlainObject(obj) {\n      return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype;\n    }\n\n    function likeArray(obj) {\n      var length = !!obj && 'length' in obj && obj.length,\n          type = $.type(obj);\n      return 'function' != type && !isWindow(obj) && ('array' == type || length === 0 || typeof length == 'number' && length > 0 && length - 1 in obj);\n    }\n\n    function compact(array) {\n      return filter.call(array, function (item) {\n        return item != null;\n      });\n    }\n\n    function flatten(array) {\n      return array.length > 0 ? $.fn.concat.apply([], array) : array;\n    }\n\n    camelize = function (str) {\n      return str.replace(/-+(.)?/g, function (match, chr) {\n        return chr ? chr.toUpperCase() : '';\n      });\n    };\n\n    function dasherize(str) {\n      return str.replace(/::/g, '/').replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2').replace(/([a-z\\d])([A-Z])/g, '$1_$2').replace(/_/g, '-').toLowerCase();\n    }\n\n    uniq = function (array) {\n      return filter.call(array, function (item, idx) {\n        return array.indexOf(item) == idx;\n      });\n    };\n\n    function classRE(name) {\n      return name in classCache ? classCache[name] : classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)');\n    }\n\n    function maybeAddPx(name, value) {\n      return typeof value == \"number\" && !cssNumber[dasherize(name)] ? value + \"px\" : value;\n    }\n\n    function defaultDisplay(nodeName) {\n      var element, display;\n\n      if (!elementDisplay[nodeName]) {\n        element = document.createElement(nodeName);\n        document.body.appendChild(element);\n        display = getComputedStyle(element, '').getPropertyValue(\"display\");\n        element.parentNode.removeChild(element);\n        display == \"none\" && (display = \"block\");\n        elementDisplay[nodeName] = display;\n      }\n\n      return elementDisplay[nodeName];\n    }\n\n    function children(element) {\n      return 'children' in element ? slice.call(element.children) : $.map(element.childNodes, function (node) {\n        if (node.nodeType == 1) return node;\n      });\n    }\n\n    function Z(dom, selector) {\n      var i,\n          len = dom ? dom.length : 0;\n\n      for (i = 0; i < len; i++) this[i] = dom[i];\n\n      this.length = len;\n      this.selector = selector || '';\n    } // `$.zepto.fragment` takes a html string and an optional tag name\n    // to generate DOM nodes from the given html string.\n    // The generated DOM nodes are returned as an array.\n    // This function can be overridden in plugins for example to make\n    // it compatible with browsers that don't support the DOM fully.\n\n\n    zepto.fragment = function (html, name, properties) {\n      var dom, nodes, container; // A special case optimization for a single tag\n\n      if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1));\n\n      if (!dom) {\n        if (html.replace) html = html.replace(tagExpanderRE, \"<$1></$2>\");\n        if (name === undefined$1) name = fragmentRE.test(html) && RegExp.$1;\n        if (!(name in containers)) name = '*';\n        container = containers[name];\n        container.innerHTML = '' + html;\n        dom = $.each(slice.call(container.childNodes), function () {\n          container.removeChild(this);\n        });\n      }\n\n      if (isPlainObject(properties)) {\n        nodes = $(dom);\n        $.each(properties, function (key, value) {\n          if (methodAttributes.indexOf(key) > -1) nodes[key](value);else nodes.attr(key, value);\n        });\n      }\n\n      return dom;\n    }; // `$.zepto.Z` swaps out the prototype of the given `dom` array\n    // of nodes with `$.fn` and thus supplying all the Zepto functions\n    // to the array. This method can be overridden in plugins.\n\n\n    zepto.Z = function (dom, selector) {\n      return new Z(dom, selector);\n    }; // `$.zepto.isZ` should return `true` if the given object is a Zepto\n    // collection. This method can be overridden in plugins.\n\n\n    zepto.isZ = function (object) {\n      return object instanceof zepto.Z;\n    }; // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\n    // takes a CSS selector and an optional context (and handles various\n    // special cases).\n    // This method can be overridden in plugins.\n\n\n    zepto.init = function (selector, context) {\n      var dom; // If nothing given, return an empty Zepto collection\n\n      if (!selector) return zepto.Z(); // Optimize for string selectors\n      else if (typeof selector == 'string') {\n          selector = selector.trim(); // If it's a html fragment, create nodes from it\n          // Note: In both Chrome 21 and Firefox 15, DOM error 12\n          // is thrown if the fragment doesn't begin with <\n\n          if (selector[0] == '<' && fragmentRE.test(selector)) dom = zepto.fragment(selector, RegExp.$1, context), selector = null; // If there's a context, create a collection on that context first, and select\n          // nodes from there\n          else if (context !== undefined$1) return $(context).find(selector); // If it's a CSS selector, use it to select nodes.\n            else dom = zepto.qsa(document, selector);\n        } // If a function is given, call it when the DOM is ready\n        else if (isFunction(selector)) return $(document).ready(selector); // If a Zepto collection is given, just return it\n          else if (zepto.isZ(selector)) return selector;else {\n              // normalize array if an array of nodes is given\n              if (isArray(selector)) dom = compact(selector); // Wrap DOM nodes.\n              else if (isObject(selector)) dom = [selector], selector = null; // If it's a html fragment, create nodes from it\n                else if (fragmentRE.test(selector)) dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null; // If there's a context, create a collection on that context first, and select\n                  // nodes from there\n                  else if (context !== undefined$1) return $(context).find(selector); // And last but no least, if it's a CSS selector, use it to select nodes.\n                    else dom = zepto.qsa(document, selector);\n            } // create a new Zepto collection from the nodes found\n\n      return zepto.Z(dom, selector);\n    }; // `$` will be the base `Zepto` object. When calling this\n    // function just call `$.zepto.init, which makes the implementation\n    // details of selecting nodes and creating Zepto collections\n    // patchable in plugins.\n\n\n    $ = function (selector, context) {\n      return zepto.init(selector, context);\n    };\n\n    function extend(target, source, deep) {\n      for (key in source) if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {\n        if (isPlainObject(source[key]) && !isPlainObject(target[key])) target[key] = {};\n        if (isArray(source[key]) && !isArray(target[key])) target[key] = [];\n        extend(target[key], source[key], deep);\n      } else if (source[key] !== undefined$1) target[key] = source[key];\n    } // Copy all but undefined properties from one or more\n    // objects to the `target` object.\n\n\n    $.extend = function (target) {\n      var deep,\n          args = slice.call(arguments, 1);\n\n      if (typeof target == 'boolean') {\n        deep = target;\n        target = args.shift();\n      }\n\n      args.forEach(function (arg) {\n        extend(target, arg, deep);\n      });\n      return target;\n    }; // `$.zepto.qsa` is Zepto's CSS selector implementation which\n    // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\n    // This method can be overridden in plugins.\n\n\n    zepto.qsa = function (element, selector) {\n      var found,\n          maybeID = selector[0] == '#',\n          maybeClass = !maybeID && selector[0] == '.',\n          nameOnly = maybeID || maybeClass ? selector.slice(1) : selector,\n          // Ensure that a 1 char tag name still gets checked\n      isSimple = simpleSelectorRE.test(nameOnly);\n      return element.getElementById && isSimple && maybeID ? // Safari DocumentFragment doesn't have getElementById\n      (found = element.getElementById(nameOnly)) ? [found] : [] : element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11 ? [] : slice.call(isSimple && !maybeID && element.getElementsByClassName ? // DocumentFragment doesn't have getElementsByClassName/TagName\n      maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class\n      element.getElementsByTagName(selector) : // Or a tag\n      element.querySelectorAll(selector) // Or it's not simple, and we need to query all\n      );\n    };\n\n    function filtered(nodes, selector) {\n      return selector == null ? $(nodes) : $(nodes).filter(selector);\n    }\n\n    $.contains = document.documentElement.contains ? function (parent, node) {\n      return parent !== node && parent.contains(node);\n    } : function (parent, node) {\n      while (node && (node = node.parentNode)) if (node === parent) return true;\n\n      return false;\n    };\n\n    function funcArg(context, arg, idx, payload) {\n      return isFunction(arg) ? arg.call(context, idx, payload) : arg;\n    }\n\n    function setAttribute(node, name, value) {\n      value == null ? node.removeAttribute(name) : node.setAttribute(name, value);\n    } // access className property while respecting SVGAnimatedString\n\n\n    function className(node, value) {\n      var klass = node.className || '',\n          svg = klass && klass.baseVal !== undefined$1;\n      if (value === undefined$1) return svg ? klass.baseVal : klass;\n      svg ? klass.baseVal = value : node.className = value;\n    } // \"true\"  => true\n    // \"false\" => false\n    // \"null\"  => null\n    // \"42\"    => 42\n    // \"42.5\"  => 42.5\n    // \"08\"    => \"08\"\n    // JSON    => parse if valid\n    // String  => self\n\n\n    function deserializeValue(value) {\n      try {\n        return value ? value == \"true\" || (value == \"false\" ? false : value == \"null\" ? null : +value + \"\" == value ? +value : /^[\\[\\{]/.test(value) ? $.parseJSON(value) : value) : value;\n      } catch (e) {\n        return value;\n      }\n    }\n\n    $.type = type;\n    $.isFunction = isFunction;\n    $.isWindow = isWindow;\n    $.isArray = isArray;\n    $.isPlainObject = isPlainObject;\n\n    $.isEmptyObject = function (obj) {\n      var name;\n\n      for (name in obj) return false;\n\n      return true;\n    };\n\n    $.isNumeric = function (val) {\n      var num = Number(val),\n          type = typeof val;\n      return val != null && type != 'boolean' && (type != 'string' || val.length) && !isNaN(num) && isFinite(num) || false;\n    };\n\n    $.inArray = function (elem, array, i) {\n      return emptyArray.indexOf.call(array, elem, i);\n    };\n\n    $.camelCase = camelize;\n\n    $.trim = function (str) {\n      return str == null ? \"\" : String.prototype.trim.call(str);\n    }; // plugin compatibility\n\n\n    $.uuid = 0;\n    $.support = {};\n    $.expr = {};\n\n    $.noop = function () {};\n\n    $.map = function (elements, callback) {\n      var value,\n          values = [],\n          i,\n          key;\n      if (likeArray(elements)) for (i = 0; i < elements.length; i++) {\n        value = callback(elements[i], i);\n        if (value != null) values.push(value);\n      } else for (key in elements) {\n        value = callback(elements[key], key);\n        if (value != null) values.push(value);\n      }\n      return flatten(values);\n    };\n\n    $.each = function (elements, callback) {\n      var i, key;\n\n      if (likeArray(elements)) {\n        for (i = 0; i < elements.length; i++) if (callback.call(elements[i], i, elements[i]) === false) return elements;\n      } else {\n        for (key in elements) if (callback.call(elements[key], key, elements[key]) === false) return elements;\n      }\n\n      return elements;\n    };\n\n    $.grep = function (elements, callback) {\n      return filter.call(elements, callback);\n    };\n\n    if (window.JSON) $.parseJSON = JSON.parse; // Populate the class2type map\n\n    $.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function (i, name) {\n      class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }); // Define methods that will be available on all\n    // Zepto collections\n\n    $.fn = {\n      constructor: zepto.Z,\n      length: 0,\n      // Because a collection acts like an array\n      // copy over these useful array functions.\n      forEach: emptyArray.forEach,\n      reduce: emptyArray.reduce,\n      push: emptyArray.push,\n      sort: emptyArray.sort,\n      splice: emptyArray.splice,\n      indexOf: emptyArray.indexOf,\n      concat: function () {\n        var i,\n            value,\n            args = [];\n\n        for (i = 0; i < arguments.length; i++) {\n          value = arguments[i];\n          args[i] = zepto.isZ(value) ? value.toArray() : value;\n        }\n\n        return concat.apply(zepto.isZ(this) ? this.toArray() : this, args);\n      },\n      // `map` and `slice` in the jQuery API work differently\n      // from their array counterparts\n      map: function (fn) {\n        return $($.map(this, function (el, i) {\n          return fn.call(el, i, el);\n        }));\n      },\n      slice: function () {\n        return $(slice.apply(this, arguments));\n      },\n      ready: function (callback) {\n        // need to check if document.body exists for IE as that browser reports\n        // document ready when it hasn't yet created the body element\n        if (readyRE.test(document.readyState) && document.body) callback($);else document.addEventListener('DOMContentLoaded', function () {\n          callback($);\n        }, false);\n        return this;\n      },\n      get: function (idx) {\n        return idx === undefined$1 ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length];\n      },\n      toArray: function () {\n        return this.get();\n      },\n      size: function () {\n        return this.length;\n      },\n      remove: function () {\n        return this.each(function () {\n          if (this.parentNode != null) this.parentNode.removeChild(this);\n        });\n      },\n      each: function (callback) {\n        emptyArray.every.call(this, function (el, idx) {\n          return callback.call(el, idx, el) !== false;\n        });\n        return this;\n      },\n      filter: function (selector) {\n        if (isFunction(selector)) return this.not(this.not(selector));\n        return $(filter.call(this, function (element) {\n          return zepto.matches(element, selector);\n        }));\n      },\n      add: function (selector, context) {\n        return $(uniq(this.concat($(selector, context))));\n      },\n      is: function (selector) {\n        return this.length > 0 && zepto.matches(this[0], selector);\n      },\n      not: function (selector) {\n        var nodes = [];\n        if (isFunction(selector) && selector.call !== undefined$1) this.each(function (idx) {\n          if (!selector.call(this, idx)) nodes.push(this);\n        });else {\n          var excludes = typeof selector == 'string' ? this.filter(selector) : likeArray(selector) && isFunction(selector.item) ? slice.call(selector) : $(selector);\n          this.forEach(function (el) {\n            if (excludes.indexOf(el) < 0) nodes.push(el);\n          });\n        }\n        return $(nodes);\n      },\n      has: function (selector) {\n        return this.filter(function () {\n          return isObject(selector) ? $.contains(this, selector) : $(this).find(selector).size();\n        });\n      },\n      eq: function (idx) {\n        return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1);\n      },\n      first: function () {\n        var el = this[0];\n        return el && !isObject(el) ? el : $(el);\n      },\n      last: function () {\n        var el = this[this.length - 1];\n        return el && !isObject(el) ? el : $(el);\n      },\n      find: function (selector) {\n        var result,\n            $this = this;\n        if (!selector) result = $();else if (typeof selector == 'object') result = $(selector).filter(function () {\n          var node = this;\n          return emptyArray.some.call($this, function (parent) {\n            return $.contains(parent, node);\n          });\n        });else if (this.length == 1) result = $(zepto.qsa(this[0], selector));else result = this.map(function () {\n          return zepto.qsa(this, selector);\n        });\n        return result;\n      },\n      closest: function (selector, context) {\n        var nodes = [],\n            collection = typeof selector == 'object' && $(selector);\n        this.each(function (_, node) {\n          while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector))) node = node !== context && !isDocument(node) && node.parentNode;\n\n          if (node && nodes.indexOf(node) < 0) nodes.push(node);\n        });\n        return $(nodes);\n      },\n      parents: function (selector) {\n        var ancestors = [],\n            nodes = this;\n\n        while (nodes.length > 0) nodes = $.map(nodes, function (node) {\n          if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\n            ancestors.push(node);\n            return node;\n          }\n        });\n\n        return filtered(ancestors, selector);\n      },\n      parent: function (selector) {\n        return filtered(uniq(this.pluck('parentNode')), selector);\n      },\n      children: function (selector) {\n        return filtered(this.map(function () {\n          return children(this);\n        }), selector);\n      },\n      contents: function () {\n        return this.map(function () {\n          return this.contentDocument || slice.call(this.childNodes);\n        });\n      },\n      siblings: function (selector) {\n        return filtered(this.map(function (i, el) {\n          return filter.call(children(el.parentNode), function (child) {\n            return child !== el;\n          });\n        }), selector);\n      },\n      empty: function () {\n        return this.each(function () {\n          this.innerHTML = '';\n        });\n      },\n      // `pluck` is borrowed from Prototype.js\n      pluck: function (property) {\n        return $.map(this, function (el) {\n          return el[property];\n        });\n      },\n      show: function () {\n        return this.each(function () {\n          this.style.display == \"none\" && (this.style.display = '');\n          if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\") this.style.display = defaultDisplay(this.nodeName);\n        });\n      },\n      replaceWith: function (newContent) {\n        return this.before(newContent).remove();\n      },\n      wrap: function (structure) {\n        var func = isFunction(structure);\n        if (this[0] && !func) var dom = $(structure).get(0),\n            clone = dom.parentNode || this.length > 1;\n        return this.each(function (index) {\n          $(this).wrapAll(func ? structure.call(this, index) : clone ? dom.cloneNode(true) : dom);\n        });\n      },\n      wrapAll: function (structure) {\n        if (this[0]) {\n          $(this[0]).before(structure = $(structure));\n          var children; // drill down to the inmost element\n\n          while ((children = structure.children()).length) structure = children.first();\n\n          $(structure).append(this);\n        }\n\n        return this;\n      },\n      wrapInner: function (structure) {\n        var func = isFunction(structure);\n        return this.each(function (index) {\n          var self = $(this),\n              contents = self.contents(),\n              dom = func ? structure.call(this, index) : structure;\n          contents.length ? contents.wrapAll(dom) : self.append(dom);\n        });\n      },\n      unwrap: function () {\n        this.parent().each(function () {\n          $(this).replaceWith($(this).children());\n        });\n        return this;\n      },\n      clone: function () {\n        return this.map(function () {\n          return this.cloneNode(true);\n        });\n      },\n      hide: function () {\n        return this.css(\"display\", \"none\");\n      },\n      toggle: function (setting) {\n        return this.each(function () {\n          var el = $(this);\n          (setting === undefined$1 ? el.css(\"display\") == \"none\" : setting) ? el.show() : el.hide();\n        });\n      },\n      prev: function (selector) {\n        return $(this.pluck('previousElementSibling')).filter(selector || '*');\n      },\n      next: function (selector) {\n        return $(this.pluck('nextElementSibling')).filter(selector || '*');\n      },\n      html: function (html) {\n        return 0 in arguments ? this.each(function (idx) {\n          var originHtml = this.innerHTML;\n          $(this).empty().append(funcArg(this, html, idx, originHtml));\n        }) : 0 in this ? this[0].innerHTML : null;\n      },\n      text: function (text) {\n        return 0 in arguments ? this.each(function (idx) {\n          var newText = funcArg(this, text, idx, this.textContent);\n          this.textContent = newText == null ? '' : '' + newText;\n        }) : 0 in this ? this.pluck('textContent').join(\"\") : null;\n      },\n      attr: function (name, value) {\n        var result;\n        return typeof name == 'string' && !(1 in arguments) ? 0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined$1 : this.each(function (idx) {\n          if (this.nodeType !== 1) return;\n          if (isObject(name)) for (key in name) setAttribute(this, key, name[key]);else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)));\n        });\n      },\n      removeAttr: function (name) {\n        return this.each(function () {\n          this.nodeType === 1 && name.split(' ').forEach(function (attribute) {\n            setAttribute(this, attribute);\n          }, this);\n        });\n      },\n      prop: function (name, value) {\n        name = propMap[name] || name;\n        return 1 in arguments ? this.each(function (idx) {\n          this[name] = funcArg(this, value, idx, this[name]);\n        }) : this[0] && this[0][name];\n      },\n      removeProp: function (name) {\n        name = propMap[name] || name;\n        return this.each(function () {\n          delete this[name];\n        });\n      },\n      data: function (name, value) {\n        var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase();\n        var data = 1 in arguments ? this.attr(attrName, value) : this.attr(attrName);\n        return data !== null ? deserializeValue(data) : undefined$1;\n      },\n      val: function (value) {\n        if (0 in arguments) {\n          if (value == null) value = \"\";\n          return this.each(function (idx) {\n            this.value = funcArg(this, value, idx, this.value);\n          });\n        } else {\n          return this[0] && (this[0].multiple ? $(this[0]).find('option').filter(function () {\n            return this.selected;\n          }).pluck('value') : this[0].value);\n        }\n      },\n      offset: function (coordinates) {\n        if (coordinates) return this.each(function (index) {\n          var $this = $(this),\n              coords = funcArg(this, coordinates, index, $this.offset()),\n              parentOffset = $this.offsetParent().offset(),\n              props = {\n            top: coords.top - parentOffset.top,\n            left: coords.left - parentOffset.left\n          };\n          if ($this.css('position') == 'static') props['position'] = 'relative';\n          $this.css(props);\n        });\n        if (!this.length) return null;\n        if (document.documentElement !== this[0] && !$.contains(document.documentElement, this[0])) return {\n          top: 0,\n          left: 0\n        };\n        var obj = this[0].getBoundingClientRect();\n        return {\n          left: obj.left + window.pageXOffset,\n          top: obj.top + window.pageYOffset,\n          width: Math.round(obj.width),\n          height: Math.round(obj.height)\n        };\n      },\n      css: function (property, value) {\n        if (arguments.length < 2) {\n          var element = this[0];\n\n          if (typeof property == 'string') {\n            if (!element) return;\n            return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property);\n          } else if (isArray(property)) {\n            if (!element) return;\n            var props = {};\n            var computedStyle = getComputedStyle(element, '');\n            $.each(property, function (_, prop) {\n              props[prop] = element.style[camelize(prop)] || computedStyle.getPropertyValue(prop);\n            });\n            return props;\n          }\n        }\n\n        var css = '';\n\n        if (type(property) == 'string') {\n          if (!value && value !== 0) this.each(function () {\n            this.style.removeProperty(dasherize(property));\n          });else css = dasherize(property) + \":\" + maybeAddPx(property, value);\n        } else {\n          for (key in property) if (!property[key] && property[key] !== 0) this.each(function () {\n            this.style.removeProperty(dasherize(key));\n          });else css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';';\n        }\n\n        return this.each(function () {\n          this.style.cssText += ';' + css;\n        });\n      },\n      index: function (element) {\n        return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0]);\n      },\n      hasClass: function (name) {\n        if (!name) return false;\n        return emptyArray.some.call(this, function (el) {\n          return this.test(className(el));\n        }, classRE(name));\n      },\n      addClass: function (name) {\n        if (!name) return this;\n        return this.each(function (idx) {\n          if (!('className' in this)) return;\n          classList = [];\n          var cls = className(this),\n              newName = funcArg(this, name, idx, cls);\n          newName.split(/\\s+/g).forEach(function (klass) {\n            if (!$(this).hasClass(klass)) classList.push(klass);\n          }, this);\n          classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"));\n        });\n      },\n      removeClass: function (name) {\n        return this.each(function (idx) {\n          if (!('className' in this)) return;\n          if (name === undefined$1) return className(this, '');\n          classList = className(this);\n          funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function (klass) {\n            classList = classList.replace(classRE(klass), \" \");\n          });\n          className(this, classList.trim());\n        });\n      },\n      toggleClass: function (name, when) {\n        if (!name) return this;\n        return this.each(function (idx) {\n          var $this = $(this),\n              names = funcArg(this, name, idx, className(this));\n          names.split(/\\s+/g).forEach(function (klass) {\n            (when === undefined$1 ? !$this.hasClass(klass) : when) ? $this.addClass(klass) : $this.removeClass(klass);\n          });\n        });\n      },\n      scrollTop: function (value) {\n        if (!this.length) return;\n        var hasScrollTop = ('scrollTop' in this[0]);\n        if (value === undefined$1) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset;\n        return this.each(hasScrollTop ? function () {\n          this.scrollTop = value;\n        } : function () {\n          this.scrollTo(this.scrollX, value);\n        });\n      },\n      scrollLeft: function (value) {\n        if (!this.length) return;\n        var hasScrollLeft = ('scrollLeft' in this[0]);\n        if (value === undefined$1) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset;\n        return this.each(hasScrollLeft ? function () {\n          this.scrollLeft = value;\n        } : function () {\n          this.scrollTo(value, this.scrollY);\n        });\n      },\n      position: function () {\n        if (!this.length) return;\n        var elem = this[0],\n            // Get *real* offsetParent\n        offsetParent = this.offsetParent(),\n            // Get correct offsets\n        offset = this.offset(),\n            parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? {\n          top: 0,\n          left: 0\n        } : offsetParent.offset(); // Subtract element margins\n        // note: when an element has margin: auto the offsetLeft and marginLeft\n        // are the same in Safari causing offset.left to incorrectly be 0\n\n        offset.top -= parseFloat($(elem).css('margin-top')) || 0;\n        offset.left -= parseFloat($(elem).css('margin-left')) || 0; // Add offsetParent borders\n\n        parentOffset.top += parseFloat($(offsetParent[0]).css('border-top-width')) || 0;\n        parentOffset.left += parseFloat($(offsetParent[0]).css('border-left-width')) || 0; // Subtract the two offsets\n\n        return {\n          top: offset.top - parentOffset.top,\n          left: offset.left - parentOffset.left\n        };\n      },\n      offsetParent: function () {\n        return this.map(function () {\n          var parent = this.offsetParent || document.body;\n\n          while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\") parent = parent.offsetParent;\n\n          return parent;\n        });\n      }\n    }; // for now\n\n    $.fn.detach = $.fn.remove // Generate the `width` and `height` functions\n    ;\n    ['width', 'height'].forEach(function (dimension) {\n      var dimensionProperty = dimension.replace(/./, function (m) {\n        return m[0].toUpperCase();\n      });\n\n      $.fn[dimension] = function (value) {\n        var offset,\n            el = this[0];\n        if (value === undefined$1) return isWindow(el) ? el['inner' + dimensionProperty] : isDocument(el) ? el.documentElement['scroll' + dimensionProperty] : (offset = this.offset()) && offset[dimension];else return this.each(function (idx) {\n          el = $(this);\n          el.css(dimension, funcArg(this, value, idx, el[dimension]()));\n        });\n      };\n    });\n\n    function traverseNode(node, fun) {\n      fun(node);\n\n      for (var i = 0, len = node.childNodes.length; i < len; i++) traverseNode(node.childNodes[i], fun);\n    } // Generate the `after`, `prepend`, `before`, `append`,\n    // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n\n\n    adjacencyOperators.forEach(function (operator, operatorIndex) {\n      var inside = operatorIndex % 2; //=> prepend, append\n\n      $.fn[operator] = function () {\n        // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n        var argType,\n            nodes = $.map(arguments, function (arg) {\n          var arr = [];\n          argType = type(arg);\n\n          if (argType == \"array\") {\n            arg.forEach(function (el) {\n              if (el.nodeType !== undefined$1) return arr.push(el);else if ($.zepto.isZ(el)) return arr = arr.concat(el.get());\n              arr = arr.concat(zepto.fragment(el));\n            });\n            return arr;\n          }\n\n          return argType == \"object\" || arg == null ? arg : zepto.fragment(arg);\n        }),\n            parent,\n            copyByClone = this.length > 1;\n        if (nodes.length < 1) return this;\n        return this.each(function (_, target) {\n          parent = inside ? target : target.parentNode; // convert all methods to a \"before\" operation\n\n          target = operatorIndex == 0 ? target.nextSibling : operatorIndex == 1 ? target.firstChild : operatorIndex == 2 ? target : null;\n          var parentInDocument = $.contains(document.documentElement, parent);\n          nodes.forEach(function (node) {\n            if (copyByClone) node = node.cloneNode(true);else if (!parent) return $(node).remove();\n            parent.insertBefore(node, target);\n            if (parentInDocument) traverseNode(node, function (el) {\n              if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' && (!el.type || el.type === 'text/javascript') && !el.src) {\n                var target = el.ownerDocument ? el.ownerDocument.defaultView : window;\n                target['eval'].call(target, el.innerHTML);\n              }\n            });\n          });\n        });\n      }; // after    => insertAfter\n      // prepend  => prependTo\n      // before   => insertBefore\n      // append   => appendTo\n\n\n      $.fn[inside ? operator + 'To' : 'insert' + (operatorIndex ? 'Before' : 'After')] = function (html) {\n        $(html)[operator](this);\n        return this;\n      };\n    });\n    zepto.Z.prototype = Z.prototype = $.fn; // Export internal API functions in the `$.zepto` namespace\n\n    zepto.uniq = uniq;\n    zepto.deserializeValue = deserializeValue;\n    $.zepto = zepto;\n    return $;\n  }();\n\n  window.Zepto = Zepto;\n  window.$ === undefined && (window.$ = Zepto);\n\n  (function ($) {\n    var jsonpID = +new Date(),\n        document = window.document,\n        key,\n        name,\n        rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n        scriptTypeRE = /^(?:text|application)\\/javascript/i,\n        xmlTypeRE = /^(?:text|application)\\/xml/i,\n        jsonType = 'application/json',\n        htmlType = 'text/html',\n        blankRE = /^\\s*$/,\n        originAnchor = document.createElement('a');\n    originAnchor.href = window.location.href; // trigger a custom event and return false if it was cancelled\n\n    function triggerAndReturn(context, eventName, data) {\n      var event = $.Event(eventName);\n      $(context).trigger(event, data);\n      return !event.isDefaultPrevented();\n    } // trigger an Ajax \"global\" event\n\n\n    function triggerGlobal(settings, context, eventName, data) {\n      if (settings.global) return triggerAndReturn(context || document, eventName, data);\n    } // Number of active Ajax requests\n\n\n    $.active = 0;\n\n    function ajaxStart(settings) {\n      if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart');\n    }\n\n    function ajaxStop(settings) {\n      if (settings.global && ! --$.active) triggerGlobal(settings, null, 'ajaxStop');\n    } // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n\n\n    function ajaxBeforeSend(xhr, settings) {\n      var context = settings.context;\n      if (settings.beforeSend.call(context, xhr, settings) === false || triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false) return false;\n      triggerGlobal(settings, context, 'ajaxSend', [xhr, settings]);\n    }\n\n    function ajaxSuccess(data, xhr, settings, deferred) {\n      var context = settings.context,\n          status = 'success';\n      settings.success.call(context, data, status, xhr);\n      if (deferred) deferred.resolveWith(context, [data, status, xhr]);\n      triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data]);\n      ajaxComplete(status, xhr, settings);\n    } // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\n\n    function ajaxError(error, type, xhr, settings, deferred) {\n      var context = settings.context;\n      settings.error.call(context, xhr, type, error);\n      if (deferred) deferred.rejectWith(context, [xhr, type, error]);\n      triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type]);\n      ajaxComplete(type, xhr, settings);\n    } // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\n\n    function ajaxComplete(status, xhr, settings) {\n      var context = settings.context;\n      settings.complete.call(context, xhr, status);\n      triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings]);\n      ajaxStop(settings);\n    }\n\n    function ajaxDataFilter(data, type, settings) {\n      if (settings.dataFilter == empty) return data;\n      var context = settings.context;\n      return settings.dataFilter.call(context, data, type);\n    } // Empty function, used as default callback\n\n\n    function empty() {}\n\n    $.ajaxJSONP = function (options, deferred) {\n      if (!('type' in options)) return $.ajax(options);\n\n      var _callbackName = options.jsonpCallback,\n          callbackName = ($.isFunction(_callbackName) ? _callbackName() : _callbackName) || 'Zepto' + jsonpID++,\n          script = document.createElement('script'),\n          originalCallback = window[callbackName],\n          responseData,\n          abort = function (errorType) {\n        $(script).triggerHandler('error', errorType || 'abort');\n      },\n          xhr = {\n        abort: abort\n      },\n          abortTimeout;\n\n      if (deferred) deferred.promise(xhr);\n      $(script).on('load error', function (e, errorType) {\n        clearTimeout(abortTimeout);\n        $(script).off().remove();\n\n        if (e.type == 'error' || !responseData) {\n          ajaxError(null, errorType || 'error', xhr, options, deferred);\n        } else {\n          ajaxSuccess(responseData[0], xhr, options, deferred);\n        }\n\n        window[callbackName] = originalCallback;\n        if (responseData && $.isFunction(originalCallback)) originalCallback(responseData[0]);\n        originalCallback = responseData = undefined;\n      });\n\n      if (ajaxBeforeSend(xhr, options) === false) {\n        abort('abort');\n        return xhr;\n      }\n\n      window[callbackName] = function () {\n        responseData = arguments;\n      };\n\n      script.src = options.url.replace(/\\?(.+)=\\?/, '?$1=' + callbackName);\n      document.head.appendChild(script);\n      if (options.timeout > 0) abortTimeout = setTimeout(function () {\n        abort('timeout');\n      }, options.timeout);\n      return xhr;\n    };\n\n    $.ajaxSettings = {\n      // Default type of request\n      type: 'GET',\n      // Callback that is executed before request\n      beforeSend: empty,\n      // Callback that is executed if the request succeeds\n      success: empty,\n      // Callback that is executed the the server drops error\n      error: empty,\n      // Callback that is executed on request complete (both: error and success)\n      complete: empty,\n      // The context for the callbacks\n      context: null,\n      // Whether to trigger \"global\" Ajax events\n      global: true,\n      // Transport\n      xhr: function () {\n        return new window.XMLHttpRequest();\n      },\n      // MIME types mapping\n      // IIS returns Javascript as \"application/x-javascript\"\n      accepts: {\n        script: 'text/javascript, application/javascript, application/x-javascript',\n        json: jsonType,\n        xml: 'application/xml, text/xml',\n        html: htmlType,\n        text: 'text/plain'\n      },\n      // Whether the request is to another domain\n      crossDomain: false,\n      // Default timeout\n      timeout: 0,\n      // Whether data should be serialized to string\n      processData: true,\n      // Whether the browser should be allowed to cache GET responses\n      cache: true,\n      //Used to handle the raw response data of XMLHttpRequest.\n      //This is a pre-filtering function to sanitize the response.\n      //The sanitized response should be returned\n      dataFilter: empty\n    };\n\n    function mimeToDataType(mime) {\n      if (mime) mime = mime.split(';', 2)[0];\n      return mime && (mime == htmlType ? 'html' : mime == jsonType ? 'json' : scriptTypeRE.test(mime) ? 'script' : xmlTypeRE.test(mime) && 'xml') || 'text';\n    }\n\n    function appendQuery(url, query) {\n      if (query == '') return url;\n      return (url + '&' + query).replace(/[&?]{1,2}/, '?');\n    } // serialize payload and append it to the URL for GET requests\n\n\n    function serializeData(options) {\n      if (options.processData && options.data && $.type(options.data) != \"string\") options.data = $.param(options.data, options.traditional);\n      if (options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType)) options.url = appendQuery(options.url, options.data), options.data = undefined;\n    }\n\n    $.ajax = function (options) {\n      var settings = $.extend({}, options || {}),\n          deferred = $.Deferred && $.Deferred(),\n          urlAnchor,\n          hashIndex;\n\n      for (key in $.ajaxSettings) if (settings[key] === undefined) settings[key] = $.ajaxSettings[key];\n\n      ajaxStart(settings);\n\n      if (!settings.crossDomain) {\n        urlAnchor = document.createElement('a');\n        urlAnchor.href = settings.url; // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049\n\n        urlAnchor.href = urlAnchor.href;\n        settings.crossDomain = originAnchor.protocol + '//' + originAnchor.host !== urlAnchor.protocol + '//' + urlAnchor.host;\n      }\n\n      if (!settings.url) settings.url = window.location.toString();\n      if ((hashIndex = settings.url.indexOf('#')) > -1) settings.url = settings.url.slice(0, hashIndex);\n      serializeData(settings);\n      var dataType = settings.dataType,\n          hasPlaceholder = /\\?.+=\\?/.test(settings.url);\n      if (hasPlaceholder) dataType = 'jsonp';\n      if (settings.cache === false || (!options || options.cache !== true) && ('script' == dataType || 'jsonp' == dataType)) settings.url = appendQuery(settings.url, '_=' + Date.now());\n\n      if ('jsonp' == dataType) {\n        if (!hasPlaceholder) settings.url = appendQuery(settings.url, settings.jsonp ? settings.jsonp + '=?' : settings.jsonp === false ? '' : 'callback=?');\n        return $.ajaxJSONP(settings, deferred);\n      }\n\n      var mime = settings.accepts[dataType],\n          headers = {},\n          setHeader = function (name, value) {\n        headers[name.toLowerCase()] = [name, value];\n      },\n          protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n          xhr = settings.xhr(),\n          nativeSetHeader = xhr.setRequestHeader,\n          abortTimeout;\n\n      if (deferred) deferred.promise(xhr);\n      if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest');\n      setHeader('Accept', mime || '*/*');\n\n      if (mime = settings.mimeType || mime) {\n        if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0];\n        xhr.overrideMimeType && xhr.overrideMimeType(mime);\n      }\n\n      if (settings.contentType || settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET') setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\n      if (settings.headers) for (name in settings.headers) setHeader(name, settings.headers[name]);\n      xhr.setRequestHeader = setHeader;\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState == 4) {\n          xhr.onreadystatechange = empty;\n          clearTimeout(abortTimeout);\n          var result,\n              error = false;\n\n          if (xhr.status >= 200 && xhr.status < 300 || xhr.status == 304 || xhr.status == 0 && protocol == 'file:') {\n            dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\n            if (xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob') result = xhr.response;else {\n              result = xhr.responseText;\n\n              try {\n                // http://perfectionkills.com/global-eval-what-are-the-options/\n                // sanitize response accordingly if data filter callback provided\n                result = ajaxDataFilter(result, dataType, settings);\n                if (dataType == 'script') (1, eval)(result);else if (dataType == 'xml') result = xhr.responseXML;else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result);\n              } catch (e) {\n                error = e;\n              }\n\n              if (error) return ajaxError(error, 'parsererror', xhr, settings, deferred);\n            }\n            ajaxSuccess(result, xhr, settings, deferred);\n          } else {\n            ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred);\n          }\n        }\n      };\n\n      if (ajaxBeforeSend(xhr, settings) === false) {\n        xhr.abort();\n        ajaxError(null, 'abort', xhr, settings, deferred);\n        return xhr;\n      }\n\n      var async = 'async' in settings ? settings.async : true;\n      xhr.open(settings.type, settings.url, async, settings.username, settings.password);\n      if (settings.xhrFields) for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name];\n\n      for (name in headers) nativeSetHeader.apply(xhr, headers[name]);\n\n      if (settings.timeout > 0) abortTimeout = setTimeout(function () {\n        xhr.onreadystatechange = empty;\n        xhr.abort();\n        ajaxError(null, 'timeout', xhr, settings, deferred);\n      }, settings.timeout); // avoid sending empty string (#319)\n\n      xhr.send(settings.data ? settings.data : null);\n      return xhr;\n    }; // handle optional data/success arguments\n\n\n    function parseArguments(url, data, success, dataType) {\n      if ($.isFunction(data)) dataType = success, success = data, data = undefined;\n      if (!$.isFunction(success)) dataType = success, success = undefined;\n      return {\n        url: url,\n        data: data,\n        success: success,\n        dataType: dataType\n      };\n    }\n\n    $.get = function ()\n    /* url, data, success, dataType */\n    {\n      return $.ajax(parseArguments.apply(null, arguments));\n    };\n\n    $.post = function ()\n    /* url, data, success, dataType */\n    {\n      var options = parseArguments.apply(null, arguments);\n      options.type = 'POST';\n      return $.ajax(options);\n    };\n\n    $.getJSON = function ()\n    /* url, data, success */\n    {\n      var options = parseArguments.apply(null, arguments);\n      options.dataType = 'json';\n      return $.ajax(options);\n    };\n\n    $.fn.load = function (url, data, success) {\n      if (!this.length) return this;\n      var self = this,\n          parts = url.split(/\\s/),\n          selector,\n          options = parseArguments(url, data, success),\n          callback = options.success;\n      if (parts.length > 1) options.url = parts[0], selector = parts[1];\n\n      options.success = function (response) {\n        self.html(selector ? $('<div>').html(response.replace(rscript, \"\")).find(selector) : response);\n        callback && callback.apply(self, arguments);\n      };\n\n      $.ajax(options);\n      return this;\n    };\n\n    var escape = encodeURIComponent;\n\n    function serialize(params, obj, traditional, scope) {\n      var type,\n          array = $.isArray(obj),\n          hash = $.isPlainObject(obj);\n      $.each(obj, function (key, value) {\n        type = $.type(value);\n        if (scope) key = traditional ? scope : scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'; // handle data in serializeArray() format\n\n        if (!scope && array) params.add(value.name, value.value); // recurse into nested objects\n        else if (type == \"array\" || !traditional && type == \"object\") serialize(params, value, traditional, key);else params.add(key, value);\n      });\n    }\n\n    $.param = function (obj, traditional) {\n      var params = [];\n\n      params.add = function (key, value) {\n        if ($.isFunction(value)) value = value();\n        if (value == null) value = \"\";\n        this.push(escape(key) + '=' + escape(value));\n      };\n\n      serialize(params, obj, traditional);\n      return params.join('&').replace(/%20/g, '+');\n    };\n  })(Zepto);\n\n  (function ($) {\n    // Create a collection of callbacks to be fired in a sequence, with configurable behaviour\n    // Option flags:\n    //   - once: Callbacks fired at most one time.\n    //   - memory: Remember the most recent context and arguments\n    //   - stopOnFalse: Cease iterating over callback list\n    //   - unique: Permit adding at most one instance of the same callback\n    $.Callbacks = function (options) {\n      options = $.extend({}, options);\n\n      var memory,\n          // Last fire value (for non-forgettable lists)\n      fired,\n          // Flag to know if list was already fired\n      firing,\n          // Flag to know if list is currently firing\n      firingStart,\n          // First callback to fire (used internally by add and fireWith)\n      firingLength,\n          // End of the loop when firing\n      firingIndex,\n          // Index of currently firing callback (modified by remove if needed)\n      list = [],\n          // Actual callback list\n      stack = !options.once && [],\n          // Stack of fire calls for repeatable lists\n      fire = function (data) {\n        memory = options.memory && data;\n        fired = true;\n        firingIndex = firingStart || 0;\n        firingStart = 0;\n        firingLength = list.length;\n        firing = true;\n\n        for (; list && firingIndex < firingLength; ++firingIndex) {\n          if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {\n            memory = false;\n            break;\n          }\n        }\n\n        firing = false;\n\n        if (list) {\n          if (stack) stack.length && fire(stack.shift());else if (memory) list.length = 0;else Callbacks.disable();\n        }\n      },\n          Callbacks = {\n        add: function () {\n          if (list) {\n            var start = list.length,\n                add = function (args) {\n              $.each(args, function (_, arg) {\n                if (typeof arg === \"function\") {\n                  if (!options.unique || !Callbacks.has(arg)) list.push(arg);\n                } else if (arg && arg.length && typeof arg !== 'string') add(arg);\n              });\n            };\n\n            add(arguments);\n            if (firing) firingLength = list.length;else if (memory) {\n              firingStart = start;\n              fire(memory);\n            }\n          }\n\n          return this;\n        },\n        remove: function () {\n          if (list) {\n            $.each(arguments, function (_, arg) {\n              var index;\n\n              while ((index = $.inArray(arg, list, index)) > -1) {\n                list.splice(index, 1); // Handle firing indexes\n\n                if (firing) {\n                  if (index <= firingLength) --firingLength;\n                  if (index <= firingIndex) --firingIndex;\n                }\n              }\n            });\n          }\n\n          return this;\n        },\n        has: function (fn) {\n          return !!(list && (fn ? $.inArray(fn, list) > -1 : list.length));\n        },\n        empty: function () {\n          firingLength = list.length = 0;\n          return this;\n        },\n        disable: function () {\n          list = stack = memory = undefined;\n          return this;\n        },\n        disabled: function () {\n          return !list;\n        },\n        lock: function () {\n          stack = undefined;\n          if (!memory) Callbacks.disable();\n          return this;\n        },\n        locked: function () {\n          return !stack;\n        },\n        fireWith: function (context, args) {\n          if (list && (!fired || stack)) {\n            args = args || [];\n            args = [context, args.slice ? args.slice() : args];\n            if (firing) stack.push(args);else fire(args);\n          }\n\n          return this;\n        },\n        fire: function () {\n          return Callbacks.fireWith(this, arguments);\n        },\n        fired: function () {\n          return !!fired;\n        }\n      };\n\n      return Callbacks;\n    };\n  })(Zepto);\n\n  (function ($) {\n    var slice = Array.prototype.slice;\n\n    function Deferred(func) {\n      var tuples = [// action, add listener, listener list, final state\n      [\"resolve\", \"done\", $.Callbacks({\n        once: 1,\n        memory: 1\n      }), \"resolved\"], [\"reject\", \"fail\", $.Callbacks({\n        once: 1,\n        memory: 1\n      }), \"rejected\"], [\"notify\", \"progress\", $.Callbacks({\n        memory: 1\n      })]],\n          state = \"pending\",\n          promise = {\n        state: function () {\n          return state;\n        },\n        always: function () {\n          deferred.done(arguments).fail(arguments);\n          return this;\n        },\n        then: function ()\n        /* fnDone [, fnFailed [, fnProgress]] */\n        {\n          var fns = arguments;\n          return Deferred(function (defer) {\n            $.each(tuples, function (i, tuple) {\n              var fn = $.isFunction(fns[i]) && fns[i];\n              deferred[tuple[1]](function () {\n                var returned = fn && fn.apply(this, arguments);\n\n                if (returned && $.isFunction(returned.promise)) {\n                  returned.promise().done(defer.resolve).fail(defer.reject).progress(defer.notify);\n                } else {\n                  var context = this === promise ? defer.promise() : this,\n                      values = fn ? [returned] : arguments;\n                  defer[tuple[0] + \"With\"](context, values);\n                }\n              });\n            });\n            fns = null;\n          }).promise();\n        },\n        promise: function (obj) {\n          return obj != null ? $.extend(obj, promise) : promise;\n        }\n      },\n          deferred = {};\n      $.each(tuples, function (i, tuple) {\n        var list = tuple[2],\n            stateString = tuple[3];\n        promise[tuple[1]] = list.add;\n\n        if (stateString) {\n          list.add(function () {\n            state = stateString;\n          }, tuples[i ^ 1][2].disable, tuples[2][2].lock);\n        }\n\n        deferred[tuple[0]] = function () {\n          deferred[tuple[0] + \"With\"](this === deferred ? promise : this, arguments);\n          return this;\n        };\n\n        deferred[tuple[0] + \"With\"] = list.fireWith;\n      });\n      promise.promise(deferred);\n      if (func) func.call(deferred, deferred);\n      return deferred;\n    }\n\n    $.when = function (sub) {\n      var resolveValues = slice.call(arguments),\n          len = resolveValues.length,\n          i = 0,\n          remain = len !== 1 || sub && $.isFunction(sub.promise) ? len : 0,\n          deferred = remain === 1 ? sub : Deferred(),\n          progressValues,\n          progressContexts,\n          resolveContexts,\n          updateFn = function (i, ctx, val) {\n        return function (value) {\n          ctx[i] = this;\n          val[i] = arguments.length > 1 ? slice.call(arguments) : value;\n\n          if (val === progressValues) {\n            deferred.notifyWith(ctx, val);\n          } else if (! --remain) {\n            deferred.resolveWith(ctx, val);\n          }\n        };\n      };\n\n      if (len > 1) {\n        progressValues = new Array(len);\n        progressContexts = new Array(len);\n        resolveContexts = new Array(len);\n\n        for (; i < len; ++i) {\n          if (resolveValues[i] && $.isFunction(resolveValues[i].promise)) {\n            resolveValues[i].promise().done(updateFn(i, resolveContexts, resolveValues)).fail(deferred.reject).progress(updateFn(i, progressContexts, progressValues));\n          } else {\n            --remain;\n          }\n        }\n      }\n\n      if (!remain) deferred.resolveWith(resolveContexts, resolveValues);\n      return deferred.promise();\n    };\n\n    $.Deferred = Deferred;\n  })(Zepto);\n\n  (function ($) {\n    var _zid = 1,\n        undefined$1,\n        slice = Array.prototype.slice,\n        isFunction = $.isFunction,\n        isString = function (obj) {\n      return typeof obj == 'string';\n    },\n        handlers = {},\n        specialEvents = {},\n        focusinSupported = ('onfocusin' in window),\n        focus = {\n      focus: 'focusin',\n      blur: 'focusout'\n    },\n        hover = {\n      mouseenter: 'mouseover',\n      mouseleave: 'mouseout'\n    };\n\n    specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents';\n\n    function zid(element) {\n      return element._zid || (element._zid = _zid++);\n    }\n\n    function findHandlers(element, event, fn, selector) {\n      event = parse(event);\n      if (event.ns) var matcher = matcherFor(event.ns);\n      return (handlers[zid(element)] || []).filter(function (handler) {\n        return handler && (!event.e || handler.e == event.e) && (!event.ns || matcher.test(handler.ns)) && (!fn || zid(handler.fn) === zid(fn)) && (!selector || handler.sel == selector);\n      });\n    }\n\n    function parse(event) {\n      var parts = ('' + event).split('.');\n      return {\n        e: parts[0],\n        ns: parts.slice(1).sort().join(' ')\n      };\n    }\n\n    function matcherFor(ns) {\n      return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)');\n    }\n\n    function eventCapture(handler, captureSetting) {\n      return handler.del && !focusinSupported && handler.e in focus || !!captureSetting;\n    }\n\n    function realEvent(type) {\n      return hover[type] || focusinSupported && focus[type] || type;\n    }\n\n    function add(element, events, fn, data, selector, delegator, capture) {\n      var id = zid(element),\n          set = handlers[id] || (handlers[id] = []);\n      events.split(/\\s/).forEach(function (event) {\n        if (event == 'ready') return $(document).ready(fn);\n        var handler = parse(event);\n        handler.fn = fn;\n        handler.sel = selector; // emulate mouseenter, mouseleave\n\n        if (handler.e in hover) fn = function (e) {\n          var related = e.relatedTarget;\n          if (!related || related !== this && !$.contains(this, related)) return handler.fn.apply(this, arguments);\n        };\n        handler.del = delegator;\n        var callback = delegator || fn;\n\n        handler.proxy = function (e) {\n          e = compatible(e);\n          if (e.isImmediatePropagationStopped()) return;\n          e.data = data;\n          var result = callback.apply(element, e._args == undefined$1 ? [e] : [e].concat(e._args));\n          if (result === false) e.preventDefault(), e.stopPropagation();\n          return result;\n        };\n\n        handler.i = set.length;\n        set.push(handler);\n        if ('addEventListener' in element) element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture));\n      });\n    }\n\n    function remove(element, events, fn, selector, capture) {\n      var id = zid(element);\n      (events || '').split(/\\s/).forEach(function (event) {\n        findHandlers(element, event, fn, selector).forEach(function (handler) {\n          delete handlers[id][handler.i];\n          if ('removeEventListener' in element) element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture));\n        });\n      });\n    }\n\n    $.event = {\n      add: add,\n      remove: remove\n    };\n\n    $.proxy = function (fn, context) {\n      var args = 2 in arguments && slice.call(arguments, 2);\n\n      if (isFunction(fn)) {\n        var proxyFn = function () {\n          return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments);\n        };\n\n        proxyFn._zid = zid(fn);\n        return proxyFn;\n      } else if (isString(context)) {\n        if (args) {\n          args.unshift(fn[context], fn);\n          return $.proxy.apply(null, args);\n        } else {\n          return $.proxy(fn[context], fn);\n        }\n      } else {\n        throw new TypeError(\"expected function\");\n      }\n    };\n\n    $.fn.bind = function (event, data, callback) {\n      return this.on(event, data, callback);\n    };\n\n    $.fn.unbind = function (event, callback) {\n      return this.off(event, callback);\n    };\n\n    $.fn.one = function (event, selector, data, callback) {\n      return this.on(event, selector, data, callback, 1);\n    };\n\n    var returnTrue = function () {\n      return true;\n    },\n        returnFalse = function () {\n      return false;\n    },\n        ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,\n        eventMethods = {\n      preventDefault: 'isDefaultPrevented',\n      stopImmediatePropagation: 'isImmediatePropagationStopped',\n      stopPropagation: 'isPropagationStopped'\n    };\n\n    function compatible(event, source) {\n      if (source || !event.isDefaultPrevented) {\n        source || (source = event);\n        $.each(eventMethods, function (name, predicate) {\n          var sourceMethod = source[name];\n\n          event[name] = function () {\n            this[predicate] = returnTrue;\n            return sourceMethod && sourceMethod.apply(source, arguments);\n          };\n\n          event[predicate] = returnFalse;\n        });\n        event.timeStamp || (event.timeStamp = Date.now());\n        if (source.defaultPrevented !== undefined$1 ? source.defaultPrevented : 'returnValue' in source ? source.returnValue === false : source.getPreventDefault && source.getPreventDefault()) event.isDefaultPrevented = returnTrue;\n      }\n\n      return event;\n    }\n\n    function createProxy(event) {\n      var key,\n          proxy = {\n        originalEvent: event\n      };\n\n      for (key in event) if (!ignoreProperties.test(key) && event[key] !== undefined$1) proxy[key] = event[key];\n\n      return compatible(proxy, event);\n    }\n\n    $.fn.delegate = function (selector, event, callback) {\n      return this.on(event, selector, callback);\n    };\n\n    $.fn.undelegate = function (selector, event, callback) {\n      return this.off(event, selector, callback);\n    };\n\n    $.fn.live = function (event, callback) {\n      $(document.body).delegate(this.selector, event, callback);\n      return this;\n    };\n\n    $.fn.die = function (event, callback) {\n      $(document.body).undelegate(this.selector, event, callback);\n      return this;\n    };\n\n    $.fn.on = function (event, selector, data, callback, one) {\n      var autoRemove,\n          delegator,\n          $this = this;\n\n      if (event && !isString(event)) {\n        $.each(event, function (type, fn) {\n          $this.on(type, selector, data, fn, one);\n        });\n        return $this;\n      }\n\n      if (!isString(selector) && !isFunction(callback) && callback !== false) callback = data, data = selector, selector = undefined$1;\n      if (callback === undefined$1 || data === false) callback = data, data = undefined$1;\n      if (callback === false) callback = returnFalse;\n      return $this.each(function (_, element) {\n        if (one) autoRemove = function (e) {\n          remove(element, e.type, callback);\n          return callback.apply(this, arguments);\n        };\n        if (selector) delegator = function (e) {\n          var evt,\n              match = $(e.target).closest(selector, element).get(0);\n\n          if (match && match !== element) {\n            evt = $.extend(createProxy(e), {\n              currentTarget: match,\n              liveFired: element\n            });\n            return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)));\n          }\n        };\n        add(element, event, callback, data, selector, delegator || autoRemove);\n      });\n    };\n\n    $.fn.off = function (event, selector, callback) {\n      var $this = this;\n\n      if (event && !isString(event)) {\n        $.each(event, function (type, fn) {\n          $this.off(type, selector, fn);\n        });\n        return $this;\n      }\n\n      if (!isString(selector) && !isFunction(callback) && callback !== false) callback = selector, selector = undefined$1;\n      if (callback === false) callback = returnFalse;\n      return $this.each(function () {\n        remove(this, event, callback, selector);\n      });\n    };\n\n    $.fn.trigger = function (event, args) {\n      event = isString(event) || $.isPlainObject(event) ? $.Event(event) : compatible(event);\n      event._args = args;\n      return this.each(function () {\n        // handle focus(), blur() by calling them directly\n        if (event.type in focus && typeof this[event.type] == \"function\") this[event.type](); // items in the collection might not be DOM elements\n        else if ('dispatchEvent' in this) this.dispatchEvent(event);else $(this).triggerHandler(event, args);\n      });\n    }; // triggers event handlers on current element just as if an event occurred,\n    // doesn't trigger an actual event, doesn't bubble\n\n\n    $.fn.triggerHandler = function (event, args) {\n      var e, result;\n      this.each(function (i, element) {\n        e = createProxy(isString(event) ? $.Event(event) : event);\n        e._args = args;\n        e.target = element;\n        $.each(findHandlers(element, event.type || event), function (i, handler) {\n          result = handler.proxy(e);\n          if (e.isImmediatePropagationStopped()) return false;\n        });\n      });\n      return result;\n    } // shortcut methods for `.bind(event, fn)` for each event type\n    ;\n\n    ('focusin focusout focus blur load resize scroll unload click dblclick ' + 'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' + 'change select keydown keypress keyup error').split(' ').forEach(function (event) {\n      $.fn[event] = function (callback) {\n        return 0 in arguments ? this.bind(event, callback) : this.trigger(event);\n      };\n    });\n\n    $.Event = function (type, props) {\n      if (!isString(type)) props = type, type = props.type;\n      var event = document.createEvent(specialEvents[type] || 'Events'),\n          bubbles = true;\n      if (props) for (var name in props) name == 'bubbles' ? bubbles = !!props[name] : event[name] = props[name];\n      event.initEvent(type, bubbles, true);\n      return compatible(event);\n    };\n  })(Zepto);\n\n  (function () {\n    // getComputedStyle shouldn't freak out when called\n    // without a valid element as argument\n    try {\n      getComputedStyle(undefined);\n    } catch (e) {\n      var nativeGetComputedStyle = getComputedStyle;\n\n      window.getComputedStyle = function (element, pseudoElement) {\n        try {\n          return nativeGetComputedStyle(element, pseudoElement);\n        } catch (e) {\n          return null;\n        }\n      };\n    }\n  })();\n\n  (function ($) {\n    var zepto = $.zepto,\n        oldQsa = zepto.qsa,\n        oldMatches = zepto.matches;\n\n    function visible(elem) {\n      elem = $(elem);\n      return !!(elem.width() || elem.height()) && elem.css(\"display\") !== \"none\";\n    } // Implements a subset from:\n    // http://api.jquery.com/category/selectors/jquery-selector-extensions/\n    //\n    // Each filter function receives the current index, all nodes in the\n    // considered set, and a value if there were parentheses. The value\n    // of `this` is the node currently being considered. The function returns the\n    // resulting node(s), null, or undefined.\n    //\n    // Complex selectors are not supported:\n    //   li:has(label:contains(\"foo\")) + li:has(label:contains(\"bar\"))\n    //   ul.inner:first > li\n\n\n    var filters = $.expr[':'] = {\n      visible: function () {\n        if (visible(this)) return this;\n      },\n      hidden: function () {\n        if (!visible(this)) return this;\n      },\n      selected: function () {\n        if (this.selected) return this;\n      },\n      checked: function () {\n        if (this.checked) return this;\n      },\n      parent: function () {\n        return this.parentNode;\n      },\n      first: function (idx) {\n        if (idx === 0) return this;\n      },\n      last: function (idx, nodes) {\n        if (idx === nodes.length - 1) return this;\n      },\n      eq: function (idx, _, value) {\n        if (idx === value) return this;\n      },\n      contains: function (idx, _, text) {\n        if ($(this).text().indexOf(text) > -1) return this;\n      },\n      has: function (idx, _, sel) {\n        if (zepto.qsa(this, sel).length) return this;\n      }\n    };\n    var filterRe = new RegExp('(.*):(\\\\w+)(?:\\\\(([^)]+)\\\\))?$\\\\s*'),\n        childRe = /^\\s*>/,\n        classTag = 'Zepto' + +new Date();\n\n    function process(sel, fn) {\n      // quote the hash in `a[href^=#]` expression\n      sel = sel.replace(/=#\\]/g, '=\"#\"]');\n      var filter,\n          arg,\n          match = filterRe.exec(sel);\n\n      if (match && match[2] in filters) {\n        filter = filters[match[2]], arg = match[3];\n        sel = match[1];\n\n        if (arg) {\n          var num = Number(arg);\n          if (isNaN(num)) arg = arg.replace(/^[\"']|[\"']$/g, '');else arg = num;\n        }\n      }\n\n      return fn(sel, filter, arg);\n    }\n\n    zepto.qsa = function (node, selector) {\n      return process(selector, function (sel, filter, arg) {\n        try {\n          var taggedParent;\n          if (!sel && filter) sel = '*';else if (childRe.test(sel)) // support \"> *\" child queries by tagging the parent node with a\n            // unique class and prepending that classname onto the selector\n            taggedParent = $(node).addClass(classTag), sel = '.' + classTag + ' ' + sel;\n          var nodes = oldQsa(node, sel);\n        } catch (e) {\n          console.error('error performing selector: %o', selector);\n          throw e;\n        } finally {\n          if (taggedParent) taggedParent.removeClass(classTag);\n        }\n\n        return !filter ? nodes : zepto.uniq($.map(nodes, function (n, i) {\n          return filter.call(n, i, nodes, arg);\n        }));\n      });\n    };\n\n    zepto.matches = function (node, selector) {\n      return process(selector, function (sel, filter, arg) {\n        return (!sel || oldMatches(node, sel)) && (!filter || filter.call(node, null, arg) === node);\n      });\n    };\n  })(Zepto);\n\n  var zepto = Zepto;\n\n  /* eslint-disable no-useless-escape */\n  // The order of the following arrays is important, be careful if you change it.\n  var BROWSER_DATA = [{\n    name: 'Chromium',\n    group: 'Chrome',\n    identifier: 'Chromium/([0-9\\.]*)'\n  }, {\n    name: 'Chrome Mobile',\n    group: 'Chrome',\n    identifier: 'Chrome/([0-9\\.]*) Mobile',\n    versionIdentifier: 'Chrome/([0-9\\.]*)'\n  }, {\n    name: 'Chrome',\n    group: 'Chrome',\n    identifier: 'Chrome/([0-9\\.]*)'\n  }, {\n    name: 'Chrome for iOS',\n    group: 'Chrome',\n    identifier: 'CriOS/([0-9\\.]*)'\n  }, {\n    name: 'Android Browser',\n    group: 'Chrome',\n    identifier: 'CrMo/([0-9\\.]*)'\n  }, {\n    name: 'Firefox',\n    group: 'Firefox',\n    identifier: 'Firefox/([0-9\\.]*)'\n  }, {\n    name: 'Opera Mini',\n    group: 'Opera',\n    identifier: 'Opera Mini/([0-9\\.]*)'\n  }, {\n    name: 'Opera',\n    group: 'Opera',\n    identifier: 'Opera ([0-9\\.]*)'\n  }, {\n    name: 'Opera',\n    group: 'Opera',\n    identifier: 'Opera/([0-9\\.]*)',\n    versionIdentifier: 'Version/([0-9\\.]*)'\n  }, {\n    name: 'IEMobile',\n    group: 'Explorer',\n    identifier: 'IEMobile/([0-9\\.]*)'\n  }, {\n    name: 'Internet Explorer',\n    group: 'Explorer',\n    identifier: 'MSIE ([a-zA-Z0-9\\.]*)'\n  }, {\n    name: 'Internet Explorer',\n    group: 'Explorer',\n    identifier: 'Trident/([0-9\\.]*)',\n    versionIdentifier: 'rv:([0-9\\.]*)'\n  }, {\n    name: 'Spartan',\n    group: 'Spartan',\n    identifier: 'Edge/([0-9\\.]*)',\n    versionIdentifier: 'Edge/([0-9\\.]*)'\n  }, {\n    name: 'Safari',\n    group: 'Safari',\n    identifier: 'Safari/([0-9\\.]*)',\n    versionIdentifier: 'Version/([0-9\\.]*)'\n  }];\n\n  /* eslint-disable no-useless-escape */\n  // The order of the following arrays is important, be careful if you change it.\n  var OS_DATA = [{\n    name: 'Windows 2000',\n    group: 'Windows',\n    identifier: 'Windows NT 5.0',\n    version: '5.0'\n  }, {\n    name: 'Windows XP',\n    group: 'Windows',\n    identifier: 'Windows NT 5.1',\n    version: '5.1'\n  }, {\n    name: 'Windows Vista',\n    group: 'Windows',\n    identifier: 'Windows NT 6.0',\n    version: '6.0'\n  }, {\n    name: 'Windows 7',\n    group: 'Windows',\n    identifier: 'Windows NT 6.1',\n    version: '7.0'\n  }, {\n    name: 'Windows 8',\n    group: 'Windows',\n    identifier: 'Windows NT 6.2',\n    version: '8.0'\n  }, {\n    name: 'Windows 8.1',\n    group: 'Windows',\n    identifier: 'Windows NT 6.3',\n    version: '8.1'\n  }, {\n    name: 'Windows 10',\n    group: 'Windows',\n    identifier: 'Windows NT 10.0',\n    version: '10.0'\n  }, {\n    name: 'Windows Phone',\n    group: 'Windows Phone',\n    identifier: 'Windows Phone ([0-9\\.]*)'\n  }, {\n    name: 'Windows Phone',\n    group: 'Windows Phone',\n    identifier: 'Windows Phone OS ([0-9\\.]*)'\n  }, {\n    name: 'Windows',\n    group: 'Windows',\n    identifier: 'Windows'\n  }, {\n    name: 'Chrome OS',\n    group: 'Chrome OS',\n    identifier: 'CrOS'\n  }, {\n    name: 'Android',\n    group: 'Android',\n    identifier: 'Android',\n    versionIdentifier: 'Android ([a-zA-Z0-9\\.-]*)'\n  }, {\n    name: 'iPad',\n    group: 'iOS',\n    identifier: 'iPad',\n    versionIdentifier: 'OS ([0-9_]*)',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'iPod',\n    group: 'iOS',\n    identifier: 'iPod',\n    versionIdentifier: 'OS ([0-9_]*)',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'iPhone',\n    group: 'iOS',\n    identifier: 'iPhone OS',\n    versionIdentifier: 'OS ([0-9_]*)',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X High Sierra',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])13([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Sierra',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])12([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X El Capitan',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])11([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Yosemite',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])10([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Mavericks',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])9([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Mountain Lion',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])8([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Lion',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])7([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Snow Leopard',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])6([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Leopard',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])5([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Tiger',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])4([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Panther',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])3([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Jaguar',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])2([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Puma',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])1([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Cheetah',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])0([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS',\n    group: 'Mac OS',\n    identifier: 'Mac OS'\n  }, {\n    name: 'Ubuntu',\n    group: 'Linux',\n    identifier: 'Ubuntu',\n    versionIdentifier: 'Ubuntu/([0-9\\.]*)'\n  }, {\n    name: 'Debian',\n    group: 'Linux',\n    identifier: 'Debian'\n  }, {\n    name: 'Gentoo',\n    group: 'Linux',\n    identifier: 'Gentoo'\n  }, {\n    name: 'Linux',\n    group: 'Linux',\n    identifier: 'Linux'\n  }, {\n    name: 'BlackBerry',\n    group: 'BlackBerry',\n    identifier: 'BlackBerry'\n  }];\n\n  var Browser = {};\n\n  var hasLocalstorage = function hasLocalstorage() {\n    try {\n      localStorage.setItem('clappr', 'clappr');\n      localStorage.removeItem('clappr');\n      return true;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  var hasFlash = function hasFlash() {\n    try {\n      var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n      return !!fo;\n    } catch (e) {\n      return !!(navigator.mimeTypes && navigator.mimeTypes['application/x-shockwave-flash'] !== undefined && navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin);\n    }\n  };\n\n  var getBrowserInfo = function getBrowserInfo(ua) {\n    var parts = ua.match(/\\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [],\n        extra;\n\n    if (/trident/i.test(parts[1])) {\n      extra = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return {\n        name: 'IE',\n        version: parseInt(extra[1] || '')\n      };\n    } else if (parts[1] === 'Chrome') {\n      extra = ua.match(/\\bOPR\\/(\\d+)/);\n      if (extra != null) return {\n        name: 'Opera',\n        version: parseInt(extra[1])\n      };\n      extra = ua.match(/\\bEdge\\/(\\d+)/);\n      if (extra != null) return {\n        name: 'Edge',\n        version: parseInt(extra[1])\n      };\n    } else if (/android/i.test(ua) && (extra = ua.match(/version\\/(\\d+)/i))) {\n      parts.splice(1, 1, 'Android WebView');\n      parts.splice(2, 1, extra[1]);\n    }\n\n    parts = parts[2] ? [parts[1], parts[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    return {\n      name: parts[0],\n      version: parseInt(parts[1])\n    };\n  }; //  Get browser data\n\n  var getBrowserData = function getBrowserData() {\n    var browserObject = {};\n    var userAgent = Browser.userAgent.toLowerCase(); // Check browser type\n\n    var _iterator = _createForOfIteratorHelper(BROWSER_DATA),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var browser = _step.value;\n        var browserRegExp = new RegExp(browser.identifier.toLowerCase());\n        var browserRegExpResult = browserRegExp.exec(userAgent);\n\n        if (browserRegExpResult != null && browserRegExpResult[1]) {\n          browserObject.name = browser.name;\n          browserObject.group = browser.group; // Check version\n\n          if (browser.versionIdentifier) {\n            var versionRegExp = new RegExp(browser.versionIdentifier.toLowerCase());\n            var versionRegExpResult = versionRegExp.exec(userAgent);\n            if (versionRegExpResult != null && versionRegExpResult[1]) setBrowserVersion(versionRegExpResult[1], browserObject);\n          } else {\n            setBrowserVersion(browserRegExpResult[1], browserObject);\n          }\n\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return browserObject;\n  }; // Set browser version\n\n  var setBrowserVersion = function setBrowserVersion(version, browserObject) {\n    var splitVersion = version.split('.', 2);\n    browserObject.fullVersion = version; // Major version\n\n    if (splitVersion[0]) browserObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\n    if (splitVersion[1]) browserObject.minorVersion = parseInt(splitVersion[1]);\n  }; //  Get OS data\n\n\n  var getOsData = function getOsData() {\n    var osObject = {};\n    var userAgent = Browser.userAgent.toLowerCase(); // Check browser type\n\n    var _iterator2 = _createForOfIteratorHelper(OS_DATA),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var os = _step2.value;\n        var osRegExp = new RegExp(os.identifier.toLowerCase());\n        var osRegExpResult = osRegExp.exec(userAgent);\n\n        if (osRegExpResult != null) {\n          osObject.name = os.name;\n          osObject.group = os.group; // Version defined\n\n          if (os.version) {\n            setOsVersion(os.version, os.versionSeparator ? os.versionSeparator : '.', osObject); // Version detected\n          } else if (osRegExpResult[1]) {\n            setOsVersion(osRegExpResult[1], os.versionSeparator ? os.versionSeparator : '.', osObject); // Version identifier\n          } else if (os.versionIdentifier) {\n            var versionRegExp = new RegExp(os.versionIdentifier.toLowerCase());\n            var versionRegExpResult = versionRegExp.exec(userAgent);\n            if (versionRegExpResult != null && versionRegExpResult[1]) setOsVersion(versionRegExpResult[1], os.versionSeparator ? os.versionSeparator : '.', osObject);\n          }\n\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return osObject;\n  }; // Set OS version\n\n  var setOsVersion = function setOsVersion(version, separator, osObject) {\n    var finalSeparator = separator.substr(0, 1) == '[' ? new RegExp(separator, 'g') : separator;\n    var splitVersion = version.split(finalSeparator, 2);\n    if (separator != '.') version = version.replace(new RegExp(separator, 'g'), '.');\n    osObject.fullVersion = version; // Major version\n\n    if (splitVersion && splitVersion[0]) osObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\n    if (splitVersion && splitVersion[1]) osObject.minorVersion = parseInt(splitVersion[1]);\n  }; // Set viewport size\n\n\n  var getViewportSize = function getViewportSize() {\n    var viewportObject = {};\n    viewportObject.width = zepto(window).width();\n    viewportObject.height = zepto(window).height();\n    return viewportObject;\n  }; // Set viewport orientation\n\n  var setViewportOrientation = function setViewportOrientation() {\n    switch (window.orientation) {\n      case -90:\n      case 90:\n        Browser.viewport.orientation = 'landscape';\n        break;\n\n      default:\n        Browser.viewport.orientation = 'portrait';\n        break;\n    }\n  };\n\n  var getDevice = function getDevice(ua) {\n    var platformRegExp = /\\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\\)))/;\n    var matches = platformRegExp.exec(ua);\n    var device = matches && (matches[1] || matches[2]) || '';\n    return device;\n  };\n  var browserInfo = getBrowserInfo(navigator.userAgent);\n  Browser.isEdge = /edge/i.test(navigator.userAgent);\n  Browser.isChrome = /chrome|CriOS/i.test(navigator.userAgent) && !Browser.isEdge;\n  Browser.isSafari = /safari/i.test(navigator.userAgent) && !Browser.isChrome && !Browser.isEdge;\n  Browser.isFirefox = /firefox/i.test(navigator.userAgent);\n  Browser.isLegacyIE = !!window.ActiveXObject;\n  Browser.isIE = Browser.isLegacyIE || /trident.*rv:1\\d/i.test(navigator.userAgent);\n  Browser.isIE11 = /trident.*rv:11/i.test(navigator.userAgent);\n  Browser.isChromecast = Browser.isChrome && /CrKey/i.test(navigator.userAgent);\n  Browser.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent);\n  Browser.isiOS = /iPad|iPhone|iPod/i.test(navigator.userAgent);\n  Browser.isAndroid = /Android/i.test(navigator.userAgent);\n  Browser.isWindowsPhone = /Windows Phone/i.test(navigator.userAgent);\n  Browser.isWin8App = /MSAppHost/i.test(navigator.userAgent);\n  Browser.isWiiU = /WiiU/i.test(navigator.userAgent);\n  Browser.isPS4 = /PlayStation 4/i.test(navigator.userAgent);\n  Browser.hasLocalstorage = hasLocalstorage();\n  Browser.hasFlash = hasFlash();\n  /**\n  * @deprecated\n  * This parameter currently exists for retrocompatibility reasons.\n  * Use Browser.data.name instead.\n  */\n\n  Browser.name = browserInfo.name;\n  /**\n  * @deprecated\n  * This parameter currently exists for retrocompatibility reasons.\n  * Use Browser.data.fullVersion instead.\n  */\n\n  Browser.version = browserInfo.version;\n  Browser.userAgent = navigator.userAgent;\n  Browser.data = getBrowserData();\n  Browser.os = getOsData();\n  Browser.viewport = getViewportSize();\n  Browser.device = getDevice(Browser.userAgent);\n  typeof window.orientation !== 'undefined' && setViewportOrientation();\n\n  var idsCounter = {};\n  var videoStack = [];\n  var requestAnimationFrame = (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function (fn) {\n    window.setTimeout(fn, 1000 / 60);\n  }).bind(window);\n  var cancelAnimationFrame = (window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout).bind(window);\n  function assign(obj, source) {\n    if (source) {\n      for (var prop in source) {\n        var propDescriptor = Object.getOwnPropertyDescriptor(source, prop);\n        propDescriptor ? Object.defineProperty(obj, prop, propDescriptor) : obj[prop] = source[prop];\n      }\n    }\n\n    return obj;\n  }\n  function extend(parent, properties) {\n    var Surrogate = /*#__PURE__*/function (_parent) {\n      _inherits(Surrogate, _parent);\n\n      var _super = _createSuper(Surrogate);\n\n      function Surrogate() {\n        var _this;\n\n        _classCallCheck(this, Surrogate);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n        if (properties.initialize) properties.initialize.apply(_assertThisInitialized(_this), args);\n        return _this;\n      }\n\n      return Surrogate;\n    }(parent);\n\n    assign(Surrogate.prototype, properties);\n    return Surrogate;\n  }\n  function formatTime(time, paddedHours) {\n    if (!isFinite(time)) return '--:--';\n    time = time * 1000;\n    time = parseInt(time / 1000);\n    var seconds = time % 60;\n    time = parseInt(time / 60);\n    var minutes = time % 60;\n    time = parseInt(time / 60);\n    var hours = time % 24;\n    var days = parseInt(time / 24);\n    var out = '';\n\n    if (days && days > 0) {\n      out += days + ':';\n      if (hours < 1) out += '00:';\n    }\n\n    if (hours && hours > 0 || paddedHours) out += ('0' + hours).slice(-2) + ':';\n    out += ('0' + minutes).slice(-2) + ':';\n    out += ('0' + seconds).slice(-2);\n    return out.trim();\n  }\n  var Fullscreen = {\n    fullscreenElement: function fullscreenElement() {\n      return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n    },\n    requestFullscreen: function requestFullscreen(el) {\n      if (el.requestFullscreen) {\n        return el.requestFullscreen();\n      } else if (el.webkitRequestFullscreen) {\n        if (typeof el.then === 'function') return el.webkitRequestFullscreen();\n        el.webkitRequestFullscreen();\n      } else if (el.mozRequestFullScreen) {\n        return el.mozRequestFullScreen();\n      } else if (el.msRequestFullscreen) {\n        return el.msRequestFullscreen();\n      } else if (el.querySelector && el.querySelector('video') && el.querySelector('video').webkitEnterFullScreen) {\n        el.querySelector('video').webkitEnterFullScreen();\n      } else if (el.webkitEnterFullScreen) {\n        el.webkitEnterFullScreen();\n      }\n    },\n    cancelFullscreen: function cancelFullscreen() {\n      var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      if (el.exitFullscreen) el.exitFullscreen();else if (el.webkitCancelFullScreen) el.webkitCancelFullScreen();else if (el.webkitExitFullscreen) el.webkitExitFullscreen();else if (el.mozCancelFullScreen) el.mozCancelFullScreen();else if (el.msExitFullscreen) el.msExitFullscreen();\n    },\n    fullscreenEnabled: function fullscreenEnabled() {\n      return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled);\n    }\n  };\n  var Config = /*#__PURE__*/function () {\n    function Config() {\n      _classCallCheck(this, Config);\n    }\n\n    _createClass(Config, null, [{\n      key: \"_defaultConfig\",\n      value: function _defaultConfig() {\n        return {\n          volume: {\n            value: 100,\n            parse: parseInt\n          }\n        };\n      }\n    }, {\n      key: \"_defaultValueFor\",\n      value: function _defaultValueFor(key) {\n        try {\n          return this._defaultConfig()[key].parse(this._defaultConfig()[key].value);\n        } catch (e) {\n          return undefined;\n        }\n      }\n    }, {\n      key: \"_createKeyspace\",\n      value: function _createKeyspace(key) {\n        return \"clappr.\".concat(document.domain, \".\").concat(key);\n      }\n    }, {\n      key: \"restore\",\n      value: function restore(key) {\n        if (Browser.hasLocalstorage && localStorage[this._createKeyspace(key)]) return this._defaultConfig()[key].parse(localStorage[this._createKeyspace(key)]);\n        return this._defaultValueFor(key);\n      }\n    }, {\n      key: \"persist\",\n      value: function persist(key, value) {\n        if (Browser.hasLocalstorage) {\n          try {\n            localStorage[this._createKeyspace(key)] = value;\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n      }\n    }]);\n\n    return Config;\n  }();\n  var QueryString = /*#__PURE__*/function () {\n    function QueryString() {\n      _classCallCheck(this, QueryString);\n    }\n\n    _createClass(QueryString, null, [{\n      key: \"parse\",\n      value: function parse(paramsString) {\n        var match;\n\n        var pl = /\\+/g,\n            // Regex for replacing addition symbol with a space\n        search = /([^&=]+)=?([^&]*)/g,\n            decode = function decode(s) {\n          return decodeURIComponent(s.replace(pl, ' '));\n        },\n            params = {};\n\n        while (match = search.exec(paramsString)) {\n          // eslint-disable-line no-cond-assign\n          params[decode(match[1]).toLowerCase()] = decode(match[2]);\n        }\n\n        return params;\n      }\n    }, {\n      key: \"params\",\n      get: function get() {\n        var query = window.location.search.substring(1);\n\n        if (query !== this.query) {\n          this._urlParams = this.parse(query);\n          this.query = query;\n        }\n\n        return this._urlParams;\n      }\n    }, {\n      key: \"hashParams\",\n      get: function get() {\n        var hash = window.location.hash.substring(1);\n\n        if (hash !== this.hash) {\n          this._hashParams = this.parse(hash);\n          this.hash = hash;\n        }\n\n        return this._hashParams;\n      }\n    }]);\n\n    return QueryString;\n  }();\n  function seekStringToSeconds() {\n    var paramName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 't';\n    var seconds = 0;\n    var seekString = QueryString.params[paramName] || QueryString.hashParams[paramName] || '';\n    var parts = seekString.match(/[0-9]+[hms]+/g) || [];\n\n    if (parts.length > 0) {\n      var factor = {\n        'h': 3600,\n        'm': 60,\n        's': 1\n      };\n      parts.forEach(function (el) {\n        if (el) {\n          var suffix = el[el.length - 1];\n          var time = parseInt(el.slice(0, el.length - 1), 10);\n          seconds += time * factor[suffix];\n        }\n      });\n    } else if (seekString) {\n      seconds = parseInt(seekString, 10);\n    }\n\n    return seconds;\n  }\n  function uniqueId(prefix) {\n    idsCounter[prefix] || (idsCounter[prefix] = 0);\n    var id = ++idsCounter[prefix];\n    return prefix + id;\n  }\n  function isNumber(value) {\n    return value - parseFloat(value) + 1 >= 0;\n  }\n  function currentScriptUrl() {\n    var scripts = document.getElementsByTagName('script');\n    return scripts.length ? scripts[scripts.length - 1].src : '';\n  }\n  function getBrowserLanguage() {\n    return window.navigator && window.navigator.language;\n  }\n  function now() {\n    if (window.performance && window.performance.now) return performance.now();\n    return Date.now();\n  } // remove the item from the array if it exists in the array\n\n  function removeArrayItem(arr, item) {\n    var i = arr.indexOf(item);\n    if (i >= 0) arr.splice(i, 1);\n  } // find an item regardless of its letter case\n\n  function listContainsIgnoreCase(item, items) {\n    if (item === undefined || items === undefined) return false;\n    return items.find(function (itemEach) {\n      return item.toLowerCase() === itemEach.toLowerCase();\n    }) !== undefined;\n  } // https://github.com/video-dev/can-autoplay\n\n  function canAutoPlayMedia(cb, options) {\n    options = Object.assign({\n      inline: false,\n      muted: false,\n      timeout: 250,\n      type: 'video',\n      source: Media.mp4,\n      element: null\n    }, options);\n    var element = options.element ? options.element : document.createElement(options.type);\n    element.muted = options.muted;\n    if (options.muted === true) element.setAttribute('muted', 'muted');\n    if (options.inline === true) element.setAttribute('playsinline', 'playsinline');\n    element.src = options.source;\n    var promise = element.play();\n    var timeoutId = setTimeout(function () {\n      setResult(false, new Error(\"Timeout \".concat(options.timeout, \" ms has been reached\")));\n    }, options.timeout);\n\n    var setResult = function setResult(result) {\n      var error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      clearTimeout(timeoutId);\n      cb(result, error);\n    };\n\n    if (promise !== undefined) {\n      promise.then(function () {\n        return setResult(true);\n      })[\"catch\"](function (err) {\n        return setResult(false, err);\n      });\n    } else {\n      setResult(true);\n    }\n  } // Simple element factory with video recycle feature.\n\n  var DomRecycler = /*#__PURE__*/function () {\n    function DomRecycler() {\n      _classCallCheck(this, DomRecycler);\n    }\n\n    _createClass(DomRecycler, null, [{\n      key: \"configure\",\n      value: function configure(options) {\n        this.options = zepto.extend(true, this.options, options);\n      }\n    }, {\n      key: \"create\",\n      value: function create(name) {\n        if (this.options.recycleVideo && name === 'video' && videoStack.length > 0) return videoStack.shift();\n        return document.createElement(name);\n      }\n    }, {\n      key: \"garbage\",\n      value: function garbage(el) {\n        if (!this.options.recycleVideo || el.tagName.toUpperCase() !== 'VIDEO') return;\n        zepto(el).children().remove();\n        Object.values(el.attributes).forEach(function (attr) {\n          return el.removeAttribute(attr.name);\n        });\n        videoStack.push(el);\n      }\n    }]);\n\n    return DomRecycler;\n  }();\n  DomRecycler.options = {\n    recycleVideo: false\n  };\n  var DoubleEventHandler = /*#__PURE__*/function () {\n    function DoubleEventHandler() {\n      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 500;\n\n      _classCallCheck(this, DoubleEventHandler);\n\n      this.delay = delay;\n      this.lastTime = 0;\n    }\n\n    _createClass(DoubleEventHandler, [{\n      key: \"handle\",\n      value: function handle(event, cb) {\n        var prevented = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        // Based on http://jsfiddle.net/brettwp/J4djY/\n        var currentTime = new Date().getTime();\n        var diffTime = currentTime - this.lastTime;\n\n        if (diffTime < this.delay && diffTime > 0) {\n          cb();\n          prevented && event.preventDefault();\n        }\n\n        this.lastTime = currentTime;\n      }\n    }]);\n\n    return DoubleEventHandler;\n  }();\n  var Utils = {\n    Config: Config,\n    Fullscreen: Fullscreen,\n    QueryString: QueryString,\n    DomRecycler: DomRecycler,\n    assign: assign,\n    extend: extend,\n    formatTime: formatTime,\n    seekStringToSeconds: seekStringToSeconds,\n    uniqueId: uniqueId,\n    currentScriptUrl: currentScriptUrl,\n    isNumber: isNumber,\n    requestAnimationFrame: requestAnimationFrame,\n    cancelAnimationFrame: cancelAnimationFrame,\n    getBrowserLanguage: getBrowserLanguage,\n    now: now,\n    removeArrayItem: removeArrayItem,\n    listContainsIgnoreCase: listContainsIgnoreCase,\n    canAutoPlayMedia: canAutoPlayMedia,\n    Media: Media,\n    DoubleEventHandler: DoubleEventHandler\n  };\n\n  // Use of this source code is governed by a BSD-style\n  // license that can be found in the LICENSE file.\n  var BOLD = 'font-weight: bold; font-size: 13px;';\n  var INFO = 'color: #006600;' + BOLD;\n  var DEBUG = 'color: #0000ff;' + BOLD;\n  var WARN = 'color: #ff8000;' + BOLD;\n  var ERROR = 'color: #ff0000;' + BOLD;\n  var LEVEL_DEBUG = 0;\n  var LEVEL_INFO = 1;\n  var LEVEL_WARN = 2;\n  var LEVEL_ERROR = 3;\n  var LEVEL_DISABLED = LEVEL_ERROR;\n  var COLORS = [DEBUG, INFO, WARN, ERROR, ERROR];\n  var DESCRIPTIONS = ['debug', 'info', 'warn', 'error', 'disabled'];\n\n  var Log = /*#__PURE__*/function () {\n    _createClass(Log, [{\n      key: \"level\",\n      get: function get() {\n        return this._level;\n      },\n      set: function set(newLevel) {\n        this._level = newLevel;\n      }\n    }]);\n\n    function Log() {\n      var level = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : LEVEL_INFO;\n      var offLevel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : LEVEL_DISABLED;\n\n      _classCallCheck(this, Log);\n\n      this.EXCLUDE_LIST = ['timeupdate', 'playback:timeupdate', 'playback:progress', 'container:hover', 'container:timeupdate', 'container:progress'];\n      this.level = level;\n      this.previousLevel = this.level;\n      this.offLevel = offLevel;\n    }\n\n    _createClass(Log, [{\n      key: \"debug\",\n      value: function debug(klass) {\n        this.log(klass, LEVEL_DEBUG, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"info\",\n      value: function info(klass) {\n        this.log(klass, LEVEL_INFO, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"warn\",\n      value: function warn(klass) {\n        this.log(klass, LEVEL_WARN, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"error\",\n      value: function error(klass) {\n        this.log(klass, LEVEL_ERROR, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"onOff\",\n      value: function onOff() {\n        if (this.level === this.offLevel) {\n          this.level = this.previousLevel;\n        } else {\n          this.previousLevel = this.level;\n          this.level = this.offLevel;\n        } // handle instances where console.log is unavailable\n\n\n        window.console && window.console.log && window.console.log('%c[Clappr.Log] set log level to ' + DESCRIPTIONS[this.level], WARN);\n      }\n    }, {\n      key: \"log\",\n      value: function log(klass, level, message) {\n        if (this.EXCLUDE_LIST.indexOf(message[0]) >= 0) return;\n        if (level < this.level) return;\n\n        if (!message) {\n          message = klass;\n          klass = null;\n        }\n\n        var color = COLORS[level];\n        var klassDescription = '';\n        if (klass) klassDescription = '[' + klass + ']';\n        window.console && window.console.log && window.console.log.apply(console, ['%c[' + DESCRIPTIONS[level] + ']' + klassDescription, color].concat(message));\n      }\n    }]);\n\n    return Log;\n  }();\n  Log.LEVEL_DEBUG = LEVEL_DEBUG;\n  Log.LEVEL_INFO = LEVEL_INFO;\n  Log.LEVEL_WARN = LEVEL_WARN;\n  Log.LEVEL_ERROR = LEVEL_ERROR;\n\n  Log.getInstance = function () {\n    if (this._instance === undefined) this._instance = new this();\n    return this._instance;\n  };\n\n  Log.setLevel = function (level) {\n    this.getInstance().level = level;\n  };\n\n  Log.debug = function () {\n    this.getInstance().debug.apply(this.getInstance(), arguments);\n  };\n\n  Log.info = function () {\n    this.getInstance().info.apply(this.getInstance(), arguments);\n  };\n\n  Log.warn = function () {\n    this.getInstance().warn.apply(this.getInstance(), arguments);\n  };\n\n  Log.error = function () {\n    this.getInstance().error.apply(this.getInstance(), arguments);\n  };\n\n  var slice = Array.prototype.slice;\n  var eventSplitter = /\\s+/;\n\n  var eventsApi = function eventsApi(obj, action, name, rest) {\n    if (!name) return true; // Handle event maps.\n\n    if (_typeof(name) === 'object') {\n      for (var key in name) {\n        obj[action].apply(obj, [key, name[key]].concat(rest));\n      }\n\n      return false;\n    } // Handle space separated event names.\n\n\n    if (eventSplitter.test(name)) {\n      var names = name.split(eventSplitter);\n\n      for (var i = 0, l = names.length; i < l; i++) {\n        obj[action].apply(obj, [names[i]].concat(rest));\n      }\n\n      return false;\n    }\n\n    return true;\n  };\n\n  var triggerEvents = function triggerEvents(events, args, klass, name) {\n    var ev,\n        i = -1;\n    var l = events.length,\n        a1 = args[0],\n        a2 = args[1],\n        a3 = args[2];\n    run();\n\n    function run() {\n      try {\n        switch (args.length) {\n          /* eslint-disable curly */\n          case 0:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx);\n            }\n\n            return;\n\n          case 1:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx, a1);\n            }\n\n            return;\n\n          case 2:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx, a1, a2);\n            }\n\n            return;\n\n          case 3:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx, a1, a2, a3);\n            }\n\n            return;\n\n          default:\n            while (++i < l) {\n              (ev = events[i]).callback.apply(ev.ctx, args);\n            }\n\n            return;\n        }\n      } catch (exception) {\n        Log.error.apply(Log, [klass, 'error on event', name, 'trigger', '-', exception]);\n        run();\n      }\n    }\n  };\n  /**\n   * @class Events\n   * @constructor\n   * @module base\n   */\n\n\n  var Events = /*#__PURE__*/function () {\n    function Events() {\n      _classCallCheck(this, Events);\n    }\n\n    _createClass(Events, [{\n      key: \"on\",\n\n      /**\n       * listen to an event indefinitely, if you want to stop you need to call `off`\n       * @method on\n       * @param {String} name\n       * @param {Function} callback\n       * @param {Object} context\n       */\n      value: function on(name, callback, context) {\n        if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;\n        this._events || (this._events = {});\n        var events = this._events[name] || (this._events[name] = []);\n        events.push({\n          callback: callback,\n          context: context,\n          ctx: context || this\n        });\n        return this;\n      }\n      /**\n       * listen to an event only once\n       * @method once\n       * @param {String} name\n       * @param {Function} callback\n       * @param {Object} context\n       */\n\n    }, {\n      key: \"once\",\n      value: function once(name, callback, context) {\n        var _this = this;\n\n        var _once;\n\n        if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;\n\n        var off = function off() {\n          return _this.off(name, _once);\n        };\n\n        _once = function once() {\n          off();\n          callback.apply(this, arguments);\n        };\n\n        return this.on(name, _once, context);\n      }\n      /**\n       * stop listening to an event\n       * @method off\n       * @param {String} name\n       * @param {Function} callback\n       * @param {Object} context\n       */\n\n    }, {\n      key: \"off\",\n      value: function off(name, callback, context) {\n        var retain, ev, events, names, i, l, j, k;\n        if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;\n\n        if (!name && !callback && !context) {\n          this._events = void 0;\n          return this;\n        }\n\n        names = name ? [name] : Object.keys(this._events); // jshint maxdepth:5\n\n        for (i = 0, l = names.length; i < l; i++) {\n          name = names[i];\n          events = this._events[name];\n\n          if (events) {\n            this._events[name] = retain = [];\n\n            if (callback || context) {\n              for (j = 0, k = events.length; j < k; j++) {\n                ev = events[j];\n                if (callback && callback !== ev.callback && callback !== ev.callback._callback || context && context !== ev.context) retain.push(ev);\n              }\n            }\n\n            if (!retain.length) delete this._events[name];\n          }\n        }\n\n        return this;\n      }\n      /**\n       * triggers an event given its `name`\n       * @method trigger\n       * @param {String} name\n       */\n\n    }, {\n      key: \"trigger\",\n      value: function trigger(name) {\n        var klass = this.name || this.constructor.name;\n        Log.debug.apply(Log, [klass].concat(Array.prototype.slice.call(arguments)));\n        if (!this._events) return this;\n        var args = slice.call(arguments, 1);\n        if (!eventsApi(this, 'trigger', name, args)) return this;\n        var events = this._events[name];\n        var allEvents = this._events.all;\n        if (events) triggerEvents(events, args, klass, name);\n        if (allEvents) triggerEvents(allEvents, arguments, klass, name);\n        return this;\n      }\n      /**\n       * stop listening an event for a given object\n       * @method stopListening\n       * @param {Object} obj\n       * @param {String} name\n       * @param {Function} callback\n       */\n\n    }, {\n      key: \"stopListening\",\n      value: function stopListening(obj, name, callback) {\n        var listeningTo = this._listeningTo;\n        if (!listeningTo) return this;\n        var remove = !name && !callback;\n        if (!callback && _typeof(name) === 'object') callback = this;\n        if (obj) (listeningTo = {})[obj._listenId] = obj;\n\n        for (var id in listeningTo) {\n          obj = listeningTo[id];\n          obj.off(name, callback, this);\n          if (remove || Object.keys(obj._events).length === 0) delete this._listeningTo[id];\n        }\n\n        return this;\n      }\n    }], [{\n      key: \"register\",\n      value: function register(eventName) {\n        Events.Custom || (Events.Custom = {});\n        var property = typeof eventName === 'string' && eventName.toUpperCase().trim();\n\n        if (property && !Events.Custom[property]) {\n          Events.Custom[property] = property.toLowerCase().split('_').map(function (value, index) {\n            return index === 0 ? value : value = value[0].toUpperCase() + value.slice(1);\n          }).join('');\n        } else Log.error('Events', 'Error when register event: ' + eventName);\n      }\n    }, {\n      key: \"listAvailableCustomEvents\",\n      value: function listAvailableCustomEvents() {\n        Events.Custom || (Events.Custom = {});\n        return Object.keys(Events.Custom).filter(function (property) {\n          return typeof Events.Custom[property] === 'string';\n        });\n      }\n    }]);\n\n    return Events;\n  }();\n  var listenMethods = {\n    listenTo: 'on',\n    listenToOnce: 'once'\n  };\n  Object.keys(listenMethods).forEach(function (method) {\n    Events.prototype[method] = function (obj, name, callback) {\n      var listeningTo = this._listeningTo || (this._listeningTo = {});\n      var id = obj._listenId || (obj._listenId = uniqueId('l'));\n      listeningTo[id] = obj;\n      if (!callback && _typeof(name) === 'object') callback = this;\n      obj[listenMethods[method]](name, callback, this);\n      return this;\n    };\n  }); // PLAYER EVENTS\n\n  /**\n   * Fired when the player is ready on startup\n   *\n   * @event PLAYER_READY\n   */\n\n  Events.PLAYER_READY = 'ready';\n  /**\n   * Fired when player resizes\n   *\n   * @event PLAYER_RESIZE\n   * @param {Object} currentSize an object with the current size\n   */\n\n  Events.PLAYER_RESIZE = 'resize';\n  /**\n   * Fired when player changes its fullscreen state\n   *\n   * @event PLAYER_FULLSCREEN\n   * @param {Boolean} whether or not the player is on fullscreen mode\n   */\n\n  Events.PLAYER_FULLSCREEN = 'fullscreen';\n  /**\n   * Fired when player starts to play\n   *\n   * @event PLAYER_PLAY\n   */\n\n  Events.PLAYER_PLAY = 'play';\n  /**\n   * Fired when player pauses\n   *\n   * @event PLAYER_PAUSE\n   */\n\n  Events.PLAYER_PAUSE = 'pause';\n  /**\n   * Fired when player stops\n   *\n   * @event PLAYER_STOP\n   */\n\n  Events.PLAYER_STOP = 'stop';\n  /**\n   * Fired when player ends the video\n   *\n   * @event PLAYER_ENDED\n   */\n\n  Events.PLAYER_ENDED = 'ended';\n  /**\n   * Fired when player seeks the video\n   *\n   * @event PLAYER_SEEK\n   * @param {Number} time the current time in seconds\n   */\n\n  Events.PLAYER_SEEK = 'seek';\n  /**\n   * Fired when player receives an error\n   *\n   * @event PLAYER_ERROR\n   * @param {Object} error the error\n   */\n\n  Events.PLAYER_ERROR = 'playererror';\n  /**\n   * Fired when there is an error\n   *\n   * @event ERROR\n   * @param {Object} error\n   * the error with the following format `{code, description, level, raw, origin, scope}`\n   * @param {String} [options.code]\n   * error's code: code to identify error in the following format: origin:code\n   * @param {String} [options.description]\n   * error's description: description of the error\n   * @param {String} [options.level]\n   * error's level: FATAL or WARN.\n   * @param {String} [options.origin]\n   * error's origin. Example: hls, html5, etc\n   * @param {String} [options.scope]\n   * error's scope. Example: playback, container, etc\n   * @param {String} [options.raw]\n   * raw error: the initial error received\n   */\n\n  Events.ERROR = 'error';\n  /**\n   * Fired when the time is updated on player\n   *\n   * @event PLAYER_TIMEUPDATE\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.current]\n   * current time (in seconds)\n   * @param {Number} [progress.total]\n   * total time (in seconds)\n   */\n\n  Events.PLAYER_TIMEUPDATE = 'timeupdate';\n  /**\n   * Fired when player updates its volume\n   *\n   * @event PLAYER_VOLUMEUPDATE\n   * @param {Number} volume the current volume\n   */\n\n  Events.PLAYER_VOLUMEUPDATE = 'volumeupdate';\n  /**\n   * Fired when subtitle is available\n   *\n   * @event PLAYER_SUBTITLE_AVAILABLE\n   */\n\n  Events.PLAYER_SUBTITLE_AVAILABLE = 'subtitleavailable'; // Playback Events\n\n  /**\n   * Fired when the playback is downloading the media\n   *\n   * @event PLAYBACK_PROGRESS\n   * @param progress {Object}\n   * Data progress object\n   * @param [progress.start] {Number}\n   * start position of buffered content at current position\n   * @param [progress.current] {Number}\n   * end position of buffered content at current position\n   * @param [progress.total] {Number}\n   * total content to be downloaded\n   * @param buffered {Array}\n   * array of buffered segments ({start, end}). [Only for supported playbacks]\n   */\n\n  Events.PLAYBACK_PROGRESS = 'playback:progress';\n  /**\n   * Fired when the time is updated on playback\n   *\n   * @event PLAYBACK_TIMEUPDATE\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.current]\n   * current time (in seconds)\n   * @param {Number} [progress.total]\n   * total time (in seconds)\n   */\n\n  Events.PLAYBACK_TIMEUPDATE = 'playback:timeupdate';\n  /**\n   * Fired when playback is ready\n   *\n   * @event PLAYBACK_READY\n   */\n\n  Events.PLAYBACK_READY = 'playback:ready';\n  /**\n   * Fired when the playback starts having to buffer because\n   * playback can currently not be smooth.\n   *\n   * This corresponds to the playback `buffering` property being\n   * `true`.\n   *\n   * @event PLAYBACK_BUFFERING\n   */\n\n  Events.PLAYBACK_BUFFERING = 'playback:buffering';\n  /**\n   * Fired when the playback has enough in the buffer to be\n   * able to play smoothly, after previously being unable to\n   * do this.\n   *\n   * This corresponds to the playback `buffering` property being\n   * `false`.\n   *\n   * @event PLAYBACK_BUFFERFULL\n   */\n\n  Events.PLAYBACK_BUFFERFULL = 'playback:bufferfull';\n  /**\n   * Fired when playback changes any settings (volume, seek and etc)\n   *\n   * @event PLAYBACK_SETTINGSUPDATE\n   */\n\n  Events.PLAYBACK_SETTINGSUPDATE = 'playback:settingsupdate';\n  /**\n   * Fired when playback loaded its metadata\n   *\n   * @event PLAYBACK_LOADEDMETADATA\n   * @param {Object} metadata Data\n   * settings object\n   * @param {Number} [metadata.duration]\n   * the playback duration\n   * @param {Object} [metadata.data]\n   * extra meta data\n   */\n\n  Events.PLAYBACK_LOADEDMETADATA = 'playback:loadedmetadata';\n  /**\n   * Fired when playback updates its video quality\n   *\n   * @event PLAYBACK_HIGHDEFINITIONUPDATE\n   * @param {Boolean} isHD\n   * true when is on HD, false otherwise\n   */\n\n  Events.PLAYBACK_HIGHDEFINITIONUPDATE = 'playback:highdefinitionupdate';\n  /**\n   * Fired when playback updates its bitrate\n   *\n   * @event PLAYBACK_BITRATE\n   * @param {Object} bitrate Data\n   * bitrate object\n   * @param {Number} [bitrate.bandwidth]\n   * bitrate bandwidth when it's available\n   * @param {Number} [bitrate.width]\n   * playback width (ex: 720, 640, 1080)\n   * @param {Number} [bitrate.height]\n   * playback height (ex: 240, 480, 720)\n   * @param {Number} [bitrate.level]\n   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n   */\n\n  Events.PLAYBACK_BITRATE = 'playback:bitrate';\n  /**\n   * Fired when the playback has its levels\n   *\n   * @event PLAYBACK_LEVELS_AVAILABLE\n   * @param {Array} levels\n   * the ordered levels, each one with the following format `{id: 1, label: '500kbps'}` ps: id should be a number >= 0\n   * @param {Number} initial\n   * the initial level otherwise -1 (AUTO)\n   */\n\n  Events.PLAYBACK_LEVELS_AVAILABLE = 'playback:levels:available';\n  /**\n   * Fired when the playback starts to switch level\n   *\n   * @event PLAYBACK_LEVEL_SWITCH_START\n   *\n   */\n\n  Events.PLAYBACK_LEVEL_SWITCH_START = 'playback:levels:switch:start';\n  /**\n   * Fired when the playback ends the level switch\n   *\n   * @event PLAYBACK_LEVEL_SWITCH_END\n   *\n   */\n\n  Events.PLAYBACK_LEVEL_SWITCH_END = 'playback:levels:switch:end';\n  /**\n   * Fired when playback internal state changes\n   *\n   * @event PLAYBACK_PLAYBACKSTATE\n   * @param {Object} state Data\n   * state object\n   * @param {String} [state.type]\n   * the playback type\n   */\n\n  Events.PLAYBACK_PLAYBACKSTATE = 'playback:playbackstate';\n  /**\n   * Fired when DVR becomes enabled/disabled.\n   *\n   * @event PLAYBACK_DVR\n   * @param {boolean} state true if dvr enabled\n   */\n\n  Events.PLAYBACK_DVR = 'playback:dvr'; // TODO doc\n\n  Events.PLAYBACK_MEDIACONTROL_DISABLE = 'playback:mediacontrol:disable'; // TODO doc\n\n  Events.PLAYBACK_MEDIACONTROL_ENABLE = 'playback:mediacontrol:enable';\n  /**\n   * Fired when the media for a playback ends.\n   *\n   * @event PLAYBACK_ENDED\n   * @param {String} name the name of the playback\n   */\n\n  Events.PLAYBACK_ENDED = 'playback:ended';\n  /**\n   * Fired when user requests `play()`\n   *\n   * @event PLAYBACK_PLAY_INTENT\n   */\n\n  Events.PLAYBACK_PLAY_INTENT = 'playback:play:intent';\n  /**\n   * Fired when the media for a playback starts playing.\n   * This is not necessarily when the user requests `play()`\n   * The media may have to buffer first.\n   * I.e. `isPlaying()` might return `true` before this event is fired,\n   * because `isPlaying()` represents the intended state.\n   *\n   * @event PLAYBACK_PLAY\n   */\n\n  Events.PLAYBACK_PLAY = 'playback:play';\n  /**\n   * Fired when the media for a playback pauses.\n   *\n   * @event PLAYBACK_PAUSE\n   */\n\n  Events.PLAYBACK_PAUSE = 'playback:pause';\n  /**\n   * Fired when the media for a playback is seeking.\n   *\n   * @event PLAYBACK_SEEK\n   */\n\n  Events.PLAYBACK_SEEK = 'playback:seek';\n  /**\n   * Fired when the media for a playback is seeked.\n   *\n   * @event PLAYBACK_SEEKED\n   */\n\n  Events.PLAYBACK_SEEKED = 'playback:seeked';\n  /**\n   * Fired when the media for a playback is stopped.\n   *\n   * @event PLAYBACK_STOP\n   */\n\n  Events.PLAYBACK_STOP = 'playback:stop';\n  /**\n   * Fired if an error occurs in the playback.\n   *\n   * @event PLAYBACK_ERROR\n   * @param {Object} error An object containing the error details\n   * @param {String} name Playback name\n   */\n\n  Events.PLAYBACK_ERROR = 'playback:error'; // TODO doc\n\n  Events.PLAYBACK_STATS_ADD = 'playback:stats:add'; // TODO doc\n\n  Events.PLAYBACK_FRAGMENT_LOADED = 'playback:fragment:loaded'; // TODO doc\n\n  Events.PLAYBACK_LEVEL_SWITCH = 'playback:level:switch';\n  /**\n   * Fired when subtitle is available on playback for display\n   *\n   * @event PLAYBACK_SUBTITLE_AVAILABLE\n   */\n\n  Events.PLAYBACK_SUBTITLE_AVAILABLE = 'playback:subtitle:available';\n  /**\n   * Fired when playback subtitle track has changed\n   *\n   * @event CONTAINER_SUBTITLE_CHANGED\n   * @param {Object} track Data\n   * track object\n   * @param {Number} [track.id]\n   * selected track id\n   */\n\n  Events.PLAYBACK_SUBTITLE_CHANGED = 'playback:subtitle:changed'; // Core Events\n\n  /**\n   * Fired when the containers are created\n   *\n   * @event CORE_CONTAINERS_CREATED\n   */\n\n  Events.CORE_CONTAINERS_CREATED = 'core:containers:created';\n  /**\n   * Fired when the active container changed\n   *\n   * @event CORE_ACTIVE_CONTAINER_CHANGED\n   */\n\n  Events.CORE_ACTIVE_CONTAINER_CHANGED = 'core:active:container:changed';\n  /**\n   * Fired when the options were changed for the core\n   *\n   * @event CORE_OPTIONS_CHANGE\n   * @param {Object} new options provided to configure() method\n   */\n\n  Events.CORE_OPTIONS_CHANGE = 'core:options:change';\n  /**\n   * Fired after creating containers, when the core is ready\n   *\n   * @event CORE_READY\n   */\n\n  Events.CORE_READY = 'core:ready';\n  /**\n   * Fired when the fullscreen state change\n   *\n   * @event CORE_FULLSCREEN\n   * @param {Boolean} whether or not the player is on fullscreen mode\n   */\n\n  Events.CORE_FULLSCREEN = 'core:fullscreen';\n  /**\n   * Fired when core updates size\n   *\n   * @event CORE_RESIZE\n   * @param {Object} currentSize an object with the current size\n   */\n\n  Events.CORE_RESIZE = 'core:resize';\n  /**\n   * Fired when the screen orientation has changed.\n   * This event is trigger only for mobile devices.\n   *\n   * @event CORE_SCREEN_ORIENTATION_CHANGED\n   * @param {Object} screen An object with screen orientation\n   * screen object\n   * @param {Object} [screen.event]\n   * window resize event object\n   * @param {String} [screen.orientation]\n   * screen orientation (ie: 'landscape' or 'portrait')\n   */\n\n  Events.CORE_SCREEN_ORIENTATION_CHANGED = 'core:screen:orientation:changed';\n  /**\n   * Fired when occurs mouse move event on core element\n   *\n   * @event CORE_MOUSE_MOVE\n   * @param {Object} event a DOM event\n   */\n\n  Events.CORE_MOUSE_MOVE = 'core:mousemove';\n  /**\n   * Fired when occurs mouse leave event on core element\n   *\n   * @event CORE_MOUSE_LEAVE\n   * @param {Object} event a DOM event\n   */\n\n  Events.CORE_MOUSE_LEAVE = 'core:mouseleave'; // Container Events\n\n  /**\n   * Fired when the container internal state changes\n   *\n   * @event CONTAINER_PLAYBACKSTATE\n   * @param {Object} state Data\n   * state object\n   * @param {String} [state.type]\n   * the playback type\n   */\n\n  Events.CONTAINER_PLAYBACKSTATE = 'container:playbackstate';\n  Events.CONTAINER_PLAYBACKDVRSTATECHANGED = 'container:dvr';\n  /**\n   * Fired when the container updates its bitrate\n   *\n   * @event CONTAINER_BITRATE\n   * @param {Object} bitrate Data\n   * bitrate object\n   * @param {Number} [bitrate.bandwidth]\n   * bitrate bandwidth when it's available\n   * @param {Number} [bitrate.width]\n   * playback width (ex: 720, 640, 1080)\n   * @param {Number} [bitrate.height]\n   * playback height (ex: 240, 480, 720)\n   * @param {Number} [bitrate.level]\n   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n   */\n\n  Events.CONTAINER_BITRATE = 'container:bitrate';\n  Events.CONTAINER_STATS_REPORT = 'container:stats:report';\n  Events.CONTAINER_DESTROYED = 'container:destroyed';\n  /**\n   * Fired when the container is ready\n   *\n   * @event CONTAINER_READY\n   */\n\n  Events.CONTAINER_READY = 'container:ready';\n  /**\n   * Fired when the container was resized.\n   *\n   * Some fullscreen modes won't trigger this resize since they don't affect the container, only the playback contents.\n   *\n   * @event CONTAINER_RESIZE\n   */\n\n  Events.CONTAINER_RESIZE = 'container:resize';\n  Events.CONTAINER_ERROR = 'container:error';\n  /**\n   * Fired when the container loaded its metadata\n   *\n   * @event CONTAINER_LOADEDMETADATA\n   * @param {Object} metadata Data\n   * settings object\n   * @param {Number} [metadata.duration]\n   * the playback duration\n   * @param {Object} [metadata.data]\n   * extra meta data\n   */\n\n  Events.CONTAINER_LOADEDMETADATA = 'container:loadedmetadata';\n  /**\n   * Fired when subtitle is available on container for display\n   *\n   * @event CONTAINER_SUBTITLE_AVAILABLE\n   */\n\n  Events.CONTAINER_SUBTITLE_AVAILABLE = 'container:subtitle:available';\n  /**\n   * Fired when subtitle track has changed\n   *\n   * @event CONTAINER_SUBTITLE_CHANGED\n   * @param {Object} track Data\n   * track object\n   * @param {Number} [track.id]\n   * selected track id\n   */\n\n  Events.CONTAINER_SUBTITLE_CHANGED = 'container:subtitle:changed';\n  /**\n   * Fired when the time is updated on container\n   *\n   * @event CONTAINER_TIMEUPDATE\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.current]\n   * current time (in seconds)\n   * @param {Number} [progress.total]\n   * total time (in seconds)\n   */\n\n  Events.CONTAINER_TIMEUPDATE = 'container:timeupdate';\n  /**\n   * Fired when the container is downloading the media\n   *\n   * @event CONTAINER_PROGRESS\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.start]\n   * initial downloaded content\n   * @param {Number} [progress.current]\n   * current dowloaded content\n   * @param {Number} [progress.total]\n   * total content to be downloaded\n   */\n\n  Events.CONTAINER_PROGRESS = 'container:progress';\n  Events.CONTAINER_PLAY = 'container:play';\n  Events.CONTAINER_STOP = 'container:stop';\n  Events.CONTAINER_PAUSE = 'container:pause';\n  Events.CONTAINER_ENDED = 'container:ended';\n  Events.CONTAINER_CLICK = 'container:click';\n  Events.CONTAINER_DBLCLICK = 'container:dblclick';\n  Events.CONTAINER_CONTEXTMENU = 'container:contextmenu';\n  Events.CONTAINER_MOUSE_ENTER = 'container:mouseenter';\n  Events.CONTAINER_MOUSE_LEAVE = 'container:mouseleave';\n  /**\n   * Fired when the container seeks the video\n   *\n   * @event CONTAINER_SEEK\n   * @param {Number} time the current time in seconds\n   */\n\n  Events.CONTAINER_SEEK = 'container:seek';\n  /**\n   * Fired when the container was finished the seek video\n   *\n   * @event CONTAINER_SEEKED\n   * @param {Number} time the current time in seconds\n   */\n\n  Events.CONTAINER_SEEKED = 'container:seeked';\n  Events.CONTAINER_VOLUME = 'container:volume';\n  Events.CONTAINER_FULLSCREEN = 'container:fullscreen';\n  /**\n   * Fired when container is buffering\n   *\n   * @event CONTAINER_STATE_BUFFERING\n   */\n\n  Events.CONTAINER_STATE_BUFFERING = 'container:state:buffering';\n  /**\n   * Fired when the container filled the buffer\n   *\n   * @event CONTAINER_STATE_BUFFERFULL\n   */\n\n  Events.CONTAINER_STATE_BUFFERFULL = 'container:state:bufferfull';\n  /**\n   * Fired when the container changes any settings (volume, seek and etc)\n   *\n   * @event CONTAINER_SETTINGSUPDATE\n   */\n\n  Events.CONTAINER_SETTINGSUPDATE = 'container:settingsupdate';\n  /**\n   * Fired when container updates its video quality\n   *\n   * @event CONTAINER_HIGHDEFINITIONUPDATE\n   * @param {Boolean} isHD\n   * true when is on HD, false otherwise\n   */\n\n  Events.CONTAINER_HIGHDEFINITIONUPDATE = 'container:highdefinitionupdate';\n  /**\n   * Fired when the media control shows\n   *\n   * @event CONTAINER_MEDIACONTROL_SHOW\n   */\n\n  Events.CONTAINER_MEDIACONTROL_SHOW = 'container:mediacontrol:show';\n  /**\n   * Fired when the media control hides\n   *\n   * @event CONTAINER_MEDIACONTROL_HIDE\n   */\n\n  Events.CONTAINER_MEDIACONTROL_HIDE = 'container:mediacontrol:hide';\n  Events.CONTAINER_MEDIACONTROL_DISABLE = 'container:mediacontrol:disable';\n  Events.CONTAINER_MEDIACONTROL_ENABLE = 'container:mediacontrol:enable';\n  Events.CONTAINER_STATS_ADD = 'container:stats:add';\n  /**\n   * Fired when the options were changed for the container\n   *\n   * @event CONTAINER_OPTIONS_CHANGE\n   */\n\n  Events.CONTAINER_OPTIONS_CHANGE = 'container:options:change'; // MediaControl Events\n\n  Events.MEDIACONTROL_RENDERED = 'mediacontrol:rendered';\n  /**\n   * Fired when the player enters/exit on fullscreen\n   *\n   * @event MEDIACONTROL_FULLSCREEN\n   */\n\n  Events.MEDIACONTROL_FULLSCREEN = 'mediacontrol:fullscreen';\n  /**\n   * Fired when the media control shows\n   *\n   * @event MEDIACONTROL_SHOW\n   */\n\n  Events.MEDIACONTROL_SHOW = 'mediacontrol:show';\n  /**\n   * Fired when the media control hides\n   *\n   * @event MEDIACONTROL_HIDE\n   */\n\n  Events.MEDIACONTROL_HIDE = 'mediacontrol:hide';\n  /**\n   * Fired when mouse enters on the seekbar\n   *\n   * @event MEDIACONTROL_MOUSEMOVE_SEEKBAR\n   * @param {Object} event\n   * the javascript event\n   */\n\n  Events.MEDIACONTROL_MOUSEMOVE_SEEKBAR = 'mediacontrol:mousemove:seekbar';\n  /**\n   * Fired when mouse leaves the seekbar\n   *\n   * @event MEDIACONTROL_MOUSELEAVE_SEEKBAR\n   * @param {Object} event\n   * the javascript event\n   */\n\n  Events.MEDIACONTROL_MOUSELEAVE_SEEKBAR = 'mediacontrol:mouseleave:seekbar';\n  /**\n   * Fired when the media is being played\n   *\n   * @event MEDIACONTROL_PLAYING\n   */\n\n  Events.MEDIACONTROL_PLAYING = 'mediacontrol:playing';\n  /**\n   * Fired when the media is not being played\n   *\n   * @event MEDIACONTROL_NOTPLAYING\n   */\n\n  Events.MEDIACONTROL_NOTPLAYING = 'mediacontrol:notplaying';\n  /**\n   * Fired when the container was changed\n   *\n   * @event MEDIACONTROL_CONTAINERCHANGED\n   */\n\n  Events.MEDIACONTROL_CONTAINERCHANGED = 'mediacontrol:containerchanged';\n  /**\n   * Fired when the options were changed for the mediacontrol\n   *\n   * @event MEDIACONTROL_OPTIONS_CHANGE\n   */\n\n  Events.MEDIACONTROL_OPTIONS_CHANGE = 'mediacontrol:options:change';\n\n  /**\n   * @class BaseObject\n   * @constructor\n   * @extends Events\n   * @module base\n   */\n\n  var BaseObject = /*#__PURE__*/function (_Events) {\n    _inherits(BaseObject, _Events);\n\n    var _super = _createSuper(BaseObject);\n\n    _createClass(BaseObject, [{\n      key: \"options\",\n\n      /**\n       * returns the object options\n       * @property options\n       * @type Object\n       */\n      get: function get() {\n        return this._options;\n      }\n      /**\n       * @method constructor\n       * @param {Object} options\n       */\n\n    }]);\n\n    function BaseObject() {\n      var _this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _classCallCheck(this, BaseObject);\n\n      _this = _super.call(this, options);\n      _this._options = options;\n      _this.uniqueId = uniqueId('o');\n      return _this;\n    }\n    /**\n    * a unique id prefixed with `'o'`, `o1, o232`\n    *\n    * @property uniqueId\n    * @type String\n    */\n\n\n    return BaseObject;\n  }(Events);\n\n  /* eslint-disable no-var */\n  // Simple JavaScript Templating\n  // Paul Miller (http://paulmillr.com)\n  // http://underscorejs.org\n  // (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  var settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  }; // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n\n  var noMatch = /(.)^/; // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n\n  var escapes = {\n    '\\'': '\\'',\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    \"\\u2028\": 'u2028',\n    \"\\u2029\": 'u2029'\n  };\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g; // List of HTML entities for escaping.\n\n  var htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#x27;'\n  };\n  var entityRe = new RegExp('[&<>\"\\']', 'g');\n\n  var escapeExpr = function escapeExpr(string) {\n    if (string === null) return '';\n    return ('' + string).replace(entityRe, function (match) {\n      return htmlEntities[match];\n    });\n  };\n\n  var counter = 0; // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n\n  var tmpl = function tmpl(text, data) {\n    var render; // Combine delimiters into one regular expression via alternation.\n\n    var matcher = new RegExp([(settings.escape || noMatch).source, (settings.interpolate || noMatch).source, (settings.evaluate || noMatch).source].join('|') + '|$', 'g'); // Compile the template source, escaping string literals appropriately.\n\n    var index = 0;\n    var source = '__p+=\\'';\n    text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, function (match) {\n        return '\\\\' + escapes[match];\n      });\n      if (escape) source += '\\'+\\n((__t=(' + escape + '))==null?\\'\\':escapeExpr(__t))+\\n\\'';\n      if (interpolate) source += '\\'+\\n((__t=(' + interpolate + '))==null?\\'\\':__t)+\\n\\'';\n      if (evaluate) source += '\\';\\n' + evaluate + '\\n__p+=\\'';\n      index = offset + match.length;\n      return match;\n    });\n    source += '\\';\\n'; // If a variable is not specified, place data values in local scope.\n\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n    source = 'var __t,__p=\\'\\',__j=Array.prototype.join,' + 'print=function(){__p+=__j.call(arguments,\\'\\');};\\n' + source + 'return __p;\\n//# sourceURL=/microtemplates/source[' + counter++ + ']';\n\n    try {\n      /*jshint -W054 */\n      // TODO: find a way to avoid eval\n      render = new Function(settings.variable || 'obj', 'escapeExpr', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, escapeExpr);\n\n    var template = function template(data) {\n      return render.call(this, data, escapeExpr);\n    }; // Provide the compiled function source as a convenience for precompilation.\n\n\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n    return template;\n  };\n\n  tmpl.settings = settings;\n\n  // Copyright 2014 Globo.com Player authors. All rights reserved.\n  var Styler = {\n    getStyleFor: function getStyleFor(style) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        baseUrl: ''\n      };\n      return zepto('<style class=\"clappr-style\"></style>').html(tmpl(style.toString())(options));\n    }\n  };\n\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n  /**\n   * A base class to create ui object.\n   * @class UIObject\n   * @constructor\n   * @extends BaseObject\n   * @module base\n   */\n\n  var UIObject = /*#__PURE__*/function (_BaseObject) {\n    _inherits(UIObject, _BaseObject);\n\n    var _super = _createSuper(UIObject);\n\n    _createClass(UIObject, [{\n      key: \"tagName\",\n\n      /**\n       * a unique id prefixed with `'c'`, `c1, c232`\n       *\n       * @property cid\n       * @type String\n       */\n\n      /**\n       * the dom element itself\n       *\n       * @property el\n       * @type HTMLElement\n       */\n\n      /**\n       * the dom element wrapped by `$`\n       *\n       * @property $el\n       * @type HTMLElement\n       */\n\n      /**\n       * gets the tag name for the ui component\n       * @method tagName\n       * @default div\n       * @return {String} tag's name\n       */\n      get: function get() {\n        return 'div';\n      }\n      /**\n       * a literal object mapping element's events to methods\n       * @property events\n       * @type Object\n       * @example\n       *\n       *```javascript\n       *\n       * class MyButton extends UIObject {\n       *   constructor(options) {\n       *     super(options)\n       *     this.myId = 0\n       *   }\n       *   get events() { return { 'click': 'myClick' } }\n       *   myClick(){ this.myId = 42 }\n       * }\n       *\n       * // when you click on MyButton the method `myClick` will be called\n       *```\n       */\n\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {};\n      }\n      /**\n       * a literal object mapping attributes and values to the element\n       * element's attribute name and the value the attribute value\n       * @property attributes\n       * @type Object\n       * @example\n       *\n       *```javascript\n       *\n       * class MyButton extends UIObject {\n       *    constructor(options) { super(options) }\n       *    get attributes() { return { class: 'my-button'} }\n       * }\n       *\n       * // MyButton.el.className will be 'my-button'\n       * ```\n       */\n\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {};\n      }\n      /**\n       * it builds an ui component by:\n       *  * creating an id for the component `cid`\n       *  * making sure the element is created `$el`\n       *  * delegating all `events` to the element\n       * @method constructor\n       * @param {Object} options the options object\n       */\n\n    }]);\n\n    function UIObject(options) {\n      var _this;\n\n      _classCallCheck(this, UIObject);\n\n      _this = _super.call(this, options);\n      _this.cid = uniqueId('c');\n\n      _this._ensureElement();\n\n      _this.delegateEvents();\n\n      return _this;\n    }\n    /**\n     * selects within the component.\n     * @method $\n     * @param {String} selector a selector to find within the component.\n     * @return {HTMLElement} an element, if it exists.\n     * @example\n     * ```javascript\n     * fullScreenBarUIComponent.$('.button-full') //will return only `.button-full` within the component\n     * ```\n     */\n\n\n    _createClass(UIObject, [{\n      key: \"$\",\n      value: function $(selector) {\n        return this.$el.find(selector);\n      }\n      /**\n       * render the component, usually attach it to a real existent `element`\n       * @method render\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        return this;\n      }\n      /**\n       * removes the ui component from DOM\n       * @method destroy\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.$el.remove();\n        this.stopListening();\n        this.undelegateEvents();\n        return this;\n      }\n      /**\n       * set element to `el` and `$el`\n       * @method setElement\n       * @param {HTMLElement} element\n       * @param {Boolean} delegate whether is delegate or not\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"setElement\",\n      value: function setElement(element, delegate) {\n        if (this.$el) this.undelegateEvents();\n        this.$el = zepto.zepto.isZ(element) ? element : zepto(element);\n        this.el = this.$el[0];\n        if (delegate !== false) this.delegateEvents();\n        return this;\n      }\n      /**\n       * delegates all the original `events` on `element` to its callbacks\n       * @method delegateEvents\n       * @param {Object} events\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"delegateEvents\",\n      value: function delegateEvents(events) {\n        if (!events) events = this.events;\n        this.undelegateEvents();\n\n        for (var key in events) {\n          var method = events[key];\n          if (method && method.constructor !== Function) method = this[events[key]];\n          if (!method) continue;\n          var match = key.match(delegateEventSplitter);\n          var eventName = match[1],\n              selector = match[2];\n          eventName += '.delegateEvents' + this.cid;\n          if (selector === '') this.$el.on(eventName, method.bind(this));else this.$el.on(eventName, selector, method.bind(this));\n        }\n\n        return this;\n      }\n      /**\n       * undelegats all the `events`\n       * @method undelegateEvents\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"undelegateEvents\",\n      value: function undelegateEvents() {\n        this.$el.off('.delegateEvents' + this.cid);\n        return this;\n      }\n      /**\n       * ensures the creation of this ui component\n       * @method _ensureElement\n       * @private\n       */\n\n    }, {\n      key: \"_ensureElement\",\n      value: function _ensureElement() {\n        if (!this.el) {\n          var attrs = zepto.extend(true, {}, this.attributes);\n          if (this.id) attrs.id = this.id;\n          if (this.className) attrs['class'] = this.className;\n          var $el = zepto(DomRecycler.create(this.tagName)).attr(attrs);\n          this.setElement($el, false);\n        } else {\n          this.setElement(this.el, false);\n        }\n      }\n    }]);\n\n    return UIObject;\n  }(BaseObject);\n\n  /**\n   * The PlayerError is responsible to receive and propagate errors.\n   * @class PlayerError\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   */\n\n  var PlayerError = /*#__PURE__*/function (_BaseObject) {\n    _inherits(PlayerError, _BaseObject);\n\n    var _super = _createSuper(PlayerError);\n\n    _createClass(PlayerError, [{\n      key: \"name\",\n      get: function get() {\n        return 'error';\n      }\n      /**\n       * @property Levels\n       * @type {Object} object with error levels\n       */\n\n    }], [{\n      key: \"Levels\",\n      get: function get() {\n        return {\n          FATAL: 'FATAL',\n          WARN: 'WARN',\n          INFO: 'INFO'\n        };\n      }\n    }]);\n\n    function PlayerError() {\n      var _this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var core = arguments.length > 1 ? arguments[1] : undefined;\n\n      _classCallCheck(this, PlayerError);\n\n      _this = _super.call(this, options);\n      _this.core = core;\n      return _this;\n    }\n    /**\n     * creates and trigger an error.\n     * @method createError\n     * @param {Object} err should be an object with code, description, level, origin, scope and raw error.\n     */\n\n\n    _createClass(PlayerError, [{\n      key: \"createError\",\n      value: function createError(err) {\n        if (!this.core) {\n          Log.warn(this.name, 'Core is not set. Error: ', err);\n          return;\n        }\n\n        this.core.trigger(Events.ERROR, err);\n      }\n    }]);\n\n    return PlayerError;\n  }(BaseObject);\n\n  var ErrorMixin = {\n    /**\n     * creates an error.\n     * @method createError\n     * @param {Object} error should be an object with code, description, level and raw error.\n     * @return {Object} Object with formatted error data including origin and scope\n     */\n    createError: function createError(error) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        useCodePrefix: true\n      };\n      var scope = this.constructor && this.constructor.type || '';\n      var origin = this.name || scope;\n      var i18n = this.i18n || this.core && this.core.i18n || this.container && this.container.i18n;\n      var prefixedCode = \"\".concat(origin, \":\").concat(error && error.code || 'unknown');\n      var defaultError = {\n        description: '',\n        level: PlayerError.Levels.FATAL,\n        origin: origin,\n        scope: scope,\n        raw: {}\n      };\n      var errorData = Object.assign({}, defaultError, error, {\n        code: options.useCodePrefix ? prefixedCode : error.code\n      });\n\n      if (i18n && errorData.level == PlayerError.Levels.FATAL && !errorData.UI) {\n        var defaultUI = {\n          title: i18n.t('default_error_title'),\n          message: i18n.t('default_error_message')\n        };\n        errorData.UI = defaultUI;\n      }\n\n      this.playerError ? this.playerError.createError(errorData) : Log.warn(origin, 'PlayerError is not defined. Error: ', errorData);\n      return errorData;\n    }\n  };\n\n  var UICorePlugin = /*#__PURE__*/function (_UIObject) {\n    _inherits(UICorePlugin, _UIObject);\n\n    var _super = _createSuper(UICorePlugin);\n\n    _createClass(UICorePlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.core.playerError;\n      }\n    }]);\n\n    function UICorePlugin(core) {\n      var _this;\n\n      _classCallCheck(this, UICorePlugin);\n\n      _this = _super.call(this, core.options);\n      _this.core = core;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      _this.render();\n\n      return _this;\n    }\n\n    _createClass(UICorePlugin, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }, {\n      key: \"getExternalInterface\",\n      value: function getExternalInterface() {\n        return {};\n      }\n    }, {\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.$el.show();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        this.stopListening();\n        this.$el.hide();\n        this.enabled = false;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return this;\n      }\n    }]);\n\n    return UICorePlugin;\n  }(UIObject);\n  Object.assign(UICorePlugin.prototype, ErrorMixin);\n\n  UICorePlugin.extend = function (properties) {\n    return extend(UICorePlugin, properties);\n  };\n\n  UICorePlugin.type = 'core';\n\n  var css_248z = \".container[data-container] {\\n  position: absolute;\\n  background-color: black;\\n  height: 100%;\\n  width: 100%;\\n  max-width: 100%; }\\n  .container[data-container] .chromeless {\\n    cursor: default; }\\n\\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\\n  cursor: pointer; }\\n\";\n\n  /**\n   * An abstraction to represent a container for a given playback\n   * TODO: describe its responsabilities\n   * @class Container\n   * @constructor\n   * @extends UIObject\n   * @module base\n   */\n\n  var Container = /*#__PURE__*/function (_UIObject) {\n    _inherits(Container, _UIObject);\n\n    var _super = _createSuper(Container);\n\n    _createClass(Container, [{\n      key: \"name\",\n\n      /**\n       * container's name\n       * @method name\n       * @default Container\n       * @return {String} container's name\n       */\n      get: function get() {\n        return 'Container';\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          \"class\": 'container',\n          'data-container': ''\n        };\n      }\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {\n          'click': 'clicked',\n          'dblclick': 'dblClicked',\n          'touchend': 'dblTap',\n          'contextmenu': 'onContextMenu',\n          'mouseenter': 'mouseEnter',\n          'mouseleave': 'mouseLeave'\n        };\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return this.playback.ended;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * (i.e if a live stream is playing smoothly, this will be false)\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return this.playback.buffering;\n      }\n      /**\n       * The internationalization plugin.\n       * @property i18n\n       * @type {Strings}\n       */\n\n    }, {\n      key: \"i18n\",\n      get: function get() {\n        return this._i18n;\n      }\n      /**\n       * checks if has closed caption tracks.\n       * @property hasClosedCaptionsTracks\n       * @type {Boolean}\n       */\n\n    }, {\n      key: \"hasClosedCaptionsTracks\",\n      get: function get() {\n        return this.playback.hasClosedCaptionsTracks;\n      }\n      /**\n       * gets the available closed caption tracks.\n       * @property closedCaptionsTracks\n       * @type {Array} an array of objects with at least 'id' and 'name' properties\n       */\n\n    }, {\n      key: \"closedCaptionsTracks\",\n      get: function get() {\n        return this.playback.closedCaptionsTracks;\n      }\n      /**\n       * gets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n\n    }, {\n      key: \"closedCaptionsTrackId\",\n      get: function get() {\n        return this.playback.closedCaptionsTrackId;\n      }\n      /**\n       * sets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n      ,\n      set: function set(trackId) {\n        this.playback.closedCaptionsTrackId = trackId;\n      }\n      /**\n       * it builds a container\n       * @method constructor\n       * @param {Object} options the options object\n       * @param {Strings} i18n the internationalization component\n       */\n\n    }]);\n\n    function Container(options, i18n, playerError) {\n      var _this;\n\n      _classCallCheck(this, Container);\n\n      _this = _super.call(this, options);\n      _this._i18n = i18n;\n      _this.currentTime = 0;\n      _this.volume = 100;\n      _this.playback = options.playback;\n      _this.playerError = playerError;\n      _this.settings = zepto.extend(true, {}, _this.playback.settings);\n      _this.isReady = false;\n      _this.mediaControlDisabled = false;\n      _this.plugins = [_this.playback];\n      _this.dblTapHandler = new DoubleEventHandler(500);\n      _this.clickTimer = null;\n      _this.clickDelay = 200; // FIXME: could be a player option\n\n      _this.bindEvents();\n\n      return _this;\n    }\n    /**\n     * binds playback events to the methods of the container.\n     * it listens to playback's events and triggers them as container events.\n     *\n     * | Playback |\n     * |----------|\n     * | progress |\n     * | timeupdate |\n     * | ready |\n     * | buffering |\n     * | bufferfull |\n     * | settingsupdate |\n     * | loadedmetadata |\n     * | highdefinitionupdate |\n     * | bitrate |\n     * | playbackstate |\n     * | dvr |\n     * | mediacontrol_disable |\n     * | mediacontrol_enable |\n     * | ended |\n     * | play |\n     * | pause |\n     * | error |\n     *\n     * ps: the events usually translate from PLABACK_x to CONTAINER_x, you can check all the events at `Event` class.\n     *\n     * @method bindEvents\n     */\n\n\n    _createClass(Container, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {\n        this.listenTo(this.playback, Events.PLAYBACK_PROGRESS, this.onProgress);\n        this.listenTo(this.playback, Events.PLAYBACK_TIMEUPDATE, this.timeUpdated);\n        this.listenTo(this.playback, Events.PLAYBACK_READY, this.ready);\n        this.listenTo(this.playback, Events.PLAYBACK_BUFFERING, this.onBuffering);\n        this.listenTo(this.playback, Events.PLAYBACK_BUFFERFULL, this.bufferfull);\n        this.listenTo(this.playback, Events.PLAYBACK_SETTINGSUPDATE, this.settingsUpdate);\n        this.listenTo(this.playback, Events.PLAYBACK_LOADEDMETADATA, this.loadedMetadata);\n        this.listenTo(this.playback, Events.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinitionUpdate);\n        this.listenTo(this.playback, Events.PLAYBACK_BITRATE, this.updateBitrate);\n        this.listenTo(this.playback, Events.PLAYBACK_PLAYBACKSTATE, this.playbackStateChanged);\n        this.listenTo(this.playback, Events.PLAYBACK_DVR, this.playbackDvrStateChanged);\n        this.listenTo(this.playback, Events.PLAYBACK_MEDIACONTROL_DISABLE, this.disableMediaControl);\n        this.listenTo(this.playback, Events.PLAYBACK_MEDIACONTROL_ENABLE, this.enableMediaControl);\n        this.listenTo(this.playback, Events.PLAYBACK_SEEK, this.onSeek);\n        this.listenTo(this.playback, Events.PLAYBACK_SEEKED, this.onSeeked);\n        this.listenTo(this.playback, Events.PLAYBACK_ENDED, this.onEnded);\n        this.listenTo(this.playback, Events.PLAYBACK_PLAY, this.playing);\n        this.listenTo(this.playback, Events.PLAYBACK_PAUSE, this.paused);\n        this.listenTo(this.playback, Events.PLAYBACK_STOP, this.stopped);\n        this.listenTo(this.playback, Events.PLAYBACK_ERROR, this.error);\n        this.listenTo(this.playback, Events.PLAYBACK_SUBTITLE_AVAILABLE, this.subtitleAvailable);\n        this.listenTo(this.playback, Events.PLAYBACK_SUBTITLE_CHANGED, this.subtitleChanged);\n      }\n    }, {\n      key: \"subtitleAvailable\",\n      value: function subtitleAvailable() {\n        this.trigger(Events.CONTAINER_SUBTITLE_AVAILABLE);\n      }\n    }, {\n      key: \"subtitleChanged\",\n      value: function subtitleChanged(track) {\n        this.trigger(Events.CONTAINER_SUBTITLE_CHANGED, track);\n      }\n    }, {\n      key: \"playbackStateChanged\",\n      value: function playbackStateChanged(state) {\n        this.trigger(Events.CONTAINER_PLAYBACKSTATE, state);\n      }\n    }, {\n      key: \"playbackDvrStateChanged\",\n      value: function playbackDvrStateChanged(dvrInUse) {\n        this.settings = this.playback.settings;\n        this.dvrInUse = dvrInUse;\n        this.trigger(Events.CONTAINER_PLAYBACKDVRSTATECHANGED, dvrInUse);\n      }\n    }, {\n      key: \"updateBitrate\",\n      value: function updateBitrate(newBitrate) {\n        this.trigger(Events.CONTAINER_BITRATE, newBitrate);\n      }\n    }, {\n      key: \"statsReport\",\n      value: function statsReport(metrics) {\n        this.trigger(Events.CONTAINER_STATS_REPORT, metrics);\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return this.playback.getPlaybackType();\n      }\n      /**\n       * returns `true` if DVR is enable otherwise `false`.\n       * @method isDvrEnabled\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrEnabled\",\n      value: function isDvrEnabled() {\n        return !!this.playback.dvrEnabled;\n      }\n      /**\n       * returns `true` if DVR is in use otherwise `false`.\n       * @method isDvrInUse\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrInUse\",\n      value: function isDvrInUse() {\n        return !!this.dvrInUse;\n      }\n      /**\n       * destroys the container\n       * @method destroy\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.disableResizeObserver();\n        this.trigger(Events.CONTAINER_DESTROYED, this, this.name);\n        this.stopListening();\n        this.plugins.forEach(function (plugin) {\n          return plugin.destroy();\n        });\n        this.$el.remove();\n      }\n    }, {\n      key: \"setStyle\",\n      value: function setStyle(style) {\n        this.$el.css(style);\n      }\n    }, {\n      key: \"animate\",\n      value: function animate(style, duration) {\n        return this.$el.animate(style, duration).promise();\n      }\n    }, {\n      key: \"ready\",\n      value: function ready() {\n        this.isReady = true;\n        this.trigger(Events.CONTAINER_READY, this.name);\n      }\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return this.playback.isPlaying();\n      }\n    }, {\n      key: \"getStartTimeOffset\",\n      value: function getStartTimeOffset() {\n        return this.playback.getStartTimeOffset();\n      }\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this.currentTime;\n      }\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        return this.playback.getDuration();\n      }\n    }, {\n      key: \"error\",\n      value: function error(_error) {\n        if (!this.isReady) this.ready();\n        this.trigger(Events.CONTAINER_ERROR, _error, this.name);\n      }\n    }, {\n      key: \"loadedMetadata\",\n      value: function loadedMetadata(metadata) {\n        this.trigger(Events.CONTAINER_LOADEDMETADATA, metadata);\n      }\n    }, {\n      key: \"timeUpdated\",\n      value: function timeUpdated(timeProgress) {\n        this.currentTime = timeProgress.current;\n        this.trigger(Events.CONTAINER_TIMEUPDATE, timeProgress, this.name);\n      }\n    }, {\n      key: \"onProgress\",\n      value: function onProgress() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        this.trigger.apply(this, [Events.CONTAINER_PROGRESS].concat(args, [this.name]));\n      }\n    }, {\n      key: \"playing\",\n      value: function playing() {\n        this.trigger(Events.CONTAINER_PLAY, this.name);\n      }\n    }, {\n      key: \"paused\",\n      value: function paused() {\n        this.trigger(Events.CONTAINER_PAUSE, this.name);\n      }\n      /**\n       * plays the playback\n       * @method play\n       */\n\n    }, {\n      key: \"play\",\n      value: function play() {\n        this.playback.play();\n      }\n      /**\n       * stops the playback\n       * @method stop\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this.playback.stop();\n        this.currentTime = 0;\n      }\n      /**\n       * pauses the playback\n       * @method pause\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.playback.pause();\n      }\n    }, {\n      key: \"onEnded\",\n      value: function onEnded() {\n        this.trigger(Events.CONTAINER_ENDED, this, this.name);\n        this.currentTime = 0;\n      }\n    }, {\n      key: \"stopped\",\n      value: function stopped() {\n        this.trigger(Events.CONTAINER_STOP);\n      }\n    }, {\n      key: \"clicked\",\n      value: function clicked() {\n        var _this2 = this;\n\n        if (!this.options.chromeless || this.options.allowUserInteraction) {\n          // The event is delayed because it can be canceled by a double-click event\n          // An example of use is to prevent playback from pausing when switching to full screen\n          this.clickTimer = setTimeout(function () {\n            _this2.clickTimer && _this2.trigger(Events.CONTAINER_CLICK, _this2, _this2.name);\n          }, this.clickDelay);\n        }\n      }\n    }, {\n      key: \"cancelClicked\",\n      value: function cancelClicked() {\n        clearTimeout(this.clickTimer);\n        this.clickTimer = null;\n      }\n    }, {\n      key: \"dblClicked\",\n      value: function dblClicked() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) {\n          this.cancelClicked();\n          this.trigger(Events.CONTAINER_DBLCLICK, this, this.name);\n        }\n      }\n    }, {\n      key: \"dblTap\",\n      value: function dblTap(evt) {\n        var _this3 = this;\n\n        if (!this.options.chromeless || this.options.allowUserInteraction) {\n          this.dblTapHandler.handle(evt, function () {\n            _this3.cancelClicked();\n\n            _this3.trigger(Events.CONTAINER_DBLCLICK, _this3, _this3.name);\n          });\n        }\n      }\n    }, {\n      key: \"onContextMenu\",\n      value: function onContextMenu(event) {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.trigger(Events.CONTAINER_CONTEXTMENU, event, this.name);\n      }\n    }, {\n      key: \"seek\",\n      value: function seek(time) {\n        this.playback.seek(time);\n      }\n    }, {\n      key: \"onSeek\",\n      value: function onSeek(time) {\n        this.trigger(Events.CONTAINER_SEEK, time, this.name);\n      }\n    }, {\n      key: \"onSeeked\",\n      value: function onSeeked() {\n        this.trigger(Events.CONTAINER_SEEKED, this.name);\n      }\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {\n        var duration = this.getDuration();\n\n        if (percentage >= 0 && percentage <= 100) {\n          var time = duration * (percentage / 100);\n          this.seek(time);\n        }\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(value) {\n        this.volume = parseFloat(value);\n        this.trigger(Events.CONTAINER_VOLUME, this.volume, this.name);\n        this.playback.volume(this.volume);\n      }\n    }, {\n      key: \"fullscreen\",\n      value: function fullscreen() {\n        this.trigger(Events.CONTAINER_FULLSCREEN, this.name);\n      }\n    }, {\n      key: \"onBuffering\",\n      value: function onBuffering() {\n        this.trigger(Events.CONTAINER_STATE_BUFFERING, this.name);\n      }\n    }, {\n      key: \"bufferfull\",\n      value: function bufferfull() {\n        this.trigger(Events.CONTAINER_STATE_BUFFERFULL, this.name);\n      }\n      /**\n       * adds plugin to the container\n       * @method addPlugin\n       * @param {Object} plugin\n       */\n\n    }, {\n      key: \"addPlugin\",\n      value: function addPlugin(plugin) {\n        this.plugins.push(plugin);\n      }\n      /**\n       * checks if a plugin, given its name, exist\n       * @method hasPlugin\n       * @param {String} name\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"hasPlugin\",\n      value: function hasPlugin(name) {\n        return !!this.getPlugin(name);\n      }\n      /**\n       * get the plugin given its name\n       * @method getPlugin\n       * @param {String} name\n       */\n\n    }, {\n      key: \"getPlugin\",\n      value: function getPlugin(name) {\n        return this.plugins.filter(function (plugin) {\n          return plugin.name === name;\n        })[0];\n      }\n    }, {\n      key: \"mouseEnter\",\n      value: function mouseEnter() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.trigger(Events.CONTAINER_MOUSE_ENTER);\n      }\n    }, {\n      key: \"mouseLeave\",\n      value: function mouseLeave() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.trigger(Events.CONTAINER_MOUSE_LEAVE);\n      }\n    }, {\n      key: \"settingsUpdate\",\n      value: function settingsUpdate() {\n        this.settings = this.playback.settings;\n        this.trigger(Events.CONTAINER_SETTINGSUPDATE);\n      }\n    }, {\n      key: \"highDefinitionUpdate\",\n      value: function highDefinitionUpdate(isHD) {\n        this.trigger(Events.CONTAINER_HIGHDEFINITIONUPDATE, isHD);\n      }\n    }, {\n      key: \"isHighDefinitionInUse\",\n      value: function isHighDefinitionInUse() {\n        return this.playback.isHighDefinitionInUse();\n      }\n    }, {\n      key: \"disableMediaControl\",\n      value: function disableMediaControl() {\n        if (!this.mediaControlDisabled) {\n          this.mediaControlDisabled = true;\n          this.trigger(Events.CONTAINER_MEDIACONTROL_DISABLE);\n        }\n      }\n    }, {\n      key: \"enableMediaControl\",\n      value: function enableMediaControl() {\n        if (this.mediaControlDisabled) {\n          this.mediaControlDisabled = false;\n          this.trigger(Events.CONTAINER_MEDIACONTROL_ENABLE);\n        }\n      }\n    }, {\n      key: \"updateStyle\",\n      value: function updateStyle() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.$el.removeClass('chromeless');else this.$el.addClass('chromeless');\n      }\n    }, {\n      key: \"enableResizeObserver\",\n      value: function enableResizeObserver() {\n        var _this4 = this;\n\n        this.disableResizeObserver();\n        this.resizeObserverInterval = setInterval(function () {\n          return _this4.checkResize();\n        }, 500);\n      }\n    }, {\n      key: \"disableResizeObserver\",\n      value: function disableResizeObserver() {\n        this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);\n      }\n    }, {\n      key: \"checkResize\",\n      value: function checkResize() {\n        var newSize = {\n          width: this.el.clientWidth,\n          height: this.el.clientHeight\n        };\n\n        var _ref = this.currentSize || {},\n            width = _ref.width,\n            height = _ref.height;\n\n        var isResize = height !== newSize.height || width !== newSize.width;\n\n        if (isResize) {\n          this.currentSize = newSize;\n          this.trigger(Events.CONTAINER_RESIZE, newSize);\n        }\n      }\n      /**\n       * enables to configure the container after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure(options) {\n        this._options = zepto.extend(true, this._options, options);\n        this.updateStyle();\n        this.playback.configure(this.options);\n        this.trigger(Events.CONTAINER_OPTIONS_CHANGE);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var style = Styler.getStyleFor(css_248z.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.$el.append(this.playback.render().el);\n        this.updateStyle();\n        this.checkResize();\n        this.enableResizeObserver();\n        return this;\n      }\n    }]);\n\n    return Container;\n  }(UIObject);\n  Object.assign(Container.prototype, ErrorMixin);\n\n  /**\n   * An abstraction to represent a generic playback, it's like an interface to be implemented by subclasses.\n   * @class Playback\n   * @constructor\n   * @extends UIObject\n   * @module base\n   */\n\n  var Playback = /*#__PURE__*/function (_UIObject) {\n    _inherits(Playback, _UIObject);\n\n    var _super = _createSuper(Playback);\n\n    _createClass(Playback, [{\n      key: \"isAudioOnly\",\n\n      /**\n      * Determine if the playback does not contain video/has video but video should be ignored.\n      * @property isAudioOnly\n      * @type Boolean\n      */\n      get: function get() {\n        return false;\n      }\n    }, {\n      key: \"isAdaptive\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * The internationalization plugin.\n       * @property i18n\n       * @type {Strings}\n       */\n\n    }, {\n      key: \"i18n\",\n      get: function get() {\n        return this._i18n;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * (i.e if a live stream is playing smoothly, this will be false)\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * @method constructor\n       * @param {Object} options the options object\n       * @param {Strings} i18n the internationalization component\n       */\n\n    }]);\n\n    function Playback(options, i18n, playerError) {\n      var _this;\n\n      _classCallCheck(this, Playback);\n\n      _this = _super.call(this, options);\n      _this.settings = {};\n      _this._i18n = i18n;\n      _this.playerError = playerError;\n      _this._consented = false;\n      return _this;\n    }\n    /**\n     * Gives user consent to playback (mobile devices).\n     * @method consent\n     * @param {Function} callback function called when playback is consented\n     */\n\n\n    _createClass(Playback, [{\n      key: \"consent\",\n      value: function consent(cb) {\n        typeof cb === 'function' && cb();\n      }\n      /**\n       * plays the playback.\n       * @method play\n       */\n\n    }, {\n      key: \"play\",\n      value: function play() {}\n      /**\n       * pauses the playback.\n       * @method pause\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {}\n      /**\n       * stops the playback.\n       * @method stop\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {}\n      /**\n       * seeks the playback to a given `time` in seconds\n       * @method seek\n       * @param {Number} time should be a number between 0 and the video duration\n       */\n\n    }, {\n      key: \"seek\",\n      value: function seek(time) {} // eslint-disable-line no-unused-vars\n\n      /**\n       * seeks the playback to a given `percentage` in percentage\n       * @method seekPercentage\n       * @param {Number} time should be a number between 0 and 100\n       */\n\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {} // eslint-disable-line no-unused-vars\n\n      /**\n       * The time that \"0\" now represents relative to when playback started.\n       * For a stream with a sliding window this will increase as content is\n       * removed from the beginning.\n       * @method getStartTimeOffset\n       * @return {Number} time (in seconds) that time \"0\" represents.\n       */\n\n    }, {\n      key: \"getStartTimeOffset\",\n      value: function getStartTimeOffset() {\n        return 0;\n      }\n      /**\n       * gets the duration in seconds\n       * @method getDuration\n       * @return {Number} duration (in seconds) of the current source\n       */\n\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        return 0;\n      }\n      /**\n       * checks if the playback is playing.\n       * @method isPlaying\n       * @return {Boolean} `true` if the current playback is playing, otherwise `false`\n       */\n\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return false;\n      }\n      /**\n       * checks if the playback is ready.\n       * @property isReady\n       * @type {Boolean} `true` if the current playback is ready, otherwise `false`\n       */\n\n    }, {\n      key: \"getPlaybackType\",\n      // eslint-disable-line no-unused-vars\n\n      /**\n       * gets the playback type (`'vod', 'live', 'aod'`)\n       * @method getPlaybackType\n       * @return {String} you should write the playback type otherwise it'll assume `'no_op'`\n       * @example\n       * ```javascript\n       * html5VideoPlayback.getPlaybackType() //vod\n       * html5AudioPlayback.getPlaybackType() //aod\n       * html5VideoPlayback.getPlaybackType() //live\n       * flashHlsPlayback.getPlaybackType() //live\n       * ```\n       */\n      value: function getPlaybackType() {\n        return Playback.NO_OP;\n      }\n      /**\n       * checks if the playback is in HD.\n       * @method isHighDefinitionInUse\n       * @return {Boolean} `true` if the playback is playing in HD, otherwise `false`\n       */\n\n    }, {\n      key: \"isHighDefinitionInUse\",\n      value: function isHighDefinitionInUse() {\n        return false;\n      }\n      /**\n       * mutes the playback\n       * @method mute\n       */\n\n    }, {\n      key: \"mute\",\n      value: function mute() {}\n      /**\n       * restores the playback volume\n       * @method unmute\n       */\n\n    }, {\n      key: \"unmute\",\n      value: function unmute() {}\n      /**\n       * sets the volume for the playback\n       * @method volume\n       * @param {Number} value a number between 0 (`muted`) to 100 (`max`)\n       */\n\n    }, {\n      key: \"volume\",\n      value: function volume(value) {} // eslint-disable-line no-unused-vars\n\n      /**\n       * enables to configure the playback after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure(options) {\n        this._options = zepto.extend(true, this._options, options);\n      }\n      /**\n       * attempt to autoplays the playback.\n       * @method attemptAutoPlay\n       */\n\n    }, {\n      key: \"attemptAutoPlay\",\n      value: function attemptAutoPlay() {\n        var _this2 = this;\n\n        this.canAutoPlay(function (result, error) {\n          // eslint-disable-line no-unused-vars\n          result && _this2.play();\n        });\n      }\n      /**\n       * checks if the playback can autoplay.\n       * @method canAutoPlay\n       * @param {Function} callback function where first param is Boolean and second param is playback Error or null\n       */\n\n    }, {\n      key: \"canAutoPlay\",\n      value: function canAutoPlay(cb) {\n        cb(true, null); // Assume playback can autoplay by default\n      }\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * checks if the playback has closed caption tracks.\n       * @property hasClosedCaptionsTracks\n       * @type {Boolean}\n       */\n\n    }, {\n      key: \"hasClosedCaptionsTracks\",\n      get: function get() {\n        return this.closedCaptionsTracks.length > 0;\n      }\n      /**\n       * gets the playback available closed caption tracks.\n       * @property closedCaptionsTracks\n       * @type {Array} an array of objects with at least 'id' and 'name' properties\n       */\n\n    }, {\n      key: \"closedCaptionsTracks\",\n      get: function get() {\n        return [];\n      }\n      /**\n       * gets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n\n    }, {\n      key: \"closedCaptionsTrackId\",\n      get: function get() {\n        return -1;\n      }\n      /**\n       * sets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n      ,\n      set: function set(trackId) {}\n    }]);\n\n    return Playback;\n  }(UIObject);\n  Object.assign(Playback.prototype, ErrorMixin);\n\n  Playback.extend = function (properties) {\n    return extend(Playback, properties);\n  };\n  /**\n   * checks if the playback can play a given `source`\n   * If a mimeType is provided then this will be used instead of inferring the mimetype\n   * from the source extension.\n   * @method canPlay\n   * @static\n   * @param {String} source the given source ex: `http://example.com/play.mp4`\n   * @param {String} [mimeType] the given mime type, ex: `'application/vnd.apple.mpegurl'`\n   * @return {Boolean} `true` if the playback is playable, otherwise `false`\n   */\n\n\n  Playback.canPlay = function (source, mimeType) {\n    // eslint-disable-line no-unused-vars\n    return false;\n  };\n  /**\n   * a playback type for video on demand\n   *\n   * @property VOD\n   * @static\n   * @type String\n   */\n\n\n  Playback.VOD = 'vod';\n  /**\n   * a playback type for audio on demand\n   *\n   * @property AOD\n   * @static\n   * @type String\n   */\n\n  Playback.AOD = 'aod';\n  /**\n   * a playback type for live video\n   *\n   * @property LIVE\n   * @static\n   * @type String\n   */\n\n  Playback.LIVE = 'live';\n  /**\n   * a default playback type\n   *\n   * @property NO_OP\n   * @static\n   * @type String\n   */\n\n  Playback.NO_OP = 'no_op';\n  /**\n   * the plugin type\n   *\n   * @property type\n   * @static\n   * @type String\n   */\n\n  Playback.type = 'playback';\n\n  var ContainerFactory = /*#__PURE__*/function (_BaseObject) {\n    _inherits(ContainerFactory, _BaseObject);\n\n    var _super = _createSuper(ContainerFactory);\n\n    _createClass(ContainerFactory, [{\n      key: \"options\",\n      get: function get() {\n        return this._options;\n      },\n      set: function set(options) {\n        this._options = options;\n      }\n    }]);\n\n    function ContainerFactory(options, loader, i18n, playerError) {\n      var _this;\n\n      _classCallCheck(this, ContainerFactory);\n\n      _this = _super.call(this, options);\n      _this._i18n = i18n;\n      _this.loader = loader;\n      _this.playerError = playerError;\n      return _this;\n    }\n\n    _createClass(ContainerFactory, [{\n      key: \"createContainers\",\n      value: function createContainers() {\n        var _this2 = this;\n\n        return zepto.Deferred(function (promise) {\n          promise.resolve(_this2.options.sources.map(function (source) {\n            return _this2.createContainer(source);\n          }));\n        });\n      }\n    }, {\n      key: \"findPlaybackPlugin\",\n      value: function findPlaybackPlugin(source, mimeType) {\n        return this.loader.playbackPlugins.filter(function (p) {\n          return p.canPlay(source, mimeType);\n        })[0];\n      }\n    }, {\n      key: \"createContainer\",\n      value: function createContainer(source) {\n        var resolvedSource = null;\n        var mimeType = this.options.mimeType;\n\n        if (_typeof(source) === 'object') {\n          resolvedSource = source.source.toString();\n          if (source.mimeType) mimeType = source.mimeType;\n        } else {\n          resolvedSource = source.toString();\n        }\n\n        if (resolvedSource.match(/^\\/\\//)) resolvedSource = window.location.protocol + resolvedSource;\n\n        var options = _objectSpread2(_objectSpread2({}, this.options), {}, {\n          src: resolvedSource,\n          mimeType: mimeType\n        });\n\n        var playbackPlugin = this.findPlaybackPlugin(resolvedSource, mimeType); // Fallback to empty playback object until we sort out unsupported sources error without NoOp playback\n\n        var playback = playbackPlugin ? new playbackPlugin(options, this._i18n, this.playerError) : new Playback();\n        options = _objectSpread2(_objectSpread2({}, options), {}, {\n          playback: playback\n        });\n        var container = new Container(options, this._i18n, this.playerError);\n        var defer = zepto.Deferred();\n        defer.promise(container);\n        this.addContainerPlugins(container);\n        this.listenToOnce(container, Events.CONTAINER_READY, function () {\n          return defer.resolve(container);\n        });\n        return container;\n      }\n    }, {\n      key: \"addContainerPlugins\",\n      value: function addContainerPlugins(container) {\n        this.loader.containerPlugins.forEach(function (Plugin) {\n          container.addPlugin(new Plugin(container));\n        });\n      }\n    }]);\n\n    return ContainerFactory;\n  }(BaseObject);\n\n  var css_248z$1 = \"[data-player] {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  -o-user-select: none;\\n  user-select: none;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  transform: translate3d(0, 0, 0);\\n  position: relative;\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-style: normal;\\n  font-weight: normal;\\n  text-align: center;\\n  overflow: hidden;\\n  font-size: 100%;\\n  font-family: \\\"Roboto\\\", \\\"Open Sans\\\", Arial, sans-serif;\\n  text-shadow: 0 0 0;\\n  box-sizing: border-box; }\\n  [data-player]:focus {\\n    outline: 0; }\\n  [data-player] * {\\n    box-sizing: inherit; }\\n  [data-player] > * {\\n    float: none;\\n    max-width: none; }\\n  [data-player] > div {\\n    display: block; }\\n  [data-player].fullscreen {\\n    width: 100% !important;\\n    height: 100% !important;\\n    top: 0;\\n    left: 0; }\\n  [data-player].nocursor {\\n    cursor: none; }\\n\\n.clappr-style {\\n  display: none !important; }\\n\";\n\n  var css_248z$2 = \"[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font: inherit;\\n  font-size: 100%;\\n  vertical-align: baseline; }\\n\\n[data-player] table {\\n  border-collapse: collapse;\\n  border-spacing: 0; }\\n\\n[data-player] caption, [data-player] th, [data-player] td {\\n  text-align: left;\\n  font-weight: normal;\\n  vertical-align: middle; }\\n\\n[data-player] q, [data-player] blockquote {\\n  quotes: none; }\\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\\n    content: \\\"\\\";\\n    content: none; }\\n\\n[data-player] a img {\\n  border: none; }\\n\";\n\n  /**\n   * The Core is responsible to manage Containers and the player state.\n   * @class Core\n   * @constructor\n   * @extends UIObject\n   * @module components\n   */\n\n  var Core = /*#__PURE__*/function (_UIObject) {\n    _inherits(Core, _UIObject);\n\n    var _super = _createSuper(Core);\n\n    _createClass(Core, [{\n      key: \"events\",\n      get: function get() {\n        return {\n          'webkitfullscreenchange': 'handleFullscreenChange',\n          'mousemove': 'onMouseMove',\n          'mouseleave': 'onMouseLeave'\n        };\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-player': '',\n          tabindex: 9999\n        };\n      }\n      /**\n       * checks if the core is ready.\n       * @property isReady\n       * @type {Boolean} `true` if the core is ready, otherwise `false`\n       */\n\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return !!this.ready;\n      }\n      /**\n       * The internationalization plugin.\n       * @property i18n\n       * @type {Strings}\n       */\n\n    }, {\n      key: \"i18n\",\n      get: function get() {\n        return this.getPlugin('strings') || {\n          t: function t(key) {\n            return key;\n          }\n        };\n      }\n      /**\n       * @deprecated\n       * This property currently exists for backward compatibility reasons.\n       * If you need to access the media control instance, use the method getPlugin('media_control').\n       * This approach is still not recommended.\n       */\n\n    }, {\n      key: \"mediaControl\",\n      get: function get() {\n        return this._mediaControl || (this._mediaControl = this.getPlugin('media_control')) || this.dummyMediaControl;\n      }\n    }, {\n      key: \"dummyMediaControl\",\n      get: function get() {\n        if (this._dummyMediaControl) return this._dummyMediaControl;\n        this._dummyMediaControl = new UICorePlugin(this);\n        return this._dummyMediaControl;\n      }\n      /**\n       * gets the active container reference.\n       * @property activeContainer\n       * @type {Object}\n       */\n\n    }, {\n      key: \"activeContainer\",\n      get: function get() {\n        return this._activeContainer;\n      }\n      /**\n       * sets the active container reference and trigger a event with the new reference.\n       * @property activeContainer\n       * @type {Object}\n       */\n      ,\n      set: function set(container) {\n        this._activeContainer = container;\n        this.trigger(Events.CORE_ACTIVE_CONTAINER_CHANGED, this._activeContainer);\n      }\n      /**\n       * gets the active playback reference.\n       * @property activePlayback\n       * @type {Object}\n       */\n\n    }, {\n      key: \"activePlayback\",\n      get: function get() {\n        return this.activeContainer && this.activeContainer.playback;\n      }\n    }]);\n\n    function Core(options) {\n      var _this;\n\n      _classCallCheck(this, Core);\n\n      _this = _super.call(this, options);\n      _this.playerError = new PlayerError(options, _assertThisInitialized(_this));\n\n      _this.configureDomRecycler();\n\n      _this.firstResize = true;\n      _this.plugins = [];\n      _this.containers = []; //FIXME fullscreen api sucks\n\n      _this._boundFullscreenHandler = function () {\n        return _this.handleFullscreenChange();\n      };\n\n      zepto(document).bind('fullscreenchange', _this._boundFullscreenHandler);\n      zepto(document).bind('MSFullscreenChange', _this._boundFullscreenHandler);\n      zepto(document).bind('mozfullscreenchange', _this._boundFullscreenHandler);\n      Browser.isMobile && zepto(window).bind('resize', function (o) {\n        _this.handleWindowResize(o);\n      });\n      return _this;\n    }\n\n    _createClass(Core, [{\n      key: \"configureDomRecycler\",\n      value: function configureDomRecycler() {\n        var recycleVideo = this.options && this.options.playback && this.options.playback.recycleVideo;\n        DomRecycler.configure({\n          recycleVideo: recycleVideo\n        });\n      }\n    }, {\n      key: \"createContainers\",\n      value: function createContainers(options) {\n        this.defer = zepto.Deferred();\n        this.defer.promise(this);\n        this.containerFactory = new ContainerFactory(options, options.loader, this.i18n, this.playerError);\n        this.prepareContainers();\n      }\n    }, {\n      key: \"prepareContainers\",\n      value: function prepareContainers() {\n        var _this2 = this;\n\n        this.containerFactory.createContainers().then(function (containers) {\n          return _this2.setupContainers(containers);\n        }).then(function (containers) {\n          return _this2.resolveOnContainersReady(containers);\n        });\n      }\n    }, {\n      key: \"updateSize\",\n      value: function updateSize() {\n        this.isFullscreen() ? this.setFullscreen() : this.setPlayerSize();\n      }\n    }, {\n      key: \"setFullscreen\",\n      value: function setFullscreen() {\n        if (!Browser.isiOS) {\n          this.$el.addClass('fullscreen');\n          this.$el.removeAttr('style');\n          this.previousSize = {\n            width: this.options.width,\n            height: this.options.height\n          };\n          this.currentSize = {\n            width: zepto(window).width(),\n            height: zepto(window).height()\n          };\n        }\n      }\n    }, {\n      key: \"setPlayerSize\",\n      value: function setPlayerSize() {\n        this.$el.removeClass('fullscreen');\n        this.currentSize = this.previousSize;\n        this.previousSize = {\n          width: zepto(window).width(),\n          height: zepto(window).height()\n        };\n        this.resize(this.currentSize);\n      }\n    }, {\n      key: \"resize\",\n      value: function resize(options) {\n        if (!isNumber(options.height) && !isNumber(options.width)) {\n          this.el.style.height = \"\".concat(options.height);\n          this.el.style.width = \"\".concat(options.width);\n        } else {\n          this.el.style.height = \"\".concat(options.height, \"px\");\n          this.el.style.width = \"\".concat(options.width, \"px\");\n        }\n\n        this.previousSize = {\n          width: this.options.width,\n          height: this.options.height\n        };\n        this.options.width = options.width;\n        this.options.height = options.height;\n        this.currentSize = options;\n        this.triggerResize(this.currentSize);\n      }\n    }, {\n      key: \"enableResizeObserver\",\n      value: function enableResizeObserver() {\n        var _this3 = this;\n\n        this.disableResizeObserver();\n\n        var checkSizeCallback = function checkSizeCallback() {\n          _this3.triggerResize({\n            width: _this3.el.clientWidth,\n            height: _this3.el.clientHeight\n          });\n        };\n\n        this.resizeObserverInterval = setInterval(checkSizeCallback, 500);\n      }\n    }, {\n      key: \"triggerResize\",\n      value: function triggerResize(newSize) {\n        var thereWasChange = this.firstResize || this.oldHeight !== newSize.height || this.oldWidth !== newSize.width;\n\n        if (thereWasChange) {\n          this.oldHeight = newSize.height;\n          this.oldWidth = newSize.width;\n          this.computedSize = newSize;\n          this.firstResize = false;\n          this.trigger(Events.CORE_RESIZE, newSize);\n        }\n      }\n    }, {\n      key: \"disableResizeObserver\",\n      value: function disableResizeObserver() {\n        this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);\n        this.resizeObserverInterval = null;\n      }\n    }, {\n      key: \"resolveOnContainersReady\",\n      value: function resolveOnContainersReady(containers) {\n        var _this4 = this;\n\n        zepto.when.apply(zepto, containers).done(function () {\n          _this4.defer.resolve(_this4);\n\n          _this4.ready = true;\n\n          _this4.trigger(Events.CORE_READY);\n        });\n      }\n    }, {\n      key: \"addPlugin\",\n      value: function addPlugin(plugin) {\n        this.plugins.push(plugin);\n      }\n    }, {\n      key: \"hasPlugin\",\n      value: function hasPlugin(name) {\n        return !!this.getPlugin(name);\n      }\n    }, {\n      key: \"getPlugin\",\n      value: function getPlugin(name) {\n        return this.plugins.filter(function (plugin) {\n          return plugin.name === name;\n        })[0];\n      }\n    }, {\n      key: \"load\",\n      value: function load(sources, mimeType) {\n        this.options.mimeType = mimeType;\n        sources = sources && sources.constructor === Array ? sources : [sources];\n        this.options.sources = sources;\n        this.containers.forEach(function (container) {\n          return container.destroy();\n        });\n        this.containerFactory.options = zepto.extend(true, this.options, {\n          sources: sources\n        });\n        this.prepareContainers();\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.disableResizeObserver();\n        this.containers.forEach(function (container) {\n          return container.destroy();\n        });\n        this.plugins.forEach(function (plugin) {\n          return plugin.destroy();\n        });\n        this.$el.remove();\n        zepto(document).unbind('fullscreenchange', this._boundFullscreenHandler);\n        zepto(document).unbind('MSFullscreenChange', this._boundFullscreenHandler);\n        zepto(document).unbind('mozfullscreenchange', this._boundFullscreenHandler);\n        this.stopListening();\n      }\n    }, {\n      key: \"handleFullscreenChange\",\n      value: function handleFullscreenChange() {\n        this.trigger(Events.CORE_FULLSCREEN, this.isFullscreen());\n        this.updateSize();\n      }\n    }, {\n      key: \"handleWindowResize\",\n      value: function handleWindowResize(event) {\n        var orientation = window.innerWidth > window.innerHeight ? 'landscape' : 'portrait';\n        if (this._screenOrientation === orientation) return;\n        this._screenOrientation = orientation;\n        this.triggerResize({\n          width: this.el.clientWidth,\n          height: this.el.clientHeight\n        });\n        this.trigger(Events.CORE_SCREEN_ORIENTATION_CHANGED, {\n          event: event,\n          orientation: this._screenOrientation\n        });\n      }\n    }, {\n      key: \"removeContainer\",\n      value: function removeContainer(container) {\n        this.stopListening(container);\n        this.containers = this.containers.filter(function (c) {\n          return c !== container;\n        });\n      }\n    }, {\n      key: \"setupContainer\",\n      value: function setupContainer(container) {\n        this.listenTo(container, Events.CONTAINER_DESTROYED, this.removeContainer);\n        this.containers.push(container);\n      }\n    }, {\n      key: \"setupContainers\",\n      value: function setupContainers(containers) {\n        containers.forEach(this.setupContainer.bind(this));\n        this.trigger(Events.CORE_CONTAINERS_CREATED);\n        this.renderContainers();\n        this.activeContainer = containers[0];\n        this.render();\n        this.appendToParent();\n        return this.containers;\n      }\n    }, {\n      key: \"renderContainers\",\n      value: function renderContainers() {\n        var _this5 = this;\n\n        this.containers.forEach(function (container) {\n          return _this5.el.appendChild(container.render().el);\n        });\n      }\n    }, {\n      key: \"createContainer\",\n      value: function createContainer(source, options) {\n        var container = this.containerFactory.createContainer(source, options);\n        this.setupContainer(container);\n        this.el.appendChild(container.render().el);\n        return container;\n      }\n      /**\n       * @deprecated\n       * This method currently exists for retrocompatibility reasons.\n       * If you want the current container reference, use the activeContainer getter.\n       */\n\n    }, {\n      key: \"getCurrentContainer\",\n      value: function getCurrentContainer() {\n        return this.activeContainer;\n      }\n      /**\n       * @deprecated\n       * This method currently exists for retrocompatibility reasons.\n       * If you want the current playback reference, use the activePlayback getter.\n       */\n\n    }, {\n      key: \"getCurrentPlayback\",\n      value: function getCurrentPlayback() {\n        return this.activePlayback;\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return this.activeContainer && this.activeContainer.getPlaybackType();\n      }\n    }, {\n      key: \"isFullscreen\",\n      value: function isFullscreen() {\n        // Ensure current instance is in fullscreen mode by checking fullscreen element\n        var fullscreenElement = Fullscreen.fullscreenElement();\n        if (!fullscreenElement) return false;\n        var playbackEl = this.activePlayback && this.activePlayback.el;\n        return fullscreenElement === this.el || fullscreenElement === playbackEl;\n      }\n    }, {\n      key: \"toggleFullscreen\",\n      value: function toggleFullscreen() {\n        var _this6 = this;\n\n        if (this.isFullscreen()) {\n          Fullscreen.cancelFullscreen();\n          !Browser.isiOS && this.$el.removeClass('fullscreen nocursor');\n        } else {\n          var fullscreenEl = Browser.isiOS ? this.activePlayback && this.activePlayback.el : this.el;\n          if (!fullscreenEl) return;\n          Browser.isSafari || Browser.isiOS ? // Safari doesn't return a promise like the other browsers. See more in https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullScreen\n          Fullscreen.requestFullscreen(fullscreenEl) : Fullscreen.requestFullscreen(fullscreenEl).then(function (_) {\n            return _;\n          }, function (error) {\n            return setTimeout(function () {\n              // fixes the issue https://github.com/clappr/clappr/issues/1860\n              if (!_this6.isFullscreen()) throw new ReferenceError(error);\n            }, 600);\n          });\n          !Browser.isiOS && this.$el.addClass('fullscreen');\n        }\n      }\n    }, {\n      key: \"onMouseMove\",\n      value: function onMouseMove(event) {\n        this.trigger(Events.CORE_MOUSE_MOVE, event);\n      }\n    }, {\n      key: \"onMouseLeave\",\n      value: function onMouseLeave(event) {\n        this.trigger(Events.CORE_MOUSE_LEAVE, event);\n      }\n      /**\n       * enables to configure the container after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure(options) {\n        var _this7 = this;\n\n        this._options = zepto.extend(true, this._options, options);\n        this.configureDomRecycler();\n        var sources = options.source || options.sources;\n        sources && this.load(sources, options.mimeType || this.options.mimeType);\n        this.trigger(Events.CORE_OPTIONS_CHANGE, options); // Trigger with newly provided options\n\n        this.containers.forEach(function (container) {\n          return container.configure(_this7.options);\n        });\n      }\n    }, {\n      key: \"appendToParent\",\n      value: function appendToParent() {\n        var style = Styler.getStyleFor(css_248z$1.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        var resetStyle = Styler.getStyleFor(css_248z$2.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.options.includeResetStyle && this.$el.append(resetStyle[0]);\n        var hasCoreParent = this.$el.parent() && this.$el.parent().length;\n        !hasCoreParent && this.$el.appendTo(this.options.parentElement);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        this.options.width = this.options.width || this.$el.width();\n        this.options.height = this.options.height || this.$el.height();\n        var size = {\n          width: this.options.width,\n          height: this.options.height\n        };\n        this.previousSize = this.currentSize = this.computedSize = size;\n        this.updateSize();\n        this.enableResizeObserver();\n        return this;\n      }\n    }]);\n\n    return Core;\n  }(UIObject);\n  Object.assign(Core.prototype, ErrorMixin);\n\n  /**\n   * The Core Factory is responsible for instantiate the core and it's plugins.\n   * @class CoreFactory\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   */\n\n  var CoreFactory = /*#__PURE__*/function (_BaseObject) {\n    _inherits(CoreFactory, _BaseObject);\n\n    var _super = _createSuper(CoreFactory);\n\n    _createClass(CoreFactory, [{\n      key: \"loader\",\n      get: function get() {\n        return this.player.loader;\n      }\n      /**\n       * it builds the core factory\n       * @method constructor\n       * @param {Player} player the player object\n       */\n\n    }]);\n\n    function CoreFactory(player) {\n      var _this;\n\n      _classCallCheck(this, CoreFactory);\n\n      _this = _super.call(this, player.options);\n      _this.player = player;\n      return _this;\n    }\n    /**\n     * creates a core and its plugins\n     * @method create\n     * @return {Core} created core\n     */\n\n\n    _createClass(CoreFactory, [{\n      key: \"create\",\n      value: function create() {\n        this.options.loader = this.loader;\n        this.core = new Core(this.options);\n        this.addCorePlugins();\n        this.core.createContainers(this.options);\n        return this.core;\n      }\n      /**\n       * given the core plugins (`loader.corePlugins`) it builds each one\n       * @method addCorePlugins\n       * @return {Core} the core with all plugins\n       */\n\n    }, {\n      key: \"addCorePlugins\",\n      value: function addCorePlugins() {\n        var _this2 = this;\n\n        this.loader.corePlugins.forEach(function (Plugin) {\n          var plugin = new Plugin(_this2.core);\n\n          _this2.core.addPlugin(plugin);\n\n          _this2.setupExternalInterface(plugin);\n        });\n        return this.core;\n      }\n    }, {\n      key: \"setupExternalInterface\",\n      value: function setupExternalInterface(plugin) {\n        var externalFunctions = plugin.getExternalInterface();\n\n        for (var key in externalFunctions) {\n          this.player[key] = externalFunctions[key].bind(plugin);\n        }\n      }\n    }]);\n\n    return CoreFactory;\n  }(BaseObject);\n\n  var VERSION_REGEX = /(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?/;\n\n  var Version = /*#__PURE__*/function () {\n    _createClass(Version, null, [{\n      key: \"parse\",\n      value: function parse() {\n        var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var matches = str.match(VERSION_REGEX) || [];\n\n        var _matches = _slicedToArray(matches, 4),\n            major = _matches[1],\n            minor = _matches[2],\n            patch = _matches[3];\n\n        if (typeof major === 'undefined') return null;\n        return new Version(major, minor, patch);\n      }\n    }]);\n\n    function Version(major, minor, patch) {\n      _classCallCheck(this, Version);\n\n      this.major = parseInt(major || 0, 10);\n      this.minor = parseInt(minor || 0, 10);\n      this.patch = parseInt(patch || 0, 10);\n    }\n\n    _createClass(Version, [{\n      key: \"compare\",\n      value: function compare(other) {\n        var diff = this.major - other.major;\n        diff = diff || this.minor - other.minor;\n        diff = diff || this.patch - other.patch;\n        return diff;\n      }\n    }, {\n      key: \"inc\",\n      value: function inc() {\n        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'patch';\n        typeof this[type] !== 'undefined' && (this[type] += 1);\n        return this;\n      }\n    }, {\n      key: \"satisfies\",\n      value: function satisfies(min, max) {\n        return this.compare(min) >= 0 && (!max || this.compare(max) < 0);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return \"\".concat(this.major, \".\").concat(this.minor, \".\").concat(this.patch);\n      }\n    }]);\n\n    return Version;\n  }();\n\n  var filterPluginsByType = function filterPluginsByType(plugins, type) {\n    if (!plugins || !type) return {};\n    return Object.entries(plugins).filter(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          value = _ref2[1];\n\n      return value.type === type;\n    }).reduce(function (obj, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      return obj[key] = value, obj;\n    }, {});\n  };\n  /**\n   * It keeps a list of the default plugins (playback, container, core) and it merges external plugins with its internals.\n   * @class Loader\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   */\n\n\n  var Loader = (function () {\n    var registry = {\n      plugins: {},\n      playbacks: []\n    };\n    var currentVersion = \"0.4.17\";\n    return /*#__PURE__*/function () {\n      _createClass(Loader, null, [{\n        key: \"checkVersionSupport\",\n        value: function checkVersionSupport(entry) {\n          var _entry$prototype = entry.prototype,\n              supportedVersion = _entry$prototype.supportedVersion,\n              name = _entry$prototype.name;\n\n          if (!supportedVersion || !supportedVersion.min) {\n            Log.warn('Loader', \"missing version information for \".concat(name));\n            return false;\n          }\n\n          var maxVersion = supportedVersion.max ? Version.parse(supportedVersion.max) : Version.parse(supportedVersion.min).inc('minor');\n          var minVersion = Version.parse(supportedVersion.min);\n\n          if (!Version.parse(currentVersion).satisfies(minVersion, maxVersion)) {\n            Log.warn('Loader', \"unsupported plugin \".concat(name, \": Clappr version \").concat(currentVersion, \" does not match required range [\").concat(minVersion, \",\").concat(maxVersion, \")\"));\n            return false;\n          }\n\n          return true;\n        }\n      }, {\n        key: \"registerPlugin\",\n        value: function registerPlugin(pluginEntry) {\n          if (!pluginEntry || !pluginEntry.prototype.name) {\n            Log.warn('Loader', \"missing information to register plugin: \".concat(pluginEntry));\n            return false;\n          }\n\n          Loader.checkVersionSupport(pluginEntry);\n          var pluginRegistry = registry.plugins;\n          if (!pluginRegistry) return false;\n          var previousEntry = pluginRegistry[pluginEntry.prototype.name];\n          if (previousEntry) Log.warn('Loader', \"overriding plugin entry: \".concat(pluginEntry.prototype.name, \" - \").concat(previousEntry));\n          pluginRegistry[pluginEntry.prototype.name] = pluginEntry;\n          return true;\n        }\n      }, {\n        key: \"registerPlayback\",\n        value: function registerPlayback(playbackEntry) {\n          if (!playbackEntry || !playbackEntry.prototype.name) return false;\n          Loader.checkVersionSupport(playbackEntry);\n          var playbacks = registry.playbacks;\n          var previousEntryIdx = playbacks.findIndex(function (entry) {\n            return entry.prototype.name === playbackEntry.prototype.name;\n          });\n\n          if (previousEntryIdx >= 0) {\n            var previousEntry = playbacks[previousEntryIdx];\n            playbacks.splice(previousEntryIdx, 1);\n            Log.warn('Loader', \"overriding playback entry: \".concat(previousEntry.name, \" - \").concat(previousEntry));\n          }\n\n          registry.playbacks = [playbackEntry].concat(_toConsumableArray(playbacks));\n          return true;\n        }\n      }, {\n        key: \"unregisterPlugin\",\n        value: function unregisterPlugin(name) {\n          if (!name) return false;\n          var plugins = registry.plugins;\n          var plugin = plugins[name];\n          if (!plugin) return false;\n          delete plugins[name];\n          return true;\n        }\n      }, {\n        key: \"unregisterPlayback\",\n        value: function unregisterPlayback(name) {\n          if (!name) return false;\n          var playbacks = registry.playbacks;\n          var index = playbacks.findIndex(function (entry) {\n            return entry.prototype.name === name;\n          });\n          if (index < 0) return false;\n          playbacks.splice(index, 1);\n          registry.playbacks = playbacks;\n          return true;\n        }\n      }, {\n        key: \"clearPlugins\",\n        value: function clearPlugins() {\n          registry.plugins = {};\n        }\n      }, {\n        key: \"clearPlaybacks\",\n        value: function clearPlaybacks() {\n          registry.playbacks = [];\n        }\n        /**\n         * builds the loader\n         * @method constructor\n         * @param {Object} externalPlugins the external plugins\n         * @param {Number} playerId you can embed multiple instances of clappr, therefore this is the unique id of each one.\n         */\n\n      }, {\n        key: \"registeredPlaybacks\",\n        get: function get() {\n          return _toConsumableArray(registry.playbacks);\n        }\n      }, {\n        key: \"registeredPlugins\",\n        get: function get() {\n          var plugins = registry.plugins;\n          var core = filterPluginsByType(plugins, 'core');\n          var container = filterPluginsByType(plugins, 'container');\n          return {\n            core: core,\n            container: container\n          };\n        }\n      }]);\n\n      function Loader() {\n        var externalPlugins = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var playerId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n        _classCallCheck(this, Loader);\n\n        this.playerId = playerId;\n        this.playbackPlugins = _toConsumableArray(registry.playbacks);\n        var _Loader$registeredPlu = Loader.registeredPlugins,\n            core = _Loader$registeredPlu.core,\n            container = _Loader$registeredPlu.container;\n        this.containerPlugins = Object.values(container);\n        this.corePlugins = Object.values(core);\n        if (!Array.isArray(externalPlugins)) this.validateExternalPluginsType(externalPlugins);\n        this.addExternalPlugins(externalPlugins);\n      }\n      /**\n       * groups by type the external plugins that were passed through `options.plugins` it they're on a flat array\n       * @method addExternalPlugins\n       * @private\n       * @param {Object} an config object or an array of plugins\n       * @return {Object} plugins the config object with the plugins separated by type\n       */\n\n\n      _createClass(Loader, [{\n        key: \"groupPluginsByType\",\n        value: function groupPluginsByType(plugins) {\n          if (Array.isArray(plugins)) {\n            plugins = plugins.reduce(function (memo, plugin) {\n              memo[plugin.type] || (memo[plugin.type] = []);\n              memo[plugin.type].push(plugin);\n              return memo;\n            }, {});\n          }\n\n          return plugins;\n        }\n      }, {\n        key: \"removeDups\",\n        value: function removeDups(list) {\n          var useReversePrecedence = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          var groupUp = function groupUp(plugins, plugin) {\n            if (plugins[plugin.prototype.name] && useReversePrecedence) return plugins;\n            plugins[plugin.prototype.name] && delete plugins[plugin.prototype.name];\n            plugins[plugin.prototype.name] = plugin;\n            return plugins;\n          };\n\n          var pluginsMap = list.reduceRight(groupUp, Object.create(null));\n          var plugins = [];\n\n          for (var key in pluginsMap) {\n            plugins.unshift(pluginsMap[key]);\n          }\n\n          return plugins;\n        }\n        /**\n         * adds all the external plugins that were passed through `options.plugins`\n         * @method addExternalPlugins\n         * @private\n         * @param {Object} plugins the config object with all plugins\n         */\n\n      }, {\n        key: \"addExternalPlugins\",\n        value: function addExternalPlugins(plugins) {\n          var loadExternalPluginsFirst = typeof plugins.loadExternalPluginsFirst === 'boolean' ? plugins.loadExternalPluginsFirst : true;\n          var loadExternalPlaybacksFirst = typeof plugins.loadExternalPlaybacksFirst === 'boolean' ? plugins.loadExternalPlaybacksFirst : true;\n          plugins = this.groupPluginsByType(plugins);\n\n          if (plugins.playback) {\n            var playbacks = plugins.playback.filter(function (playback) {\n              return Loader.checkVersionSupport(playback), true;\n            });\n            this.playbackPlugins = loadExternalPlaybacksFirst ? this.removeDups(playbacks.concat(this.playbackPlugins)) : this.removeDups(this.playbackPlugins.concat(playbacks), true);\n          }\n\n          if (plugins.container) {\n            var containerPlugins = plugins.container.filter(function (plugin) {\n              return Loader.checkVersionSupport(plugin), true;\n            });\n            this.containerPlugins = loadExternalPluginsFirst ? this.removeDups(containerPlugins.concat(this.containerPlugins)) : this.removeDups(this.containerPlugins.concat(containerPlugins), true);\n          }\n\n          if (plugins.core) {\n            var corePlugins = plugins.core.filter(function (plugin) {\n              return Loader.checkVersionSupport(plugin), true;\n            });\n            this.corePlugins = loadExternalPluginsFirst ? this.removeDups(corePlugins.concat(this.corePlugins)) : this.removeDups(this.corePlugins.concat(corePlugins), true);\n          }\n        }\n        /**\n         * validate if the external plugins that were passed through `options.plugins` are associated to the correct type\n         * @method validateExternalPluginsType\n         * @private\n         * @param {Object} plugins the config object with all plugins\n         */\n\n      }, {\n        key: \"validateExternalPluginsType\",\n        value: function validateExternalPluginsType(plugins) {\n          var pluginTypes = ['playback', 'container', 'core'];\n          pluginTypes.forEach(function (type) {\n            (plugins[type] || []).forEach(function (el) {\n              var errorMessage = 'external ' + el.type + ' plugin on ' + type + ' array';\n              if (el.type !== type) throw new ReferenceError(errorMessage);\n            });\n          });\n        }\n      }]);\n\n      return Loader;\n    }();\n  })();\n\n  var baseUrl = currentScriptUrl().replace(/\\/[^/]+$/, '');\n  /**\n   * @class Player\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   * @example\n   * ### Using the Player\n   *\n   * Add the following script on your HTML:\n   * ```html\n   * <head>\n   *   <script type=\"text/javascript\" src=\"http://cdn.clappr.io/latest/clappr.min.js\"></script>\n   * </head>\n   * ```\n   * Now, create the player:\n   * ```html\n   * <body>\n   *   <div id=\"player\"></div>\n   *   <script>\n   *     var player = new Clappr.Player({source: \"http://your.video/here.mp4\", parentId: \"#player\"});\n   *   </script>\n   * </body>\n   * ```\n   */\n\n  var Player = /*#__PURE__*/function (_BaseObject) {\n    _inherits(Player, _BaseObject);\n\n    var _super = _createSuper(Player);\n\n    _createClass(Player, [{\n      key: \"loader\",\n      set: function set(loader) {\n        this._loader = loader;\n      },\n      get: function get() {\n        if (!this._loader) this._loader = new Loader(this.options.plugins || {}, this.options.playerId);\n        return this._loader;\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return this.core.activeContainer.ended;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * (i.e if a live stream is playing smoothly, this will be false)\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return this.core.activeContainer.buffering;\n      }\n      /*\n       * determine if the player is ready.\n       * @property isReady\n       * @type {Boolean} `true` if the player is ready. ie PLAYER_READY event has fired\n       */\n\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return !!this._ready;\n      }\n      /**\n       * An events map that allows the user to add custom callbacks in player's options.\n       * @property eventsMapping\n       * @type {Object}\n       */\n\n    }, {\n      key: \"eventsMapping\",\n      get: function get() {\n        return {\n          onReady: Events.PLAYER_READY,\n          onResize: Events.PLAYER_RESIZE,\n          onPlay: Events.PLAYER_PLAY,\n          onPause: Events.PLAYER_PAUSE,\n          onStop: Events.PLAYER_STOP,\n          onEnded: Events.PLAYER_ENDED,\n          onSeek: Events.PLAYER_SEEK,\n          onError: Events.PLAYER_ERROR,\n          onTimeUpdate: Events.PLAYER_TIMEUPDATE,\n          onVolumeUpdate: Events.PLAYER_VOLUMEUPDATE,\n          onSubtitleAvailable: Events.PLAYER_SUBTITLE_AVAILABLE\n        };\n      }\n      /**\n       * @typedef {Object} PlaybackConfig\n       * @prop {boolean} disableContextMenu\n       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n       * @prop {boolean} preload\n       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n       * @prop {boolean} controls\n       * enabled/disables displaying controls\n       * @prop {boolean} crossOrigin\n       * enables cross-origin capability for media-resources\n       * @prop {boolean} playInline\n       * enables in-line video elements\n       * @prop {boolean} audioOnly\n       * enforce audio-only playback (when possible)\n       * @prop {Object} externalTracks\n       * pass externaly loaded track to playback\n       * @prop {Number} [maxBufferLength]\n       * The default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n       * @prop {Number} [maxBackBufferLength]\n       * After how much distance of the playhead data should be pruned from the buffer (influences memory consumption\n       * of adaptive media-engines like Hls.js or Shaka)\n       * @prop {Number} [minBufferLength]\n       * After how much data in the buffer at least we attempt to consume it (influences QoS-related behavior\n       * of adaptive media-engines like Hls.js or Shaka). If this is too low, and the available bandwidth is varying a lot\n       * and too close to the streamed bitrate, we may continuously hit under-runs.\n       * @prop {Number} [initialBandwidthEstimate]\n       * define an initial bandwidth \"guess\" (or previously stored/established value) for underlying adaptive-bitreate engines\n       * of adaptive playback implementations, like Hls.js or Shaka\n       * @prop {Number} [maxAdaptiveBitrate]\n       * Limits the streamed bitrate (for adaptive media-engines in underlying playback implementations)\n       * @prop {Object} [maxAdaptiveVideoDimensions]\n       * Limits the video dimensions in adaptive media-engines. Should be a literal object with `height` and `width`.\n       * @prop {Boolean}[enableAutomaticABR] **default**: `true`\n       * Allows to enable/disable automatic bitrate switching in adaptive media-engines\n       * @prop {String} [preferredTextLanguage] **default**: `'pt-BR'`\n       * Allows to set a preferred text language, that may be enabled by the media-engine if available.\n       * @prop {String} [preferredAudioLanguage] **default**: `'pt-BR'`\n       * Allows to set a preferred audio language, that may be enabled by the media-engine if available.\n       */\n\n      /**\n       * ## Player's constructor\n       *\n       * You might pass the options object to build the player.\n       * ```javascript\n       * var options = {source: \"http://example.com/video.mp4\", param1: \"val1\"};\n       * var player = new Clappr.Player(options);\n       * ```\n       *\n       * @method constructor\n       * @param {Object} options Data\n       * options to build a player instance\n       * @param {Number} [options.width]\n       * player's width **default**: `640`\n       * @param {Number} [options.height]\n       * player's height **default**: `360`\n       * @param {String} [options.parentId]\n       * the id of the element on the page that the player should be inserted into\n       * @param {Object} [options.parent]\n       * a reference to a dom element that the player should be inserted into\n       * @param {String} [options.source]\n       * The media source URL, or {source: <<source URL>>, mimeType: <<source mime type>>}\n       * @param {Object} [options.sources]\n       * An array of media source URL's, or an array of {source: <<source URL>>, mimeType: <<source mime type>>}\n       * @param {Boolean} [options.autoPlay]\n       * automatically play after page load **default**: `false`\n       * @param {Boolean} [options.loop]\n       * automatically replay after it ends **default**: `false`\n       * @param {Boolean} [options.chromeless]\n       * player acts in chromeless mode **default**: `false`\n       * @param {Boolean} [options.allowUserInteraction]\n       * whether or not the player should handle click events when in chromeless mode **default**: `false` on desktops browsers, `true` on mobile.\n       * @param {Boolean} [options.disableKeyboardShortcuts]\n       * disable keyboard shortcuts. **default**: `false`. `true` if `allowUserInteraction` is `false`.\n       * @param {Boolean} [options.mute]\n       * start the video muted **default**: `false`\n       * @param {String} [options.mimeType]\n       * add `mimeType: \"application/vnd.apple.mpegurl\"` if you need to use a url without extension.\n       * @param {Boolean} [options.actualLiveTime]\n       * show duration and seek time relative to actual time.\n       * @param {String} [options.actualLiveServerTime]\n       * specify server time as a string, format: \"2015/11/26 06:01:03\". This option is meant to be used with actualLiveTime.\n       * @param {Boolean} [options.persistConfig]\n       * persist player's settings (volume) through the same domain **default**: `true`\n       * @param {String} [options.preload] @deprecated\n       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n       * @param {Number} [options.maxBufferLength] @deprecated\n       * the default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n       * @param {String} [options.gaAccount]\n       * enable Google Analytics events dispatch **(play/pause/stop/buffering/etc)** by adding your `gaAccount`\n       * @param {String} [options.gaTrackerName]\n       * besides `gaAccount` you can optionally, pass your favorite trackerName as `gaTrackerName`\n       * @param {Object} [options.mediacontrol]\n       * customize control bar colors, example: `mediacontrol: {seekbar: \"#E113D3\", buttons: \"#66B2FF\"}`\n       * @param {Boolean} [options.hideMediaControl]\n       * control media control auto hide **default**: `true`\n       * @param {Boolean} [options.hideVolumeBar]\n       * when embedded with width less than 320, volume bar will hide. You can force this behavior for all sizes by adding `true` **default**: `false`\n       * @param {String} [options.watermark]\n       * put `watermark: 'http://url/img.png'` on your embed parameters to automatically add watermark on your video.\n       * You can customize corner position by defining position parameter. Positions can be `bottom-left`, `bottom-right`, `top-left` and `top-right`.\n       * @param {String} [options.watermarkLink]\n       * `watermarkLink: 'http://example.net/'` - define URL to open when the watermark is clicked. If not provided watermark will not be clickable.\n       * @param {Boolean} [options.disableVideoTagContextMenu] @deprecated\n       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n       * @param {Boolean} [options.autoSeekFromUrl]\n       * Automatically seek to the seconds provided in the url (e.g example.com?t=100) **default**: `true`\n       * @param {Boolean} [options.exitFullscreenOnEnd]\n       * Automatically exit full screen when the media finishes. **default**: `true`\n       * @param {String} [options.poster]\n       * define a poster by adding its address `poster: 'http://url/img.png'`. It will appear after video embed, disappear on play and go back when user stops the video.\n       * @param {String} [options.playbackNotSupportedMessage]\n       * define a custom message to be displayed when a playback is not supported.\n       * @param {Object} [options.events]\n       * Specify listeners which will be registered with their corresponding player events.\n       * E.g. onReady -> \"PLAYER_READY\", onTimeUpdate -> \"PLAYER_TIMEUPDATE\"\n       * @param {PlaybackConfig} [options.playback]\n       * Generic `Playback` component related configuration\n       * @param {Boolean} [options.disableErrorScreen]\n       * disables the error screen plugin.\n       * @param {Number} [options.autoPlayTimeout]\n       * autoplay check timeout.\n       */\n\n    }]);\n\n    function Player(options) {\n      var _this;\n\n      _classCallCheck(this, Player);\n\n      _this = _super.call(this, options);\n      var playbackDefaultOptions = {\n        recycleVideo: true\n      };\n      var defaultOptions = {\n        playerId: uniqueId(''),\n        persistConfig: true,\n        width: 640,\n        height: 360,\n        baseUrl: baseUrl,\n        allowUserInteraction: Browser.isMobile,\n        includeResetStyle: true,\n        playback: playbackDefaultOptions\n      };\n      _this._options = zepto.extend(true, defaultOptions, options);\n      _this.options.sources = _this._normalizeSources(options);\n\n      if (!_this.options.chromeless) {\n        // \"allowUserInteraction\" cannot be false if not in chromeless mode.\n        _this.options.allowUserInteraction = true;\n      }\n\n      if (!_this.options.allowUserInteraction) {\n        // if user iteraction is not allowed ensure keyboard shortcuts are disabled\n        _this.options.disableKeyboardShortcuts = true;\n      }\n\n      _this._registerOptionEventListeners(_this.options.events);\n\n      _this._coreFactory = new CoreFactory(_assertThisInitialized(_this));\n      if (_this.options.parentId) _this.setParentId(_this.options.parentId);else if (_this.options.parent) _this.attachTo(_this.options.parent);\n      return _this;\n    }\n    /**\n     * Specify a `parentId` to the player.\n     * @method setParentId\n     * @param {String} parentId the element parent id.\n     * @return {Player} itself\n     */\n\n\n    _createClass(Player, [{\n      key: \"setParentId\",\n      value: function setParentId(parentId) {\n        var el = document.querySelector(parentId);\n        if (el) this.attachTo(el);\n        return this;\n      }\n      /**\n       * You can use this method to attach the player to a given element. You don't need to do this when you specify it during the player instantiation passing the `parentId` param.\n       * @method attachTo\n       * @param {Object} element a given element.\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"attachTo\",\n      value: function attachTo(element) {\n        this.options.parentElement = element;\n        this.core = this._coreFactory.create();\n\n        this._addEventListeners();\n\n        return this;\n      }\n    }, {\n      key: \"_addEventListeners\",\n      value: function _addEventListeners() {\n        if (!this.core.isReady) this.listenToOnce(this.core, Events.CORE_READY, this._onReady);else this._onReady();\n        this.listenTo(this.core, Events.CORE_ACTIVE_CONTAINER_CHANGED, this._containerChanged);\n        this.listenTo(this.core, Events.CORE_FULLSCREEN, this._onFullscreenChange);\n        this.listenTo(this.core, Events.CORE_RESIZE, this._onResize);\n        return this;\n      }\n    }, {\n      key: \"_addContainerEventListeners\",\n      value: function _addContainerEventListeners() {\n        var container = this.core.activeContainer;\n\n        if (container) {\n          this.listenTo(container, Events.CONTAINER_PLAY, this._onPlay);\n          this.listenTo(container, Events.CONTAINER_PAUSE, this._onPause);\n          this.listenTo(container, Events.CONTAINER_STOP, this._onStop);\n          this.listenTo(container, Events.CONTAINER_ENDED, this._onEnded);\n          this.listenTo(container, Events.CONTAINER_SEEK, this._onSeek);\n          this.listenTo(container, Events.CONTAINER_ERROR, this._onError);\n          this.listenTo(container, Events.CONTAINER_TIMEUPDATE, this._onTimeUpdate);\n          this.listenTo(container, Events.CONTAINER_VOLUME, this._onVolumeUpdate);\n          this.listenTo(container, Events.CONTAINER_SUBTITLE_AVAILABLE, this._onSubtitleAvailable);\n        }\n\n        return this;\n      }\n    }, {\n      key: \"_registerOptionEventListeners\",\n      value: function _registerOptionEventListeners() {\n        var _this2 = this;\n\n        var newEvents = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var hasNewEvents = Object.keys(newEvents).length > 0;\n        hasNewEvents && Object.keys(events).forEach(function (userEvent) {\n          var eventType = _this2.eventsMapping[userEvent];\n          eventType && _this2.off(eventType, events[userEvent]);\n        });\n        Object.keys(newEvents).forEach(function (userEvent) {\n          var eventType = _this2.eventsMapping[userEvent];\n\n          if (eventType) {\n            var eventFunction = newEvents[userEvent];\n            eventFunction = typeof eventFunction === 'function' && eventFunction;\n            eventFunction && _this2.on(eventType, eventFunction);\n          }\n        });\n        return this;\n      }\n    }, {\n      key: \"_containerChanged\",\n      value: function _containerChanged() {\n        this.stopListening();\n\n        this._addEventListeners();\n      }\n    }, {\n      key: \"_onReady\",\n      value: function _onReady() {\n        this._ready = true;\n\n        this._addContainerEventListeners();\n\n        this.trigger(Events.PLAYER_READY);\n      }\n    }, {\n      key: \"_onFullscreenChange\",\n      value: function _onFullscreenChange(fullscreen) {\n        this.trigger(Events.PLAYER_FULLSCREEN, fullscreen);\n      }\n    }, {\n      key: \"_onVolumeUpdate\",\n      value: function _onVolumeUpdate(volume) {\n        this.trigger(Events.PLAYER_VOLUMEUPDATE, volume);\n      }\n    }, {\n      key: \"_onSubtitleAvailable\",\n      value: function _onSubtitleAvailable() {\n        this.trigger(Events.PLAYER_SUBTITLE_AVAILABLE);\n      }\n    }, {\n      key: \"_onResize\",\n      value: function _onResize(size) {\n        this.trigger(Events.PLAYER_RESIZE, size);\n      }\n    }, {\n      key: \"_onPlay\",\n      value: function _onPlay() {\n        this.trigger(Events.PLAYER_PLAY);\n      }\n    }, {\n      key: \"_onPause\",\n      value: function _onPause() {\n        this.trigger(Events.PLAYER_PAUSE);\n      }\n    }, {\n      key: \"_onStop\",\n      value: function _onStop() {\n        this.trigger(Events.PLAYER_STOP, this.getCurrentTime());\n      }\n    }, {\n      key: \"_onEnded\",\n      value: function _onEnded() {\n        this.trigger(Events.PLAYER_ENDED);\n      }\n    }, {\n      key: \"_onSeek\",\n      value: function _onSeek(time) {\n        this.trigger(Events.PLAYER_SEEK, time);\n      }\n    }, {\n      key: \"_onTimeUpdate\",\n      value: function _onTimeUpdate(timeProgress) {\n        this.trigger(Events.PLAYER_TIMEUPDATE, timeProgress);\n      }\n    }, {\n      key: \"_onError\",\n      value: function _onError(error) {\n        this.trigger(Events.PLAYER_ERROR, error);\n      }\n    }, {\n      key: \"_normalizeSources\",\n      value: function _normalizeSources(options) {\n        var sources = options.sources || (options.source !== undefined ? [options.source] : []);\n        return sources.length === 0 ? [{\n          source: '',\n          mimeType: ''\n        }] : sources;\n      }\n      /**\n       * resizes the current player canvas.\n       * @method resize\n       * @param {Object} size should be a literal object with `height` and `width`.\n       * @return {Player} itself\n       * @example\n       * ```javascript\n       * player.resize({height: 360, width: 640})\n       * ```\n       */\n\n    }, {\n      key: \"resize\",\n      value: function resize(size) {\n        this.core.resize(size);\n        return this;\n      }\n      /**\n       * loads a new source.\n       * @method load\n       * @param {Array|String} sources source or sources of video.\n       * An array item can be a string or {source: <<source URL>>, mimeType: <<source mime type>>}\n       * @param {String} mimeType a mime type, example: `'application/vnd.apple.mpegurl'`\n       * @param {Boolean} [autoPlay=false] whether playing should be started immediately\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"load\",\n      value: function load(sources, mimeType, autoPlay) {\n        if (autoPlay !== undefined) this.configure({\n          autoPlay: !!autoPlay\n        });\n        this.core.load(sources, mimeType);\n        return this;\n      }\n      /**\n       * destroys the current player and removes it from the DOM.\n       * @method destroy\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.stopListening();\n        this.core.destroy();\n        return this;\n      }\n      /**\n       * Gives user consent to playback. Required by mobile device after a click event before Player.load().\n       * @method consent\n       * @param {Function} callback function called when current playback is consented\n       * @example\n       * ```javascript\n       * player.consent(function() { doSomethingNext(); });\n       * ```\n       */\n\n    }, {\n      key: \"consent\",\n      value: function consent(cb) {\n        this.core.getCurrentPlayback().consent(cb);\n      }\n      /**\n       * plays the current video (`source`).\n       * @method play\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"play\",\n      value: function play() {\n        this.core.activeContainer.play();\n        return this;\n      }\n      /**\n       * pauses the current video (`source`).\n       * @method pause\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.core.activeContainer.pause();\n        return this;\n      }\n      /**\n       * stops the current video (`source`).\n       * @method stop\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this.core.activeContainer.stop();\n        return this;\n      }\n      /**\n       * seeks the current video (`source`). For example, `player.seek(120)` will seek to second 120 (2minutes) of the current video.\n       * @method seek\n       * @param {Number} time should be a number between 0 and the video duration.\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"seek\",\n      value: function seek(time) {\n        this.core.activeContainer.seek(time);\n        return this;\n      }\n      /**\n       * seeks the current video (`source`). For example, `player.seek(50)` will seek to the middle of the current video.\n       * @method seekPercentage\n       * @param {Number} time should be a number between 0 and 100.\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {\n        this.core.activeContainer.seekPercentage(percentage);\n        return this;\n      }\n      /**\n       * mutes the current video (`source`).\n       * @method mute\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"mute\",\n      value: function mute() {\n        this.core.activePlayback.mute();\n        return this;\n      }\n      /**\n       * unmutes the current video (`source`).\n       * @method unmute\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"unmute\",\n      value: function unmute() {\n        this.core.activePlayback.unmute();\n        return this;\n      }\n      /**\n       * checks if the player is playing.\n       * @method isPlaying\n       * @return {Boolean} `true` if the current source is playing, otherwise `false`\n       */\n\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return this.core.activeContainer.isPlaying();\n      }\n      /**\n       * returns `true` if DVR is enable otherwise `false`.\n       * @method isDvrEnabled\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrEnabled\",\n      value: function isDvrEnabled() {\n        return this.core.activeContainer.isDvrEnabled();\n      }\n      /**\n       * returns `true` if DVR is in use otherwise `false`.\n       * @method isDvrInUse\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrInUse\",\n      value: function isDvrInUse() {\n        return this.core.activeContainer.isDvrInUse();\n      }\n      /**\n       * enables to configure a player after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        this._registerOptionEventListeners(options.events, this.options.events);\n\n        this.core.configure(options);\n        return this;\n      }\n      /**\n       * get a plugin by its name.\n       * @method getPlugin\n       * @param {String} name of the plugin.\n       * @return {Object} the plugin instance\n       * @example\n       * ```javascript\n       * var poster = player.getPlugin('poster');\n       * poster.hidePlayButton();\n       * ```\n       */\n\n    }, {\n      key: \"getPlugin\",\n      value: function getPlugin(name) {\n        var plugins = this.core.plugins.concat(this.core.activeContainer.plugins);\n        return plugins.filter(function (plugin) {\n          return plugin.name === name;\n        })[0];\n      }\n      /**\n       * the current time in seconds.\n       * @method getCurrentTime\n       * @return {Number} current time (in seconds) of the current source\n       */\n\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this.core.activeContainer.getCurrentTime();\n      }\n      /**\n       * The time that \"0\" now represents relative to when playback started.\n       * For a stream with a sliding window this will increase as content is\n       * removed from the beginning.\n       * @method getStartTimeOffset\n       * @return {Number} time (in seconds) that time \"0\" represents.\n       */\n\n    }, {\n      key: \"getStartTimeOffset\",\n      value: function getStartTimeOffset() {\n        return this.core.activeContainer.getStartTimeOffset();\n      }\n      /**\n       * the duration time in seconds.\n       * @method getDuration\n       * @return {Number} duration time (in seconds) of the current source\n       */\n\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        return this.core.activeContainer.getDuration();\n      }\n    }]);\n\n    return Player;\n  }(BaseObject);\n  Object.assign(Player.prototype, ErrorMixin);\n\n  /**\n   * The base class for a container plugin\n   * @class ContainerPlugin\n   * @constructor\n   * @extends BaseObject\n   * @module base\n   */\n\n  var ContainerPlugin = /*#__PURE__*/function (_BaseObject) {\n    _inherits(ContainerPlugin, _BaseObject);\n\n    var _super = _createSuper(ContainerPlugin);\n\n    _createClass(ContainerPlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.container.playerError;\n      }\n    }]);\n\n    function ContainerPlugin(container) {\n      var _this;\n\n      _classCallCheck(this, ContainerPlugin);\n\n      _this = _super.call(this, container.options);\n      _this.container = container;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      return _this;\n    }\n\n    _createClass(ContainerPlugin, [{\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this.enabled) {\n          this.stopListening();\n          this.enabled = false;\n        }\n      }\n    }, {\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.stopListening();\n      }\n    }]);\n\n    return ContainerPlugin;\n  }(BaseObject);\n  Object.assign(ContainerPlugin.prototype, ErrorMixin);\n\n  ContainerPlugin.extend = function (properties) {\n    return extend(ContainerPlugin, properties);\n  };\n\n  ContainerPlugin.type = 'container';\n\n  var CorePlugin = /*#__PURE__*/function (_BaseObject) {\n    _inherits(CorePlugin, _BaseObject);\n\n    var _super = _createSuper(CorePlugin);\n\n    _createClass(CorePlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.core.playerError;\n      }\n    }]);\n\n    function CorePlugin(core) {\n      var _this;\n\n      _classCallCheck(this, CorePlugin);\n\n      _this = _super.call(this, core.options);\n      _this.core = core;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      return _this;\n    }\n\n    _createClass(CorePlugin, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }, {\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this.enabled) {\n          this.stopListening();\n          this.enabled = false;\n        }\n      }\n    }, {\n      key: \"getExternalInterface\",\n      value: function getExternalInterface() {\n        return {};\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.stopListening();\n      }\n    }]);\n\n    return CorePlugin;\n  }(BaseObject);\n  Object.assign(CorePlugin.prototype, ErrorMixin);\n\n  CorePlugin.extend = function (properties) {\n    return extend(CorePlugin, properties);\n  };\n\n  CorePlugin.type = 'core';\n\n  /**\n   * The base class for an ui container plugin\n   * @class UIContainerPlugin\n   * @constructor\n   * @extends UIObject\n   * @module base\n   */\n\n  var UIContainerPlugin = /*#__PURE__*/function (_UIObject) {\n    _inherits(UIContainerPlugin, _UIObject);\n\n    var _super = _createSuper(UIContainerPlugin);\n\n    _createClass(UIContainerPlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.container.playerError;\n      }\n    }]);\n\n    function UIContainerPlugin(container) {\n      var _this;\n\n      _classCallCheck(this, UIContainerPlugin);\n\n      _this = _super.call(this, container.options);\n      _this.container = container;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      return _this;\n    }\n\n    _createClass(UIContainerPlugin, [{\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.$el.show();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        this.stopListening();\n        this.$el.hide();\n        this.enabled = false;\n      }\n    }, {\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }]);\n\n    return UIContainerPlugin;\n  }(UIObject);\n  Object.assign(UIContainerPlugin.prototype, ErrorMixin);\n\n  UIContainerPlugin.extend = function (properties) {\n    return extend(UIContainerPlugin, properties);\n  };\n\n  UIContainerPlugin.type = 'container';\n\n  var tracksHTML = \"<% for (var i = 0; i < tracks.length; i++) { %>\\n  <track data-html5-video-track=\\\"<%= i %>\\\" kind=\\\"<%= tracks[i].kind %>\\\" label=\\\"<%= tracks[i].label %>\\\" srclang=\\\"<%= tracks[i].lang %>\\\" src=\\\"<%= tracks[i].src %>\\\">\\n<% }; %>\\n\";\n\n  var css_248z$3 = \"[data-html5-video] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  display: block; }\\n\";\n\n  var MIMETYPES = {\n    'mp4': ['avc1.42E01E', 'avc1.58A01E', 'avc1.4D401E', 'avc1.64001E', 'mp4v.20.8', 'mp4v.20.240', 'mp4a.40.2'].map(function (codec) {\n      return 'video/mp4; codecs=\"' + codec + ', mp4a.40.2\"';\n    }),\n    'ogg': ['video/ogg; codecs=\"theora, vorbis\"', 'video/ogg; codecs=\"dirac\"', 'video/ogg; codecs=\"theora, speex\"'],\n    '3gpp': ['video/3gpp; codecs=\"mp4v.20.8, samr\"'],\n    'webm': ['video/webm; codecs=\"vp8, vorbis\"'],\n    'mkv': ['video/x-matroska; codecs=\"theora, vorbis\"'],\n    'm3u8': ['application/x-mpegurl']\n  };\n  MIMETYPES['ogv'] = MIMETYPES['ogg'];\n  MIMETYPES['3gp'] = MIMETYPES['3gpp'];\n  var AUDIO_MIMETYPES = {\n    'wav': ['audio/wav'],\n    'mp3': ['audio/mp3', 'audio/mpeg;codecs=\"mp3\"'],\n    'aac': ['audio/mp4;codecs=\"mp4a.40.5\"'],\n    'oga': ['audio/ogg']\n  };\n  var KNOWN_AUDIO_MIMETYPES = Object.keys(AUDIO_MIMETYPES).reduce(function (acc, k) {\n    return [].concat(_toConsumableArray(acc), _toConsumableArray(AUDIO_MIMETYPES[k]));\n  }, []);\n  var UNKNOWN_ERROR = {\n    code: 'unknown',\n    message: 'unknown'\n  }; // TODO: rename this Playback to HTML5Playback (breaking change, only after 0.3.0)\n\n  var HTML5Video = /*#__PURE__*/function (_Playback) {\n    _inherits(HTML5Video, _Playback);\n\n    var _super = _createSuper(HTML5Video);\n\n    _createClass(HTML5Video, [{\n      key: \"name\",\n      get: function get() {\n        return 'html5_video';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"tagName\",\n      get: function get() {\n        return this.isAudioOnly ? 'audio' : 'video';\n      }\n    }, {\n      key: \"isAudioOnly\",\n      get: function get() {\n        var resourceUrl = this.options.src;\n\n        var mimeTypes = HTML5Video._mimeTypesForUrl(resourceUrl, AUDIO_MIMETYPES, this.options.mimeType);\n\n        return this.options.playback && this.options.playback.audioOnly || this.options.audioOnly || KNOWN_AUDIO_MIMETYPES.indexOf(mimeTypes[0]) >= 0;\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-html5-video': ''\n        };\n      }\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {\n          'canplay': '_onCanPlay',\n          'canplaythrough': '_handleBufferingEvents',\n          'durationchange': '_onDurationChange',\n          'ended': '_onEnded',\n          'error': '_onError',\n          'loadeddata': '_onLoadedData',\n          'loadedmetadata': '_onLoadedMetadata',\n          'pause': '_onPause',\n          'playing': '_onPlaying',\n          'progress': '_onProgress',\n          'seeking': '_onSeeking',\n          'seeked': '_onSeeked',\n          'stalled': '_handleBufferingEvents',\n          'timeupdate': '_onTimeUpdate',\n          'waiting': '_onWaiting'\n        };\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return this.el.ended;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * This is related to the PLAYBACK_BUFFERING and PLAYBACK_BUFFERFULL events\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return this._isBuffering;\n      }\n    }, {\n      key: \"isLive\",\n      get: function get() {\n        return this.getPlaybackType() === Playback.LIVE;\n      }\n    }, {\n      key: \"dvrEnabled\",\n      get: function get() {\n        return this.getDuration() >= this._minDvrSize && this.isLive;\n      }\n    }, {\n      key: \"minimumDVRSizeConfig\",\n      get: function get() {\n        return this.options.playback && this.options.playback.minimumDvrSize;\n      }\n    }, {\n      key: \"isValidMinimumDVRSizeConfig\",\n      get: function get() {\n        return typeof this.minimumDVRSizeConfig !== 'undefined' && typeof this.minimumDVRSizeConfig === 'number';\n      }\n    }]);\n\n    function HTML5Video() {\n      var _this;\n\n      _classCallCheck(this, HTML5Video);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this._destroyed = false;\n      _this._loadStarted = false;\n      _this._isBuffering = false;\n      _this._playheadMoving = false;\n      _this._playheadMovingTimer = null;\n      _this._stopped = false;\n      _this._ccTrackId = -1;\n\n      _this._setupSrc(_this.options.src); // backwards compatibility (TODO: remove on 0.3.0)\n\n\n      _this.options.playback || (_this.options.playback = _this.options || {});\n      _this.options.playback.disableContextMenu = _this.options.playback.disableContextMenu || _this.options.disableVideoTagContextMenu;\n      _this._minDvrSize = _this.isValidMinimumDVRSizeConfig ? _this.minimumDVRSizeConfig : 60;\n      var playbackConfig = _this.options.playback;\n      var preload = playbackConfig.preload || (Browser.isSafari ? 'auto' : _this.options.preload);\n      var posterUrl; // FIXME: poster plugin should always convert poster to object with expected properties ?\n\n      if (_this.options.poster) {\n        if (typeof _this.options.poster === 'string') posterUrl = _this.options.poster;else if (typeof _this.options.poster.url === 'string') posterUrl = _this.options.poster.url;\n      }\n\n      zepto.extend(true, _this.el, {\n        muted: _this.options.mute,\n        defaultMuted: _this.options.mute,\n        loop: _this.options.loop,\n        poster: posterUrl,\n        preload: preload || 'metadata',\n        crossOrigin: playbackConfig.crossOrigin,\n        'x-webkit-playsinline': playbackConfig.playInline\n      });\n      if (playbackConfig.controls || _this.options.useVideoTagDefaultControls) _this.$el.attr('controls', '');\n      playbackConfig.playInline && _this.$el.attr({\n        playsinline: 'playsinline'\n      });\n      playbackConfig.crossOrigin && _this.$el.attr({\n        crossorigin: playbackConfig.crossOrigin\n      }); // TODO should settings be private?\n\n      _this.settings = {\n        \"default\": ['seekbar']\n      };\n      _this.settings.left = ['playpause', 'position', 'duration'];\n      _this.settings.right = ['fullscreen', 'volume', 'hd-indicator'];\n      playbackConfig.externalTracks && _this._setupExternalTracks(playbackConfig.externalTracks);\n      _this.options.autoPlay && _this.attemptAutoPlay();\n      return _this;\n    }\n\n    _createClass(HTML5Video, [{\n      key: \"configure\",\n      value: function configure(options) {\n        _get(_getPrototypeOf(HTML5Video.prototype), \"configure\", this).call(this, options);\n\n        this.el.loop = !!options.loop;\n      } // See Playback.attemptAutoPlay()\n\n    }, {\n      key: \"attemptAutoPlay\",\n      value: function attemptAutoPlay() {\n        var _this2 = this;\n\n        this.canAutoPlay(function (result, error) {\n          error && Log.warn(_this2.name, 'autoplay error.', {\n            result: result,\n            error: error\n          }); // https://github.com/clappr/clappr/issues/1076\n\n          result && setTimeout(function () {\n            return !_this2._destroyed && _this2.play();\n          }, 0);\n        });\n      } // See Playback.canAutoPlay()\n\n    }, {\n      key: \"canAutoPlay\",\n      value: function canAutoPlay(cb) {\n        if (this.options.disableCanAutoPlay) {\n          cb(true, null);\n          return;\n        }\n\n        var opts = {\n          timeout: this.options.autoPlayTimeout || 500,\n          inline: this.options.playback.playInline || false,\n          muted: this.options.mute || false // Known issue: mediacontrols may asynchronously mute video\n\n        }; // Use current video element if recycling feature enabled with mobile devices\n\n        if (Browser.isMobile && DomRecycler.options.recycleVideo) opts.element = this.el; // Desktop browser autoplay policy may require user action\n        // Mobile browser autoplay require user consent and video recycling feature enabled\n        // It may returns a false positive with source-less player consent\n\n        canAutoPlayMedia(cb, opts);\n      }\n    }, {\n      key: \"_setupExternalTracks\",\n      value: function _setupExternalTracks(tracks) {\n        this._externalTracks = tracks.map(function (track) {\n          return {\n            kind: track.kind || 'subtitles',\n            // Default is 'subtitles'\n            label: track.label,\n            lang: track.lang,\n            src: track.src\n          };\n        });\n      }\n      /**\n       * Sets the source url on the <video> element, and also the 'src' property.\n       * @method setupSrc\n       * @private\n       * @param {String} srcUrl The source URL.\n       */\n\n    }, {\n      key: \"_setupSrc\",\n      value: function _setupSrc(srcUrl) {\n        if (this.el.src === srcUrl) return;\n        this._ccIsSetup = false;\n        this.el.src = srcUrl;\n        this._src = this.el.src;\n      }\n    }, {\n      key: \"_onLoadedMetadata\",\n      value: function _onLoadedMetadata(e) {\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_LOADEDMETADATA, {\n          duration: e.target.duration,\n          data: e\n        });\n\n        this._updateSettings();\n\n        var autoSeekFromUrl = typeof this._options.autoSeekFromUrl === 'undefined' || this._options.autoSeekFromUrl;\n        if (this.getPlaybackType() !== Playback.LIVE && autoSeekFromUrl) this._checkInitialSeek();\n      }\n    }, {\n      key: \"_onDurationChange\",\n      value: function _onDurationChange() {\n        this._updateSettings();\n\n        this._onTimeUpdate(); // onProgress uses the duration\n\n\n        this._onProgress();\n      }\n    }, {\n      key: \"_updateSettings\",\n      value: function _updateSettings() {\n        // we can't figure out if hls resource is VoD or not until it is being loaded or duration has changed.\n        // that's why we check it again and update media control accordingly.\n        if (this.getPlaybackType() === Playback.VOD || this.getPlaybackType() === Playback.AOD) this.settings.left = ['playpause', 'position', 'duration'];else this.settings.left = ['playstop'];\n        this.settings.seekEnabled = this.isSeekEnabled();\n        this.trigger(Events.PLAYBACK_SETTINGSUPDATE);\n      }\n    }, {\n      key: \"isSeekEnabled\",\n      value: function isSeekEnabled() {\n        return isFinite(this.getDuration());\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        var onDemandType = this.tagName === 'audio' ? Playback.AOD : Playback.VOD;\n        return [0, undefined, Infinity].indexOf(this.el.duration) >= 0 ? Playback.LIVE : onDemandType;\n      }\n    }, {\n      key: \"isHighDefinitionInUse\",\n      value: function isHighDefinitionInUse() {\n        return false;\n      } // On mobile device, HTML5 video element \"retains\" user action consent if\n      // load() method is called. See Player.consent().\n\n    }, {\n      key: \"consent\",\n      value: function consent(cb) {\n        var _this3 = this;\n\n        if (this.isPlaying() || this.el._consented) {\n          _get(_getPrototypeOf(HTML5Video.prototype), \"consent\", this).call(this, cb);\n        } else {\n          var eventHandler = function eventHandler() {\n            _this3.el.removeEventListener('loadedmetadata', eventHandler, false);\n\n            _this3.el.removeEventListener('error', eventHandler, false);\n\n            _this3.el._consented = true; // Flag to call load() only once\n\n            _get(_getPrototypeOf(HTML5Video.prototype), \"consent\", _this3).call(_this3, cb);\n          };\n\n          this.el.addEventListener('loadedmetadata', eventHandler, false);\n          this.el.addEventListener('error', eventHandler, false);\n          this.el.load();\n        }\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        this.trigger(Events.PLAYBACK_PLAY_INTENT);\n        this._stopped = false;\n\n        this._setupSrc(this._src);\n\n        this._handleBufferingEvents();\n\n        var promise = this.el.play(); // For more details, see https://developers.google.com/web/updates/2016/03/play-returns-promise\n\n        if (promise && promise[\"catch\"]) promise[\"catch\"](function () {});\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.el.pause();\n        this.dvrEnabled && this._updateDvr(true);\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this.pause();\n        this._stopped = true; // src will be added again in play()\n\n        this.el.removeAttribute('src');\n        this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\n        this._stopPlayheadMovingChecks();\n\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_STOP);\n      }\n    }, {\n      key: \"volume\",\n      value: function volume(value) {\n        if (value === 0) {\n          this.$el.attr({\n            muted: 'true'\n          });\n          this.el.muted = true;\n        } else {\n          this.$el.attr({\n            muted: null\n          });\n          this.el.muted = false;\n          this.el.volume = value / 100;\n        }\n      }\n      /**\n       * @deprecated\n       * @private\n       */\n\n    }, {\n      key: \"mute\",\n      value: function mute() {\n        this.el.muted = true;\n      }\n      /**\n       * @deprecated\n       * @private\n       */\n\n    }, {\n      key: \"unmute\",\n      value: function unmute() {\n        this.el.muted = false;\n      }\n    }, {\n      key: \"isMuted\",\n      value: function isMuted() {\n        return this.el.muted === true || this.el.volume === 0;\n      }\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return !this.el.paused && !this.el.ended;\n      }\n    }, {\n      key: \"_startPlayheadMovingChecks\",\n      value: function _startPlayheadMovingChecks() {\n        if (this._playheadMovingTimer !== null) return;\n        this._playheadMovingTimeOnCheck = null;\n\n        this._determineIfPlayheadMoving();\n\n        this._playheadMovingTimer = setInterval(this._determineIfPlayheadMoving.bind(this), 500);\n      }\n    }, {\n      key: \"_stopPlayheadMovingChecks\",\n      value: function _stopPlayheadMovingChecks() {\n        if (this._playheadMovingTimer === null) return;\n        clearInterval(this._playheadMovingTimer);\n        this._playheadMovingTimer = null;\n        this._playheadMoving = false;\n      }\n    }, {\n      key: \"_determineIfPlayheadMoving\",\n      value: function _determineIfPlayheadMoving() {\n        var before = this._playheadMovingTimeOnCheck;\n        var now = this.el.currentTime;\n        this._playheadMoving = before !== now;\n        this._playheadMovingTimeOnCheck = now;\n\n        this._handleBufferingEvents();\n      } // this seems to happen when the user is having to wait\n      // for something to happen AFTER A USER INTERACTION\n      // e.g the player might be buffering, but when `play()` is called\n      // only at this point will this be called.\n      // Or the user may seek somewhere but the new area requires buffering,\n      // so it will fire then as well.\n      // On devices where playing is blocked until requested with a user action,\n      // buffering may start, but never finish until the user initiates a play,\n      // but this only happens when play is actually requested\n\n    }, {\n      key: \"_onWaiting\",\n      value: function _onWaiting() {\n        this._loadStarted = true;\n\n        this._handleBufferingEvents();\n      } // called after the first frame has loaded\n      // note this doesn't fire on ios before the user has requested play\n      // ideally the \"loadstart\" event would be used instead, but this fires\n      // before a user has requested play on iOS, and also this is always fired\n      // even if the preload setting is \"none\". In both these cases this causes\n      // infinite buffering until the user does something which isn't great.\n\n    }, {\n      key: \"_onLoadedData\",\n      value: function _onLoadedData() {\n        this._loadStarted = true;\n\n        this._handleBufferingEvents();\n      } // note this doesn't fire on ios before user has requested play\n\n    }, {\n      key: \"_onCanPlay\",\n      value: function _onCanPlay() {\n        this._handleBufferingEvents();\n      }\n    }, {\n      key: \"_onPlaying\",\n      value: function _onPlaying() {\n        this._checkForClosedCaptions();\n\n        this._startPlayheadMovingChecks();\n\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_PLAY);\n      }\n    }, {\n      key: \"_onPause\",\n      value: function _onPause() {\n        this._stopPlayheadMovingChecks();\n\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_PAUSE);\n      }\n    }, {\n      key: \"_onSeeking\",\n      value: function _onSeeking() {\n        this.trigger(Events.PLAYBACK_SEEK, this.getCurrentTime());\n\n        this._handleBufferingEvents();\n      }\n    }, {\n      key: \"_onSeeked\",\n      value: function _onSeeked() {\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_SEEKED);\n      }\n    }, {\n      key: \"_onEnded\",\n      value: function _onEnded() {\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_ENDED, this.name);\n      } // The playback should be classed as buffering if the following are true:\n      // - the ready state is less then HAVE_FUTURE_DATA or the playhead isn't moving and it should be\n      // - the media hasn't \"ended\",\n      // - the media hasn't been stopped\n      // - loading has started\n\n    }, {\n      key: \"_handleBufferingEvents\",\n      value: function _handleBufferingEvents() {\n        var playheadShouldBeMoving = !this.el.ended && !this.el.paused;\n        var buffering = this._loadStarted && !this.el.ended && !this._stopped && (playheadShouldBeMoving && !this._playheadMoving || this.el.readyState < this.el.HAVE_FUTURE_DATA);\n\n        if (this._isBuffering !== buffering) {\n          this._isBuffering = buffering;\n          if (buffering) this.trigger(Events.PLAYBACK_BUFFERING, this.name);else this.trigger(Events.PLAYBACK_BUFFERFULL, this.name);\n        }\n      }\n    }, {\n      key: \"_onError\",\n      value: function _onError() {\n        var _ref = this.el.error || UNKNOWN_ERROR,\n            code = _ref.code,\n            message = _ref.message;\n\n        var isUnknownError = code === UNKNOWN_ERROR.code;\n        var formattedError = this.createError({\n          code: code,\n          description: message,\n          raw: this.el.error,\n          level: isUnknownError ? PlayerError.Levels.WARN : PlayerError.Levels.FATAL\n        });\n        if (isUnknownError) Log.warn(this.name, 'HTML5 unknown error: ', formattedError);else this.trigger(Events.PLAYBACK_ERROR, formattedError);\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this._destroyed = true;\n        this.handleTextTrackChange && this.el.textTracks.removeEventListener('change', this.handleTextTrackChange);\n\n        _get(_getPrototypeOf(HTML5Video.prototype), \"destroy\", this).call(this);\n\n        this.el.removeAttribute('src');\n        this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\n        this._src = null;\n        DomRecycler.garbage(this.el);\n      }\n    }, {\n      key: \"_updateDvr\",\n      value: function _updateDvr(status) {\n        this.trigger(Events.PLAYBACK_DVR, status);\n        this.trigger(Events.PLAYBACK_STATS_ADD, {\n          'dvr': status\n        });\n      }\n    }, {\n      key: \"seek\",\n      value: function seek(time) {\n        if (time < 0) {\n          Log.warn('Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point.');\n          time = this.getDuration();\n        } // assume live if time within 3 seconds of end of stream\n\n\n        this.dvrEnabled && this._updateDvr(time < this.getDuration() - 3);\n        time += this.el.seekable.start(0);\n        this.el.currentTime = time;\n      }\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {\n        var time = this.el.duration * (percentage / 100);\n        this.seek(time);\n      }\n    }, {\n      key: \"_checkInitialSeek\",\n      value: function _checkInitialSeek() {\n        var seekTime = seekStringToSeconds();\n        if (seekTime !== 0) this.seek(seekTime);\n      }\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this.el.currentTime;\n      }\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        var _this4 = this;\n\n        if (this.isLive) {\n          try {\n            return this.el.seekable.end(0) - this.el.seekable.start(0);\n          } catch (e) {\n            setTimeout(function () {\n              return _this4._updateSettings();\n            }, 1000);\n          }\n        }\n\n        return this.el.duration;\n      }\n    }, {\n      key: \"_onTimeUpdate\",\n      value: function _onTimeUpdate() {\n        var duration = this.isLive ? this.getDuration() : this.el.duration;\n        this.trigger(Events.PLAYBACK_TIMEUPDATE, {\n          current: this.el.currentTime,\n          total: duration\n        }, this.name);\n      }\n    }, {\n      key: \"_onProgress\",\n      value: function _onProgress() {\n        if (!this.el.buffered.length) return;\n        var buffered = [];\n        var bufferedPos = 0;\n\n        for (var i = 0; i < this.el.buffered.length; i++) {\n          buffered = [].concat(_toConsumableArray(buffered), [{\n            start: this.el.buffered.start(i),\n            end: this.el.buffered.end(i)\n          }]);\n          if (this.el.currentTime >= buffered[i].start && this.el.currentTime <= buffered[i].end) bufferedPos = i;\n        }\n\n        var progress = {\n          start: buffered[bufferedPos].start,\n          current: buffered[bufferedPos].end,\n          total: this.el.duration\n        };\n        this.trigger(Events.PLAYBACK_PROGRESS, progress, buffered);\n      }\n    }, {\n      key: \"_typeFor\",\n      value: function _typeFor(src) {\n        var mimeTypes = HTML5Video._mimeTypesForUrl(src, MIMETYPES, this.options.mimeType);\n\n        if (mimeTypes.length === 0) mimeTypes = HTML5Video._mimeTypesForUrl(src, AUDIO_MIMETYPES, this.options.mimeType);\n        var mimeType = mimeTypes[0] || '';\n        return mimeType.split(';')[0];\n      }\n    }, {\n      key: \"_ready\",\n      value: function _ready() {\n        if (this._isReadyState) return;\n        this._isReadyState = true;\n        this.trigger(Events.PLAYBACK_READY, this.name);\n      }\n    }, {\n      key: \"_checkForClosedCaptions\",\n      value: function _checkForClosedCaptions() {\n        // Check if CC available only if current playback is HTML5Video\n        if (this.isHTML5Video && !this._ccIsSetup) {\n          if (this.hasClosedCaptionsTracks) {\n            this.trigger(Events.PLAYBACK_SUBTITLE_AVAILABLE);\n            var trackId = this.closedCaptionsTrackId;\n            this.closedCaptionsTrackId = trackId;\n            this.handleTextTrackChange = this._handleTextTrackChange.bind(this);\n            this.el.textTracks.addEventListener('change', this.handleTextTrackChange);\n          }\n\n          this._ccIsSetup = true;\n        }\n      }\n    }, {\n      key: \"_handleTextTrackChange\",\n      value: function _handleTextTrackChange() {\n        var tracks = this.closedCaptionsTracks;\n        var track = tracks.find(function (track) {\n          return track.track.mode === 'showing';\n        }) || {\n          id: -1\n        };\n\n        if (this._ccTrackId !== track.id) {\n          this._ccTrackId = track.id;\n          this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED, {\n            id: track.id\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        if (this.options.playback.disableContextMenu) {\n          this.$el.on('contextmenu', function () {\n            return false;\n          });\n        }\n\n        if (this._externalTracks && this._externalTracks.length > 0) {\n          this.$el.html(this.template({\n            tracks: this._externalTracks\n          }));\n        }\n\n        this._ready();\n\n        var style = Styler.getStyleFor(css_248z$3.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        return this;\n      }\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return this._isReadyState;\n      }\n    }, {\n      key: \"isHTML5Video\",\n      get: function get() {\n        return this.name === HTML5Video.prototype.name;\n      }\n    }, {\n      key: \"closedCaptionsTracks\",\n      get: function get() {\n        var id = 0;\n\n        var trackId = function trackId() {\n          return id++;\n        };\n\n        var textTracks = this.el.textTracks ? Array.from(this.el.textTracks) : [];\n        return textTracks.filter(function (track) {\n          return track.kind === 'subtitles' || track.kind === 'captions';\n        }).map(function (track) {\n          return {\n            id: trackId(),\n            name: track.label,\n            track: track\n          };\n        });\n      }\n    }, {\n      key: \"closedCaptionsTrackId\",\n      get: function get() {\n        return this._ccTrackId;\n      },\n      set: function set(trackId) {\n        if (!isNumber(trackId)) return;\n        var tracks = this.closedCaptionsTracks;\n        var showingTrack; // Note: -1 is for hide all tracks\n\n        if (trackId !== -1) {\n          showingTrack = tracks.find(function (track) {\n            return track.id === trackId;\n          });\n          if (!showingTrack) return; // Track id not found\n\n          if (showingTrack.track.mode === 'showing') return; // Track already showing\n        } // Since it is possible to display multiple tracks,\n        // ensure that all tracks are hidden.\n\n\n        tracks.filter(function (track) {\n          return track.track.mode !== 'hidden';\n        }).forEach(function (track) {\n          return track.track.mode = 'hidden';\n        });\n        showingTrack && (showingTrack.track.mode = 'showing');\n        this._ccTrackId = trackId;\n        this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED, {\n          id: trackId\n        });\n      }\n    }, {\n      key: \"template\",\n      get: function get() {\n        return tmpl(tracksHTML);\n      }\n    }]);\n\n    return HTML5Video;\n  }(Playback);\n\n  HTML5Video._mimeTypesForUrl = function (resourceUrl, mimeTypesByExtension, mimeType) {\n    var extension = (resourceUrl.split('?')[0].match(/.*\\.(.*)$/) || [])[1];\n    var mimeTypes = mimeType || extension && mimeTypesByExtension[extension.toLowerCase()] || [];\n    return mimeTypes.constructor === Array ? mimeTypes : [mimeTypes];\n  };\n\n  HTML5Video._canPlay = function (type, mimeTypesByExtension, resourceUrl, mimeType) {\n    var mimeTypes = HTML5Video._mimeTypesForUrl(resourceUrl, mimeTypesByExtension, mimeType);\n\n    var media = document.createElement(type);\n    return !!mimeTypes.filter(function (mediaType) {\n      return !!media.canPlayType(mediaType).replace(/no/, '');\n    })[0];\n  };\n\n  HTML5Video.canPlay = function (resourceUrl, mimeType) {\n    return HTML5Video._canPlay('audio', AUDIO_MIMETYPES, resourceUrl, mimeType) || HTML5Video._canPlay('video', MIMETYPES, resourceUrl, mimeType);\n  };\n\n  var HTML5Audio = /*#__PURE__*/function (_HTML5Video) {\n    _inherits(HTML5Audio, _HTML5Video);\n\n    var _super = _createSuper(HTML5Audio);\n\n    function HTML5Audio() {\n      _classCallCheck(this, HTML5Audio);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(HTML5Audio, [{\n      key: \"updateSettings\",\n      value: function updateSettings() {\n        this.settings.left = ['playpause', 'position', 'duration'];\n        this.settings.seekEnabled = this.isSeekEnabled();\n        this.trigger(Events.PLAYBACK_SETTINGSUPDATE);\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return Playback.AOD;\n      }\n    }, {\n      key: \"name\",\n      get: function get() {\n        return 'html5_audio';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"tagName\",\n      get: function get() {\n        return 'audio';\n      }\n    }, {\n      key: \"isAudioOnly\",\n      get: function get() {\n        return true;\n      }\n    }]);\n\n    return HTML5Audio;\n  }(HTML5Video);\n\n  HTML5Audio.canPlay = function (resourceUrl, mimeType) {\n    var mimetypes = {\n      'wav': ['audio/wav'],\n      'mp3': ['audio/mp3', 'audio/mpeg;codecs=\"mp3\"'],\n      'aac': ['audio/mp4;codecs=\"mp4a.40.5\"'],\n      'oga': ['audio/ogg']\n    };\n    return HTML5Video._canPlay('audio', mimetypes, resourceUrl, mimeType);\n  };\n\n  var css_248z$4 = \"[data-html-img] {\\n  max-width: 100%;\\n  max-height: 100%; }\\n\";\n\n  var HTMLImg = /*#__PURE__*/function (_Playback) {\n    _inherits(HTMLImg, _Playback);\n\n    var _super = _createSuper(HTMLImg);\n\n    _createClass(HTMLImg, [{\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return Playback.NO_OP;\n      }\n    }, {\n      key: \"name\",\n      get: function get() {\n        return 'html_img';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"tagName\",\n      get: function get() {\n        return 'img';\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-html-img': ''\n        };\n      }\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {\n          'load': '_onLoad',\n          'abort': '_onError',\n          'error': '_onError'\n        };\n      }\n    }]);\n\n    function HTMLImg(params) {\n      var _this;\n\n      _classCallCheck(this, HTMLImg);\n\n      _this = _super.call(this, params);\n      _this.el.src = params.src;\n      return _this;\n    }\n\n    _createClass(HTMLImg, [{\n      key: \"render\",\n      value: function render() {\n        var style = Styler.getStyleFor(css_248z$4.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.trigger(Events.PLAYBACK_READY, this.name);\n        return this;\n      }\n    }, {\n      key: \"_onLoad\",\n      value: function _onLoad() {\n        this.trigger(Events.PLAYBACK_ENDED, this.name);\n      }\n    }, {\n      key: \"_onError\",\n      value: function _onError(evt) {\n        var m = evt.type === 'error' ? 'load error' : 'loading aborted';\n        this.trigger(Events.PLAYBACK_ERROR, {\n          message: m\n        }, this.name);\n      }\n    }]);\n\n    return HTMLImg;\n  }(Playback);\n\n  HTMLImg.canPlay = function (resource) {\n    return /\\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\\?.*)$/i.test(resource);\n  };\n\n  var noOpHTML = \"<canvas data-no-op-canvas></canvas>\\n<p data-no-op-msg><%=message%></p><p>\\n</p>\";\n\n  var css_248z$5 = \"[data-no-op] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  text-align: center; }\\n\\n[data-no-op] p[data-no-op-msg] {\\n  position: absolute;\\n  text-align: center;\\n  font-size: 25px;\\n  left: 0;\\n  right: 0;\\n  color: white;\\n  padding: 10px;\\n  /* center vertically */\\n  top: 50%;\\n  transform: translateY(-50%);\\n  max-height: 100%;\\n  overflow: auto; }\\n\\n[data-no-op] canvas[data-no-op-canvas] {\\n  background-color: #777;\\n  height: 100%;\\n  width: 100%; }\\n\";\n\n  var NoOp = /*#__PURE__*/function (_Playback) {\n    _inherits(NoOp, _Playback);\n\n    var _super = _createSuper(NoOp);\n\n    _createClass(NoOp, [{\n      key: \"name\",\n      get: function get() {\n        return 'no_op';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"template\",\n      get: function get() {\n        return tmpl(noOpHTML);\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-no-op': ''\n        };\n      }\n    }]);\n\n    function NoOp() {\n      var _this;\n\n      _classCallCheck(this, NoOp);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this._noiseFrameNum = -1;\n      return _this;\n    }\n\n    _createClass(NoOp, [{\n      key: \"render\",\n      value: function render() {\n        var playbackNotSupported = this.options.playbackNotSupportedMessage || this.i18n.t('playback_not_supported');\n        var style = Styler.getStyleFor(css_248z$5.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.$el.html(this.template({\n          message: playbackNotSupported\n        }));\n        this.trigger(Events.PLAYBACK_READY, this.name);\n        var showForNoOp = !!(this.options.poster && this.options.poster.showForNoOp);\n        if (this.options.autoPlay || !showForNoOp) this._animate();\n        return this;\n      }\n    }, {\n      key: \"_noise\",\n      value: function _noise() {\n        this._noiseFrameNum = (this._noiseFrameNum + 1) % 5;\n\n        if (this._noiseFrameNum) {\n          // only update noise every 5 frames to save cpu\n          return;\n        }\n\n        var idata = this.context.createImageData(this.context.canvas.width, this.context.canvas.height);\n        var buffer32;\n\n        try {\n          buffer32 = new Uint32Array(idata.data.buffer);\n        } catch (err) {\n          buffer32 = new Uint32Array(this.context.canvas.width * this.context.canvas.height * 4);\n          var data = idata.data;\n\n          for (var i = 0; i < data.length; i++) {\n            buffer32[i] = data[i];\n          }\n        }\n\n        var len = buffer32.length,\n            m = Math.random() * 6 + 4;\n        var run = 0,\n            color = 0;\n\n        for (var _i = 0; _i < len;) {\n          if (run < 0) {\n            run = m * Math.random();\n            var p = Math.pow(Math.random(), 0.4);\n            color = 255 * p << 24;\n          }\n\n          run -= 1;\n          buffer32[_i++] = color;\n        }\n\n        this.context.putImageData(idata, 0, 0);\n      }\n    }, {\n      key: \"_loop\",\n      value: function _loop() {\n        var _this2 = this;\n\n        if (this._stop) return;\n\n        this._noise();\n\n        this._animationHandle = requestAnimationFrame(function () {\n          return _this2._loop();\n        });\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (this._animationHandle) {\n          cancelAnimationFrame(this._animationHandle);\n          this._stop = true;\n        }\n      }\n    }, {\n      key: \"_animate\",\n      value: function _animate() {\n        this.canvas = this.$el.find('canvas[data-no-op-canvas]')[0];\n        this.context = this.canvas.getContext('2d');\n\n        this._loop();\n      }\n    }]);\n\n    return NoOp;\n  }(Playback);\n\n  NoOp.canPlay = function (source) {\n    // eslint-disable-line no-unused-vars\n    return true;\n  };\n\n  /**\n   * The internationalization (i18n) plugin\n   * @class Strings\n   * @constructor\n   * @extends CorePlugin\n   * @module plugins\n   */\n\n  var Strings = /*#__PURE__*/function (_CorePlugin) {\n    _inherits(Strings, _CorePlugin);\n\n    var _super = _createSuper(Strings);\n\n    _createClass(Strings, [{\n      key: \"name\",\n      get: function get() {\n        return 'strings';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }]);\n\n    function Strings(core) {\n      var _this;\n\n      _classCallCheck(this, Strings);\n\n      _this = _super.call(this, core);\n\n      _this._initializeMessages();\n\n      return _this;\n    }\n    /**\n     * Gets a translated string for the given key.\n     * @method t\n     * @param {String} key the key to all messages\n     * @return {String} translated label\n     */\n\n\n    _createClass(Strings, [{\n      key: \"t\",\n      value: function t(key) {\n        var lang = this._language();\n\n        var fallbackLang = this._messages['en'];\n        var i18n = lang && this._messages[lang] || fallbackLang;\n        return i18n[key] || fallbackLang[key] || key;\n      }\n    }, {\n      key: \"_language\",\n      value: function _language() {\n        return this.core.options.language || getBrowserLanguage();\n      }\n    }, {\n      key: \"_initializeMessages\",\n      value: function _initializeMessages() {\n        var defaultMessages = {\n          'en': {\n            'live': 'live',\n            'back_to_live': 'back to live',\n            'disabled': 'Disabled',\n            'playback_not_supported': 'Your browser does not support the playback of this video. Please try using a different browser.',\n            'default_error_title': 'Could not play video.',\n            'default_error_message': 'There was a problem trying to load the video.'\n          },\n          'pt': {\n            'live': 'ao vivo',\n            'back_to_live': 'voltar para o ao vivo',\n            'disabled': 'Desativado',\n            'playback_not_supported': 'Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.',\n            'default_error_title': 'Não foi possível reproduzir o vídeo.',\n            'default_error_message': 'Ocorreu um problema ao tentar carregar o vídeo.'\n          },\n          'es': {\n            'live': 'vivo',\n            'back_to_live': 'volver en vivo',\n            'disabled': 'Discapacitado',\n            'playback_not_supported': 'Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente.'\n          },\n          'ru': {\n            'live': 'прямой эфир',\n            'back_to_live': 'к прямому эфиру',\n            'disabled': 'Отключено',\n            'playback_not_supported': 'Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер.'\n          },\n          'fr': {\n            'live': 'en direct',\n            'back_to_live': 'retour au direct',\n            'disabled': 'Désactivé',\n            'playback_not_supported': 'Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.',\n            'default_error_title': 'Impossible de lire la vidéo.',\n            'default_error_message': 'Un problème est survenu lors du chargement de la vidéo.'\n          },\n          'tr': {\n            'live': 'canlı',\n            'back_to_live': 'canlı yayına dön',\n            'disabled': 'Engelli',\n            'playback_not_supported': 'Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin.'\n          },\n          'et': {\n            'live': 'Otseülekanne',\n            'back_to_live': 'Tagasi otseülekande juurde',\n            'disabled': 'Keelatud',\n            'playback_not_supported': 'Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit.'\n          },\n          'ar': {\n            'live': 'مباشر',\n            'back_to_live': 'الرجوع إلى المباشر',\n            'disabled': 'معطّل',\n            'playback_not_supported': 'المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.',\n            'default_error_title': 'غير قادر الى التشغيل.',\n            'default_error_message': 'حدثت مشكلة أثناء تحميل الفيديو.'\n          }\n        };\n        this._messages = zepto.extend(true, defaultMessages, this.core.options.strings || {});\n        this._messages['pt-BR'] = this._messages['pt'];\n        this._messages['en-US'] = this._messages['en'];\n        this._messages['es-419'] = this._messages['es'];\n        this._messages['fr-FR'] = this._messages['fr'];\n        this._messages['tr-TR'] = this._messages['tr'];\n        this._messages['et-EE'] = this._messages['et'];\n        this._messages['ar-IQ'] = this._messages['ar'];\n      }\n    }]);\n\n    return Strings;\n  }(CorePlugin);\n\n  var SourcesPlugin = /*#__PURE__*/function (_CorePlugin) {\n    _inherits(SourcesPlugin, _CorePlugin);\n\n    var _super = _createSuper(SourcesPlugin);\n\n    function SourcesPlugin() {\n      _classCallCheck(this, SourcesPlugin);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(SourcesPlugin, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {\n        this.listenTo(this.core, Events.CORE_CONTAINERS_CREATED, this.onContainersCreated);\n      }\n    }, {\n      key: \"onContainersCreated\",\n      value: function onContainersCreated() {\n        var firstValidSource = this.core.containers.filter(function (container) {\n          return container.playback.name !== 'no_op';\n        })[0] || this.core.containers[0];\n        firstValidSource && this.core.containers.forEach(function (container) {\n          if (container !== firstValidSource) container.destroy();\n        });\n      }\n    }, {\n      key: \"name\",\n      get: function get() {\n        return 'sources';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }]);\n\n    return SourcesPlugin;\n  }(CorePlugin);\n\n  // Copyright 2014 Globo.com Player authors. All rights reserved.\n  var version = \"0.4.17\"; // Built-in Plugins/Playbacks\n\n  Loader.registerPlugin(Strings);\n  Loader.registerPlugin(SourcesPlugin);\n  Loader.registerPlayback(NoOp);\n  Loader.registerPlayback(HTMLImg);\n  Loader.registerPlayback(HTML5Audio);\n  Loader.registerPlayback(HTML5Video);\n  var main = {\n    Player: Player,\n    Events: Events,\n    Browser: Browser,\n    ContainerPlugin: ContainerPlugin,\n    UIContainerPlugin: UIContainerPlugin,\n    CorePlugin: CorePlugin,\n    UICorePlugin: UICorePlugin,\n    Playback: Playback,\n    Container: Container,\n    Core: Core,\n    PlayerError: PlayerError,\n    Loader: Loader,\n    BaseObject: BaseObject,\n    UIObject: UIObject,\n    Utils: Utils,\n    HTML5Audio: HTML5Audio,\n    HTML5Video: HTML5Video,\n    HTMLImg: HTMLImg,\n    Log: Log,\n    Styler: Styler,\n    version: version,\n    template: tmpl,\n    $: zepto\n  };\n\n  exports.$ = zepto;\n  exports.BaseObject = BaseObject;\n  exports.Browser = Browser;\n  exports.Container = Container;\n  exports.ContainerPlugin = ContainerPlugin;\n  exports.Core = Core;\n  exports.CorePlugin = CorePlugin;\n  exports.Events = Events;\n  exports.HTML5Audio = HTML5Audio;\n  exports.HTML5Video = HTML5Video;\n  exports.HTMLImg = HTMLImg;\n  exports.Loader = Loader;\n  exports.Log = Log;\n  exports.Playback = Playback;\n  exports.Player = Player;\n  exports.PlayerError = PlayerError;\n  exports.Styler = Styler;\n  exports.UIContainerPlugin = UIContainerPlugin;\n  exports.UICorePlugin = UICorePlugin;\n  exports.UIObject = UIObject;\n  exports.Utils = Utils;\n  exports.default = main;\n  exports.template = tmpl;\n  exports.version = version;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=clappr-core.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/@clappr/core/dist/clappr-core.js","module.exports = \"<param name=movie value=\\\"<%= swfPath %>?inline=1\\\"> <param name=quality value=autohigh> <param name=swliveconnect value=true> <param name=allowScriptAccess value=always> <param name=allownetworking value=all> <param name=bgcolor value=#000000> <param name=allowFullScreen value=false> <param name=wmode value=\\\"<%= wmode %>\\\"> <param name=tabindex value=1> <param name=FlashVars value=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\"/> <embed name=\\\"<%= cid %>\\\" type=application/x-shockwave-flash disabled=disabled tabindex=-1 enablecontextmenu=false allowscriptaccess=always allownetworking=all quality=autohigh pluginspage=http://www.macromedia.com/go/getflashplayer wmode=\\\"<%= wmode %>\\\" swliveconnect=true allowfullscreen=false bgcolor=#000000 flashvars=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\" data=\\\"<%= swfPath %>\\\" src=\\\"<%= swfPath %>\\\" width=100% height=100%> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/html-loader!./public/flash.html\n// module id = 3\n// module chunks = 0","module.exports = \".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./~/sass-loader!./public/flash.scss\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}