{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///rtmp.min.js","webpack:///webpack/bootstrap 9a178bb641cdceda385e","webpack:///./index.js","webpack:///./src/main.js","webpack:///./~/@clappr/core/dist/clappr-core.js","webpack:///./public/flash.html","webpack:///./public/flash.scss"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getter","get","parent","getPrototypeOf","_clapprCore","_htmlLoaderPublicFlashHtml","_htmlLoaderPublicFlashHtml2","_rawLoaderSassLoaderPublicFlashScss","_rawLoaderSassLoaderPublicFlashScss2","RTMP","_Flash","options","rtmpConfig","swfPath","wmode","bufferTime","scaling","playbackType","src","indexOf","useAppInstance","proxyType","startLevel","autoSwitch","switchRules","addListeners","_setupPlaybackType","template","data-rtmp","data","type","width","height","_playbackType","Mediator","on","uniqueId","_progress","_updateTime","_checkState","_playbackReady","_reporLevels","_levelChanging","_levelChange","_bootstrap","off","el","autoPlay","play","_setupSettings","getPlaybackType","trigger","Events","PLAYBACK_TIMEUPDATE","current","total","name","getPosition","getDuration","PLAYBACK_LEVEL_SWITCH_START","PLAYBACK_LEVEL_SWITCH_END","PLAYBACK_BITRATE","level","currentLevel","foundLevel","levels","forEach","settings","left","right","seekEnabled","PLAYBACK_SETTINGSUPDATE","$el","html","cid","playbackId","_switchRulesJSON","Browser","isIE","$","remove","isLegacyIE","attr","IE_CLASSID","style","Styler","getStyleFor","append","getState","PLAYBACK_ERROR","_isReadyState","PLAYBACK_READY","isDynamicStream","PLAYBACK_LEVELS_AVAILABLE","getCurrentLevel","set","setLevel","getNumLevels","isAutoSwitchLevels","numLevels","bitrate","getBitrateForLevel","push","label","JSON","stringify","replace","Flash","canPlay","source","mimeType","debug","s","console","log","global","_typeof","Symbol","iterator","_defineProperties","_defineProperty","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","apply","_objectSpread2","arguments","getOwnPropertyDescriptors","_setPrototypeOf","_getPrototypeOf","o","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","_superPropBase","hasOwnProperty","base","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","_arr","_n","_d","_e","_s","_i","next","done","err","minLen","n","slice","test","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","F","_e2","f","normalCompletion","didErr","step","_e3","assign","prop","propDescriptor","extend","properties","Surrogate","_parent","_this","_len","args","_key","_super","concat","initialize","formatTime","time","paddedHours","isFinite","parseInt","seconds","minutes","hours","days","out","trim","seekStringToSeconds","paramName","seekString","QueryString","params","hashParams","parts","match","factor","h","suffix","prefix","idsCounter","isNumber","parseFloat","currentScriptUrl","scripts","document","getElementsByTagName","getBrowserLanguage","window","navigator","language","now","performance","removeArrayItem","item","splice","listContainsIgnoreCase","items","find","itemEach","toLowerCase","canAutoPlayMedia","cb","inline","muted","timeout","Media","mp4","element","createElement","setAttribute","promise","timeoutId","setTimeout","setResult","Error","error","clearTimeout","then","predicate","thisArg","k","kValue","entries","ownProps","resArray","values","varArgs","to","index","nextSource","nextKey","findIndex","Zepto","String","class2type","isFunction","isWindow","isDocument","nodeType","DOCUMENT_NODE","isObject","isPlainObject","likeArray","compact","array","_filter","flatten","fn","dasherize","str","classRE","classCache","RegExp","maybeAddPx","cssNumber","defaultDisplay","nodeName","display","elementDisplay","body","appendChild","getComputedStyle","getPropertyValue","parentNode","removeChild","_children","_slice","children","map","childNodes","node","Z","dom","selector","deep","undefined$1","filtered","nodes","funcArg","context","arg","idx","payload","removeAttribute","className","klass","svg","baseVal","deserializeValue","parseJSON","traverseNode","fun","classList","camelize","uniq","emptyArray","_concat","column-count","columns","font-weight","line-height","opacity","z-index","zoom","fragmentRE","singleTagRE","tagExpanderRE","rootNodeRE","capitalRE","methodAttributes","adjacencyOperators","table","tableRow","containers","tr","tbody","thead","tfoot","td","th","*","readyRE","simpleSelectorRE","zepto","tempParent","propMap","tabindex","readonly","for","class","maxlength","cellspacing","cellpadding","rowspan","colspan","usemap","frameborder","contenteditable","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","temp","qsa","chr","toUpperCase","fragment","container","$1","innerHTML","each","isZ","init","ready","shift","found","maybeID","maybeClass","nameOnly","isSimple","getElementById","getElementsByClassName","querySelectorAll","contains","documentElement","isEmptyObject","isNumeric","val","num","Number","isNaN","inArray","elem","camelCase","uuid","support","expr","noop","elements","callback","grep","parse","split","reduce","sort","toArray","readyState","addEventListener","size","every","not","add","is","excludes","has","eq","first","last","$this","some","closest","collection","_","parents","ancestors","pluck","contents","contentDocument","siblings","child","empty","show","replaceWith","newContent","before","wrap","structure","func","clone","wrapAll","cloneNode","wrapInner","unwrap","hide","css","toggle","setting","prev","_html","originHtml","text","_text","newText","textContent","join","getAttribute","removeAttr","attribute","removeProp","attrName","multiple","selected","offset","coordinates","coords","parentOffset","offsetParent","top","getBoundingClientRect","pageXOffset","pageYOffset","Math","round","computedStyle","removeProperty","cssText","hasClass","addClass","cls","newName","removeClass","toggleClass","when","names","scrollTop","hasScrollTop","scrollTo","scrollX","scrollLeft","hasScrollLeft","scrollY","position","detach","dimension","dimensionProperty","operator","operatorIndex","inside","argType","copyByClone","nextSibling","firstChild","parentInDocument","insertBefore","ownerDocument","defaultView","triggerAndReturn","eventName","event","Event","isDefaultPrevented","triggerGlobal","ajaxStart","active","ajaxStop","ajaxBeforeSend","xhr","beforeSend","ajaxSuccess","deferred","status","success","resolveWith","ajaxComplete","ajaxError","rejectWith","complete","ajaxDataFilter","dataFilter","mimeToDataType","mime","htmlType","jsonType","scriptTypeRE","xmlTypeRE","appendQuery","url","query","serializeData","processData","param","traditional","dataType","parseArguments","serialize","scope","hash","jsonpID","rscript","blankRE","originAnchor","href","location","ajaxJSONP","ajax","responseData","abortTimeout","_callbackName","jsonpCallback","callbackName","script","originalCallback","abort","errorType","triggerHandler","head","ajaxSettings","XMLHttpRequest","accepts","json","xml","crossDomain","cache","urlAnchor","hashIndex","Deferred","protocol","host","hasPlaceholder","jsonp","headers","setHeader","nativeSetHeader","setRequestHeader","overrideMimeType","contentType","onreadystatechange","getResponseHeader","responseType","response","responseText","eval","responseXML","statusText","async","open","username","password","xhrFields","send","post","getJSON","load","escape","encodeURIComponent","Callbacks","memory","_fired","firing","firingStart","firingLength","firingIndex","list","stack","once","fire","stopOnFalse","disable","start","unique","disabled","lock","locked","fireWith","fired","tuples","_state","_promise","state","always","fail","fns","defer","tuple","returned","resolve","reject","progress","notify","stateString","sub","progressValues","progressContexts","resolveContexts","resolveValues","remain","updateFn","ctx","notifyWith","zid","_zid","findHandlers","ns","matcher","matcherFor","handlers","handler","sel","eventCapture","captureSetting","del","focusinSupported","focus","realEvent","hover","events","delegator","capture","related","relatedTarget","proxy","compatible","isImmediatePropagationStopped","_args","preventDefault","stopPropagation","removeEventListener","eventMethods","sourceMethod","returnTrue","returnFalse","timeStamp","defaultPrevented","returnValue","getPreventDefault","createProxy","originalEvent","ignoreProperties","isString","specialEvents","blur","mouseenter","mouseleave","click","mousedown","mouseup","mousemove","proxyFn","unshift","bind","unbind","one","stopImmediatePropagation","delegate","undelegate","live","die","autoRemove","evt","currentTarget","liveFired","dispatchEvent","createEvent","bubbles","initEvent","nativeGetComputedStyle","pseudoElement","_visible","process","filterRe","exec","filters","oldQsa","oldMatches","visible","hidden","checked","childRe","classTag","taggedParent","BROWSER_DATA","group","identifier","versionIdentifier","OS_DATA","version","versionSeparator","hasLocalstorage","localStorage","setItem","removeItem","hasFlash","fo","ActiveXObject","mimeTypes","enabledPlugin","getBrowserInfo","ua","extra","appName","appVersion","getBrowserData","_step","browserObject","userAgent","_iterator","browser","browserRegExp","browserRegExpResult","versionRegExp","versionRegExpResult","setBrowserVersion","splitVersion","fullVersion","majorVersion","minorVersion","getOsData","_step2","osObject","_iterator2","os","osRegExp","osRegExpResult","setOsVersion","separator","finalSeparator","substr","getViewportSize","viewportObject","setViewportOrientation","orientation","viewport","getDevice","platformRegExp","device","browserInfo","isEdge","isChrome","isSafari","isFirefox","isIE11","isChromecast","isMobile","isiOS","isAndroid","isWindowsPhone","isWin8App","isWiiU","isPS4","videoStack","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","Fullscreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","querySelector","webkitEnterFullScreen","cancelFullscreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","Config","volume","_defaultConfig","domain","_createKeyspace","_defaultValueFor","paramsString","pl","search","decode","decodeURIComponent","substring","_urlParams","_hashParams","DomRecycler","recycleVideo","tagName","attributes","DoubleEventHandler","delay","lastTime","prevented","currentTime","getTime","diffTime","Utils","BOLD","INFO","DEBUG","WARN","ERROR","LEVEL_DEBUG","LEVEL_INFO","LEVEL_WARN","LEVEL_ERROR","LEVEL_DISABLED","COLORS","DESCRIPTIONS","Log","offLevel","EXCLUDE_LIST","previousLevel","_level","newLevel","message","color","klassDescription","getInstance","_instance","info","warn","eventSplitter","eventsApi","action","rest","l","triggerEvents","run","ev","a1","a2","a3","exception","_events","_once","retain","j","_callback","allEvents","all","listeningTo","_listeningTo","_listenId","Custom","listenMethods","listenTo","listenToOnce","method","PLAYER_READY","PLAYER_RESIZE","PLAYER_FULLSCREEN","PLAYER_PLAY","PLAYER_PAUSE","PLAYER_STOP","PLAYER_ENDED","PLAYER_SEEK","PLAYER_ERROR","PLAYER_TIMEUPDATE","PLAYER_VOLUMEUPDATE","PLAYER_SUBTITLE_AVAILABLE","PLAYBACK_PROGRESS","PLAYBACK_BUFFERING","PLAYBACK_BUFFERFULL","PLAYBACK_LOADEDMETADATA","PLAYBACK_HIGHDEFINITIONUPDATE","PLAYBACK_PLAYBACKSTATE","PLAYBACK_DVR","PLAYBACK_MEDIACONTROL_DISABLE","PLAYBACK_MEDIACONTROL_ENABLE","PLAYBACK_ENDED","PLAYBACK_PLAY_INTENT","PLAYBACK_PLAY","PLAYBACK_PAUSE","PLAYBACK_SEEK","PLAYBACK_SEEKED","PLAYBACK_STOP","PLAYBACK_STATS_ADD","PLAYBACK_FRAGMENT_LOADED","PLAYBACK_LEVEL_SWITCH","PLAYBACK_SUBTITLE_AVAILABLE","PLAYBACK_SUBTITLE_CHANGED","CORE_CONTAINERS_CREATED","CORE_ACTIVE_CONTAINER_CHANGED","CORE_OPTIONS_CHANGE","CORE_READY","CORE_FULLSCREEN","CORE_RESIZE","CORE_SCREEN_ORIENTATION_CHANGED","CORE_MOUSE_MOVE","CORE_MOUSE_LEAVE","CONTAINER_PLAYBACKSTATE","CONTAINER_PLAYBACKDVRSTATECHANGED","CONTAINER_BITRATE","CONTAINER_STATS_REPORT","CONTAINER_DESTROYED","CONTAINER_READY","CONTAINER_RESIZE","CONTAINER_ERROR","CONTAINER_LOADEDMETADATA","CONTAINER_SUBTITLE_AVAILABLE","CONTAINER_SUBTITLE_CHANGED","CONTAINER_TIMEUPDATE","CONTAINER_PROGRESS","CONTAINER_PLAY","CONTAINER_STOP","CONTAINER_PAUSE","CONTAINER_ENDED","CONTAINER_CLICK","CONTAINER_DBLCLICK","CONTAINER_CONTEXTMENU","CONTAINER_MOUSE_ENTER","CONTAINER_MOUSE_LEAVE","CONTAINER_SEEK","CONTAINER_SEEKED","CONTAINER_VOLUME","CONTAINER_FULLSCREEN","CONTAINER_STATE_BUFFERING","CONTAINER_STATE_BUFFERFULL","CONTAINER_SETTINGSUPDATE","CONTAINER_HIGHDEFINITIONUPDATE","CONTAINER_MEDIACONTROL_SHOW","CONTAINER_MEDIACONTROL_HIDE","CONTAINER_MEDIACONTROL_DISABLE","CONTAINER_MEDIACONTROL_ENABLE","CONTAINER_STATS_ADD","CONTAINER_OPTIONS_CHANGE","MEDIACONTROL_RENDERED","MEDIACONTROL_FULLSCREEN","MEDIACONTROL_SHOW","MEDIACONTROL_HIDE","MEDIACONTROL_MOUSEMOVE_SEEKBAR","MEDIACONTROL_MOUSELEAVE_SEEKBAR","MEDIACONTROL_PLAYING","MEDIACONTROL_NOTPLAYING","MEDIACONTROL_CONTAINERCHANGED","MEDIACONTROL_OPTIONS_CHANGE","BaseObject","_Events","_options","evaluate","interpolate","noMatch","escapes","'","\\","\r","\n","\t"," "," ","escaper","htmlEntities","&","<",">","\"","entityRe","escapeExpr","string","counter","tmpl","render","variable","baseUrl","delegateEventSplitter","UIObject","_BaseObject","_ensureElement","delegateEvents","stopListening","undelegateEvents","setElement","attrs","PlayerError","core","FATAL","ErrorMixin","createError","useCodePrefix","origin","i18n","prefixedCode","code","defaultError","description","Levels","raw","errorData","UI","defaultUI","title","t","playerError","UICorePlugin","_UIObject","enabled","bindEvents","css_248z","Container","_i18n","playback","isReady","mediaControlDisabled","plugins","dblTapHandler","clickTimer","clickDelay","data-container","dblclick","touchend","contextmenu","ended","buffering","hasClosedCaptionsTracks","closedCaptionsTracks","closedCaptionsTrackId","trackId","onProgress","timeUpdated","onBuffering","bufferfull","settingsUpdate","loadedMetadata","highDefinitionUpdate","updateBitrate","playbackStateChanged","playbackDvrStateChanged","disableMediaControl","enableMediaControl","onSeek","onSeeked","onEnded","playing","paused","stopped","subtitleAvailable","subtitleChanged","track","dvrInUse","newBitrate","metrics","dvrEnabled","disableResizeObserver","plugin","destroy","duration","animate","isPlaying","getStartTimeOffset","_error","metadata","timeProgress","stop","pause","_this2","chromeless","allowUserInteraction","cancelClicked","_this3","handle","seek","percentage","getPlugin","isHD","isHighDefinitionInUse","_this4","resizeObserverInterval","setInterval","checkResize","clearInterval","newSize","clientWidth","clientHeight","_ref","currentSize","isResize","updateStyle","configure","enableResizeObserver","Playback","_consented","NO_OP","canAutoPlay","VOD","AOD","LIVE","ContainerFactory","loader","sources","createContainer","playbackPlugins","resolvedSource","playbackPlugin","findPlaybackPlugin","addContainerPlugins","containerPlugins","Plugin","addPlugin","css_248z$1","css_248z$2","Core","configureDomRecycler","firstResize","_boundFullscreenHandler","handleFullscreenChange","handleWindowResize","webkitfullscreenchange","data-player","_mediaControl","dummyMediaControl","_dummyMediaControl","_activeContainer","activeContainer","containerFactory","prepareContainers","createContainers","setupContainers","resolveOnContainersReady","isFullscreen","setFullscreen","setPlayerSize","previousSize","resize","triggerResize","checkSizeCallback","thereWasChange","oldHeight","oldWidth","computedSize","updateSize","innerWidth","innerHeight","_screenOrientation","removeContainer","setupContainer","renderContainers","appendToParent","_this5","activePlayback","playbackEl","_this6","fullscreenEl","_this7","resetStyle","includeResetStyle","hasCoreParent","appendTo","parentElement","CoreFactory","player","addCorePlugins","corePlugins","setupExternalInterface","externalFunctions","getExternalInterface","VERSION_REGEX","Version","major","minor","patch","_matches","other","diff","min","max","compare","filterPluginsByType","_ref2","_ref3","_ref4","Loader","registry","playbacks","currentVersion","externalPlugins","playerId","_Loader$registeredPlu","registeredPlugins","validateExternalPluginsType","addExternalPlugins","entry","_entry$prototype","supportedVersion","maxVersion","inc","minVersion","satisfies","pluginEntry","checkVersionSupport","pluginRegistry","previousEntry","playbackEntry","previousEntryIdx","memo","useReversePrecedence","groupUp","pluginsMap","reduceRight","loadExternalPluginsFirst","loadExternalPlaybacksFirst","groupPluginsByType","removeDups","pluginTypes","errorMessage","Player","playbackDefaultOptions","defaultOptions","persistConfig","_normalizeSources","disableKeyboardShortcuts","_registerOptionEventListeners","_coreFactory","parentId","setParentId","attachTo","_loader","_ready","onReady","onResize","onPlay","onPause","onStop","onError","onTimeUpdate","onVolumeUpdate","onSubtitleAvailable","_addEventListeners","_onReady","_containerChanged","_onFullscreenChange","_onResize","_onPlay","_onPause","_onStop","_onEnded","_onSeek","_onError","_onTimeUpdate","_onVolumeUpdate","_onSubtitleAvailable","newEvents","hasNewEvents","userEvent","eventType","eventsMapping","eventFunction","_addContainerEventListeners","fullscreen","getCurrentTime","getCurrentPlayback","consent","seekPercentage","mute","unmute","isDvrEnabled","isDvrInUse","ContainerPlugin","CorePlugin","UIContainerPlugin","tracksHTML","css_248z$3","MIMETYPES","codec","ogg","3gpp","webm","mkv","m3u8","AUDIO_MIMETYPES","wav","mp3","aac","oga","KNOWN_AUDIO_MIMETYPES","acc","UNKNOWN_ERROR","HTML5Video","_Playback","_destroyed","_loadStarted","_isBuffering","_playheadMoving","_playheadMovingTimer","_stopped","_ccTrackId","_setupSrc","disableContextMenu","disableVideoTagContextMenu","_minDvrSize","isValidMinimumDVRSizeConfig","minimumDVRSizeConfig","posterUrl","playbackConfig","preload","poster","defaultMuted","loop","crossOrigin","x-webkit-playsinline","playInline","controls","useVideoTagDefaultControls","playsinline","crossorigin","externalTracks","_setupExternalTracks","attemptAutoPlay","isAudioOnly","resourceUrl","_mimeTypesForUrl","audioOnly","data-html5-video","canplay","canplaythrough","durationchange","loadeddata","loadedmetadata","seeking","seeked","stalled","timeupdate","waiting","isLive","minimumDvrSize","disableCanAutoPlay","opts","autoPlayTimeout","tracks","_externalTracks","kind","lang","srcUrl","_ccIsSetup","_src","_handleBufferingEvents","_updateSettings","autoSeekFromUrl","_checkInitialSeek","_onProgress","isSeekEnabled","onDemandType","Infinity","eventHandler","_updateDvr","_stopPlayheadMovingChecks","_playheadMovingTimeOnCheck","_determineIfPlayheadMoving","_checkForClosedCaptions","_startPlayheadMovingChecks","playheadShouldBeMoving","HAVE_FUTURE_DATA","isUnknownError","formattedError","handleTextTrackChange","textTracks","garbage","dvr","seekable","seekTime","end","buffered","bufferedPos","isHTML5Video","_handleTextTrackChange","mode","showingTrack","mimeTypesByExtension","extension","_canPlay","media","mediaType","canPlayType","HTML5Audio","_HTML5Video","mimetypes","css_248z$4","HTMLImg","data-html-img","resource","noOpHTML","css_248z$5","NoOp","_noiseFrameNum","data-no-op","playbackNotSupported","playbackNotSupportedMessage","showForNoOp","_animate","buffer32","idata","createImageData","canvas","Uint32Array","buffer","random","pow","putImageData","_stop","_noise","_animationHandle","_loop","getContext","Strings","_CorePlugin","_initializeMessages","_language","fallbackLang","_messages","defaultMessages","en","back_to_live","playback_not_supported","default_error_title","default_error_message","pt","es","ru","fr","et","ar","strings","SourcesPlugin","onContainersCreated","firstValidSource","registerPlugin","registerPlayback","main"],"mappings":"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","file":"rtmp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RTMP\"] = factory();\n\telse\n\t\troot[\"RTMP\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RTMP\"] = factory();\n\telse\n\t\troot[\"RTMP\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports['default'] = __webpack_require__(1);module.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Copyright 2014 Globo.com Player authors. All rights reserved.\n\t// Use of this source code is governed by a BSD-style\n\t// license that can be found in the LICENSE file.\n\t\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if(\"value\" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function: while(_again) {var object=_x,property=_x2,receiver=_x3;_again = false;if(object === null)object = Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc === undefined){var parent=Object.getPrototypeOf(object);if(parent === null){return undefined;}else {_x = parent;_x2 = property;_x3 = receiver;_again = true;desc = parent = undefined;continue _function;}}else if(\"value\" in desc){return desc.value;}else {var getter=desc.get;if(getter === undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj && obj.__esModule?obj:{\"default\":obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _inherits(subClass,superClass){if(typeof superClass !== \"function\" && superClass !== null){throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__ = superClass;}var _clapprCore=__webpack_require__(2);var _htmlLoaderPublicFlashHtml=__webpack_require__(3);var _htmlLoaderPublicFlashHtml2=_interopRequireDefault(_htmlLoaderPublicFlashHtml);var _rawLoaderSassLoaderPublicFlashScss=__webpack_require__(4);var _rawLoaderSassLoaderPublicFlashScss2=_interopRequireDefault(_rawLoaderSassLoaderPublicFlashScss);var RTMP=(function(_Flash){_inherits(RTMP,_Flash);_createClass(RTMP,[{key:\"name\",get:function get(){return \"rtmp\";}},{key:\"tagName\",get:function get(){return \"object\";}},{key:\"template\",get:function get(){return (0,_clapprCore.template)(_htmlLoaderPublicFlashHtml2[\"default\"]);}},{key:\"attributes\",get:function get(){return {\"data-rtmp\":\"\",data:this.swfPath,type:\"application/x-shockwave-flash\",width:\"100%\",height:\"100%\"};}}]);function RTMP(options){_classCallCheck(this,RTMP);_get(Object.getPrototypeOf(RTMP.prototype),\"constructor\",this).call(this,options);this.options.rtmpConfig = this.options.rtmpConfig || {};this.options.rtmpConfig.swfPath = this.options.rtmpConfig.swfPath || \"//cdn.jsdelivr.net/clappr.rtmp/latest/assets/RTMP.swf\";this.options.rtmpConfig.wmode = this.options.rtmpConfig.wmode || \"transparent\"; // Default to transparent wmode - IE always uses gpu as per objectIE\n\tthis.options.rtmpConfig.bufferTime = this.options.rtmpConfig.bufferTime === undefined?0.1:this.options.rtmpConfig.bufferTime;this.options.rtmpConfig.scaling = this.options.rtmpConfig.scaling || \"letterbox\";this.options.rtmpConfig.playbackType = this.options.rtmpConfig.playbackType || this.options.src.indexOf(\"live\") > -1;this.options.rtmpConfig.useAppInstance = this.options.rtmpConfig.useAppInstance === undefined?false:this.options.rtmpConfig.useAppInstance;this.options.rtmpConfig.proxyType = this.options.rtmpConfig.proxyType || \"none\";this.options.rtmpConfig.startLevel = this.options.rtmpConfig.startLevel === undefined?-1:this.options.rtmpConfig.startLevel;this.options.rtmpConfig.autoSwitch = this.options.rtmpConfig.autoSwitch === undefined?false:this.options.rtmpConfig.autoSwitch;this.options.rtmpConfig.switchRules = this.options.rtmpConfig.switchRules;this.addListeners();this._setupPlaybackType();}_createClass(RTMP,[{key:\"getPlaybackType\",value:function getPlaybackType(){return this._playbackType;}},{key:\"addListeners\",value:function addListeners(){_clapprCore.Mediator.on(this.uniqueId + \":progress\",this._progress,this);_clapprCore.Mediator.on(this.uniqueId + \":timeupdate\",this._updateTime,this);_clapprCore.Mediator.on(this.uniqueId + \":statechanged\",this._checkState,this);_clapprCore.Mediator.on(this.uniqueId + \":playbackready\",this._playbackReady,this);_clapprCore.Mediator.on(this.uniqueId + \":onloaded\",this._reporLevels,this);_clapprCore.Mediator.on(this.uniqueId + \":levelChanging\",this._levelChanging,this);_clapprCore.Mediator.on(this.uniqueId + \":levelChanged\",this._levelChange,this);_clapprCore.Mediator.on(this.uniqueId + \":flashready\",this._bootstrap,this);}},{key:\"stopListening\",value:function stopListening(){_get(Object.getPrototypeOf(RTMP.prototype),\"stopListening\",this).call(this);_clapprCore.Mediator.off(this.uniqueId + \":progress\");_clapprCore.Mediator.off(this.uniqueId + \":timeupdate\");_clapprCore.Mediator.off(this.uniqueId + \":statechanged\");_clapprCore.Mediator.off(this.uniqueId + \":flashready\");}},{key:\"_bootstrap\",value:function _bootstrap(){this.el.width = \"100%\";this.el.height = \"100%\";this.options.autoPlay && this.play();this._setupSettings();}},{key:\"_updateTime\",value:function _updateTime(){if(this.getPlaybackType() === \"live\"){this.trigger(_clapprCore.Events.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name);}else {this.trigger(_clapprCore.Events.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name);}}},{key:\"_levelChanging\",value:function _levelChanging(){this.trigger(_clapprCore.Events.PLAYBACK_LEVEL_SWITCH_START);}},{key:\"_levelChange\",value:function _levelChange(){this.trigger(_clapprCore.Events.PLAYBACK_LEVEL_SWITCH_END);this.trigger(_clapprCore.Events.PLAYBACK_BITRATE,{level:this.currentLevel});}},{key:\"findLevelBy\",value:function findLevelBy(id){var foundLevel;this.levels.forEach(function(level){if(level.id === id){foundLevel = level;}});return foundLevel;}},{key:\"_setupPlaybackType\",value:function _setupPlaybackType(){this._playbackType = this.options.rtmpConfig.playbackType;}},{key:\"_setupSettings\",value:function _setupSettings(){if(this.getPlaybackType() === \"live\"){this.settings.left = [\"playpause\"];this.settings.right = [\"fullscreen\",\"volume\"];this.settings.seekEnabled = false;}else {this.settings.left = [\"playpause\",\"position\",\"duration\"];this.settings.right = [\"fullscreen\",\"volume\"];}this.trigger(_clapprCore.Events.PLAYBACK_SETTINGSUPDATE,this.name);}},{key:\"render\",value:function render(){this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,playbackId:this.uniqueId,wmode:this.options.rtmpConfig.wmode,scaling:this.options.rtmpConfig.scaling,bufferTime:this.options.rtmpConfig.bufferTime,playbackType:this.options.rtmpConfig.playbackType,startLevel:this.options.rtmpConfig.startLevel,autoSwitch:this.options.rtmpConfig.autoSwitch,switchRules:this._switchRulesJSON,useAppInstance:this.options.rtmpConfig.useAppInstance,proxyType:this.options.rtmpConfig.proxyType}));if(_clapprCore.Browser.isIE){this.$(\"embed\").remove();if(_clapprCore.Browser.isLegacyIE){this.$el.attr(\"classid\",IE_CLASSID);}}this.el.id = this.cid;var style=_clapprCore.Styler.getStyleFor(_rawLoaderSassLoaderPublicFlashScss2[\"default\"]);this.$el.append(style);return this;}},{key:\"_checkState\",value:function _checkState(){_get(Object.getPrototypeOf(RTMP.prototype),\"_checkState\",this).call(this);if(this.el.getState() === \"ERROR\"){this.trigger(_clapprCore.Events.PLAYBACK_ERROR,this.name);}}},{key:\"_playbackReady\",value:function _playbackReady(){this._isReadyState = true;this.trigger(_clapprCore.Events.PLAYBACK_READY,this.name);}},{key:\"_reporLevels\",value:function _reporLevels(){if(this.isDynamicStream){if(this.levels){if(this.options.rtmpConfig.autoSwitch === true){this.trigger(_clapprCore.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels,-1);this.trigger(_clapprCore.Events.PLAYBACK_BITRATE,{level:this.currentLevel});}else {this.trigger(_clapprCore.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels,this.options.rtmpConfig.startLevel);}}}}},{key:\"swfPath\",get:function get(){return this.options.rtmpConfig.swfPath;}},{key:\"currentLevel\",get:function get(){if(this._isReadyState){return this.el.getCurrentLevel();}return undefined;},set:function set(level){this.el.setLevel(level);if(level === -1 && level !== this.currentLevel){this.trigger(_clapprCore.Events.PLAYBACK_LEVEL_SWITCH_END);this.trigger(_clapprCore.Events.PLAYBACK_BITRATE,{level:this.currentLevel});}}},{key:\"numLevels\",get:function get(){if(this._isReadyState){return this.el.getNumLevels();}return undefined;}},{key:\"autoSwitchLevels\",get:function get(){return this.el.isAutoSwitchLevels();}},{key:\"levels\",get:function get(){var levels=[];for(var i=0;i < this.numLevels;i++) {var bitrate=this.el.getBitrateForLevel(i);levels.push({id:i,label:bitrate + \"Kbps\"});}return levels;}},{key:\"isDynamicStream\",get:function get(){return this.el.isDynamicStream();}},{key:\"_switchRulesJSON\",get:function get(){if(this.options.rtmpConfig.switchRules !== undefined){return JSON.stringify(this.options.rtmpConfig.switchRules).replace(/\"/g,\"&quot;\");}return \"\";}}]);return RTMP;})(_clapprCore.Flash);exports[\"default\"] = RTMP;RTMP.canPlay = function(source,mimeType){return !!(source.indexOf(\"rtmp://\") > -1 || source.indexOf(\"rtmps://\") > -1 || source.indexOf(\".smil\") > -1 || mimeType && mimeType.indexOf(\"rtmp\") > -1);};RTMP.debug = function(s){return console.log(s);};module.exports = exports[\"default\"];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';(function(global,factory){ true?factory(exports):typeof define === 'function' && define.amd?define(['exports'],factory):(global = typeof globalThis !== 'undefined'?globalThis:global || self,factory(global.Clappr = {}));})(undefined,function(exports){'use strict';function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\"){_typeof = function(obj){return typeof obj;};}else {_typeof = function(obj){return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype?\"symbol\":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i < props.length;i++) {var descriptor=props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if(\"value\" in descriptor)descriptor.writable = true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key] = value;}return obj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols = symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread2(target){for(var i=1;i < arguments.length;i++) {var source=arguments[i] != null?arguments[i]:{};if(i % 2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else {ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _inherits(subClass,superClass){if(typeof superClass !== \"function\" && superClass !== null){throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _getPrototypeOf(o){_getPrototypeOf = Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _setPrototypeOf(o,p){_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o,p){o.__proto__ = p;return o;};return _setPrototypeOf(o,p);}function _isNativeReflectConstruct(){if(typeof Reflect === \"undefined\" || !Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy === \"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e) {return false;}}function _assertThisInitialized(self){if(self === void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _possibleConstructorReturn(self,call){if(call && (typeof call === \"object\" || typeof call === \"function\")){return call;}return _assertThisInitialized(self);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result = Reflect.construct(Super,arguments,NewTarget);}else {result = Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)) {object = _getPrototypeOf(object);if(object === null)break;}return object;}function _get(target,property,receiver){if(typeof Reflect !== \"undefined\" && Reflect.get){_get = Reflect.get;}else {_get = function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver || target);}function _slicedToArray(arr,i){return _arrayWithHoles(arr) || _iterableToArrayLimit(arr,i) || _unsupportedIterableToArray(arr,i) || _nonIterableRest();}function _toConsumableArray(arr){return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _iterableToArray(iter){if(typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter))return Array.from(iter);}function _iterableToArrayLimit(arr,i){if(typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n = (_s = _i.next()).done);_n = true) {_arr.push(_s.value);if(i && _arr.length === i)break;}}catch(err) {_d = true;_e = err;}finally {try{if(!_n && _i[\"return\"] != null)_i[\"return\"]();}finally {if(_d)throw _e;}}return _arr;}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o === \"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n === \"Object\" && o.constructor)n = o.constructor.name;if(n === \"Map\" || n === \"Set\")return Array.from(o);if(n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len == null || len > arr.length)len = arr.length;for(var i=0,arr2=new Array(len);i < len;i++) arr2[i] = arr[i];return arr2;}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol === \"undefined\" || o[Symbol.iterator] == null){if(Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\"){if(it)o = it;var i=0;var F=function F(){};return {s:F,n:function n(){if(i >= o.length)return {done:true};return {done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}var normalCompletion=true,didErr=false,err;return {s:function s(){it = o[Symbol.iterator]();},n:function n(){var step=it.next();normalCompletion = step.done;return step;},e:function e(_e3){didErr = true;err = _e3;},f:function f(){try{if(!normalCompletion && it['return'] != null)it['return']();}finally {if(didErr)throw err;}}};} // Copyright 2014 Globo.com Player authors. All rights reserved.\n\t// Use of this source code is governed by a BSD-style\n\t// license that can be found in the LICENSE file.\n\t/* istanbul ignore file */ /**\n\t   * Array.prototype.find\n\t   *\n\t   * Original source : https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n\t   * See also : https://tc39.github.io/ecma262/#sec-array.prototype.find\n\t   */if(!Array.prototype.find){ // eslint-disable-next-line\n\tObject.defineProperty(Array.prototype,'find',{ // Note: ES6 arrow function syntax is not used on purpose to avoid this to be undefined\n\tvalue:function value(predicate){ // 1. Let O be ? ToObject(this value).\n\tif(this == null)throw new TypeError('\"this\" is null or not defined');var o=Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\tvar len=o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\tif(typeof predicate !== 'function')throw new TypeError('predicate must be a function'); // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\tvar thisArg=arguments[1]; // 5. Let k be 0.\n\tvar k=0; // 6. Repeat, while k < len\n\twhile(k < len) { // a. Let Pk be ! ToString(k).\n\t// b. Let kValue be ? Get(O, Pk).\n\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\t// d. If testResult is true, return kValue.\n\tvar kValue=o[k];if(predicate.call(thisArg,kValue,k,o))return kValue; // e. Increase k by 1.\n\tk++;} // 7. Return undefined.\n\treturn undefined;}});} // polyfills for smart TVs\n\tif(!Object.entries){Object.entries = function(obj){var ownProps=Object.keys(obj),i=ownProps.length,resArray=new Array(i); // preallocate the Array\n\twhile(i--) {resArray[i] = [ownProps[i],obj[ownProps[i]]];}return resArray;};}if(!Object.values){Object.values = function(obj){var ownProps=Object.keys(obj),i=ownProps.length,resArray=new Array(i); // preallocate the Array\n\twhile(i--) {resArray[i] = obj[ownProps[i]];}return resArray;};} /**\n\t   * Object.assign\n\t   * This polyfill doesn't support symbol properties, since ES5 doesn't have symbols anyway\n\t   *\n\t   * Original source : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\t   */if(typeof Object.assign != 'function'){ // Must be writable: true, enumerable: false, configurable: true\n\tObject.defineProperty(Object,'assign',{ // length of function is 2.\n\tvalue:function assign(target,varArgs){if(target == null){ // TypeError if undefined or null\n\tthrow new TypeError('Cannot convert undefined or null to object');}var to=Object(target);for(var index=1;index < arguments.length;index++) {var nextSource=arguments[index];if(nextSource != null){ // Skip over if undefined or null\n\tfor(var nextKey in nextSource) { // Avoid bugs when hasOwnProperty is shadowed\n\tif(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey] = nextSource[nextKey];}}}}return to;},writable:true,configurable:true});} // https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n\tif(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,'findIndex',{value:function value(predicate){ // 1. Let O be ? ToObject(this value).\n\tif(this == null){throw new TypeError('\"this\" is null or not defined');}var o=Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\tvar len=o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\tif(typeof predicate !== 'function'){throw new TypeError('predicate must be a function');} // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\tvar thisArg=arguments[1]; // 5. Let k be 0.\n\tvar k=0; // 6. Repeat, while k < len\n\twhile(k < len) { // a. Let Pk be ! ToString(k).\n\t// b. Let kValue be ? Get(O, Pk).\n\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\t// d. If testResult is true, return k.\n\tvar kValue=o[k];if(predicate.call(thisArg,kValue,k,o)){return k;} // e. Increase k by 1.\n\tk++;} // 7. Return -1.\n\treturn -1;},configurable:true,writable:true});} /* istanbul ignore file */ // https://github.com/mathiasbynens/small\n\tvar mp4='data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=';var Media={mp4:mp4}; /* Zepto v1.2.0 - zepto ajax callbacks deferred event ie selector - zeptojs.com/license */var Zepto=(function(){var undefined$1,key,$,classList,emptyArray=[],_concat=emptyArray.concat,_filter=emptyArray.filter,_slice=emptyArray.slice,document=window.document,elementDisplay={},classCache={},cssNumber={'column-count':1,'columns':1,'font-weight':1,'line-height':1,'opacity':1,'z-index':1,'zoom':1},fragmentRE=/^\\s*<(\\w+|!)[^>]*>/,singleTagRE=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,tagExpanderRE=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,rootNodeRE=/^(?:body|html)$/i,capitalRE=/([A-Z])/g, // special attributes that should be get/set via method calls\n\tmethodAttributes=['val','css','html','text','data','width','height','offset'],adjacencyOperators=['after','prepend','before','append'],table=document.createElement('table'),tableRow=document.createElement('tr'),containers={'tr':document.createElement('tbody'),'tbody':table,'thead':table,'tfoot':table,'td':tableRow,'th':tableRow,'*':document.createElement('div')},readyRE=/complete|loaded|interactive/,simpleSelectorRE=/^[\\w-]*$/,class2type={},toString=class2type.toString,zepto={},camelize,uniq,tempParent=document.createElement('div'),propMap={'tabindex':'tabIndex','readonly':'readOnly','for':'htmlFor','class':'className','maxlength':'maxLength','cellspacing':'cellSpacing','cellpadding':'cellPadding','rowspan':'rowSpan','colspan':'colSpan','usemap':'useMap','frameborder':'frameBorder','contenteditable':'contentEditable'},isArray=Array.isArray || function(object){return object instanceof Array;};zepto.matches = function(element,selector){if(!selector || !element || element.nodeType !== 1)return false;var matchesSelector=element.matches || element.webkitMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.matchesSelector;if(matchesSelector)return matchesSelector.call(element,selector); // fall back to performing a selector:\n\tvar match,parent=element.parentNode,temp=!parent;if(temp)(parent = tempParent).appendChild(element);match = ~zepto.qsa(parent,selector).indexOf(element);temp && tempParent.removeChild(element);return match;};function type(obj){return obj == null?String(obj):class2type[toString.call(obj)] || \"object\";}function isFunction(value){return type(value) == \"function\";}function isWindow(obj){return obj != null && obj == obj.window;}function isDocument(obj){return obj != null && obj.nodeType == obj.DOCUMENT_NODE;}function isObject(obj){return type(obj) == \"object\";}function isPlainObject(obj){return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype;}function likeArray(obj){var length=!!obj && 'length' in obj && obj.length,type=$.type(obj);return 'function' != type && !isWindow(obj) && ('array' == type || length === 0 || typeof length == 'number' && length > 0 && length - 1 in obj);}function compact(array){return _filter.call(array,function(item){return item != null;});}function flatten(array){return array.length > 0?$.fn.concat.apply([],array):array;}camelize = function(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():'';});};function dasherize(str){return str.replace(/::/g,'/').replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\\d])([A-Z])/g,'$1_$2').replace(/_/g,'-').toLowerCase();}uniq = function(array){return _filter.call(array,function(item,idx){return array.indexOf(item) == idx;});};function classRE(name){return name in classCache?classCache[name]:classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)');}function maybeAddPx(name,value){return typeof value == \"number\" && !cssNumber[dasherize(name)]?value + \"px\":value;}function defaultDisplay(nodeName){var element,display;if(!elementDisplay[nodeName]){element = document.createElement(nodeName);document.body.appendChild(element);display = getComputedStyle(element,'').getPropertyValue(\"display\");element.parentNode.removeChild(element);display == \"none\" && (display = \"block\");elementDisplay[nodeName] = display;}return elementDisplay[nodeName];}function _children(element){return 'children' in element?_slice.call(element.children):$.map(element.childNodes,function(node){if(node.nodeType == 1)return node;});}function Z(dom,selector){var i,len=dom?dom.length:0;for(i = 0;i < len;i++) this[i] = dom[i];this.length = len;this.selector = selector || '';} // `$.zepto.fragment` takes a html string and an optional tag name\n\t// to generate DOM nodes from the given html string.\n\t// The generated DOM nodes are returned as an array.\n\t// This function can be overridden in plugins for example to make\n\t// it compatible with browsers that don't support the DOM fully.\n\tzepto.fragment = function(html,name,properties){var dom,nodes,container; // A special case optimization for a single tag\n\tif(singleTagRE.test(html))dom = $(document.createElement(RegExp.$1));if(!dom){if(html.replace)html = html.replace(tagExpanderRE,\"<$1></$2>\");if(name === undefined$1)name = fragmentRE.test(html) && RegExp.$1;if(!(name in containers))name = '*';container = containers[name];container.innerHTML = '' + html;dom = $.each(_slice.call(container.childNodes),function(){container.removeChild(this);});}if(isPlainObject(properties)){nodes = $(dom);$.each(properties,function(key,value){if(methodAttributes.indexOf(key) > -1)nodes[key](value);else nodes.attr(key,value);});}return dom;}; // `$.zepto.Z` swaps out the prototype of the given `dom` array\n\t// of nodes with `$.fn` and thus supplying all the Zepto functions\n\t// to the array. This method can be overridden in plugins.\n\tzepto.Z = function(dom,selector){return new Z(dom,selector);}; // `$.zepto.isZ` should return `true` if the given object is a Zepto\n\t// collection. This method can be overridden in plugins.\n\tzepto.isZ = function(object){return object instanceof zepto.Z;}; // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\n\t// takes a CSS selector and an optional context (and handles various\n\t// special cases).\n\t// This method can be overridden in plugins.\n\tzepto.init = function(selector,context){var dom; // If nothing given, return an empty Zepto collection\n\tif(!selector)return zepto.Z(); // Optimize for string selectors\n\telse if(typeof selector == 'string'){selector = selector.trim(); // If it's a html fragment, create nodes from it\n\t// Note: In both Chrome 21 and Firefox 15, DOM error 12\n\t// is thrown if the fragment doesn't begin with <\n\tif(selector[0] == '<' && fragmentRE.test(selector))dom = zepto.fragment(selector,RegExp.$1,context),selector = null; // If there's a context, create a collection on that context first, and select\n\t// nodes from there\n\telse if(context !== undefined$1)return $(context).find(selector); // If it's a CSS selector, use it to select nodes.\n\telse dom = zepto.qsa(document,selector);} // If a function is given, call it when the DOM is ready\n\telse if(isFunction(selector))return $(document).ready(selector); // If a Zepto collection is given, just return it\n\telse if(zepto.isZ(selector))return selector;else { // normalize array if an array of nodes is given\n\tif(isArray(selector))dom = compact(selector); // Wrap DOM nodes.\n\telse if(isObject(selector))dom = [selector],selector = null; // If it's a html fragment, create nodes from it\n\telse if(fragmentRE.test(selector))dom = zepto.fragment(selector.trim(),RegExp.$1,context),selector = null; // If there's a context, create a collection on that context first, and select\n\t// nodes from there\n\telse if(context !== undefined$1)return $(context).find(selector); // And last but no least, if it's a CSS selector, use it to select nodes.\n\telse dom = zepto.qsa(document,selector);} // create a new Zepto collection from the nodes found\n\treturn zepto.Z(dom,selector);}; // `$` will be the base `Zepto` object. When calling this\n\t// function just call `$.zepto.init, which makes the implementation\n\t// details of selecting nodes and creating Zepto collections\n\t// patchable in plugins.\n\t$ = function(selector,context){return zepto.init(selector,context);};function extend(target,source,deep){for(key in source) if(deep && (isPlainObject(source[key]) || isArray(source[key]))){if(isPlainObject(source[key]) && !isPlainObject(target[key]))target[key] = {};if(isArray(source[key]) && !isArray(target[key]))target[key] = [];extend(target[key],source[key],deep);}else if(source[key] !== undefined$1)target[key] = source[key];} // Copy all but undefined properties from one or more\n\t// objects to the `target` object.\n\t$.extend = function(target){var deep,args=_slice.call(arguments,1);if(typeof target == 'boolean'){deep = target;target = args.shift();}args.forEach(function(arg){extend(target,arg,deep);});return target;}; // `$.zepto.qsa` is Zepto's CSS selector implementation which\n\t// uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\n\t// This method can be overridden in plugins.\n\tzepto.qsa = function(element,selector){var found,maybeID=selector[0] == '#',maybeClass=!maybeID && selector[0] == '.',nameOnly=maybeID || maybeClass?selector.slice(1):selector, // Ensure that a 1 char tag name still gets checked\n\tisSimple=simpleSelectorRE.test(nameOnly);return element.getElementById && isSimple && maybeID? // Safari DocumentFragment doesn't have getElementById\n\t(found = element.getElementById(nameOnly))?[found]:[]:element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11?[]:_slice.call(isSimple && !maybeID && element.getElementsByClassName? // DocumentFragment doesn't have getElementsByClassName/TagName\n\tmaybeClass?element.getElementsByClassName(nameOnly): // If it's simple, it could be a class\n\telement.getElementsByTagName(selector): // Or a tag\n\telement.querySelectorAll(selector) // Or it's not simple, and we need to query all\n\t);};function filtered(nodes,selector){return selector == null?$(nodes):$(nodes).filter(selector);}$.contains = document.documentElement.contains?function(parent,node){return parent !== node && parent.contains(node);}:function(parent,node){while(node && (node = node.parentNode)) if(node === parent)return true;return false;};function funcArg(context,arg,idx,payload){return isFunction(arg)?arg.call(context,idx,payload):arg;}function setAttribute(node,name,value){value == null?node.removeAttribute(name):node.setAttribute(name,value);} // access className property while respecting SVGAnimatedString\n\tfunction className(node,value){var klass=node.className || '',svg=klass && klass.baseVal !== undefined$1;if(value === undefined$1)return svg?klass.baseVal:klass;svg?klass.baseVal = value:node.className = value;} // \"true\"  => true\n\t// \"false\" => false\n\t// \"null\"  => null\n\t// \"42\"    => 42\n\t// \"42.5\"  => 42.5\n\t// \"08\"    => \"08\"\n\t// JSON    => parse if valid\n\t// String  => self\n\tfunction deserializeValue(value){try{return value?value == \"true\" || (value == \"false\"?false:value == \"null\"?null:+value + \"\" == value?+value:/^[\\[\\{]/.test(value)?$.parseJSON(value):value):value;}catch(e) {return value;}}$.type = type;$.isFunction = isFunction;$.isWindow = isWindow;$.isArray = isArray;$.isPlainObject = isPlainObject;$.isEmptyObject = function(obj){var name;for(name in obj) return false;return true;};$.isNumeric = function(val){var num=Number(val),type=typeof val;return val != null && type != 'boolean' && (type != 'string' || val.length) && !isNaN(num) && isFinite(num) || false;};$.inArray = function(elem,array,i){return emptyArray.indexOf.call(array,elem,i);};$.camelCase = camelize;$.trim = function(str){return str == null?\"\":String.prototype.trim.call(str);}; // plugin compatibility\n\t$.uuid = 0;$.support = {};$.expr = {};$.noop = function(){};$.map = function(elements,callback){var value,values=[],i,key;if(likeArray(elements))for(i = 0;i < elements.length;i++) {value = callback(elements[i],i);if(value != null)values.push(value);}else for(key in elements) {value = callback(elements[key],key);if(value != null)values.push(value);}return flatten(values);};$.each = function(elements,callback){var i,key;if(likeArray(elements)){for(i = 0;i < elements.length;i++) if(callback.call(elements[i],i,elements[i]) === false)return elements;}else {for(key in elements) if(callback.call(elements[key],key,elements[key]) === false)return elements;}return elements;};$.grep = function(elements,callback){return _filter.call(elements,callback);};if(window.JSON)$.parseJSON = JSON.parse; // Populate the class2type map\n\t$.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(i,name){class2type[\"[object \" + name + \"]\"] = name.toLowerCase();}); // Define methods that will be available on all\n\t// Zepto collections\n\t$.fn = {constructor:zepto.Z,length:0, // Because a collection acts like an array\n\t// copy over these useful array functions.\n\tforEach:emptyArray.forEach,reduce:emptyArray.reduce,push:emptyArray.push,sort:emptyArray.sort,splice:emptyArray.splice,indexOf:emptyArray.indexOf,concat:function concat(){var i,value,args=[];for(i = 0;i < arguments.length;i++) {value = arguments[i];args[i] = zepto.isZ(value)?value.toArray():value;}return _concat.apply(zepto.isZ(this)?this.toArray():this,args);}, // `map` and `slice` in the jQuery API work differently\n\t// from their array counterparts\n\tmap:function map(fn){return $($.map(this,function(el,i){return fn.call(el,i,el);}));},slice:function slice(){return $(_slice.apply(this,arguments));},ready:function ready(callback){ // need to check if document.body exists for IE as that browser reports\n\t// document ready when it hasn't yet created the body element\n\tif(readyRE.test(document.readyState) && document.body)callback($);else document.addEventListener('DOMContentLoaded',function(){callback($);},false);return this;},get:function get(idx){return idx === undefined$1?_slice.call(this):this[idx >= 0?idx:idx + this.length];},toArray:function toArray(){return this.get();},size:function size(){return this.length;},remove:function remove(){return this.each(function(){if(this.parentNode != null)this.parentNode.removeChild(this);});},each:function each(callback){emptyArray.every.call(this,function(el,idx){return callback.call(el,idx,el) !== false;});return this;},filter:function filter(selector){if(isFunction(selector))return this.not(this.not(selector));return $(_filter.call(this,function(element){return zepto.matches(element,selector);}));},add:function add(selector,context){return $(uniq(this.concat($(selector,context))));},is:function is(selector){return this.length > 0 && zepto.matches(this[0],selector);},not:function not(selector){var nodes=[];if(isFunction(selector) && selector.call !== undefined$1)this.each(function(idx){if(!selector.call(this,idx))nodes.push(this);});else {var excludes=typeof selector == 'string'?this.filter(selector):likeArray(selector) && isFunction(selector.item)?_slice.call(selector):$(selector);this.forEach(function(el){if(excludes.indexOf(el) < 0)nodes.push(el);});}return $(nodes);},has:function has(selector){return this.filter(function(){return isObject(selector)?$.contains(this,selector):$(this).find(selector).size();});},eq:function eq(idx){return idx === -1?this.slice(idx):this.slice(idx,+idx + 1);},first:function first(){var el=this[0];return el && !isObject(el)?el:$(el);},last:function last(){var el=this[this.length - 1];return el && !isObject(el)?el:$(el);},find:function find(selector){var result,$this=this;if(!selector)result = $();else if(typeof selector == 'object')result = $(selector).filter(function(){var node=this;return emptyArray.some.call($this,function(parent){return $.contains(parent,node);});});else if(this.length == 1)result = $(zepto.qsa(this[0],selector));else result = this.map(function(){return zepto.qsa(this,selector);});return result;},closest:function closest(selector,context){var nodes=[],collection=typeof selector == 'object' && $(selector);this.each(function(_,node){while(node && !(collection?collection.indexOf(node) >= 0:zepto.matches(node,selector))) node = node !== context && !isDocument(node) && node.parentNode;if(node && nodes.indexOf(node) < 0)nodes.push(node);});return $(nodes);},parents:function parents(selector){var ancestors=[],nodes=this;while(nodes.length > 0) nodes = $.map(nodes,function(node){if((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0){ancestors.push(node);return node;}});return filtered(ancestors,selector);},parent:function parent(selector){return filtered(uniq(this.pluck('parentNode')),selector);},children:function children(selector){return filtered(this.map(function(){return _children(this);}),selector);},contents:function contents(){return this.map(function(){return this.contentDocument || _slice.call(this.childNodes);});},siblings:function siblings(selector){return filtered(this.map(function(i,el){return _filter.call(_children(el.parentNode),function(child){return child !== el;});}),selector);},empty:function empty(){return this.each(function(){this.innerHTML = '';});}, // `pluck` is borrowed from Prototype.js\n\tpluck:function pluck(property){return $.map(this,function(el){return el[property];});},show:function show(){return this.each(function(){this.style.display == \"none\" && (this.style.display = '');if(getComputedStyle(this,'').getPropertyValue(\"display\") == \"none\")this.style.display = defaultDisplay(this.nodeName);});},replaceWith:function replaceWith(newContent){return this.before(newContent).remove();},wrap:function wrap(structure){var func=isFunction(structure);if(this[0] && !func)var dom=$(structure).get(0),clone=dom.parentNode || this.length > 1;return this.each(function(index){$(this).wrapAll(func?structure.call(this,index):clone?dom.cloneNode(true):dom);});},wrapAll:function wrapAll(structure){if(this[0]){$(this[0]).before(structure = $(structure));var children; // drill down to the inmost element\n\twhile((children = structure.children()).length) structure = children.first();$(structure).append(this);}return this;},wrapInner:function wrapInner(structure){var func=isFunction(structure);return this.each(function(index){var self=$(this),contents=self.contents(),dom=func?structure.call(this,index):structure;contents.length?contents.wrapAll(dom):self.append(dom);});},unwrap:function unwrap(){this.parent().each(function(){$(this).replaceWith($(this).children());});return this;},clone:function clone(){return this.map(function(){return this.cloneNode(true);});},hide:function hide(){return this.css(\"display\",\"none\");},toggle:function toggle(setting){return this.each(function(){var el=$(this);(setting === undefined$1?el.css(\"display\") == \"none\":setting)?el.show():el.hide();});},prev:function prev(selector){return $(this.pluck('previousElementSibling')).filter(selector || '*');},next:function next(selector){return $(this.pluck('nextElementSibling')).filter(selector || '*');},html:function html(_html){return 0 in arguments?this.each(function(idx){var originHtml=this.innerHTML;$(this).empty().append(funcArg(this,_html,idx,originHtml));}):0 in this?this[0].innerHTML:null;},text:function text(_text){return 0 in arguments?this.each(function(idx){var newText=funcArg(this,_text,idx,this.textContent);this.textContent = newText == null?'':'' + newText;}):0 in this?this.pluck('textContent').join(\"\"):null;},attr:function attr(name,value){var result;return typeof name == 'string' && !(1 in arguments)?0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null?result:undefined$1:this.each(function(idx){if(this.nodeType !== 1)return;if(isObject(name))for(key in name) setAttribute(this,key,name[key]);else setAttribute(this,name,funcArg(this,value,idx,this.getAttribute(name)));});},removeAttr:function removeAttr(name){return this.each(function(){this.nodeType === 1 && name.split(' ').forEach(function(attribute){setAttribute(this,attribute);},this);});},prop:function prop(name,value){name = propMap[name] || name;return 1 in arguments?this.each(function(idx){this[name] = funcArg(this,value,idx,this[name]);}):this[0] && this[0][name];},removeProp:function removeProp(name){name = propMap[name] || name;return this.each(function(){delete this[name];});},data:function data(name,value){var attrName='data-' + name.replace(capitalRE,'-$1').toLowerCase();var data=1 in arguments?this.attr(attrName,value):this.attr(attrName);return data !== null?deserializeValue(data):undefined$1;},val:function val(value){if(0 in arguments){if(value == null)value = \"\";return this.each(function(idx){this.value = funcArg(this,value,idx,this.value);});}else {return this[0] && (this[0].multiple?$(this[0]).find('option').filter(function(){return this.selected;}).pluck('value'):this[0].value);}},offset:function offset(coordinates){if(coordinates)return this.each(function(index){var $this=$(this),coords=funcArg(this,coordinates,index,$this.offset()),parentOffset=$this.offsetParent().offset(),props={top:coords.top - parentOffset.top,left:coords.left - parentOffset.left};if($this.css('position') == 'static')props['position'] = 'relative';$this.css(props);});if(!this.length)return null;if(document.documentElement !== this[0] && !$.contains(document.documentElement,this[0]))return {top:0,left:0};var obj=this[0].getBoundingClientRect();return {left:obj.left + window.pageXOffset,top:obj.top + window.pageYOffset,width:Math.round(obj.width),height:Math.round(obj.height)};},css:function css(property,value){if(arguments.length < 2){var element=this[0];if(typeof property == 'string'){if(!element)return;return element.style[camelize(property)] || getComputedStyle(element,'').getPropertyValue(property);}else if(isArray(property)){if(!element)return;var props={};var computedStyle=getComputedStyle(element,'');$.each(property,function(_,prop){props[prop] = element.style[camelize(prop)] || computedStyle.getPropertyValue(prop);});return props;}}var css='';if(type(property) == 'string'){if(!value && value !== 0)this.each(function(){this.style.removeProperty(dasherize(property));});else css = dasherize(property) + \":\" + maybeAddPx(property,value);}else {for(key in property) if(!property[key] && property[key] !== 0)this.each(function(){this.style.removeProperty(dasherize(key));});else css += dasherize(key) + ':' + maybeAddPx(key,property[key]) + ';';}return this.each(function(){this.style.cssText += ';' + css;});},index:function index(element){return element?this.indexOf($(element)[0]):this.parent().children().indexOf(this[0]);},hasClass:function hasClass(name){if(!name)return false;return emptyArray.some.call(this,function(el){return this.test(className(el));},classRE(name));},addClass:function addClass(name){if(!name)return this;return this.each(function(idx){if(!('className' in this))return;classList = [];var cls=className(this),newName=funcArg(this,name,idx,cls);newName.split(/\\s+/g).forEach(function(klass){if(!$(this).hasClass(klass))classList.push(klass);},this);classList.length && className(this,cls + (cls?\" \":\"\") + classList.join(\" \"));});},removeClass:function removeClass(name){return this.each(function(idx){if(!('className' in this))return;if(name === undefined$1)return className(this,'');classList = className(this);funcArg(this,name,idx,classList).split(/\\s+/g).forEach(function(klass){classList = classList.replace(classRE(klass),\" \");});className(this,classList.trim());});},toggleClass:function toggleClass(name,when){if(!name)return this;return this.each(function(idx){var $this=$(this),names=funcArg(this,name,idx,className(this));names.split(/\\s+/g).forEach(function(klass){(when === undefined$1?!$this.hasClass(klass):when)?$this.addClass(klass):$this.removeClass(klass);});});},scrollTop:function scrollTop(value){if(!this.length)return;var hasScrollTop=('scrollTop' in this[0]);if(value === undefined$1)return hasScrollTop?this[0].scrollTop:this[0].pageYOffset;return this.each(hasScrollTop?function(){this.scrollTop = value;}:function(){this.scrollTo(this.scrollX,value);});},scrollLeft:function scrollLeft(value){if(!this.length)return;var hasScrollLeft=('scrollLeft' in this[0]);if(value === undefined$1)return hasScrollLeft?this[0].scrollLeft:this[0].pageXOffset;return this.each(hasScrollLeft?function(){this.scrollLeft = value;}:function(){this.scrollTo(value,this.scrollY);});},position:function position(){if(!this.length)return;var elem=this[0], // Get *real* offsetParent\n\toffsetParent=this.offsetParent(), // Get correct offsets\n\toffset=this.offset(),parentOffset=rootNodeRE.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset(); // Subtract element margins\n\t// note: when an element has margin: auto the offsetLeft and marginLeft\n\t// are the same in Safari causing offset.left to incorrectly be 0\n\toffset.top -= parseFloat($(elem).css('margin-top')) || 0;offset.left -= parseFloat($(elem).css('margin-left')) || 0; // Add offsetParent borders\n\tparentOffset.top += parseFloat($(offsetParent[0]).css('border-top-width')) || 0;parentOffset.left += parseFloat($(offsetParent[0]).css('border-left-width')) || 0; // Subtract the two offsets\n\treturn {top:offset.top - parentOffset.top,left:offset.left - parentOffset.left};},offsetParent:function offsetParent(){return this.map(function(){var parent=this.offsetParent || document.body;while(parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\") parent = parent.offsetParent;return parent;});}}; // for now\n\t$.fn.detach = $.fn.remove; // Generate the `width` and `height` functions\n\t['width','height'].forEach(function(dimension){var dimensionProperty=dimension.replace(/./,function(m){return m[0].toUpperCase();});$.fn[dimension] = function(value){var offset,el=this[0];if(value === undefined$1)return isWindow(el)?el['inner' + dimensionProperty]:isDocument(el)?el.documentElement['scroll' + dimensionProperty]:(offset = this.offset()) && offset[dimension];else return this.each(function(idx){el = $(this);el.css(dimension,funcArg(this,value,idx,el[dimension]()));});};});function traverseNode(node,fun){fun(node);for(var i=0,len=node.childNodes.length;i < len;i++) traverseNode(node.childNodes[i],fun);} // Generate the `after`, `prepend`, `before`, `append`,\n\t// `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n\tadjacencyOperators.forEach(function(operator,operatorIndex){var inside=operatorIndex % 2; //=> prepend, append\n\t$.fn[operator] = function(){ // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n\tvar argType,nodes=$.map(arguments,function(arg){var arr=[];argType = type(arg);if(argType == \"array\"){arg.forEach(function(el){if(el.nodeType !== undefined$1)return arr.push(el);else if($.zepto.isZ(el))return arr = arr.concat(el.get());arr = arr.concat(zepto.fragment(el));});return arr;}return argType == \"object\" || arg == null?arg:zepto.fragment(arg);}),parent,copyByClone=this.length > 1;if(nodes.length < 1)return this;return this.each(function(_,target){parent = inside?target:target.parentNode; // convert all methods to a \"before\" operation\n\ttarget = operatorIndex == 0?target.nextSibling:operatorIndex == 1?target.firstChild:operatorIndex == 2?target:null;var parentInDocument=$.contains(document.documentElement,parent);nodes.forEach(function(node){if(copyByClone)node = node.cloneNode(true);else if(!parent)return $(node).remove();parent.insertBefore(node,target);if(parentInDocument)traverseNode(node,function(el){if(el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' && (!el.type || el.type === 'text/javascript') && !el.src){var target=el.ownerDocument?el.ownerDocument.defaultView:window;target['eval'].call(target,el.innerHTML);}});});});}; // after    => insertAfter\n\t// prepend  => prependTo\n\t// before   => insertBefore\n\t// append   => appendTo\n\t$.fn[inside?operator + 'To':'insert' + (operatorIndex?'Before':'After')] = function(html){$(html)[operator](this);return this;};});zepto.Z.prototype = Z.prototype = $.fn; // Export internal API functions in the `$.zepto` namespace\n\tzepto.uniq = uniq;zepto.deserializeValue = deserializeValue;$.zepto = zepto;return $;})();window.Zepto = Zepto;window.$ === undefined && (window.$ = Zepto);(function($){var jsonpID=+new Date(),document=window.document,key,name,rscript=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,scriptTypeRE=/^(?:text|application)\\/javascript/i,xmlTypeRE=/^(?:text|application)\\/xml/i,jsonType='application/json',htmlType='text/html',blankRE=/^\\s*$/,originAnchor=document.createElement('a');originAnchor.href = window.location.href; // trigger a custom event and return false if it was cancelled\n\tfunction triggerAndReturn(context,eventName,data){var event=$.Event(eventName);$(context).trigger(event,data);return !event.isDefaultPrevented();} // trigger an Ajax \"global\" event\n\tfunction triggerGlobal(settings,context,eventName,data){if(settings.global)return triggerAndReturn(context || document,eventName,data);} // Number of active Ajax requests\n\t$.active = 0;function ajaxStart(settings){if(settings.global && $.active++ === 0)triggerGlobal(settings,null,'ajaxStart');}function ajaxStop(settings){if(settings.global && ! --$.active)triggerGlobal(settings,null,'ajaxStop');} // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n\tfunction ajaxBeforeSend(xhr,settings){var context=settings.context;if(settings.beforeSend.call(context,xhr,settings) === false || triggerGlobal(settings,context,'ajaxBeforeSend',[xhr,settings]) === false)return false;triggerGlobal(settings,context,'ajaxSend',[xhr,settings]);}function ajaxSuccess(data,xhr,settings,deferred){var context=settings.context,status='success';settings.success.call(context,data,status,xhr);if(deferred)deferred.resolveWith(context,[data,status,xhr]);triggerGlobal(settings,context,'ajaxSuccess',[xhr,settings,data]);ajaxComplete(status,xhr,settings);} // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\tfunction ajaxError(error,type,xhr,settings,deferred){var context=settings.context;settings.error.call(context,xhr,type,error);if(deferred)deferred.rejectWith(context,[xhr,type,error]);triggerGlobal(settings,context,'ajaxError',[xhr,settings,error || type]);ajaxComplete(type,xhr,settings);} // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\tfunction ajaxComplete(status,xhr,settings){var context=settings.context;settings.complete.call(context,xhr,status);triggerGlobal(settings,context,'ajaxComplete',[xhr,settings]);ajaxStop(settings);}function ajaxDataFilter(data,type,settings){if(settings.dataFilter == empty)return data;var context=settings.context;return settings.dataFilter.call(context,data,type);} // Empty function, used as default callback\n\tfunction empty(){}$.ajaxJSONP = function(options,deferred){if(!('type' in options))return $.ajax(options);var _callbackName=options.jsonpCallback,callbackName=($.isFunction(_callbackName)?_callbackName():_callbackName) || 'Zepto' + jsonpID++,script=document.createElement('script'),originalCallback=window[callbackName],responseData,abort=function abort(errorType){$(script).triggerHandler('error',errorType || 'abort');},xhr={abort:abort},abortTimeout;if(deferred)deferred.promise(xhr);$(script).on('load error',function(e,errorType){clearTimeout(abortTimeout);$(script).off().remove();if(e.type == 'error' || !responseData){ajaxError(null,errorType || 'error',xhr,options,deferred);}else {ajaxSuccess(responseData[0],xhr,options,deferred);}window[callbackName] = originalCallback;if(responseData && $.isFunction(originalCallback))originalCallback(responseData[0]);originalCallback = responseData = undefined;});if(ajaxBeforeSend(xhr,options) === false){abort('abort');return xhr;}window[callbackName] = function(){responseData = arguments;};script.src = options.url.replace(/\\?(.+)=\\?/,'?$1=' + callbackName);document.head.appendChild(script);if(options.timeout > 0)abortTimeout = setTimeout(function(){abort('timeout');},options.timeout);return xhr;};$.ajaxSettings = { // Default type of request\n\ttype:'GET', // Callback that is executed before request\n\tbeforeSend:empty, // Callback that is executed if the request succeeds\n\tsuccess:empty, // Callback that is executed the the server drops error\n\terror:empty, // Callback that is executed on request complete (both: error and success)\n\tcomplete:empty, // The context for the callbacks\n\tcontext:null, // Whether to trigger \"global\" Ajax events\n\tglobal:true, // Transport\n\txhr:function xhr(){return new window.XMLHttpRequest();}, // MIME types mapping\n\t// IIS returns Javascript as \"application/x-javascript\"\n\taccepts:{script:'text/javascript, application/javascript, application/x-javascript',json:jsonType,xml:'application/xml, text/xml',html:htmlType,text:'text/plain'}, // Whether the request is to another domain\n\tcrossDomain:false, // Default timeout\n\ttimeout:0, // Whether data should be serialized to string\n\tprocessData:true, // Whether the browser should be allowed to cache GET responses\n\tcache:true, //Used to handle the raw response data of XMLHttpRequest.\n\t//This is a pre-filtering function to sanitize the response.\n\t//The sanitized response should be returned\n\tdataFilter:empty};function mimeToDataType(mime){if(mime)mime = mime.split(';',2)[0];return mime && (mime == htmlType?'html':mime == jsonType?'json':scriptTypeRE.test(mime)?'script':xmlTypeRE.test(mime) && 'xml') || 'text';}function appendQuery(url,query){if(query == '')return url;return (url + '&' + query).replace(/[&?]{1,2}/,'?');} // serialize payload and append it to the URL for GET requests\n\tfunction serializeData(options){if(options.processData && options.data && $.type(options.data) != \"string\")options.data = $.param(options.data,options.traditional);if(options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType))options.url = appendQuery(options.url,options.data),options.data = undefined;}$.ajax = function(options){var settings=$.extend({},options || {}),deferred=$.Deferred && $.Deferred(),urlAnchor,hashIndex;for(key in $.ajaxSettings) if(settings[key] === undefined)settings[key] = $.ajaxSettings[key];ajaxStart(settings);if(!settings.crossDomain){urlAnchor = document.createElement('a');urlAnchor.href = settings.url; // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049\n\turlAnchor.href = urlAnchor.href;settings.crossDomain = originAnchor.protocol + '//' + originAnchor.host !== urlAnchor.protocol + '//' + urlAnchor.host;}if(!settings.url)settings.url = window.location.toString();if((hashIndex = settings.url.indexOf('#')) > -1)settings.url = settings.url.slice(0,hashIndex);serializeData(settings);var dataType=settings.dataType,hasPlaceholder=/\\?.+=\\?/.test(settings.url);if(hasPlaceholder)dataType = 'jsonp';if(settings.cache === false || (!options || options.cache !== true) && ('script' == dataType || 'jsonp' == dataType))settings.url = appendQuery(settings.url,'_=' + Date.now());if('jsonp' == dataType){if(!hasPlaceholder)settings.url = appendQuery(settings.url,settings.jsonp?settings.jsonp + '=?':settings.jsonp === false?'':'callback=?');return $.ajaxJSONP(settings,deferred);}var mime=settings.accepts[dataType],headers={},setHeader=function setHeader(name,value){headers[name.toLowerCase()] = [name,value];},protocol=/^([\\w-]+:)\\/\\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;if(deferred)deferred.promise(xhr);if(!settings.crossDomain)setHeader('X-Requested-With','XMLHttpRequest');setHeader('Accept',mime || '*/*');if(mime = settings.mimeType || mime){if(mime.indexOf(',') > -1)mime = mime.split(',',2)[0];xhr.overrideMimeType && xhr.overrideMimeType(mime);}if(settings.contentType || settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET')setHeader('Content-Type',settings.contentType || 'application/x-www-form-urlencoded');if(settings.headers)for(name in settings.headers) setHeader(name,settings.headers[name]);xhr.setRequestHeader = setHeader;xhr.onreadystatechange = function(){if(xhr.readyState == 4){xhr.onreadystatechange = empty;clearTimeout(abortTimeout);var result,error=false;if(xhr.status >= 200 && xhr.status < 300 || xhr.status == 304 || xhr.status == 0 && protocol == 'file:'){dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));if(xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob')result = xhr.response;else {result = xhr.responseText;try{ // http://perfectionkills.com/global-eval-what-are-the-options/\n\t// sanitize response accordingly if data filter callback provided\n\tresult = ajaxDataFilter(result,dataType,settings);if(dataType == 'script')(1,eval)(result);else if(dataType == 'xml')result = xhr.responseXML;else if(dataType == 'json')result = blankRE.test(result)?null:$.parseJSON(result);}catch(e) {error = e;}if(error)return ajaxError(error,'parsererror',xhr,settings,deferred);}ajaxSuccess(result,xhr,settings,deferred);}else {ajaxError(xhr.statusText || null,xhr.status?'error':'abort',xhr,settings,deferred);}}};if(ajaxBeforeSend(xhr,settings) === false){xhr.abort();ajaxError(null,'abort',xhr,settings,deferred);return xhr;}var async='async' in settings?settings.async:true;xhr.open(settings.type,settings.url,async,settings.username,settings.password);if(settings.xhrFields)for(name in settings.xhrFields) xhr[name] = settings.xhrFields[name];for(name in headers) nativeSetHeader.apply(xhr,headers[name]);if(settings.timeout > 0)abortTimeout = setTimeout(function(){xhr.onreadystatechange = empty;xhr.abort();ajaxError(null,'timeout',xhr,settings,deferred);},settings.timeout); // avoid sending empty string (#319)\n\txhr.send(settings.data?settings.data:null);return xhr;}; // handle optional data/success arguments\n\tfunction parseArguments(url,data,success,dataType){if($.isFunction(data))dataType = success,success = data,data = undefined;if(!$.isFunction(success))dataType = success,success = undefined;return {url:url,data:data,success:success,dataType:dataType};}$.get = function() /* url, data, success, dataType */{return $.ajax(parseArguments.apply(null,arguments));};$.post = function() /* url, data, success, dataType */{var options=parseArguments.apply(null,arguments);options.type = 'POST';return $.ajax(options);};$.getJSON = function() /* url, data, success */{var options=parseArguments.apply(null,arguments);options.dataType = 'json';return $.ajax(options);};$.fn.load = function(url,data,success){if(!this.length)return this;var self=this,parts=url.split(/\\s/),selector,options=parseArguments(url,data,success),callback=options.success;if(parts.length > 1)options.url = parts[0],selector = parts[1];options.success = function(response){self.html(selector?$('<div>').html(response.replace(rscript,\"\")).find(selector):response);callback && callback.apply(self,arguments);};$.ajax(options);return this;};var escape=encodeURIComponent;function serialize(params,obj,traditional,scope){var type,array=$.isArray(obj),hash=$.isPlainObject(obj);$.each(obj,function(key,value){type = $.type(value);if(scope)key = traditional?scope:scope + '[' + (hash || type == 'object' || type == 'array'?key:'') + ']'; // handle data in serializeArray() format\n\tif(!scope && array)params.add(value.name,value.value); // recurse into nested objects\n\telse if(type == \"array\" || !traditional && type == \"object\")serialize(params,value,traditional,key);else params.add(key,value);});}$.param = function(obj,traditional){var params=[];params.add = function(key,value){if($.isFunction(value))value = value();if(value == null)value = \"\";this.push(escape(key) + '=' + escape(value));};serialize(params,obj,traditional);return params.join('&').replace(/%20/g,'+');};})(Zepto);(function($){ // Create a collection of callbacks to be fired in a sequence, with configurable behaviour\n\t// Option flags:\n\t//   - once: Callbacks fired at most one time.\n\t//   - memory: Remember the most recent context and arguments\n\t//   - stopOnFalse: Cease iterating over callback list\n\t//   - unique: Permit adding at most one instance of the same callback\n\t$.Callbacks = function(options){options = $.extend({},options);var memory, // Last fire value (for non-forgettable lists)\n\t_fired, // Flag to know if list was already fired\n\tfiring, // Flag to know if list is currently firing\n\tfiringStart, // First callback to fire (used internally by add and fireWith)\n\tfiringLength, // End of the loop when firing\n\tfiringIndex, // Index of currently firing callback (modified by remove if needed)\n\tlist=[], // Actual callback list\n\tstack=!options.once && [], // Stack of fire calls for repeatable lists\n\tfire=function fire(data){memory = options.memory && data;_fired = true;firingIndex = firingStart || 0;firingStart = 0;firingLength = list.length;firing = true;for(;list && firingIndex < firingLength;++firingIndex) {if(list[firingIndex].apply(data[0],data[1]) === false && options.stopOnFalse){memory = false;break;}}firing = false;if(list){if(stack)stack.length && fire(stack.shift());else if(memory)list.length = 0;else Callbacks.disable();}},Callbacks={add:function add(){if(list){var start=list.length,add=function add(args){$.each(args,function(_,arg){if(typeof arg === \"function\"){if(!options.unique || !Callbacks.has(arg))list.push(arg);}else if(arg && arg.length && typeof arg !== 'string')add(arg);});};add(arguments);if(firing)firingLength = list.length;else if(memory){firingStart = start;fire(memory);}}return this;},remove:function remove(){if(list){$.each(arguments,function(_,arg){var index;while((index = $.inArray(arg,list,index)) > -1) {list.splice(index,1); // Handle firing indexes\n\tif(firing){if(index <= firingLength)--firingLength;if(index <= firingIndex)--firingIndex;}}});}return this;},has:function has(fn){return !!(list && (fn?$.inArray(fn,list) > -1:list.length));},empty:function empty(){firingLength = list.length = 0;return this;},disable:function disable(){list = stack = memory = undefined;return this;},disabled:function disabled(){return !list;},lock:function lock(){stack = undefined;if(!memory)Callbacks.disable();return this;},locked:function locked(){return !stack;},fireWith:function fireWith(context,args){if(list && (!_fired || stack)){args = args || [];args = [context,args.slice?args.slice():args];if(firing)stack.push(args);else fire(args);}return this;},fire:function fire(){return Callbacks.fireWith(this,arguments);},fired:function fired(){return !!_fired;}};return Callbacks;};})(Zepto);(function($){var slice=Array.prototype.slice;function Deferred(func){var tuples=[ // action, add listener, listener list, final state\n\t[\"resolve\",\"done\",$.Callbacks({once:1,memory:1}),\"resolved\"],[\"reject\",\"fail\",$.Callbacks({once:1,memory:1}),\"rejected\"],[\"notify\",\"progress\",$.Callbacks({memory:1})]],_state=\"pending\",_promise={state:function state(){return _state;},always:function always(){deferred.done(arguments).fail(arguments);return this;},then:function then() /* fnDone [, fnFailed [, fnProgress]] */{var fns=arguments;return Deferred(function(defer){$.each(tuples,function(i,tuple){var fn=$.isFunction(fns[i]) && fns[i];deferred[tuple[1]](function(){var returned=fn && fn.apply(this,arguments);if(returned && $.isFunction(returned.promise)){returned.promise().done(defer.resolve).fail(defer.reject).progress(defer.notify);}else {var context=this === _promise?defer.promise():this,values=fn?[returned]:arguments;defer[tuple[0] + \"With\"](context,values);}});});fns = null;}).promise();},promise:function promise(obj){return obj != null?$.extend(obj,_promise):_promise;}},deferred={};$.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];_promise[tuple[1]] = list.add;if(stateString){list.add(function(){_state = stateString;},tuples[i ^ 1][2].disable,tuples[2][2].lock);}deferred[tuple[0]] = function(){deferred[tuple[0] + \"With\"](this === deferred?_promise:this,arguments);return this;};deferred[tuple[0] + \"With\"] = list.fireWith;});_promise.promise(deferred);if(func)func.call(deferred,deferred);return deferred;}$.when = function(sub){var resolveValues=slice.call(arguments),len=resolveValues.length,i=0,remain=len !== 1 || sub && $.isFunction(sub.promise)?len:0,deferred=remain === 1?sub:Deferred(),progressValues,progressContexts,resolveContexts,updateFn=function updateFn(i,ctx,val){return function(value){ctx[i] = this;val[i] = arguments.length > 1?slice.call(arguments):value;if(val === progressValues){deferred.notifyWith(ctx,val);}else if(! --remain){deferred.resolveWith(ctx,val);}};};if(len > 1){progressValues = new Array(len);progressContexts = new Array(len);resolveContexts = new Array(len);for(;i < len;++i) {if(resolveValues[i] && $.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFn(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFn(i,progressContexts,progressValues));}else {--remain;}}}if(!remain)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise();};$.Deferred = Deferred;})(Zepto);(function($){var _zid=1,undefined$1,slice=Array.prototype.slice,isFunction=$.isFunction,isString=function isString(obj){return typeof obj == 'string';},handlers={},specialEvents={},focusinSupported=('onfocusin' in window),focus={focus:'focusin',blur:'focusout'},hover={mouseenter:'mouseover',mouseleave:'mouseout'};specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents';function zid(element){return element._zid || (element._zid = _zid++);}function findHandlers(element,event,fn,selector){event = parse(event);if(event.ns)var matcher=matcherFor(event.ns);return (handlers[zid(element)] || []).filter(function(handler){return handler && (!event.e || handler.e == event.e) && (!event.ns || matcher.test(handler.ns)) && (!fn || zid(handler.fn) === zid(fn)) && (!selector || handler.sel == selector);});}function parse(event){var parts=('' + event).split('.');return {e:parts[0],ns:parts.slice(1).sort().join(' ')};}function matcherFor(ns){return new RegExp('(?:^| )' + ns.replace(' ',' .* ?') + '(?: |$)');}function eventCapture(handler,captureSetting){return handler.del && !focusinSupported && handler.e in focus || !!captureSetting;}function realEvent(type){return hover[type] || focusinSupported && focus[type] || type;}function add(element,events,fn,data,selector,delegator,capture){var id=zid(element),set=handlers[id] || (handlers[id] = []);events.split(/\\s/).forEach(function(event){if(event == 'ready')return $(document).ready(fn);var handler=parse(event);handler.fn = fn;handler.sel = selector; // emulate mouseenter, mouseleave\n\tif(handler.e in hover)fn = function(e){var related=e.relatedTarget;if(!related || related !== this && !$.contains(this,related))return handler.fn.apply(this,arguments);};handler.del = delegator;var callback=delegator || fn;handler.proxy = function(e){e = compatible(e);if(e.isImmediatePropagationStopped())return;e.data = data;var result=callback.apply(element,e._args == undefined$1?[e]:[e].concat(e._args));if(result === false)e.preventDefault(),e.stopPropagation();return result;};handler.i = set.length;set.push(handler);if('addEventListener' in element)element.addEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture));});}function remove(element,events,fn,selector,capture){var id=zid(element);(events || '').split(/\\s/).forEach(function(event){findHandlers(element,event,fn,selector).forEach(function(handler){delete handlers[id][handler.i];if('removeEventListener' in element)element.removeEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture));});});}$.event = {add:add,remove:remove};$.proxy = function(fn,context){var args=2 in arguments && slice.call(arguments,2);if(isFunction(fn)){var proxyFn=function proxyFn(){return fn.apply(context,args?args.concat(slice.call(arguments)):arguments);};proxyFn._zid = zid(fn);return proxyFn;}else if(isString(context)){if(args){args.unshift(fn[context],fn);return $.proxy.apply(null,args);}else {return $.proxy(fn[context],fn);}}else {throw new TypeError(\"expected function\");}};$.fn.bind = function(event,data,callback){return this.on(event,data,callback);};$.fn.unbind = function(event,callback){return this.off(event,callback);};$.fn.one = function(event,selector,data,callback){return this.on(event,selector,data,callback,1);};var returnTrue=function returnTrue(){return true;},returnFalse=function returnFalse(){return false;},ignoreProperties=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,eventMethods={preventDefault:'isDefaultPrevented',stopImmediatePropagation:'isImmediatePropagationStopped',stopPropagation:'isPropagationStopped'};function compatible(event,source){if(source || !event.isDefaultPrevented){source || (source = event);$.each(eventMethods,function(name,predicate){var sourceMethod=source[name];event[name] = function(){this[predicate] = returnTrue;return sourceMethod && sourceMethod.apply(source,arguments);};event[predicate] = returnFalse;});event.timeStamp || (event.timeStamp = Date.now());if(source.defaultPrevented !== undefined$1?source.defaultPrevented:'returnValue' in source?source.returnValue === false:source.getPreventDefault && source.getPreventDefault())event.isDefaultPrevented = returnTrue;}return event;}function createProxy(event){var key,proxy={originalEvent:event};for(key in event) if(!ignoreProperties.test(key) && event[key] !== undefined$1)proxy[key] = event[key];return compatible(proxy,event);}$.fn.delegate = function(selector,event,callback){return this.on(event,selector,callback);};$.fn.undelegate = function(selector,event,callback){return this.off(event,selector,callback);};$.fn.live = function(event,callback){$(document.body).delegate(this.selector,event,callback);return this;};$.fn.die = function(event,callback){$(document.body).undelegate(this.selector,event,callback);return this;};$.fn.on = function(event,selector,data,callback,one){var autoRemove,delegator,$this=this;if(event && !isString(event)){$.each(event,function(type,fn){$this.on(type,selector,data,fn,one);});return $this;}if(!isString(selector) && !isFunction(callback) && callback !== false)callback = data,data = selector,selector = undefined$1;if(callback === undefined$1 || data === false)callback = data,data = undefined$1;if(callback === false)callback = returnFalse;return $this.each(function(_,element){if(one)autoRemove = function(e){remove(element,e.type,callback);return callback.apply(this,arguments);};if(selector)delegator = function(e){var evt,match=$(e.target).closest(selector,element).get(0);if(match && match !== element){evt = $.extend(createProxy(e),{currentTarget:match,liveFired:element});return (autoRemove || callback).apply(match,[evt].concat(slice.call(arguments,1)));}};add(element,event,callback,data,selector,delegator || autoRemove);});};$.fn.off = function(event,selector,callback){var $this=this;if(event && !isString(event)){$.each(event,function(type,fn){$this.off(type,selector,fn);});return $this;}if(!isString(selector) && !isFunction(callback) && callback !== false)callback = selector,selector = undefined$1;if(callback === false)callback = returnFalse;return $this.each(function(){remove(this,event,callback,selector);});};$.fn.trigger = function(event,args){event = isString(event) || $.isPlainObject(event)?$.Event(event):compatible(event);event._args = args;return this.each(function(){ // handle focus(), blur() by calling them directly\n\tif(event.type in focus && typeof this[event.type] == \"function\")this[event.type](); // items in the collection might not be DOM elements\n\telse if('dispatchEvent' in this)this.dispatchEvent(event);else $(this).triggerHandler(event,args);});}; // triggers event handlers on current element just as if an event occurred,\n\t// doesn't trigger an actual event, doesn't bubble\n\t$.fn.triggerHandler = function(event,args){var e,result;this.each(function(i,element){e = createProxy(isString(event)?$.Event(event):event);e._args = args;e.target = element;$.each(findHandlers(element,event.type || event),function(i,handler){result = handler.proxy(e);if(e.isImmediatePropagationStopped())return false;});});return result;}; // shortcut methods for `.bind(event, fn)` for each event type\n\t('focusin focusout focus blur load resize scroll unload click dblclick ' + 'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' + 'change select keydown keypress keyup error').split(' ').forEach(function(event){$.fn[event] = function(callback){return 0 in arguments?this.bind(event,callback):this.trigger(event);};});$.Event = function(type,props){if(!isString(type))props = type,type = props.type;var event=document.createEvent(specialEvents[type] || 'Events'),bubbles=true;if(props)for(var name in props) name == 'bubbles'?bubbles = !!props[name]:event[name] = props[name];event.initEvent(type,bubbles,true);return compatible(event);};})(Zepto);(function(){ // getComputedStyle shouldn't freak out when called\n\t// without a valid element as argument\n\ttry{getComputedStyle(undefined);}catch(e) {var nativeGetComputedStyle=getComputedStyle;window.getComputedStyle = function(element,pseudoElement){try{return nativeGetComputedStyle(element,pseudoElement);}catch(e) {return null;}};}})();(function($){var zepto=$.zepto,oldQsa=zepto.qsa,oldMatches=zepto.matches;function _visible(elem){elem = $(elem);return !!(elem.width() || elem.height()) && elem.css(\"display\") !== \"none\";} // Implements a subset from:\n\t// http://api.jquery.com/category/selectors/jquery-selector-extensions/\n\t//\n\t// Each filter function receives the current index, all nodes in the\n\t// considered set, and a value if there were parentheses. The value\n\t// of `this` is the node currently being considered. The function returns the\n\t// resulting node(s), null, or undefined.\n\t//\n\t// Complex selectors are not supported:\n\t//   li:has(label:contains(\"foo\")) + li:has(label:contains(\"bar\"))\n\t//   ul.inner:first > li\n\tvar filters=$.expr[':'] = {visible:function visible(){if(_visible(this))return this;},hidden:function hidden(){if(!_visible(this))return this;},selected:function selected(){if(this.selected)return this;},checked:function checked(){if(this.checked)return this;},parent:function parent(){return this.parentNode;},first:function first(idx){if(idx === 0)return this;},last:function last(idx,nodes){if(idx === nodes.length - 1)return this;},eq:function eq(idx,_,value){if(idx === value)return this;},contains:function contains(idx,_,text){if($(this).text().indexOf(text) > -1)return this;},has:function has(idx,_,sel){if(zepto.qsa(this,sel).length)return this;}};var filterRe=new RegExp('(.*):(\\\\w+)(?:\\\\(([^)]+)\\\\))?$\\\\s*'),childRe=/^\\s*>/,classTag='Zepto' + +new Date();function process(sel,fn){ // quote the hash in `a[href^=#]` expression\n\tsel = sel.replace(/=#\\]/g,'=\"#\"]');var filter,arg,match=filterRe.exec(sel);if(match && match[2] in filters){filter = filters[match[2]],arg = match[3];sel = match[1];if(arg){var num=Number(arg);if(isNaN(num))arg = arg.replace(/^[\"']|[\"']$/g,'');else arg = num;}}return fn(sel,filter,arg);}zepto.qsa = function(node,selector){return process(selector,function(sel,filter,arg){try{var taggedParent;if(!sel && filter)sel = '*';else if(childRe.test(sel)) // support \"> *\" child queries by tagging the parent node with a\n\t// unique class and prepending that classname onto the selector\n\ttaggedParent = $(node).addClass(classTag),sel = '.' + classTag + ' ' + sel;var nodes=oldQsa(node,sel);}catch(e) {console.error('error performing selector: %o',selector);throw e;}finally {if(taggedParent)taggedParent.removeClass(classTag);}return !filter?nodes:zepto.uniq($.map(nodes,function(n,i){return filter.call(n,i,nodes,arg);}));});};zepto.matches = function(node,selector){return process(selector,function(sel,filter,arg){return (!sel || oldMatches(node,sel)) && (!filter || filter.call(node,null,arg) === node);});};})(Zepto);var zepto=Zepto; /* eslint-disable no-useless-escape */ // The order of the following arrays is important, be careful if you change it.\n\tvar BROWSER_DATA=[{name:'Chromium',group:'Chrome',identifier:'Chromium/([0-9\\.]*)'},{name:'Chrome Mobile',group:'Chrome',identifier:'Chrome/([0-9\\.]*) Mobile',versionIdentifier:'Chrome/([0-9\\.]*)'},{name:'Chrome',group:'Chrome',identifier:'Chrome/([0-9\\.]*)'},{name:'Chrome for iOS',group:'Chrome',identifier:'CriOS/([0-9\\.]*)'},{name:'Android Browser',group:'Chrome',identifier:'CrMo/([0-9\\.]*)'},{name:'Firefox',group:'Firefox',identifier:'Firefox/([0-9\\.]*)'},{name:'Opera Mini',group:'Opera',identifier:'Opera Mini/([0-9\\.]*)'},{name:'Opera',group:'Opera',identifier:'Opera ([0-9\\.]*)'},{name:'Opera',group:'Opera',identifier:'Opera/([0-9\\.]*)',versionIdentifier:'Version/([0-9\\.]*)'},{name:'IEMobile',group:'Explorer',identifier:'IEMobile/([0-9\\.]*)'},{name:'Internet Explorer',group:'Explorer',identifier:'MSIE ([a-zA-Z0-9\\.]*)'},{name:'Internet Explorer',group:'Explorer',identifier:'Trident/([0-9\\.]*)',versionIdentifier:'rv:([0-9\\.]*)'},{name:'Spartan',group:'Spartan',identifier:'Edge/([0-9\\.]*)',versionIdentifier:'Edge/([0-9\\.]*)'},{name:'Safari',group:'Safari',identifier:'Safari/([0-9\\.]*)',versionIdentifier:'Version/([0-9\\.]*)'}]; /* eslint-disable no-useless-escape */ // The order of the following arrays is important, be careful if you change it.\n\tvar OS_DATA=[{name:'Windows 2000',group:'Windows',identifier:'Windows NT 5.0',version:'5.0'},{name:'Windows XP',group:'Windows',identifier:'Windows NT 5.1',version:'5.1'},{name:'Windows Vista',group:'Windows',identifier:'Windows NT 6.0',version:'6.0'},{name:'Windows 7',group:'Windows',identifier:'Windows NT 6.1',version:'7.0'},{name:'Windows 8',group:'Windows',identifier:'Windows NT 6.2',version:'8.0'},{name:'Windows 8.1',group:'Windows',identifier:'Windows NT 6.3',version:'8.1'},{name:'Windows 10',group:'Windows',identifier:'Windows NT 10.0',version:'10.0'},{name:'Windows Phone',group:'Windows Phone',identifier:'Windows Phone ([0-9\\.]*)'},{name:'Windows Phone',group:'Windows Phone',identifier:'Windows Phone OS ([0-9\\.]*)'},{name:'Windows',group:'Windows',identifier:'Windows'},{name:'Chrome OS',group:'Chrome OS',identifier:'CrOS'},{name:'Android',group:'Android',identifier:'Android',versionIdentifier:'Android ([a-zA-Z0-9\\.-]*)'},{name:'iPad',group:'iOS',identifier:'iPad',versionIdentifier:'OS ([0-9_]*)',versionSeparator:'[_|\\.]'},{name:'iPod',group:'iOS',identifier:'iPod',versionIdentifier:'OS ([0-9_]*)',versionSeparator:'[_|\\.]'},{name:'iPhone',group:'iOS',identifier:'iPhone OS',versionIdentifier:'OS ([0-9_]*)',versionSeparator:'[_|\\.]'},{name:'Mac OS X High Sierra',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])13([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Sierra',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])12([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X El Capitan',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])11([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Yosemite',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])10([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Mavericks',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])9([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Mountain Lion',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])8([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Lion',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])7([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Snow Leopard',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])6([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Leopard',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])5([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Tiger',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])4([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Panther',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])3([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Jaguar',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])2([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Puma',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])1([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS X Cheetah',group:'Mac OS',identifier:'Mac OS X (10([_|\\.])0([0-9_\\.]*))',versionSeparator:'[_|\\.]'},{name:'Mac OS',group:'Mac OS',identifier:'Mac OS'},{name:'Ubuntu',group:'Linux',identifier:'Ubuntu',versionIdentifier:'Ubuntu/([0-9\\.]*)'},{name:'Debian',group:'Linux',identifier:'Debian'},{name:'Gentoo',group:'Linux',identifier:'Gentoo'},{name:'Linux',group:'Linux',identifier:'Linux'},{name:'BlackBerry',group:'BlackBerry',identifier:'BlackBerry'}];var Browser={};var hasLocalstorage=function hasLocalstorage(){try{localStorage.setItem('clappr','clappr');localStorage.removeItem('clappr');return true;}catch(e) {return false;}};var hasFlash=function hasFlash(){try{var fo=new ActiveXObject('ShockwaveFlash.ShockwaveFlash');return !!fo;}catch(e) {return !!(navigator.mimeTypes && navigator.mimeTypes['application/x-shockwave-flash'] !== undefined && navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin);}};var getBrowserInfo=function getBrowserInfo(ua){var parts=ua.match(/\\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [],extra;if(/trident/i.test(parts[1])){extra = /\\brv[ :]+(\\d+)/g.exec(ua) || [];return {name:'IE',version:parseInt(extra[1] || '')};}else if(parts[1] === 'Chrome'){extra = ua.match(/\\bOPR\\/(\\d+)/);if(extra != null)return {name:'Opera',version:parseInt(extra[1])};extra = ua.match(/\\bEdge\\/(\\d+)/);if(extra != null)return {name:'Edge',version:parseInt(extra[1])};}else if(/android/i.test(ua) && (extra = ua.match(/version\\/(\\d+)/i))){parts.splice(1,1,'Android WebView');parts.splice(2,1,extra[1]);}parts = parts[2]?[parts[1],parts[2]]:[navigator.appName,navigator.appVersion,'-?'];return {name:parts[0],version:parseInt(parts[1])};}; //  Get browser data\n\tvar getBrowserData=function getBrowserData(){var browserObject={};var userAgent=Browser.userAgent.toLowerCase(); // Check browser type\n\tvar _iterator=_createForOfIteratorHelper(BROWSER_DATA),_step;try{for(_iterator.s();!(_step = _iterator.n()).done;) {var browser=_step.value;var browserRegExp=new RegExp(browser.identifier.toLowerCase());var browserRegExpResult=browserRegExp.exec(userAgent);if(browserRegExpResult != null && browserRegExpResult[1]){browserObject.name = browser.name;browserObject.group = browser.group; // Check version\n\tif(browser.versionIdentifier){var versionRegExp=new RegExp(browser.versionIdentifier.toLowerCase());var versionRegExpResult=versionRegExp.exec(userAgent);if(versionRegExpResult != null && versionRegExpResult[1])setBrowserVersion(versionRegExpResult[1],browserObject);}else {setBrowserVersion(browserRegExpResult[1],browserObject);}break;}}}catch(err) {_iterator.e(err);}finally {_iterator.f();}return browserObject;}; // Set browser version\n\tvar setBrowserVersion=function setBrowserVersion(version,browserObject){var splitVersion=version.split('.',2);browserObject.fullVersion = version; // Major version\n\tif(splitVersion[0])browserObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\tif(splitVersion[1])browserObject.minorVersion = parseInt(splitVersion[1]);}; //  Get OS data\n\tvar getOsData=function getOsData(){var osObject={};var userAgent=Browser.userAgent.toLowerCase(); // Check browser type\n\tvar _iterator2=_createForOfIteratorHelper(OS_DATA),_step2;try{for(_iterator2.s();!(_step2 = _iterator2.n()).done;) {var os=_step2.value;var osRegExp=new RegExp(os.identifier.toLowerCase());var osRegExpResult=osRegExp.exec(userAgent);if(osRegExpResult != null){osObject.name = os.name;osObject.group = os.group; // Version defined\n\tif(os.version){setOsVersion(os.version,os.versionSeparator?os.versionSeparator:'.',osObject); // Version detected\n\t}else if(osRegExpResult[1]){setOsVersion(osRegExpResult[1],os.versionSeparator?os.versionSeparator:'.',osObject); // Version identifier\n\t}else if(os.versionIdentifier){var versionRegExp=new RegExp(os.versionIdentifier.toLowerCase());var versionRegExpResult=versionRegExp.exec(userAgent);if(versionRegExpResult != null && versionRegExpResult[1])setOsVersion(versionRegExpResult[1],os.versionSeparator?os.versionSeparator:'.',osObject);}break;}}}catch(err) {_iterator2.e(err);}finally {_iterator2.f();}return osObject;}; // Set OS version\n\tvar setOsVersion=function setOsVersion(version,separator,osObject){var finalSeparator=separator.substr(0,1) == '['?new RegExp(separator,'g'):separator;var splitVersion=version.split(finalSeparator,2);if(separator != '.')version = version.replace(new RegExp(separator,'g'),'.');osObject.fullVersion = version; // Major version\n\tif(splitVersion && splitVersion[0])osObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\tif(splitVersion && splitVersion[1])osObject.minorVersion = parseInt(splitVersion[1]);}; // Set viewport size\n\tvar getViewportSize=function getViewportSize(){var viewportObject={};viewportObject.width = zepto(window).width();viewportObject.height = zepto(window).height();return viewportObject;}; // Set viewport orientation\n\tvar setViewportOrientation=function setViewportOrientation(){switch(window.orientation){case -90:case 90:Browser.viewport.orientation = 'landscape';break;default:Browser.viewport.orientation = 'portrait';break;}};var getDevice=function getDevice(ua){var platformRegExp=/\\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\\)))/;var matches=platformRegExp.exec(ua);var device=matches && (matches[1] || matches[2]) || '';return device;};var browserInfo=getBrowserInfo(navigator.userAgent);Browser.isEdge = /edge/i.test(navigator.userAgent);Browser.isChrome = /chrome|CriOS/i.test(navigator.userAgent) && !Browser.isEdge;Browser.isSafari = /safari/i.test(navigator.userAgent) && !Browser.isChrome && !Browser.isEdge;Browser.isFirefox = /firefox/i.test(navigator.userAgent);Browser.isLegacyIE = !!window.ActiveXObject;Browser.isIE = Browser.isLegacyIE || /trident.*rv:1\\d/i.test(navigator.userAgent);Browser.isIE11 = /trident.*rv:11/i.test(navigator.userAgent);Browser.isChromecast = Browser.isChrome && /CrKey/i.test(navigator.userAgent);Browser.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent);Browser.isiOS = /iPad|iPhone|iPod/i.test(navigator.userAgent);Browser.isAndroid = /Android/i.test(navigator.userAgent);Browser.isWindowsPhone = /Windows Phone/i.test(navigator.userAgent);Browser.isWin8App = /MSAppHost/i.test(navigator.userAgent);Browser.isWiiU = /WiiU/i.test(navigator.userAgent);Browser.isPS4 = /PlayStation 4/i.test(navigator.userAgent);Browser.hasLocalstorage = hasLocalstorage();Browser.hasFlash = hasFlash(); /**\n\t  * @deprecated\n\t  * This parameter currently exists for retrocompatibility reasons.\n\t  * Use Browser.data.name instead.\n\t  */Browser.name = browserInfo.name; /**\n\t  * @deprecated\n\t  * This parameter currently exists for retrocompatibility reasons.\n\t  * Use Browser.data.fullVersion instead.\n\t  */Browser.version = browserInfo.version;Browser.userAgent = navigator.userAgent;Browser.data = getBrowserData();Browser.os = getOsData();Browser.viewport = getViewportSize();Browser.device = getDevice(Browser.userAgent);typeof window.orientation !== 'undefined' && setViewportOrientation();var idsCounter={};var videoStack=[];var requestAnimationFrame=(window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function(fn){window.setTimeout(fn,1000 / 60);}).bind(window);var cancelAnimationFrame=(window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout).bind(window);function assign(obj,source){if(source){for(var prop in source) {var propDescriptor=Object.getOwnPropertyDescriptor(source,prop);propDescriptor?Object.defineProperty(obj,prop,propDescriptor):obj[prop] = source[prop];}}return obj;}function extend(parent,properties){var Surrogate= /*#__PURE__*/(function(_parent){_inherits(Surrogate,_parent);var _super=_createSuper(Surrogate);function Surrogate(){var _this;_classCallCheck(this,Surrogate);for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}_this = _super.call.apply(_super,[this].concat(args));if(properties.initialize)properties.initialize.apply(_assertThisInitialized(_this),args);return _this;}return Surrogate;})(parent);assign(Surrogate.prototype,properties);return Surrogate;}function formatTime(time,paddedHours){if(!isFinite(time))return '--:--';time = time * 1000;time = parseInt(time / 1000);var seconds=time % 60;time = parseInt(time / 60);var minutes=time % 60;time = parseInt(time / 60);var hours=time % 24;var days=parseInt(time / 24);var out='';if(days && days > 0){out += days + ':';if(hours < 1)out += '00:';}if(hours && hours > 0 || paddedHours)out += ('0' + hours).slice(-2) + ':';out += ('0' + minutes).slice(-2) + ':';out += ('0' + seconds).slice(-2);return out.trim();}var Fullscreen={fullscreenElement:function fullscreenElement(){return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;},requestFullscreen:function requestFullscreen(el){if(el.requestFullscreen){return el.requestFullscreen();}else if(el.webkitRequestFullscreen){if(typeof el.then === 'function')return el.webkitRequestFullscreen();el.webkitRequestFullscreen();}else if(el.mozRequestFullScreen){return el.mozRequestFullScreen();}else if(el.msRequestFullscreen){return el.msRequestFullscreen();}else if(el.querySelector && el.querySelector('video') && el.querySelector('video').webkitEnterFullScreen){el.querySelector('video').webkitEnterFullScreen();}else if(el.webkitEnterFullScreen){el.webkitEnterFullScreen();}},cancelFullscreen:function cancelFullscreen(){var el=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:document;if(el.exitFullscreen)el.exitFullscreen();else if(el.webkitCancelFullScreen)el.webkitCancelFullScreen();else if(el.webkitExitFullscreen)el.webkitExitFullscreen();else if(el.mozCancelFullScreen)el.mozCancelFullScreen();else if(el.msExitFullscreen)el.msExitFullscreen();},fullscreenEnabled:function fullscreenEnabled(){return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled);}};var Config= /*#__PURE__*/(function(){function Config(){_classCallCheck(this,Config);}_createClass(Config,null,[{key:\"_defaultConfig\",value:function _defaultConfig(){return {volume:{value:100,parse:parseInt}};}},{key:\"_defaultValueFor\",value:function _defaultValueFor(key){try{return this._defaultConfig()[key].parse(this._defaultConfig()[key].value);}catch(e) {return undefined;}}},{key:\"_createKeyspace\",value:function _createKeyspace(key){return \"clappr.\".concat(document.domain,\".\").concat(key);}},{key:\"restore\",value:function restore(key){if(Browser.hasLocalstorage && localStorage[this._createKeyspace(key)])return this._defaultConfig()[key].parse(localStorage[this._createKeyspace(key)]);return this._defaultValueFor(key);}},{key:\"persist\",value:function persist(key,value){if(Browser.hasLocalstorage){try{localStorage[this._createKeyspace(key)] = value;return true;}catch(e) {return false;}}}}]);return Config;})();var QueryString= /*#__PURE__*/(function(){function QueryString(){_classCallCheck(this,QueryString);}_createClass(QueryString,null,[{key:\"parse\",value:function parse(paramsString){var match;var pl=/\\+/g, // Regex for replacing addition symbol with a space\n\tsearch=/([^&=]+)=?([^&]*)/g,decode=function decode(s){return decodeURIComponent(s.replace(pl,' '));},params={};while(match = search.exec(paramsString)) { // eslint-disable-line no-cond-assign\n\tparams[decode(match[1]).toLowerCase()] = decode(match[2]);}return params;}},{key:\"params\",get:function get(){var query=window.location.search.substring(1);if(query !== this.query){this._urlParams = this.parse(query);this.query = query;}return this._urlParams;}},{key:\"hashParams\",get:function get(){var hash=window.location.hash.substring(1);if(hash !== this.hash){this._hashParams = this.parse(hash);this.hash = hash;}return this._hashParams;}}]);return QueryString;})();function seekStringToSeconds(){var paramName=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:'t';var seconds=0;var seekString=QueryString.params[paramName] || QueryString.hashParams[paramName] || '';var parts=seekString.match(/[0-9]+[hms]+/g) || [];if(parts.length > 0){var factor={'h':3600,'m':60,'s':1};parts.forEach(function(el){if(el){var suffix=el[el.length - 1];var time=parseInt(el.slice(0,el.length - 1),10);seconds += time * factor[suffix];}});}else if(seekString){seconds = parseInt(seekString,10);}return seconds;}function uniqueId(prefix){idsCounter[prefix] || (idsCounter[prefix] = 0);var id=++idsCounter[prefix];return prefix + id;}function isNumber(value){return value - parseFloat(value) + 1 >= 0;}function currentScriptUrl(){var scripts=document.getElementsByTagName('script');return scripts.length?scripts[scripts.length - 1].src:'';}function getBrowserLanguage(){return window.navigator && window.navigator.language;}function now(){if(window.performance && window.performance.now)return performance.now();return Date.now();} // remove the item from the array if it exists in the array\n\tfunction removeArrayItem(arr,item){var i=arr.indexOf(item);if(i >= 0)arr.splice(i,1);} // find an item regardless of its letter case\n\tfunction listContainsIgnoreCase(item,items){if(item === undefined || items === undefined)return false;return items.find(function(itemEach){return item.toLowerCase() === itemEach.toLowerCase();}) !== undefined;} // https://github.com/video-dev/can-autoplay\n\tfunction canAutoPlayMedia(cb,options){options = Object.assign({inline:false,muted:false,timeout:250,type:'video',source:Media.mp4,element:null},options);var element=options.element?options.element:document.createElement(options.type);element.muted = options.muted;if(options.muted === true)element.setAttribute('muted','muted');if(options.inline === true)element.setAttribute('playsinline','playsinline');element.src = options.source;var promise=element.play();var timeoutId=setTimeout(function(){setResult(false,new Error(\"Timeout \".concat(options.timeout,\" ms has been reached\")));},options.timeout);var setResult=function setResult(result){var error=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:null;clearTimeout(timeoutId);cb(result,error);};if(promise !== undefined){promise.then(function(){return setResult(true);})[\"catch\"](function(err){return setResult(false,err);});}else {setResult(true);}} // Simple element factory with video recycle feature.\n\tvar DomRecycler= /*#__PURE__*/(function(){function DomRecycler(){_classCallCheck(this,DomRecycler);}_createClass(DomRecycler,null,[{key:\"configure\",value:function configure(options){this.options = zepto.extend(true,this.options,options);}},{key:\"create\",value:function create(name){if(this.options.recycleVideo && name === 'video' && videoStack.length > 0)return videoStack.shift();return document.createElement(name);}},{key:\"garbage\",value:function garbage(el){if(!this.options.recycleVideo || el.tagName.toUpperCase() !== 'VIDEO')return;zepto(el).children().remove();Object.values(el.attributes).forEach(function(attr){return el.removeAttribute(attr.name);});videoStack.push(el);}}]);return DomRecycler;})();DomRecycler.options = {recycleVideo:false};var DoubleEventHandler= /*#__PURE__*/(function(){function DoubleEventHandler(){var delay=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:500;_classCallCheck(this,DoubleEventHandler);this.delay = delay;this.lastTime = 0;}_createClass(DoubleEventHandler,[{key:\"handle\",value:function handle(event,cb){var prevented=arguments.length > 2 && arguments[2] !== undefined?arguments[2]:true; // Based on http://jsfiddle.net/brettwp/J4djY/\n\tvar currentTime=new Date().getTime();var diffTime=currentTime - this.lastTime;if(diffTime < this.delay && diffTime > 0){cb();prevented && event.preventDefault();}this.lastTime = currentTime;}}]);return DoubleEventHandler;})();var Utils={Config:Config,Fullscreen:Fullscreen,QueryString:QueryString,DomRecycler:DomRecycler,assign:assign,extend:extend,formatTime:formatTime,seekStringToSeconds:seekStringToSeconds,uniqueId:uniqueId,currentScriptUrl:currentScriptUrl,isNumber:isNumber,requestAnimationFrame:requestAnimationFrame,cancelAnimationFrame:cancelAnimationFrame,getBrowserLanguage:getBrowserLanguage,now:now,removeArrayItem:removeArrayItem,listContainsIgnoreCase:listContainsIgnoreCase,canAutoPlayMedia:canAutoPlayMedia,Media:Media,DoubleEventHandler:DoubleEventHandler}; // Use of this source code is governed by a BSD-style\n\t// license that can be found in the LICENSE file.\n\tvar BOLD='font-weight: bold; font-size: 13px;';var INFO='color: #006600;' + BOLD;var DEBUG='color: #0000ff;' + BOLD;var WARN='color: #ff8000;' + BOLD;var ERROR='color: #ff0000;' + BOLD;var LEVEL_DEBUG=0;var LEVEL_INFO=1;var LEVEL_WARN=2;var LEVEL_ERROR=3;var LEVEL_DISABLED=LEVEL_ERROR;var COLORS=[DEBUG,INFO,WARN,ERROR,ERROR];var DESCRIPTIONS=['debug','info','warn','error','disabled'];var Log= /*#__PURE__*/(function(){_createClass(Log,[{key:\"level\",get:function get(){return this._level;},set:function set(newLevel){this._level = newLevel;}}]);function Log(){var level=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:LEVEL_INFO;var offLevel=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:LEVEL_DISABLED;_classCallCheck(this,Log);this.EXCLUDE_LIST = ['timeupdate','playback:timeupdate','playback:progress','container:hover','container:timeupdate','container:progress'];this.level = level;this.previousLevel = this.level;this.offLevel = offLevel;}_createClass(Log,[{key:\"debug\",value:function debug(klass){this.log(klass,LEVEL_DEBUG,Array.prototype.slice.call(arguments,1));}},{key:\"info\",value:function info(klass){this.log(klass,LEVEL_INFO,Array.prototype.slice.call(arguments,1));}},{key:\"warn\",value:function warn(klass){this.log(klass,LEVEL_WARN,Array.prototype.slice.call(arguments,1));}},{key:\"error\",value:function error(klass){this.log(klass,LEVEL_ERROR,Array.prototype.slice.call(arguments,1));}},{key:\"onOff\",value:function onOff(){if(this.level === this.offLevel){this.level = this.previousLevel;}else {this.previousLevel = this.level;this.level = this.offLevel;} // handle instances where console.log is unavailable\n\twindow.console && window.console.log && window.console.log('%c[Clappr.Log] set log level to ' + DESCRIPTIONS[this.level],WARN);}},{key:\"log\",value:function log(klass,level,message){if(this.EXCLUDE_LIST.indexOf(message[0]) >= 0)return;if(level < this.level)return;if(!message){message = klass;klass = null;}var color=COLORS[level];var klassDescription='';if(klass)klassDescription = '[' + klass + ']';window.console && window.console.log && window.console.log.apply(console,['%c[' + DESCRIPTIONS[level] + ']' + klassDescription,color].concat(message));}}]);return Log;})();Log.LEVEL_DEBUG = LEVEL_DEBUG;Log.LEVEL_INFO = LEVEL_INFO;Log.LEVEL_WARN = LEVEL_WARN;Log.LEVEL_ERROR = LEVEL_ERROR;Log.getInstance = function(){if(this._instance === undefined)this._instance = new this();return this._instance;};Log.setLevel = function(level){this.getInstance().level = level;};Log.debug = function(){this.getInstance().debug.apply(this.getInstance(),arguments);};Log.info = function(){this.getInstance().info.apply(this.getInstance(),arguments);};Log.warn = function(){this.getInstance().warn.apply(this.getInstance(),arguments);};Log.error = function(){this.getInstance().error.apply(this.getInstance(),arguments);};var slice=Array.prototype.slice;var eventSplitter=/\\s+/;var eventsApi=function eventsApi(obj,action,name,rest){if(!name)return true; // Handle event maps.\n\tif(_typeof(name) === 'object'){for(var key in name) {obj[action].apply(obj,[key,name[key]].concat(rest));}return false;} // Handle space separated event names.\n\tif(eventSplitter.test(name)){var names=name.split(eventSplitter);for(var i=0,l=names.length;i < l;i++) {obj[action].apply(obj,[names[i]].concat(rest));}return false;}return true;};var triggerEvents=function triggerEvents(events,args,klass,name){var ev,i=-1;var l=events.length,a1=args[0],a2=args[1],a3=args[2];run();function run(){try{switch(args.length){ /* eslint-disable curly */case 0:while(++i < l) {(ev = events[i]).callback.call(ev.ctx);}return;case 1:while(++i < l) {(ev = events[i]).callback.call(ev.ctx,a1);}return;case 2:while(++i < l) {(ev = events[i]).callback.call(ev.ctx,a1,a2);}return;case 3:while(++i < l) {(ev = events[i]).callback.call(ev.ctx,a1,a2,a3);}return;default:while(++i < l) {(ev = events[i]).callback.apply(ev.ctx,args);}return;}}catch(exception) {Log.error.apply(Log,[klass,'error on event',name,'trigger','-',exception]);run();}}}; /**\n\t   * @class Events\n\t   * @constructor\n\t   * @module base\n\t   */var Events= /*#__PURE__*/(function(){function Events(){_classCallCheck(this,Events);}_createClass(Events,[{key:\"on\", /**\n\t       * listen to an event indefinitely, if you want to stop you need to call `off`\n\t       * @method on\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       * @param {Object} context\n\t       */value:function on(name,callback,context){if(!eventsApi(this,'on',name,[callback,context]) || !callback)return this;this._events || (this._events = {});var events=this._events[name] || (this._events[name] = []);events.push({callback:callback,context:context,ctx:context || this});return this;} /**\n\t       * listen to an event only once\n\t       * @method once\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       * @param {Object} context\n\t       */},{key:\"once\",value:function once(name,callback,context){var _this=this;var _once;if(!eventsApi(this,'once',name,[callback,context]) || !callback)return this;var off=function off(){return _this.off(name,_once);};_once = function once(){off();callback.apply(this,arguments);};return this.on(name,_once,context);} /**\n\t       * stop listening to an event\n\t       * @method off\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       * @param {Object} context\n\t       */},{key:\"off\",value:function off(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events || !eventsApi(this,'off',name,[callback,context]))return this;if(!name && !callback && !context){this._events = void 0;return this;}names = name?[name]:Object.keys(this._events); // jshint maxdepth:5\n\tfor(i = 0,l = names.length;i < l;i++) {name = names[i];events = this._events[name];if(events){this._events[name] = retain = [];if(callback || context){for(j = 0,k = events.length;j < k;j++) {ev = events[j];if(callback && callback !== ev.callback && callback !== ev.callback._callback || context && context !== ev.context)retain.push(ev);}}if(!retain.length)delete this._events[name];}}return this;} /**\n\t       * triggers an event given its `name`\n\t       * @method trigger\n\t       * @param {String} name\n\t       */},{key:\"trigger\",value:function trigger(name){var klass=this.name || this.constructor.name;Log.debug.apply(Log,[klass].concat(Array.prototype.slice.call(arguments)));if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,'trigger',name,args))return this;var events=this._events[name];var allEvents=this._events.all;if(events)triggerEvents(events,args,klass,name);if(allEvents)triggerEvents(allEvents,arguments,klass,name);return this;} /**\n\t       * stop listening an event for a given object\n\t       * @method stopListening\n\t       * @param {Object} obj\n\t       * @param {String} name\n\t       * @param {Function} callback\n\t       */},{key:\"stopListening\",value:function stopListening(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name && !callback;if(!callback && _typeof(name) === 'object')callback = this;if(obj)(listeningTo = {})[obj._listenId] = obj;for(var id in listeningTo) {obj = listeningTo[id];obj.off(name,callback,this);if(remove || Object.keys(obj._events).length === 0)delete this._listeningTo[id];}return this;}}],[{key:\"register\",value:function register(eventName){Events.Custom || (Events.Custom = {});var property=typeof eventName === 'string' && eventName.toUpperCase().trim();if(property && !Events.Custom[property]){Events.Custom[property] = property.toLowerCase().split('_').map(function(value,index){return index === 0?value:value = value[0].toUpperCase() + value.slice(1);}).join('');}else Log.error('Events','Error when register event: ' + eventName);}},{key:\"listAvailableCustomEvents\",value:function listAvailableCustomEvents(){Events.Custom || (Events.Custom = {});return Object.keys(Events.Custom).filter(function(property){return typeof Events.Custom[property] === 'string';});}}]);return Events;})();var listenMethods={listenTo:'on',listenToOnce:'once'};Object.keys(listenMethods).forEach(function(method){Events.prototype[method] = function(obj,name,callback){var listeningTo=this._listeningTo || (this._listeningTo = {});var id=obj._listenId || (obj._listenId = uniqueId('l'));listeningTo[id] = obj;if(!callback && _typeof(name) === 'object')callback = this;obj[listenMethods[method]](name,callback,this);return this;};}); // PLAYER EVENTS\n\t/**\n\t   * Fired when the player is ready on startup\n\t   *\n\t   * @event PLAYER_READY\n\t   */Events.PLAYER_READY = 'ready'; /**\n\t   * Fired when player resizes\n\t   *\n\t   * @event PLAYER_RESIZE\n\t   * @param {Object} currentSize an object with the current size\n\t   */Events.PLAYER_RESIZE = 'resize'; /**\n\t   * Fired when player changes its fullscreen state\n\t   *\n\t   * @event PLAYER_FULLSCREEN\n\t   * @param {Boolean} whether or not the player is on fullscreen mode\n\t   */Events.PLAYER_FULLSCREEN = 'fullscreen'; /**\n\t   * Fired when player starts to play\n\t   *\n\t   * @event PLAYER_PLAY\n\t   */Events.PLAYER_PLAY = 'play'; /**\n\t   * Fired when player pauses\n\t   *\n\t   * @event PLAYER_PAUSE\n\t   */Events.PLAYER_PAUSE = 'pause'; /**\n\t   * Fired when player stops\n\t   *\n\t   * @event PLAYER_STOP\n\t   */Events.PLAYER_STOP = 'stop'; /**\n\t   * Fired when player ends the video\n\t   *\n\t   * @event PLAYER_ENDED\n\t   */Events.PLAYER_ENDED = 'ended'; /**\n\t   * Fired when player seeks the video\n\t   *\n\t   * @event PLAYER_SEEK\n\t   * @param {Number} time the current time in seconds\n\t   */Events.PLAYER_SEEK = 'seek'; /**\n\t   * Fired when player receives an error\n\t   *\n\t   * @event PLAYER_ERROR\n\t   * @param {Object} error the error\n\t   */Events.PLAYER_ERROR = 'playererror'; /**\n\t   * Fired when there is an error\n\t   *\n\t   * @event ERROR\n\t   * @param {Object} error\n\t   * the error with the following format `{code, description, level, raw, origin, scope}`\n\t   * @param {String} [options.code]\n\t   * error's code: code to identify error in the following format: origin:code\n\t   * @param {String} [options.description]\n\t   * error's description: description of the error\n\t   * @param {String} [options.level]\n\t   * error's level: FATAL or WARN.\n\t   * @param {String} [options.origin]\n\t   * error's origin. Example: hls, html5, etc\n\t   * @param {String} [options.scope]\n\t   * error's scope. Example: playback, container, etc\n\t   * @param {String} [options.raw]\n\t   * raw error: the initial error received\n\t   */Events.ERROR = 'error'; /**\n\t   * Fired when the time is updated on player\n\t   *\n\t   * @event PLAYER_TIMEUPDATE\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.current]\n\t   * current time (in seconds)\n\t   * @param {Number} [progress.total]\n\t   * total time (in seconds)\n\t   */Events.PLAYER_TIMEUPDATE = 'timeupdate'; /**\n\t   * Fired when player updates its volume\n\t   *\n\t   * @event PLAYER_VOLUMEUPDATE\n\t   * @param {Number} volume the current volume\n\t   */Events.PLAYER_VOLUMEUPDATE = 'volumeupdate'; /**\n\t   * Fired when subtitle is available\n\t   *\n\t   * @event PLAYER_SUBTITLE_AVAILABLE\n\t   */Events.PLAYER_SUBTITLE_AVAILABLE = 'subtitleavailable'; // Playback Events\n\t/**\n\t   * Fired when the playback is downloading the media\n\t   *\n\t   * @event PLAYBACK_PROGRESS\n\t   * @param progress {Object}\n\t   * Data progress object\n\t   * @param [progress.start] {Number}\n\t   * start position of buffered content at current position\n\t   * @param [progress.current] {Number}\n\t   * end position of buffered content at current position\n\t   * @param [progress.total] {Number}\n\t   * total content to be downloaded\n\t   * @param buffered {Array}\n\t   * array of buffered segments ({start, end}). [Only for supported playbacks]\n\t   */Events.PLAYBACK_PROGRESS = 'playback:progress'; /**\n\t   * Fired when the time is updated on playback\n\t   *\n\t   * @event PLAYBACK_TIMEUPDATE\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.current]\n\t   * current time (in seconds)\n\t   * @param {Number} [progress.total]\n\t   * total time (in seconds)\n\t   */Events.PLAYBACK_TIMEUPDATE = 'playback:timeupdate'; /**\n\t   * Fired when playback is ready\n\t   *\n\t   * @event PLAYBACK_READY\n\t   */Events.PLAYBACK_READY = 'playback:ready'; /**\n\t   * Fired when the playback starts having to buffer because\n\t   * playback can currently not be smooth.\n\t   *\n\t   * This corresponds to the playback `buffering` property being\n\t   * `true`.\n\t   *\n\t   * @event PLAYBACK_BUFFERING\n\t   */Events.PLAYBACK_BUFFERING = 'playback:buffering'; /**\n\t   * Fired when the playback has enough in the buffer to be\n\t   * able to play smoothly, after previously being unable to\n\t   * do this.\n\t   *\n\t   * This corresponds to the playback `buffering` property being\n\t   * `false`.\n\t   *\n\t   * @event PLAYBACK_BUFFERFULL\n\t   */Events.PLAYBACK_BUFFERFULL = 'playback:bufferfull'; /**\n\t   * Fired when playback changes any settings (volume, seek and etc)\n\t   *\n\t   * @event PLAYBACK_SETTINGSUPDATE\n\t   */Events.PLAYBACK_SETTINGSUPDATE = 'playback:settingsupdate'; /**\n\t   * Fired when playback loaded its metadata\n\t   *\n\t   * @event PLAYBACK_LOADEDMETADATA\n\t   * @param {Object} metadata Data\n\t   * settings object\n\t   * @param {Number} [metadata.duration]\n\t   * the playback duration\n\t   * @param {Object} [metadata.data]\n\t   * extra meta data\n\t   */Events.PLAYBACK_LOADEDMETADATA = 'playback:loadedmetadata'; /**\n\t   * Fired when playback updates its video quality\n\t   *\n\t   * @event PLAYBACK_HIGHDEFINITIONUPDATE\n\t   * @param {Boolean} isHD\n\t   * true when is on HD, false otherwise\n\t   */Events.PLAYBACK_HIGHDEFINITIONUPDATE = 'playback:highdefinitionupdate'; /**\n\t   * Fired when playback updates its bitrate\n\t   *\n\t   * @event PLAYBACK_BITRATE\n\t   * @param {Object} bitrate Data\n\t   * bitrate object\n\t   * @param {Number} [bitrate.bandwidth]\n\t   * bitrate bandwidth when it's available\n\t   * @param {Number} [bitrate.width]\n\t   * playback width (ex: 720, 640, 1080)\n\t   * @param {Number} [bitrate.height]\n\t   * playback height (ex: 240, 480, 720)\n\t   * @param {Number} [bitrate.level]\n\t   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n\t   */Events.PLAYBACK_BITRATE = 'playback:bitrate'; /**\n\t   * Fired when the playback has its levels\n\t   *\n\t   * @event PLAYBACK_LEVELS_AVAILABLE\n\t   * @param {Array} levels\n\t   * the ordered levels, each one with the following format `{id: 1, label: '500kbps'}` ps: id should be a number >= 0\n\t   * @param {Number} initial\n\t   * the initial level otherwise -1 (AUTO)\n\t   */Events.PLAYBACK_LEVELS_AVAILABLE = 'playback:levels:available'; /**\n\t   * Fired when the playback starts to switch level\n\t   *\n\t   * @event PLAYBACK_LEVEL_SWITCH_START\n\t   *\n\t   */Events.PLAYBACK_LEVEL_SWITCH_START = 'playback:levels:switch:start'; /**\n\t   * Fired when the playback ends the level switch\n\t   *\n\t   * @event PLAYBACK_LEVEL_SWITCH_END\n\t   *\n\t   */Events.PLAYBACK_LEVEL_SWITCH_END = 'playback:levels:switch:end'; /**\n\t   * Fired when playback internal state changes\n\t   *\n\t   * @event PLAYBACK_PLAYBACKSTATE\n\t   * @param {Object} state Data\n\t   * state object\n\t   * @param {String} [state.type]\n\t   * the playback type\n\t   */Events.PLAYBACK_PLAYBACKSTATE = 'playback:playbackstate'; /**\n\t   * Fired when DVR becomes enabled/disabled.\n\t   *\n\t   * @event PLAYBACK_DVR\n\t   * @param {boolean} state true if dvr enabled\n\t   */Events.PLAYBACK_DVR = 'playback:dvr'; // TODO doc\n\tEvents.PLAYBACK_MEDIACONTROL_DISABLE = 'playback:mediacontrol:disable'; // TODO doc\n\tEvents.PLAYBACK_MEDIACONTROL_ENABLE = 'playback:mediacontrol:enable'; /**\n\t   * Fired when the media for a playback ends.\n\t   *\n\t   * @event PLAYBACK_ENDED\n\t   * @param {String} name the name of the playback\n\t   */Events.PLAYBACK_ENDED = 'playback:ended'; /**\n\t   * Fired when user requests `play()`\n\t   *\n\t   * @event PLAYBACK_PLAY_INTENT\n\t   */Events.PLAYBACK_PLAY_INTENT = 'playback:play:intent'; /**\n\t   * Fired when the media for a playback starts playing.\n\t   * This is not necessarily when the user requests `play()`\n\t   * The media may have to buffer first.\n\t   * I.e. `isPlaying()` might return `true` before this event is fired,\n\t   * because `isPlaying()` represents the intended state.\n\t   *\n\t   * @event PLAYBACK_PLAY\n\t   */Events.PLAYBACK_PLAY = 'playback:play'; /**\n\t   * Fired when the media for a playback pauses.\n\t   *\n\t   * @event PLAYBACK_PAUSE\n\t   */Events.PLAYBACK_PAUSE = 'playback:pause'; /**\n\t   * Fired when the media for a playback is seeking.\n\t   *\n\t   * @event PLAYBACK_SEEK\n\t   */Events.PLAYBACK_SEEK = 'playback:seek'; /**\n\t   * Fired when the media for a playback is seeked.\n\t   *\n\t   * @event PLAYBACK_SEEKED\n\t   */Events.PLAYBACK_SEEKED = 'playback:seeked'; /**\n\t   * Fired when the media for a playback is stopped.\n\t   *\n\t   * @event PLAYBACK_STOP\n\t   */Events.PLAYBACK_STOP = 'playback:stop'; /**\n\t   * Fired if an error occurs in the playback.\n\t   *\n\t   * @event PLAYBACK_ERROR\n\t   * @param {Object} error An object containing the error details\n\t   * @param {String} name Playback name\n\t   */Events.PLAYBACK_ERROR = 'playback:error'; // TODO doc\n\tEvents.PLAYBACK_STATS_ADD = 'playback:stats:add'; // TODO doc\n\tEvents.PLAYBACK_FRAGMENT_LOADED = 'playback:fragment:loaded'; // TODO doc\n\tEvents.PLAYBACK_LEVEL_SWITCH = 'playback:level:switch'; /**\n\t   * Fired when subtitle is available on playback for display\n\t   *\n\t   * @event PLAYBACK_SUBTITLE_AVAILABLE\n\t   */Events.PLAYBACK_SUBTITLE_AVAILABLE = 'playback:subtitle:available'; /**\n\t   * Fired when playback subtitle track has changed\n\t   *\n\t   * @event CONTAINER_SUBTITLE_CHANGED\n\t   * @param {Object} track Data\n\t   * track object\n\t   * @param {Number} [track.id]\n\t   * selected track id\n\t   */Events.PLAYBACK_SUBTITLE_CHANGED = 'playback:subtitle:changed'; // Core Events\n\t/**\n\t   * Fired when the containers are created\n\t   *\n\t   * @event CORE_CONTAINERS_CREATED\n\t   */Events.CORE_CONTAINERS_CREATED = 'core:containers:created'; /**\n\t   * Fired when the active container changed\n\t   *\n\t   * @event CORE_ACTIVE_CONTAINER_CHANGED\n\t   */Events.CORE_ACTIVE_CONTAINER_CHANGED = 'core:active:container:changed'; /**\n\t   * Fired when the options were changed for the core\n\t   *\n\t   * @event CORE_OPTIONS_CHANGE\n\t   * @param {Object} new options provided to configure() method\n\t   */Events.CORE_OPTIONS_CHANGE = 'core:options:change'; /**\n\t   * Fired after creating containers, when the core is ready\n\t   *\n\t   * @event CORE_READY\n\t   */Events.CORE_READY = 'core:ready'; /**\n\t   * Fired when the fullscreen state change\n\t   *\n\t   * @event CORE_FULLSCREEN\n\t   * @param {Boolean} whether or not the player is on fullscreen mode\n\t   */Events.CORE_FULLSCREEN = 'core:fullscreen'; /**\n\t   * Fired when core updates size\n\t   *\n\t   * @event CORE_RESIZE\n\t   * @param {Object} currentSize an object with the current size\n\t   */Events.CORE_RESIZE = 'core:resize'; /**\n\t   * Fired when the screen orientation has changed.\n\t   * This event is trigger only for mobile devices.\n\t   *\n\t   * @event CORE_SCREEN_ORIENTATION_CHANGED\n\t   * @param {Object} screen An object with screen orientation\n\t   * screen object\n\t   * @param {Object} [screen.event]\n\t   * window resize event object\n\t   * @param {String} [screen.orientation]\n\t   * screen orientation (ie: 'landscape' or 'portrait')\n\t   */Events.CORE_SCREEN_ORIENTATION_CHANGED = 'core:screen:orientation:changed'; /**\n\t   * Fired when occurs mouse move event on core element\n\t   *\n\t   * @event CORE_MOUSE_MOVE\n\t   * @param {Object} event a DOM event\n\t   */Events.CORE_MOUSE_MOVE = 'core:mousemove'; /**\n\t   * Fired when occurs mouse leave event on core element\n\t   *\n\t   * @event CORE_MOUSE_LEAVE\n\t   * @param {Object} event a DOM event\n\t   */Events.CORE_MOUSE_LEAVE = 'core:mouseleave'; // Container Events\n\t/**\n\t   * Fired when the container internal state changes\n\t   *\n\t   * @event CONTAINER_PLAYBACKSTATE\n\t   * @param {Object} state Data\n\t   * state object\n\t   * @param {String} [state.type]\n\t   * the playback type\n\t   */Events.CONTAINER_PLAYBACKSTATE = 'container:playbackstate';Events.CONTAINER_PLAYBACKDVRSTATECHANGED = 'container:dvr'; /**\n\t   * Fired when the container updates its bitrate\n\t   *\n\t   * @event CONTAINER_BITRATE\n\t   * @param {Object} bitrate Data\n\t   * bitrate object\n\t   * @param {Number} [bitrate.bandwidth]\n\t   * bitrate bandwidth when it's available\n\t   * @param {Number} [bitrate.width]\n\t   * playback width (ex: 720, 640, 1080)\n\t   * @param {Number} [bitrate.height]\n\t   * playback height (ex: 240, 480, 720)\n\t   * @param {Number} [bitrate.level]\n\t   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n\t   */Events.CONTAINER_BITRATE = 'container:bitrate';Events.CONTAINER_STATS_REPORT = 'container:stats:report';Events.CONTAINER_DESTROYED = 'container:destroyed'; /**\n\t   * Fired when the container is ready\n\t   *\n\t   * @event CONTAINER_READY\n\t   */Events.CONTAINER_READY = 'container:ready'; /**\n\t   * Fired when the container was resized.\n\t   *\n\t   * Some fullscreen modes won't trigger this resize since they don't affect the container, only the playback contents.\n\t   *\n\t   * @event CONTAINER_RESIZE\n\t   */Events.CONTAINER_RESIZE = 'container:resize';Events.CONTAINER_ERROR = 'container:error'; /**\n\t   * Fired when the container loaded its metadata\n\t   *\n\t   * @event CONTAINER_LOADEDMETADATA\n\t   * @param {Object} metadata Data\n\t   * settings object\n\t   * @param {Number} [metadata.duration]\n\t   * the playback duration\n\t   * @param {Object} [metadata.data]\n\t   * extra meta data\n\t   */Events.CONTAINER_LOADEDMETADATA = 'container:loadedmetadata'; /**\n\t   * Fired when subtitle is available on container for display\n\t   *\n\t   * @event CONTAINER_SUBTITLE_AVAILABLE\n\t   */Events.CONTAINER_SUBTITLE_AVAILABLE = 'container:subtitle:available'; /**\n\t   * Fired when subtitle track has changed\n\t   *\n\t   * @event CONTAINER_SUBTITLE_CHANGED\n\t   * @param {Object} track Data\n\t   * track object\n\t   * @param {Number} [track.id]\n\t   * selected track id\n\t   */Events.CONTAINER_SUBTITLE_CHANGED = 'container:subtitle:changed'; /**\n\t   * Fired when the time is updated on container\n\t   *\n\t   * @event CONTAINER_TIMEUPDATE\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.current]\n\t   * current time (in seconds)\n\t   * @param {Number} [progress.total]\n\t   * total time (in seconds)\n\t   */Events.CONTAINER_TIMEUPDATE = 'container:timeupdate'; /**\n\t   * Fired when the container is downloading the media\n\t   *\n\t   * @event CONTAINER_PROGRESS\n\t   * @param {Object} progress Data\n\t   * progress object\n\t   * @param {Number} [progress.start]\n\t   * initial downloaded content\n\t   * @param {Number} [progress.current]\n\t   * current dowloaded content\n\t   * @param {Number} [progress.total]\n\t   * total content to be downloaded\n\t   */Events.CONTAINER_PROGRESS = 'container:progress';Events.CONTAINER_PLAY = 'container:play';Events.CONTAINER_STOP = 'container:stop';Events.CONTAINER_PAUSE = 'container:pause';Events.CONTAINER_ENDED = 'container:ended';Events.CONTAINER_CLICK = 'container:click';Events.CONTAINER_DBLCLICK = 'container:dblclick';Events.CONTAINER_CONTEXTMENU = 'container:contextmenu';Events.CONTAINER_MOUSE_ENTER = 'container:mouseenter';Events.CONTAINER_MOUSE_LEAVE = 'container:mouseleave'; /**\n\t   * Fired when the container seeks the video\n\t   *\n\t   * @event CONTAINER_SEEK\n\t   * @param {Number} time the current time in seconds\n\t   */Events.CONTAINER_SEEK = 'container:seek'; /**\n\t   * Fired when the container was finished the seek video\n\t   *\n\t   * @event CONTAINER_SEEKED\n\t   * @param {Number} time the current time in seconds\n\t   */Events.CONTAINER_SEEKED = 'container:seeked';Events.CONTAINER_VOLUME = 'container:volume';Events.CONTAINER_FULLSCREEN = 'container:fullscreen'; /**\n\t   * Fired when container is buffering\n\t   *\n\t   * @event CONTAINER_STATE_BUFFERING\n\t   */Events.CONTAINER_STATE_BUFFERING = 'container:state:buffering'; /**\n\t   * Fired when the container filled the buffer\n\t   *\n\t   * @event CONTAINER_STATE_BUFFERFULL\n\t   */Events.CONTAINER_STATE_BUFFERFULL = 'container:state:bufferfull'; /**\n\t   * Fired when the container changes any settings (volume, seek and etc)\n\t   *\n\t   * @event CONTAINER_SETTINGSUPDATE\n\t   */Events.CONTAINER_SETTINGSUPDATE = 'container:settingsupdate'; /**\n\t   * Fired when container updates its video quality\n\t   *\n\t   * @event CONTAINER_HIGHDEFINITIONUPDATE\n\t   * @param {Boolean} isHD\n\t   * true when is on HD, false otherwise\n\t   */Events.CONTAINER_HIGHDEFINITIONUPDATE = 'container:highdefinitionupdate'; /**\n\t   * Fired when the media control shows\n\t   *\n\t   * @event CONTAINER_MEDIACONTROL_SHOW\n\t   */Events.CONTAINER_MEDIACONTROL_SHOW = 'container:mediacontrol:show'; /**\n\t   * Fired when the media control hides\n\t   *\n\t   * @event CONTAINER_MEDIACONTROL_HIDE\n\t   */Events.CONTAINER_MEDIACONTROL_HIDE = 'container:mediacontrol:hide';Events.CONTAINER_MEDIACONTROL_DISABLE = 'container:mediacontrol:disable';Events.CONTAINER_MEDIACONTROL_ENABLE = 'container:mediacontrol:enable';Events.CONTAINER_STATS_ADD = 'container:stats:add'; /**\n\t   * Fired when the options were changed for the container\n\t   *\n\t   * @event CONTAINER_OPTIONS_CHANGE\n\t   */Events.CONTAINER_OPTIONS_CHANGE = 'container:options:change'; // MediaControl Events\n\tEvents.MEDIACONTROL_RENDERED = 'mediacontrol:rendered'; /**\n\t   * Fired when the player enters/exit on fullscreen\n\t   *\n\t   * @event MEDIACONTROL_FULLSCREEN\n\t   */Events.MEDIACONTROL_FULLSCREEN = 'mediacontrol:fullscreen'; /**\n\t   * Fired when the media control shows\n\t   *\n\t   * @event MEDIACONTROL_SHOW\n\t   */Events.MEDIACONTROL_SHOW = 'mediacontrol:show'; /**\n\t   * Fired when the media control hides\n\t   *\n\t   * @event MEDIACONTROL_HIDE\n\t   */Events.MEDIACONTROL_HIDE = 'mediacontrol:hide'; /**\n\t   * Fired when mouse enters on the seekbar\n\t   *\n\t   * @event MEDIACONTROL_MOUSEMOVE_SEEKBAR\n\t   * @param {Object} event\n\t   * the javascript event\n\t   */Events.MEDIACONTROL_MOUSEMOVE_SEEKBAR = 'mediacontrol:mousemove:seekbar'; /**\n\t   * Fired when mouse leaves the seekbar\n\t   *\n\t   * @event MEDIACONTROL_MOUSELEAVE_SEEKBAR\n\t   * @param {Object} event\n\t   * the javascript event\n\t   */Events.MEDIACONTROL_MOUSELEAVE_SEEKBAR = 'mediacontrol:mouseleave:seekbar'; /**\n\t   * Fired when the media is being played\n\t   *\n\t   * @event MEDIACONTROL_PLAYING\n\t   */Events.MEDIACONTROL_PLAYING = 'mediacontrol:playing'; /**\n\t   * Fired when the media is not being played\n\t   *\n\t   * @event MEDIACONTROL_NOTPLAYING\n\t   */Events.MEDIACONTROL_NOTPLAYING = 'mediacontrol:notplaying'; /**\n\t   * Fired when the container was changed\n\t   *\n\t   * @event MEDIACONTROL_CONTAINERCHANGED\n\t   */Events.MEDIACONTROL_CONTAINERCHANGED = 'mediacontrol:containerchanged'; /**\n\t   * Fired when the options were changed for the mediacontrol\n\t   *\n\t   * @event MEDIACONTROL_OPTIONS_CHANGE\n\t   */Events.MEDIACONTROL_OPTIONS_CHANGE = 'mediacontrol:options:change'; /**\n\t   * @class BaseObject\n\t   * @constructor\n\t   * @extends Events\n\t   * @module base\n\t   */var BaseObject= /*#__PURE__*/(function(_Events){_inherits(BaseObject,_Events);var _super=_createSuper(BaseObject);_createClass(BaseObject,[{key:\"options\", /**\n\t       * returns the object options\n\t       * @property options\n\t       * @type Object\n\t       */get:function get(){return this._options;} /**\n\t       * @method constructor\n\t       * @param {Object} options\n\t       */}]);function BaseObject(){var _this;var options=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};_classCallCheck(this,BaseObject);_this = _super.call(this,options);_this._options = options;_this.uniqueId = uniqueId('o');return _this;} /**\n\t    * a unique id prefixed with `'o'`, `o1, o232`\n\t    *\n\t    * @property uniqueId\n\t    * @type String\n\t    */return BaseObject;})(Events); /* eslint-disable no-var */ // Simple JavaScript Templating\n\t// Paul Miller (http://paulmillr.com)\n\t// http://underscorejs.org\n\t// (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t// By default, Underscore uses ERB-style template delimiters, change the\n\t// following template settings to use alternative delimiters.\n\tvar settings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g}; // When customizing `templateSettings`, if you don't want to define an\n\t// interpolation, evaluation or escaping regex, we need one that is\n\t// guaranteed not to match.\n\tvar noMatch=/(.)^/; // Certain characters need to be escaped so that they can be put into a\n\t// string literal.\n\tvar escapes={'\\'':'\\'','\\\\':'\\\\','\\r':'r','\\n':'n','\\t':'t','\\u2028':'u2028','\\u2029':'u2029'};var escaper=/\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g; // List of HTML entities for escaping.\n\tvar htmlEntities={'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;','\\'':'&#x27;'};var entityRe=new RegExp('[&<>\"\\']','g');var escapeExpr=function escapeExpr(string){if(string === null)return '';return ('' + string).replace(entityRe,function(match){return htmlEntities[match];});};var counter=0; // JavaScript micro-templating, similar to John Resig's implementation.\n\t// Underscore templating handles arbitrary delimiters, preserves whitespace,\n\t// and correctly escapes quotes within interpolated code.\n\tvar tmpl=function tmpl(text,data){var render; // Combine delimiters into one regular expression via alternation.\n\tvar matcher=new RegExp([(settings.escape || noMatch).source,(settings.interpolate || noMatch).source,(settings.evaluate || noMatch).source].join('|') + '|$','g'); // Compile the template source, escaping string literals appropriately.\n\tvar index=0;var source='__p+=\\'';text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source += text.slice(index,offset).replace(escaper,function(match){return '\\\\' + escapes[match];});if(escape)source += '\\'+\\n((__t=(' + escape + '))==null?\\'\\':escapeExpr(__t))+\\n\\'';if(interpolate)source += '\\'+\\n((__t=(' + interpolate + '))==null?\\'\\':__t)+\\n\\'';if(evaluate)source += '\\';\\n' + evaluate + '\\n__p+=\\'';index = offset + match.length;return match;});source += '\\';\\n'; // If a variable is not specified, place data values in local scope.\n\tif(!settings.variable)source = 'with(obj||{}){\\n' + source + '}\\n';source = 'var __t,__p=\\'\\',__j=Array.prototype.join,' + 'print=function(){__p+=__j.call(arguments,\\'\\');};\\n' + source + 'return __p;\\n//# sourceURL=/microtemplates/source[' + counter++ + ']';try{ /*jshint -W054 */ // TODO: find a way to avoid eval\n\trender = new Function(settings.variable || 'obj','escapeExpr',source);}catch(e) {e.source = source;throw e;}if(data)return render(data,escapeExpr);var template=function template(data){return render.call(this,data,escapeExpr);}; // Provide the compiled function source as a convenience for precompilation.\n\ttemplate.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';return template;};tmpl.settings = settings; // Copyright 2014 Globo.com Player authors. All rights reserved.\n\tvar Styler={getStyleFor:function getStyleFor(style){var options=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:{baseUrl:''};return zepto('<style class=\"clappr-style\"></style>').html(tmpl(style.toString())(options));}};var delegateEventSplitter=/^(\\S+)\\s*(.*)$/; /**\n\t   * A base class to create ui object.\n\t   * @class UIObject\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module base\n\t   */var UIObject= /*#__PURE__*/(function(_BaseObject){_inherits(UIObject,_BaseObject);var _super=_createSuper(UIObject);_createClass(UIObject,[{key:\"tagName\", /**\n\t       * a unique id prefixed with `'c'`, `c1, c232`\n\t       *\n\t       * @property cid\n\t       * @type String\n\t       */ /**\n\t       * the dom element itself\n\t       *\n\t       * @property el\n\t       * @type HTMLElement\n\t       */ /**\n\t       * the dom element wrapped by `$`\n\t       *\n\t       * @property $el\n\t       * @type HTMLElement\n\t       */ /**\n\t       * gets the tag name for the ui component\n\t       * @method tagName\n\t       * @default div\n\t       * @return {String} tag's name\n\t       */get:function get(){return 'div';} /**\n\t       * a literal object mapping element's events to methods\n\t       * @property events\n\t       * @type Object\n\t       * @example\n\t       *\n\t       *```javascript\n\t       *\n\t       * class MyButton extends UIObject {\n\t       *   constructor(options) {\n\t       *     super(options)\n\t       *     this.myId = 0\n\t       *   }\n\t       *   get events() { return { 'click': 'myClick' } }\n\t       *   myClick(){ this.myId = 42 }\n\t       * }\n\t       *\n\t       * // when you click on MyButton the method `myClick` will be called\n\t       *```\n\t       */},{key:\"events\",get:function get(){return {};} /**\n\t       * a literal object mapping attributes and values to the element\n\t       * element's attribute name and the value the attribute value\n\t       * @property attributes\n\t       * @type Object\n\t       * @example\n\t       *\n\t       *```javascript\n\t       *\n\t       * class MyButton extends UIObject {\n\t       *    constructor(options) { super(options) }\n\t       *    get attributes() { return { class: 'my-button'} }\n\t       * }\n\t       *\n\t       * // MyButton.el.className will be 'my-button'\n\t       * ```\n\t       */},{key:\"attributes\",get:function get(){return {};} /**\n\t       * it builds an ui component by:\n\t       *  * creating an id for the component `cid`\n\t       *  * making sure the element is created `$el`\n\t       *  * delegating all `events` to the element\n\t       * @method constructor\n\t       * @param {Object} options the options object\n\t       */}]);function UIObject(options){var _this;_classCallCheck(this,UIObject);_this = _super.call(this,options);_this.cid = uniqueId('c');_this._ensureElement();_this.delegateEvents();return _this;} /**\n\t     * selects within the component.\n\t     * @method $\n\t     * @param {String} selector a selector to find within the component.\n\t     * @return {HTMLElement} an element, if it exists.\n\t     * @example\n\t     * ```javascript\n\t     * fullScreenBarUIComponent.$('.button-full') //will return only `.button-full` within the component\n\t     * ```\n\t     */_createClass(UIObject,[{key:\"$\",value:function $(selector){return this.$el.find(selector);} /**\n\t       * render the component, usually attach it to a real existent `element`\n\t       * @method render\n\t       * @return {UIObject} itself\n\t       */},{key:\"render\",value:function render(){return this;} /**\n\t       * removes the ui component from DOM\n\t       * @method destroy\n\t       * @return {UIObject} itself\n\t       */},{key:\"destroy\",value:function destroy(){this.$el.remove();this.stopListening();this.undelegateEvents();return this;} /**\n\t       * set element to `el` and `$el`\n\t       * @method setElement\n\t       * @param {HTMLElement} element\n\t       * @param {Boolean} delegate whether is delegate or not\n\t       * @return {UIObject} itself\n\t       */},{key:\"setElement\",value:function setElement(element,delegate){if(this.$el)this.undelegateEvents();this.$el = zepto.zepto.isZ(element)?element:zepto(element);this.el = this.$el[0];if(delegate !== false)this.delegateEvents();return this;} /**\n\t       * delegates all the original `events` on `element` to its callbacks\n\t       * @method delegateEvents\n\t       * @param {Object} events\n\t       * @return {UIObject} itself\n\t       */},{key:\"delegateEvents\",value:function delegateEvents(events){if(!events)events = this.events;this.undelegateEvents();for(var key in events) {var method=events[key];if(method && method.constructor !== Function)method = this[events[key]];if(!method)continue;var match=key.match(delegateEventSplitter);var eventName=match[1],selector=match[2];eventName += '.delegateEvents' + this.cid;if(selector === '')this.$el.on(eventName,method.bind(this));else this.$el.on(eventName,selector,method.bind(this));}return this;} /**\n\t       * undelegats all the `events`\n\t       * @method undelegateEvents\n\t       * @return {UIObject} itself\n\t       */},{key:\"undelegateEvents\",value:function undelegateEvents(){this.$el.off('.delegateEvents' + this.cid);return this;} /**\n\t       * ensures the creation of this ui component\n\t       * @method _ensureElement\n\t       * @private\n\t       */},{key:\"_ensureElement\",value:function _ensureElement(){if(!this.el){var attrs=zepto.extend(true,{},this.attributes);if(this.id)attrs.id = this.id;if(this.className)attrs['class'] = this.className;var $el=zepto(DomRecycler.create(this.tagName)).attr(attrs);this.setElement($el,false);}else {this.setElement(this.el,false);}}}]);return UIObject;})(BaseObject); /**\n\t   * The PlayerError is responsible to receive and propagate errors.\n\t   * @class PlayerError\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   */var PlayerError= /*#__PURE__*/(function(_BaseObject){_inherits(PlayerError,_BaseObject);var _super=_createSuper(PlayerError);_createClass(PlayerError,[{key:\"name\",get:function get(){return 'error';} /**\n\t       * @property Levels\n\t       * @type {Object} object with error levels\n\t       */}],[{key:\"Levels\",get:function get(){return {FATAL:'FATAL',WARN:'WARN',INFO:'INFO'};}}]);function PlayerError(){var _this;var options=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};var core=arguments.length > 1?arguments[1]:undefined;_classCallCheck(this,PlayerError);_this = _super.call(this,options);_this.core = core;return _this;} /**\n\t     * creates and trigger an error.\n\t     * @method createError\n\t     * @param {Object} err should be an object with code, description, level, origin, scope and raw error.\n\t     */_createClass(PlayerError,[{key:\"createError\",value:function createError(err){if(!this.core){Log.warn(this.name,'Core is not set. Error: ',err);return;}this.core.trigger(Events.ERROR,err);}}]);return PlayerError;})(BaseObject);var ErrorMixin={ /**\n\t     * creates an error.\n\t     * @method createError\n\t     * @param {Object} error should be an object with code, description, level and raw error.\n\t     * @return {Object} Object with formatted error data including origin and scope\n\t     */createError:function createError(error){var options=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:{useCodePrefix:true};var scope=this.constructor && this.constructor.type || '';var origin=this.name || scope;var i18n=this.i18n || this.core && this.core.i18n || this.container && this.container.i18n;var prefixedCode=\"\".concat(origin,\":\").concat(error && error.code || 'unknown');var defaultError={description:'',level:PlayerError.Levels.FATAL,origin:origin,scope:scope,raw:{}};var errorData=Object.assign({},defaultError,error,{code:options.useCodePrefix?prefixedCode:error.code});if(i18n && errorData.level == PlayerError.Levels.FATAL && !errorData.UI){var defaultUI={title:i18n.t('default_error_title'),message:i18n.t('default_error_message')};errorData.UI = defaultUI;}this.playerError?this.playerError.createError(errorData):Log.warn(origin,'PlayerError is not defined. Error: ',errorData);return errorData;}};var UICorePlugin= /*#__PURE__*/(function(_UIObject){_inherits(UICorePlugin,_UIObject);var _super=_createSuper(UICorePlugin);_createClass(UICorePlugin,[{key:\"playerError\",get:function get(){return this.core.playerError;}}]);function UICorePlugin(core){var _this;_classCallCheck(this,UICorePlugin);_this = _super.call(this,core.options);_this.core = core;_this.enabled = true;_this.bindEvents();_this.render();return _this;}_createClass(UICorePlugin,[{key:\"bindEvents\",value:function bindEvents(){}},{key:\"getExternalInterface\",value:function getExternalInterface(){return {};}},{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.$el.show();this.enabled = true;}}},{key:\"disable\",value:function disable(){this.stopListening();this.$el.hide();this.enabled = false;}},{key:\"render\",value:function render(){return this;}}]);return UICorePlugin;})(UIObject);Object.assign(UICorePlugin.prototype,ErrorMixin);UICorePlugin.extend = function(properties){return extend(UICorePlugin,properties);};UICorePlugin.type = 'core';var css_248z=\".container[data-container] {\\n  position: absolute;\\n  background-color: black;\\n  height: 100%;\\n  width: 100%;\\n  max-width: 100%; }\\n  .container[data-container] .chromeless {\\n    cursor: default; }\\n\\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\\n  cursor: pointer; }\\n\"; /**\n\t   * An abstraction to represent a container for a given playback\n\t   * TODO: describe its responsabilities\n\t   * @class Container\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module base\n\t   */var Container= /*#__PURE__*/(function(_UIObject){_inherits(Container,_UIObject);var _super=_createSuper(Container);_createClass(Container,[{key:\"name\", /**\n\t       * container's name\n\t       * @method name\n\t       * @default Container\n\t       * @return {String} container's name\n\t       */get:function get(){return 'Container';}},{key:\"attributes\",get:function get(){return {\"class\":'container','data-container':''};}},{key:\"events\",get:function get(){return {'click':'clicked','dblclick':'dblClicked','touchend':'dblTap','contextmenu':'onContextMenu','mouseenter':'mouseEnter','mouseleave':'mouseLeave'};} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return this.playback.ended;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * (i.e if a live stream is playing smoothly, this will be false)\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return this.playback.buffering;} /**\n\t       * The internationalization plugin.\n\t       * @property i18n\n\t       * @type {Strings}\n\t       */},{key:\"i18n\",get:function get(){return this._i18n;} /**\n\t       * checks if has closed caption tracks.\n\t       * @property hasClosedCaptionsTracks\n\t       * @type {Boolean}\n\t       */},{key:\"hasClosedCaptionsTracks\",get:function get(){return this.playback.hasClosedCaptionsTracks;} /**\n\t       * gets the available closed caption tracks.\n\t       * @property closedCaptionsTracks\n\t       * @type {Array} an array of objects with at least 'id' and 'name' properties\n\t       */},{key:\"closedCaptionsTracks\",get:function get(){return this.playback.closedCaptionsTracks;} /**\n\t       * gets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */},{key:\"closedCaptionsTrackId\",get:function get(){return this.playback.closedCaptionsTrackId;}, /**\n\t       * sets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */set:function set(trackId){this.playback.closedCaptionsTrackId = trackId;} /**\n\t       * it builds a container\n\t       * @method constructor\n\t       * @param {Object} options the options object\n\t       * @param {Strings} i18n the internationalization component\n\t       */}]);function Container(options,i18n,playerError){var _this;_classCallCheck(this,Container);_this = _super.call(this,options);_this._i18n = i18n;_this.currentTime = 0;_this.volume = 100;_this.playback = options.playback;_this.playerError = playerError;_this.settings = zepto.extend(true,{},_this.playback.settings);_this.isReady = false;_this.mediaControlDisabled = false;_this.plugins = [_this.playback];_this.dblTapHandler = new DoubleEventHandler(500);_this.clickTimer = null;_this.clickDelay = 200; // FIXME: could be a player option\n\t_this.bindEvents();return _this;} /**\n\t     * binds playback events to the methods of the container.\n\t     * it listens to playback's events and triggers them as container events.\n\t     *\n\t     * | Playback |\n\t     * |----------|\n\t     * | progress |\n\t     * | timeupdate |\n\t     * | ready |\n\t     * | buffering |\n\t     * | bufferfull |\n\t     * | settingsupdate |\n\t     * | loadedmetadata |\n\t     * | highdefinitionupdate |\n\t     * | bitrate |\n\t     * | playbackstate |\n\t     * | dvr |\n\t     * | mediacontrol_disable |\n\t     * | mediacontrol_enable |\n\t     * | ended |\n\t     * | play |\n\t     * | pause |\n\t     * | error |\n\t     *\n\t     * ps: the events usually translate from PLABACK_x to CONTAINER_x, you can check all the events at `Event` class.\n\t     *\n\t     * @method bindEvents\n\t     */_createClass(Container,[{key:\"bindEvents\",value:function bindEvents(){this.listenTo(this.playback,Events.PLAYBACK_PROGRESS,this.onProgress);this.listenTo(this.playback,Events.PLAYBACK_TIMEUPDATE,this.timeUpdated);this.listenTo(this.playback,Events.PLAYBACK_READY,this.ready);this.listenTo(this.playback,Events.PLAYBACK_BUFFERING,this.onBuffering);this.listenTo(this.playback,Events.PLAYBACK_BUFFERFULL,this.bufferfull);this.listenTo(this.playback,Events.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate);this.listenTo(this.playback,Events.PLAYBACK_LOADEDMETADATA,this.loadedMetadata);this.listenTo(this.playback,Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate);this.listenTo(this.playback,Events.PLAYBACK_BITRATE,this.updateBitrate);this.listenTo(this.playback,Events.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged);this.listenTo(this.playback,Events.PLAYBACK_DVR,this.playbackDvrStateChanged);this.listenTo(this.playback,Events.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl);this.listenTo(this.playback,Events.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl);this.listenTo(this.playback,Events.PLAYBACK_SEEK,this.onSeek);this.listenTo(this.playback,Events.PLAYBACK_SEEKED,this.onSeeked);this.listenTo(this.playback,Events.PLAYBACK_ENDED,this.onEnded);this.listenTo(this.playback,Events.PLAYBACK_PLAY,this.playing);this.listenTo(this.playback,Events.PLAYBACK_PAUSE,this.paused);this.listenTo(this.playback,Events.PLAYBACK_STOP,this.stopped);this.listenTo(this.playback,Events.PLAYBACK_ERROR,this.error);this.listenTo(this.playback,Events.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable);this.listenTo(this.playback,Events.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged);}},{key:\"subtitleAvailable\",value:function subtitleAvailable(){this.trigger(Events.CONTAINER_SUBTITLE_AVAILABLE);}},{key:\"subtitleChanged\",value:function subtitleChanged(track){this.trigger(Events.CONTAINER_SUBTITLE_CHANGED,track);}},{key:\"playbackStateChanged\",value:function playbackStateChanged(state){this.trigger(Events.CONTAINER_PLAYBACKSTATE,state);}},{key:\"playbackDvrStateChanged\",value:function playbackDvrStateChanged(dvrInUse){this.settings = this.playback.settings;this.dvrInUse = dvrInUse;this.trigger(Events.CONTAINER_PLAYBACKDVRSTATECHANGED,dvrInUse);}},{key:\"updateBitrate\",value:function updateBitrate(newBitrate){this.trigger(Events.CONTAINER_BITRATE,newBitrate);}},{key:\"statsReport\",value:function statsReport(metrics){this.trigger(Events.CONTAINER_STATS_REPORT,metrics);}},{key:\"getPlaybackType\",value:function getPlaybackType(){return this.playback.getPlaybackType();} /**\n\t       * returns `true` if DVR is enable otherwise `false`.\n\t       * @method isDvrEnabled\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrEnabled\",value:function isDvrEnabled(){return !!this.playback.dvrEnabled;} /**\n\t       * returns `true` if DVR is in use otherwise `false`.\n\t       * @method isDvrInUse\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrInUse\",value:function isDvrInUse(){return !!this.dvrInUse;} /**\n\t       * destroys the container\n\t       * @method destroy\n\t       */},{key:\"destroy\",value:function destroy(){this.disableResizeObserver();this.trigger(Events.CONTAINER_DESTROYED,this,this.name);this.stopListening();this.plugins.forEach(function(plugin){return plugin.destroy();});this.$el.remove();}},{key:\"setStyle\",value:function setStyle(style){this.$el.css(style);}},{key:\"animate\",value:function animate(style,duration){return this.$el.animate(style,duration).promise();}},{key:\"ready\",value:function ready(){this.isReady = true;this.trigger(Events.CONTAINER_READY,this.name);}},{key:\"isPlaying\",value:function isPlaying(){return this.playback.isPlaying();}},{key:\"getStartTimeOffset\",value:function getStartTimeOffset(){return this.playback.getStartTimeOffset();}},{key:\"getCurrentTime\",value:function getCurrentTime(){return this.currentTime;}},{key:\"getDuration\",value:function getDuration(){return this.playback.getDuration();}},{key:\"error\",value:function error(_error){if(!this.isReady)this.ready();this.trigger(Events.CONTAINER_ERROR,_error,this.name);}},{key:\"loadedMetadata\",value:function loadedMetadata(metadata){this.trigger(Events.CONTAINER_LOADEDMETADATA,metadata);}},{key:\"timeUpdated\",value:function timeUpdated(timeProgress){this.currentTime = timeProgress.current;this.trigger(Events.CONTAINER_TIMEUPDATE,timeProgress,this.name);}},{key:\"onProgress\",value:function onProgress(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}this.trigger.apply(this,[Events.CONTAINER_PROGRESS].concat(args,[this.name]));}},{key:\"playing\",value:function playing(){this.trigger(Events.CONTAINER_PLAY,this.name);}},{key:\"paused\",value:function paused(){this.trigger(Events.CONTAINER_PAUSE,this.name);} /**\n\t       * plays the playback\n\t       * @method play\n\t       */},{key:\"play\",value:function play(){this.playback.play();} /**\n\t       * stops the playback\n\t       * @method stop\n\t       */},{key:\"stop\",value:function stop(){this.playback.stop();this.currentTime = 0;} /**\n\t       * pauses the playback\n\t       * @method pause\n\t       */},{key:\"pause\",value:function pause(){this.playback.pause();}},{key:\"onEnded\",value:function onEnded(){this.trigger(Events.CONTAINER_ENDED,this,this.name);this.currentTime = 0;}},{key:\"stopped\",value:function stopped(){this.trigger(Events.CONTAINER_STOP);}},{key:\"clicked\",value:function clicked(){var _this2=this;if(!this.options.chromeless || this.options.allowUserInteraction){ // The event is delayed because it can be canceled by a double-click event\n\t// An example of use is to prevent playback from pausing when switching to full screen\n\tthis.clickTimer = setTimeout(function(){_this2.clickTimer && _this2.trigger(Events.CONTAINER_CLICK,_this2,_this2.name);},this.clickDelay);}}},{key:\"cancelClicked\",value:function cancelClicked(){clearTimeout(this.clickTimer);this.clickTimer = null;}},{key:\"dblClicked\",value:function dblClicked(){if(!this.options.chromeless || this.options.allowUserInteraction){this.cancelClicked();this.trigger(Events.CONTAINER_DBLCLICK,this,this.name);}}},{key:\"dblTap\",value:function dblTap(evt){var _this3=this;if(!this.options.chromeless || this.options.allowUserInteraction){this.dblTapHandler.handle(evt,function(){_this3.cancelClicked();_this3.trigger(Events.CONTAINER_DBLCLICK,_this3,_this3.name);});}}},{key:\"onContextMenu\",value:function onContextMenu(event){if(!this.options.chromeless || this.options.allowUserInteraction)this.trigger(Events.CONTAINER_CONTEXTMENU,event,this.name);}},{key:\"seek\",value:function seek(time){this.playback.seek(time);}},{key:\"onSeek\",value:function onSeek(time){this.trigger(Events.CONTAINER_SEEK,time,this.name);}},{key:\"onSeeked\",value:function onSeeked(){this.trigger(Events.CONTAINER_SEEKED,this.name);}},{key:\"seekPercentage\",value:function seekPercentage(percentage){var duration=this.getDuration();if(percentage >= 0 && percentage <= 100){var time=duration * (percentage / 100);this.seek(time);}}},{key:\"setVolume\",value:function setVolume(value){this.volume = parseFloat(value);this.trigger(Events.CONTAINER_VOLUME,this.volume,this.name);this.playback.volume(this.volume);}},{key:\"fullscreen\",value:function fullscreen(){this.trigger(Events.CONTAINER_FULLSCREEN,this.name);}},{key:\"onBuffering\",value:function onBuffering(){this.trigger(Events.CONTAINER_STATE_BUFFERING,this.name);}},{key:\"bufferfull\",value:function bufferfull(){this.trigger(Events.CONTAINER_STATE_BUFFERFULL,this.name);} /**\n\t       * adds plugin to the container\n\t       * @method addPlugin\n\t       * @param {Object} plugin\n\t       */},{key:\"addPlugin\",value:function addPlugin(plugin){this.plugins.push(plugin);} /**\n\t       * checks if a plugin, given its name, exist\n\t       * @method hasPlugin\n\t       * @param {String} name\n\t       * @return {Boolean}\n\t       */},{key:\"hasPlugin\",value:function hasPlugin(name){return !!this.getPlugin(name);} /**\n\t       * get the plugin given its name\n\t       * @method getPlugin\n\t       * @param {String} name\n\t       */},{key:\"getPlugin\",value:function getPlugin(name){return this.plugins.filter(function(plugin){return plugin.name === name;})[0];}},{key:\"mouseEnter\",value:function mouseEnter(){if(!this.options.chromeless || this.options.allowUserInteraction)this.trigger(Events.CONTAINER_MOUSE_ENTER);}},{key:\"mouseLeave\",value:function mouseLeave(){if(!this.options.chromeless || this.options.allowUserInteraction)this.trigger(Events.CONTAINER_MOUSE_LEAVE);}},{key:\"settingsUpdate\",value:function settingsUpdate(){this.settings = this.playback.settings;this.trigger(Events.CONTAINER_SETTINGSUPDATE);}},{key:\"highDefinitionUpdate\",value:function highDefinitionUpdate(isHD){this.trigger(Events.CONTAINER_HIGHDEFINITIONUPDATE,isHD);}},{key:\"isHighDefinitionInUse\",value:function isHighDefinitionInUse(){return this.playback.isHighDefinitionInUse();}},{key:\"disableMediaControl\",value:function disableMediaControl(){if(!this.mediaControlDisabled){this.mediaControlDisabled = true;this.trigger(Events.CONTAINER_MEDIACONTROL_DISABLE);}}},{key:\"enableMediaControl\",value:function enableMediaControl(){if(this.mediaControlDisabled){this.mediaControlDisabled = false;this.trigger(Events.CONTAINER_MEDIACONTROL_ENABLE);}}},{key:\"updateStyle\",value:function updateStyle(){if(!this.options.chromeless || this.options.allowUserInteraction)this.$el.removeClass('chromeless');else this.$el.addClass('chromeless');}},{key:\"enableResizeObserver\",value:function enableResizeObserver(){var _this4=this;this.disableResizeObserver();this.resizeObserverInterval = setInterval(function(){return _this4.checkResize();},500);}},{key:\"disableResizeObserver\",value:function disableResizeObserver(){this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);}},{key:\"checkResize\",value:function checkResize(){var newSize={width:this.el.clientWidth,height:this.el.clientHeight};var _ref=this.currentSize || {},width=_ref.width,height=_ref.height;var isResize=height !== newSize.height || width !== newSize.width;if(isResize){this.currentSize = newSize;this.trigger(Events.CONTAINER_RESIZE,newSize);}} /**\n\t       * enables to configure the container after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       */},{key:\"configure\",value:function configure(options){this._options = zepto.extend(true,this._options,options);this.updateStyle();this.playback.configure(this.options);this.trigger(Events.CONTAINER_OPTIONS_CHANGE);}},{key:\"render\",value:function render(){var style=Styler.getStyleFor(css_248z.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.$el.append(this.playback.render().el);this.updateStyle();this.checkResize();this.enableResizeObserver();return this;}}]);return Container;})(UIObject);Object.assign(Container.prototype,ErrorMixin); /**\n\t   * An abstraction to represent a generic playback, it's like an interface to be implemented by subclasses.\n\t   * @class Playback\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module base\n\t   */var Playback= /*#__PURE__*/(function(_UIObject){_inherits(Playback,_UIObject);var _super=_createSuper(Playback);_createClass(Playback,[{key:\"isAudioOnly\", /**\n\t      * Determine if the playback does not contain video/has video but video should be ignored.\n\t      * @property isAudioOnly\n\t      * @type Boolean\n\t      */get:function get(){return false;}},{key:\"isAdaptive\",get:function get(){return false;} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return false;} /**\n\t       * The internationalization plugin.\n\t       * @property i18n\n\t       * @type {Strings}\n\t       */},{key:\"i18n\",get:function get(){return this._i18n;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * (i.e if a live stream is playing smoothly, this will be false)\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return false;} /**\n\t       * @method constructor\n\t       * @param {Object} options the options object\n\t       * @param {Strings} i18n the internationalization component\n\t       */}]);function Playback(options,i18n,playerError){var _this;_classCallCheck(this,Playback);_this = _super.call(this,options);_this.settings = {};_this._i18n = i18n;_this.playerError = playerError;_this._consented = false;return _this;} /**\n\t     * Gives user consent to playback (mobile devices).\n\t     * @method consent\n\t     * @param {Function} callback function called when playback is consented\n\t     */_createClass(Playback,[{key:\"consent\",value:function consent(cb){typeof cb === 'function' && cb();} /**\n\t       * plays the playback.\n\t       * @method play\n\t       */},{key:\"play\",value:function play(){} /**\n\t       * pauses the playback.\n\t       * @method pause\n\t       */},{key:\"pause\",value:function pause(){} /**\n\t       * stops the playback.\n\t       * @method stop\n\t       */},{key:\"stop\",value:function stop(){} /**\n\t       * seeks the playback to a given `time` in seconds\n\t       * @method seek\n\t       * @param {Number} time should be a number between 0 and the video duration\n\t       */},{key:\"seek\",value:function seek(time){} // eslint-disable-line no-unused-vars\n\t/**\n\t       * seeks the playback to a given `percentage` in percentage\n\t       * @method seekPercentage\n\t       * @param {Number} time should be a number between 0 and 100\n\t       */},{key:\"seekPercentage\",value:function seekPercentage(percentage){} // eslint-disable-line no-unused-vars\n\t/**\n\t       * The time that \"0\" now represents relative to when playback started.\n\t       * For a stream with a sliding window this will increase as content is\n\t       * removed from the beginning.\n\t       * @method getStartTimeOffset\n\t       * @return {Number} time (in seconds) that time \"0\" represents.\n\t       */},{key:\"getStartTimeOffset\",value:function getStartTimeOffset(){return 0;} /**\n\t       * gets the duration in seconds\n\t       * @method getDuration\n\t       * @return {Number} duration (in seconds) of the current source\n\t       */},{key:\"getDuration\",value:function getDuration(){return 0;} /**\n\t       * checks if the playback is playing.\n\t       * @method isPlaying\n\t       * @return {Boolean} `true` if the current playback is playing, otherwise `false`\n\t       */},{key:\"isPlaying\",value:function isPlaying(){return false;} /**\n\t       * checks if the playback is ready.\n\t       * @property isReady\n\t       * @type {Boolean} `true` if the current playback is ready, otherwise `false`\n\t       */},{key:\"getPlaybackType\", // eslint-disable-line no-unused-vars\n\t/**\n\t       * gets the playback type (`'vod', 'live', 'aod'`)\n\t       * @method getPlaybackType\n\t       * @return {String} you should write the playback type otherwise it'll assume `'no_op'`\n\t       * @example\n\t       * ```javascript\n\t       * html5VideoPlayback.getPlaybackType() //vod\n\t       * html5AudioPlayback.getPlaybackType() //aod\n\t       * html5VideoPlayback.getPlaybackType() //live\n\t       * flashHlsPlayback.getPlaybackType() //live\n\t       * ```\n\t       */value:function getPlaybackType(){return Playback.NO_OP;} /**\n\t       * checks if the playback is in HD.\n\t       * @method isHighDefinitionInUse\n\t       * @return {Boolean} `true` if the playback is playing in HD, otherwise `false`\n\t       */},{key:\"isHighDefinitionInUse\",value:function isHighDefinitionInUse(){return false;} /**\n\t       * mutes the playback\n\t       * @method mute\n\t       */},{key:\"mute\",value:function mute(){} /**\n\t       * restores the playback volume\n\t       * @method unmute\n\t       */},{key:\"unmute\",value:function unmute(){} /**\n\t       * sets the volume for the playback\n\t       * @method volume\n\t       * @param {Number} value a number between 0 (`muted`) to 100 (`max`)\n\t       */},{key:\"volume\",value:function volume(value){} // eslint-disable-line no-unused-vars\n\t/**\n\t       * enables to configure the playback after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       */},{key:\"configure\",value:function configure(options){this._options = zepto.extend(true,this._options,options);} /**\n\t       * attempt to autoplays the playback.\n\t       * @method attemptAutoPlay\n\t       */},{key:\"attemptAutoPlay\",value:function attemptAutoPlay(){var _this2=this;this.canAutoPlay(function(result,error){ // eslint-disable-line no-unused-vars\n\tresult && _this2.play();});} /**\n\t       * checks if the playback can autoplay.\n\t       * @method canAutoPlay\n\t       * @param {Function} callback function where first param is Boolean and second param is playback Error or null\n\t       */},{key:\"canAutoPlay\",value:function canAutoPlay(cb){cb(true,null); // Assume playback can autoplay by default\n\t}},{key:\"isReady\",get:function get(){return false;} /**\n\t       * checks if the playback has closed caption tracks.\n\t       * @property hasClosedCaptionsTracks\n\t       * @type {Boolean}\n\t       */},{key:\"hasClosedCaptionsTracks\",get:function get(){return this.closedCaptionsTracks.length > 0;} /**\n\t       * gets the playback available closed caption tracks.\n\t       * @property closedCaptionsTracks\n\t       * @type {Array} an array of objects with at least 'id' and 'name' properties\n\t       */},{key:\"closedCaptionsTracks\",get:function get(){return [];} /**\n\t       * gets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */},{key:\"closedCaptionsTrackId\",get:function get(){return -1;}, /**\n\t       * sets the selected closed caption track index. (-1 is disabled)\n\t       * @property closedCaptionsTrackId\n\t       * @type {Number}\n\t       */set:function set(trackId){}}]);return Playback;})(UIObject);Object.assign(Playback.prototype,ErrorMixin);Playback.extend = function(properties){return extend(Playback,properties);}; /**\n\t   * checks if the playback can play a given `source`\n\t   * If a mimeType is provided then this will be used instead of inferring the mimetype\n\t   * from the source extension.\n\t   * @method canPlay\n\t   * @static\n\t   * @param {String} source the given source ex: `http://example.com/play.mp4`\n\t   * @param {String} [mimeType] the given mime type, ex: `'application/vnd.apple.mpegurl'`\n\t   * @return {Boolean} `true` if the playback is playable, otherwise `false`\n\t   */Playback.canPlay = function(source,mimeType){ // eslint-disable-line no-unused-vars\n\treturn false;}; /**\n\t   * a playback type for video on demand\n\t   *\n\t   * @property VOD\n\t   * @static\n\t   * @type String\n\t   */Playback.VOD = 'vod'; /**\n\t   * a playback type for audio on demand\n\t   *\n\t   * @property AOD\n\t   * @static\n\t   * @type String\n\t   */Playback.AOD = 'aod'; /**\n\t   * a playback type for live video\n\t   *\n\t   * @property LIVE\n\t   * @static\n\t   * @type String\n\t   */Playback.LIVE = 'live'; /**\n\t   * a default playback type\n\t   *\n\t   * @property NO_OP\n\t   * @static\n\t   * @type String\n\t   */Playback.NO_OP = 'no_op'; /**\n\t   * the plugin type\n\t   *\n\t   * @property type\n\t   * @static\n\t   * @type String\n\t   */Playback.type = 'playback';var ContainerFactory= /*#__PURE__*/(function(_BaseObject){_inherits(ContainerFactory,_BaseObject);var _super=_createSuper(ContainerFactory);_createClass(ContainerFactory,[{key:\"options\",get:function get(){return this._options;},set:function set(options){this._options = options;}}]);function ContainerFactory(options,loader,i18n,playerError){var _this;_classCallCheck(this,ContainerFactory);_this = _super.call(this,options);_this._i18n = i18n;_this.loader = loader;_this.playerError = playerError;return _this;}_createClass(ContainerFactory,[{key:\"createContainers\",value:function createContainers(){var _this2=this;return zepto.Deferred(function(promise){promise.resolve(_this2.options.sources.map(function(source){return _this2.createContainer(source);}));});}},{key:\"findPlaybackPlugin\",value:function findPlaybackPlugin(source,mimeType){return this.loader.playbackPlugins.filter(function(p){return p.canPlay(source,mimeType);})[0];}},{key:\"createContainer\",value:function createContainer(source){var resolvedSource=null;var mimeType=this.options.mimeType;if(_typeof(source) === 'object'){resolvedSource = source.source.toString();if(source.mimeType)mimeType = source.mimeType;}else {resolvedSource = source.toString();}if(resolvedSource.match(/^\\/\\//))resolvedSource = window.location.protocol + resolvedSource;var options=_objectSpread2(_objectSpread2({},this.options),{},{src:resolvedSource,mimeType:mimeType});var playbackPlugin=this.findPlaybackPlugin(resolvedSource,mimeType); // Fallback to empty playback object until we sort out unsupported sources error without NoOp playback\n\tvar playback=playbackPlugin?new playbackPlugin(options,this._i18n,this.playerError):new Playback();options = _objectSpread2(_objectSpread2({},options),{},{playback:playback});var container=new Container(options,this._i18n,this.playerError);var defer=zepto.Deferred();defer.promise(container);this.addContainerPlugins(container);this.listenToOnce(container,Events.CONTAINER_READY,function(){return defer.resolve(container);});return container;}},{key:\"addContainerPlugins\",value:function addContainerPlugins(container){this.loader.containerPlugins.forEach(function(Plugin){container.addPlugin(new Plugin(container));});}}]);return ContainerFactory;})(BaseObject);var css_248z$1=\"[data-player] {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  -o-user-select: none;\\n  user-select: none;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  transform: translate3d(0, 0, 0);\\n  position: relative;\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-style: normal;\\n  font-weight: normal;\\n  text-align: center;\\n  overflow: hidden;\\n  font-size: 100%;\\n  font-family: \\\"Roboto\\\", \\\"Open Sans\\\", Arial, sans-serif;\\n  text-shadow: 0 0 0;\\n  box-sizing: border-box; }\\n  [data-player]:focus {\\n    outline: 0; }\\n  [data-player] * {\\n    box-sizing: inherit; }\\n  [data-player] > * {\\n    float: none;\\n    max-width: none; }\\n  [data-player] > div {\\n    display: block; }\\n  [data-player].fullscreen {\\n    width: 100% !important;\\n    height: 100% !important;\\n    top: 0;\\n    left: 0; }\\n  [data-player].nocursor {\\n    cursor: none; }\\n\\n.clappr-style {\\n  display: none !important; }\\n\";var css_248z$2=\"[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font: inherit;\\n  font-size: 100%;\\n  vertical-align: baseline; }\\n\\n[data-player] table {\\n  border-collapse: collapse;\\n  border-spacing: 0; }\\n\\n[data-player] caption, [data-player] th, [data-player] td {\\n  text-align: left;\\n  font-weight: normal;\\n  vertical-align: middle; }\\n\\n[data-player] q, [data-player] blockquote {\\n  quotes: none; }\\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\\n    content: \\\"\\\";\\n    content: none; }\\n\\n[data-player] a img {\\n  border: none; }\\n\"; /**\n\t   * The Core is responsible to manage Containers and the player state.\n\t   * @class Core\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module components\n\t   */var Core= /*#__PURE__*/(function(_UIObject){_inherits(Core,_UIObject);var _super=_createSuper(Core);_createClass(Core,[{key:\"events\",get:function get(){return {'webkitfullscreenchange':'handleFullscreenChange','mousemove':'onMouseMove','mouseleave':'onMouseLeave'};}},{key:\"attributes\",get:function get(){return {'data-player':'',tabindex:9999};} /**\n\t       * checks if the core is ready.\n\t       * @property isReady\n\t       * @type {Boolean} `true` if the core is ready, otherwise `false`\n\t       */},{key:\"isReady\",get:function get(){return !!this.ready;} /**\n\t       * The internationalization plugin.\n\t       * @property i18n\n\t       * @type {Strings}\n\t       */},{key:\"i18n\",get:function get(){return this.getPlugin('strings') || {t:function t(key){return key;}};} /**\n\t       * @deprecated\n\t       * This property currently exists for backward compatibility reasons.\n\t       * If you need to access the media control instance, use the method getPlugin('media_control').\n\t       * This approach is still not recommended.\n\t       */},{key:\"mediaControl\",get:function get(){return this._mediaControl || (this._mediaControl = this.getPlugin('media_control')) || this.dummyMediaControl;}},{key:\"dummyMediaControl\",get:function get(){if(this._dummyMediaControl)return this._dummyMediaControl;this._dummyMediaControl = new UICorePlugin(this);return this._dummyMediaControl;} /**\n\t       * gets the active container reference.\n\t       * @property activeContainer\n\t       * @type {Object}\n\t       */},{key:\"activeContainer\",get:function get(){return this._activeContainer;}, /**\n\t       * sets the active container reference and trigger a event with the new reference.\n\t       * @property activeContainer\n\t       * @type {Object}\n\t       */set:function set(container){this._activeContainer = container;this.trigger(Events.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer);} /**\n\t       * gets the active playback reference.\n\t       * @property activePlayback\n\t       * @type {Object}\n\t       */},{key:\"activePlayback\",get:function get(){return this.activeContainer && this.activeContainer.playback;}}]);function Core(options){var _this;_classCallCheck(this,Core);_this = _super.call(this,options);_this.playerError = new PlayerError(options,_assertThisInitialized(_this));_this.configureDomRecycler();_this.firstResize = true;_this.plugins = [];_this.containers = []; //FIXME fullscreen api sucks\n\t_this._boundFullscreenHandler = function(){return _this.handleFullscreenChange();};zepto(document).bind('fullscreenchange',_this._boundFullscreenHandler);zepto(document).bind('MSFullscreenChange',_this._boundFullscreenHandler);zepto(document).bind('mozfullscreenchange',_this._boundFullscreenHandler);Browser.isMobile && zepto(window).bind('resize',function(o){_this.handleWindowResize(o);});return _this;}_createClass(Core,[{key:\"configureDomRecycler\",value:function configureDomRecycler(){var recycleVideo=this.options && this.options.playback && this.options.playback.recycleVideo;DomRecycler.configure({recycleVideo:recycleVideo});}},{key:\"createContainers\",value:function createContainers(options){this.defer = zepto.Deferred();this.defer.promise(this);this.containerFactory = new ContainerFactory(options,options.loader,this.i18n,this.playerError);this.prepareContainers();}},{key:\"prepareContainers\",value:function prepareContainers(){var _this2=this;this.containerFactory.createContainers().then(function(containers){return _this2.setupContainers(containers);}).then(function(containers){return _this2.resolveOnContainersReady(containers);});}},{key:\"updateSize\",value:function updateSize(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize();}},{key:\"setFullscreen\",value:function setFullscreen(){if(!Browser.isiOS){this.$el.addClass('fullscreen');this.$el.removeAttr('style');this.previousSize = {width:this.options.width,height:this.options.height};this.currentSize = {width:zepto(window).width(),height:zepto(window).height()};}}},{key:\"setPlayerSize\",value:function setPlayerSize(){this.$el.removeClass('fullscreen');this.currentSize = this.previousSize;this.previousSize = {width:zepto(window).width(),height:zepto(window).height()};this.resize(this.currentSize);}},{key:\"resize\",value:function resize(options){if(!isNumber(options.height) && !isNumber(options.width)){this.el.style.height = \"\".concat(options.height);this.el.style.width = \"\".concat(options.width);}else {this.el.style.height = \"\".concat(options.height,\"px\");this.el.style.width = \"\".concat(options.width,\"px\");}this.previousSize = {width:this.options.width,height:this.options.height};this.options.width = options.width;this.options.height = options.height;this.currentSize = options;this.triggerResize(this.currentSize);}},{key:\"enableResizeObserver\",value:function enableResizeObserver(){var _this3=this;this.disableResizeObserver();var checkSizeCallback=function checkSizeCallback(){_this3.triggerResize({width:_this3.el.clientWidth,height:_this3.el.clientHeight});};this.resizeObserverInterval = setInterval(checkSizeCallback,500);}},{key:\"triggerResize\",value:function triggerResize(newSize){var thereWasChange=this.firstResize || this.oldHeight !== newSize.height || this.oldWidth !== newSize.width;if(thereWasChange){this.oldHeight = newSize.height;this.oldWidth = newSize.width;this.computedSize = newSize;this.firstResize = false;this.trigger(Events.CORE_RESIZE,newSize);}}},{key:\"disableResizeObserver\",value:function disableResizeObserver(){this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);this.resizeObserverInterval = null;}},{key:\"resolveOnContainersReady\",value:function resolveOnContainersReady(containers){var _this4=this;zepto.when.apply(zepto,containers).done(function(){_this4.defer.resolve(_this4);_this4.ready = true;_this4.trigger(Events.CORE_READY);});}},{key:\"addPlugin\",value:function addPlugin(plugin){this.plugins.push(plugin);}},{key:\"hasPlugin\",value:function hasPlugin(name){return !!this.getPlugin(name);}},{key:\"getPlugin\",value:function getPlugin(name){return this.plugins.filter(function(plugin){return plugin.name === name;})[0];}},{key:\"load\",value:function load(sources,mimeType){this.options.mimeType = mimeType;sources = sources && sources.constructor === Array?sources:[sources];this.options.sources = sources;this.containers.forEach(function(container){return container.destroy();});this.containerFactory.options = zepto.extend(true,this.options,{sources:sources});this.prepareContainers();}},{key:\"destroy\",value:function destroy(){this.disableResizeObserver();this.containers.forEach(function(container){return container.destroy();});this.plugins.forEach(function(plugin){return plugin.destroy();});this.$el.remove();zepto(document).unbind('fullscreenchange',this._boundFullscreenHandler);zepto(document).unbind('MSFullscreenChange',this._boundFullscreenHandler);zepto(document).unbind('mozfullscreenchange',this._boundFullscreenHandler);this.stopListening();}},{key:\"handleFullscreenChange\",value:function handleFullscreenChange(){this.trigger(Events.CORE_FULLSCREEN,this.isFullscreen());this.updateSize();}},{key:\"handleWindowResize\",value:function handleWindowResize(event){var orientation=window.innerWidth > window.innerHeight?'landscape':'portrait';if(this._screenOrientation === orientation)return;this._screenOrientation = orientation;this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight});this.trigger(Events.CORE_SCREEN_ORIENTATION_CHANGED,{event:event,orientation:this._screenOrientation});}},{key:\"removeContainer\",value:function removeContainer(container){this.stopListening(container);this.containers = this.containers.filter(function(c){return c !== container;});}},{key:\"setupContainer\",value:function setupContainer(container){this.listenTo(container,Events.CONTAINER_DESTROYED,this.removeContainer);this.containers.push(container);}},{key:\"setupContainers\",value:function setupContainers(containers){containers.forEach(this.setupContainer.bind(this));this.trigger(Events.CORE_CONTAINERS_CREATED);this.renderContainers();this.activeContainer = containers[0];this.render();this.appendToParent();return this.containers;}},{key:\"renderContainers\",value:function renderContainers(){var _this5=this;this.containers.forEach(function(container){return _this5.el.appendChild(container.render().el);});}},{key:\"createContainer\",value:function createContainer(source,options){var container=this.containerFactory.createContainer(source,options);this.setupContainer(container);this.el.appendChild(container.render().el);return container;} /**\n\t       * @deprecated\n\t       * This method currently exists for retrocompatibility reasons.\n\t       * If you want the current container reference, use the activeContainer getter.\n\t       */},{key:\"getCurrentContainer\",value:function getCurrentContainer(){return this.activeContainer;} /**\n\t       * @deprecated\n\t       * This method currently exists for retrocompatibility reasons.\n\t       * If you want the current playback reference, use the activePlayback getter.\n\t       */},{key:\"getCurrentPlayback\",value:function getCurrentPlayback(){return this.activePlayback;}},{key:\"getPlaybackType\",value:function getPlaybackType(){return this.activeContainer && this.activeContainer.getPlaybackType();}},{key:\"isFullscreen\",value:function isFullscreen(){ // Ensure current instance is in fullscreen mode by checking fullscreen element\n\tvar fullscreenElement=Fullscreen.fullscreenElement();if(!fullscreenElement)return false;var playbackEl=this.activePlayback && this.activePlayback.el;return fullscreenElement === this.el || fullscreenElement === playbackEl;}},{key:\"toggleFullscreen\",value:function toggleFullscreen(){var _this6=this;if(this.isFullscreen()){Fullscreen.cancelFullscreen();!Browser.isiOS && this.$el.removeClass('fullscreen nocursor');}else {var fullscreenEl=Browser.isiOS?this.activePlayback && this.activePlayback.el:this.el;if(!fullscreenEl)return;Browser.isSafari || Browser.isiOS? // Safari doesn't return a promise like the other browsers. See more in https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullScreen\n\tFullscreen.requestFullscreen(fullscreenEl):Fullscreen.requestFullscreen(fullscreenEl).then(function(_){return _;},function(error){return setTimeout(function(){ // fixes the issue https://github.com/clappr/clappr/issues/1860\n\tif(!_this6.isFullscreen())throw new ReferenceError(error);},600);});!Browser.isiOS && this.$el.addClass('fullscreen');}}},{key:\"onMouseMove\",value:function onMouseMove(event){this.trigger(Events.CORE_MOUSE_MOVE,event);}},{key:\"onMouseLeave\",value:function onMouseLeave(event){this.trigger(Events.CORE_MOUSE_LEAVE,event);} /**\n\t       * enables to configure the container after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       */},{key:\"configure\",value:function configure(options){var _this7=this;this._options = zepto.extend(true,this._options,options);this.configureDomRecycler();var sources=options.source || options.sources;sources && this.load(sources,options.mimeType || this.options.mimeType);this.trigger(Events.CORE_OPTIONS_CHANGE,options); // Trigger with newly provided options\n\tthis.containers.forEach(function(container){return container.configure(_this7.options);});}},{key:\"appendToParent\",value:function appendToParent(){var style=Styler.getStyleFor(css_248z$1.toString(),{baseUrl:this.options.baseUrl});var resetStyle=Styler.getStyleFor(css_248z$2.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.options.includeResetStyle && this.$el.append(resetStyle[0]);var hasCoreParent=this.$el.parent() && this.$el.parent().length;!hasCoreParent && this.$el.appendTo(this.options.parentElement);}},{key:\"render\",value:function render(){this.options.width = this.options.width || this.$el.width();this.options.height = this.options.height || this.$el.height();var size={width:this.options.width,height:this.options.height};this.previousSize = this.currentSize = this.computedSize = size;this.updateSize();this.enableResizeObserver();return this;}}]);return Core;})(UIObject);Object.assign(Core.prototype,ErrorMixin); /**\n\t   * The Core Factory is responsible for instantiate the core and it's plugins.\n\t   * @class CoreFactory\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   */var CoreFactory= /*#__PURE__*/(function(_BaseObject){_inherits(CoreFactory,_BaseObject);var _super=_createSuper(CoreFactory);_createClass(CoreFactory,[{key:\"loader\",get:function get(){return this.player.loader;} /**\n\t       * it builds the core factory\n\t       * @method constructor\n\t       * @param {Player} player the player object\n\t       */}]);function CoreFactory(player){var _this;_classCallCheck(this,CoreFactory);_this = _super.call(this,player.options);_this.player = player;return _this;} /**\n\t     * creates a core and its plugins\n\t     * @method create\n\t     * @return {Core} created core\n\t     */_createClass(CoreFactory,[{key:\"create\",value:function create(){this.options.loader = this.loader;this.core = new Core(this.options);this.addCorePlugins();this.core.createContainers(this.options);return this.core;} /**\n\t       * given the core plugins (`loader.corePlugins`) it builds each one\n\t       * @method addCorePlugins\n\t       * @return {Core} the core with all plugins\n\t       */},{key:\"addCorePlugins\",value:function addCorePlugins(){var _this2=this;this.loader.corePlugins.forEach(function(Plugin){var plugin=new Plugin(_this2.core);_this2.core.addPlugin(plugin);_this2.setupExternalInterface(plugin);});return this.core;}},{key:\"setupExternalInterface\",value:function setupExternalInterface(plugin){var externalFunctions=plugin.getExternalInterface();for(var key in externalFunctions) {this.player[key] = externalFunctions[key].bind(plugin);}}}]);return CoreFactory;})(BaseObject);var VERSION_REGEX=/(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?/;var Version= /*#__PURE__*/(function(){_createClass(Version,null,[{key:\"parse\",value:function parse(){var str=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:'';var matches=str.match(VERSION_REGEX) || [];var _matches=_slicedToArray(matches,4),major=_matches[1],minor=_matches[2],patch=_matches[3];if(typeof major === 'undefined')return null;return new Version(major,minor,patch);}}]);function Version(major,minor,patch){_classCallCheck(this,Version);this.major = parseInt(major || 0,10);this.minor = parseInt(minor || 0,10);this.patch = parseInt(patch || 0,10);}_createClass(Version,[{key:\"compare\",value:function compare(other){var diff=this.major - other.major;diff = diff || this.minor - other.minor;diff = diff || this.patch - other.patch;return diff;}},{key:\"inc\",value:function inc(){var type=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:'patch';typeof this[type] !== 'undefined' && (this[type] += 1);return this;}},{key:\"satisfies\",value:function satisfies(min,max){return this.compare(min) >= 0 && (!max || this.compare(max) < 0);}},{key:\"toString\",value:function toString(){return \"\".concat(this.major,\".\").concat(this.minor,\".\").concat(this.patch);}}]);return Version;})();var filterPluginsByType=function filterPluginsByType(plugins,type){if(!plugins || !type)return {};return Object.entries(plugins).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),value=_ref2[1];return value.type === type;}).reduce(function(obj,_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return obj[key] = value,obj;},{});}; /**\n\t   * It keeps a list of the default plugins (playback, container, core) and it merges external plugins with its internals.\n\t   * @class Loader\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   */var Loader=(function(){var registry={plugins:{},playbacks:[]};var currentVersion=\"0.4.17\";return  (/*#__PURE__*/(function(){_createClass(Loader,null,[{key:\"checkVersionSupport\",value:function checkVersionSupport(entry){var _entry$prototype=entry.prototype,supportedVersion=_entry$prototype.supportedVersion,name=_entry$prototype.name;if(!supportedVersion || !supportedVersion.min){Log.warn('Loader',\"missing version information for \".concat(name));return false;}var maxVersion=supportedVersion.max?Version.parse(supportedVersion.max):Version.parse(supportedVersion.min).inc('minor');var minVersion=Version.parse(supportedVersion.min);if(!Version.parse(currentVersion).satisfies(minVersion,maxVersion)){Log.warn('Loader',\"unsupported plugin \".concat(name,\": Clappr version \").concat(currentVersion,\" does not match required range [\").concat(minVersion,\",\").concat(maxVersion,\")\"));return false;}return true;}},{key:\"registerPlugin\",value:function registerPlugin(pluginEntry){if(!pluginEntry || !pluginEntry.prototype.name){Log.warn('Loader',\"missing information to register plugin: \".concat(pluginEntry));return false;}Loader.checkVersionSupport(pluginEntry);var pluginRegistry=registry.plugins;if(!pluginRegistry)return false;var previousEntry=pluginRegistry[pluginEntry.prototype.name];if(previousEntry)Log.warn('Loader',\"overriding plugin entry: \".concat(pluginEntry.prototype.name,\" - \").concat(previousEntry));pluginRegistry[pluginEntry.prototype.name] = pluginEntry;return true;}},{key:\"registerPlayback\",value:function registerPlayback(playbackEntry){if(!playbackEntry || !playbackEntry.prototype.name)return false;Loader.checkVersionSupport(playbackEntry);var playbacks=registry.playbacks;var previousEntryIdx=playbacks.findIndex(function(entry){return entry.prototype.name === playbackEntry.prototype.name;});if(previousEntryIdx >= 0){var previousEntry=playbacks[previousEntryIdx];playbacks.splice(previousEntryIdx,1);Log.warn('Loader',\"overriding playback entry: \".concat(previousEntry.name,\" - \").concat(previousEntry));}registry.playbacks = [playbackEntry].concat(_toConsumableArray(playbacks));return true;}},{key:\"unregisterPlugin\",value:function unregisterPlugin(name){if(!name)return false;var plugins=registry.plugins;var plugin=plugins[name];if(!plugin)return false;delete plugins[name];return true;}},{key:\"unregisterPlayback\",value:function unregisterPlayback(name){if(!name)return false;var playbacks=registry.playbacks;var index=playbacks.findIndex(function(entry){return entry.prototype.name === name;});if(index < 0)return false;playbacks.splice(index,1);registry.playbacks = playbacks;return true;}},{key:\"clearPlugins\",value:function clearPlugins(){registry.plugins = {};}},{key:\"clearPlaybacks\",value:function clearPlaybacks(){registry.playbacks = [];} /**\n\t         * builds the loader\n\t         * @method constructor\n\t         * @param {Object} externalPlugins the external plugins\n\t         * @param {Number} playerId you can embed multiple instances of clappr, therefore this is the unique id of each one.\n\t         */},{key:\"registeredPlaybacks\",get:function get(){return _toConsumableArray(registry.playbacks);}},{key:\"registeredPlugins\",get:function get(){var plugins=registry.plugins;var core=filterPluginsByType(plugins,'core');var container=filterPluginsByType(plugins,'container');return {core:core,container:container};}}]);function Loader(){var externalPlugins=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:[];var playerId=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:0;_classCallCheck(this,Loader);this.playerId = playerId;this.playbackPlugins = _toConsumableArray(registry.playbacks);var _Loader$registeredPlu=Loader.registeredPlugins,core=_Loader$registeredPlu.core,container=_Loader$registeredPlu.container;this.containerPlugins = Object.values(container);this.corePlugins = Object.values(core);if(!Array.isArray(externalPlugins))this.validateExternalPluginsType(externalPlugins);this.addExternalPlugins(externalPlugins);} /**\n\t       * groups by type the external plugins that were passed through `options.plugins` it they're on a flat array\n\t       * @method addExternalPlugins\n\t       * @private\n\t       * @param {Object} an config object or an array of plugins\n\t       * @return {Object} plugins the config object with the plugins separated by type\n\t       */_createClass(Loader,[{key:\"groupPluginsByType\",value:function groupPluginsByType(plugins){if(Array.isArray(plugins)){plugins = plugins.reduce(function(memo,plugin){memo[plugin.type] || (memo[plugin.type] = []);memo[plugin.type].push(plugin);return memo;},{});}return plugins;}},{key:\"removeDups\",value:function removeDups(list){var useReversePrecedence=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:false;var groupUp=function groupUp(plugins,plugin){if(plugins[plugin.prototype.name] && useReversePrecedence)return plugins;plugins[plugin.prototype.name] && delete plugins[plugin.prototype.name];plugins[plugin.prototype.name] = plugin;return plugins;};var pluginsMap=list.reduceRight(groupUp,Object.create(null));var plugins=[];for(var key in pluginsMap) {plugins.unshift(pluginsMap[key]);}return plugins;} /**\n\t         * adds all the external plugins that were passed through `options.plugins`\n\t         * @method addExternalPlugins\n\t         * @private\n\t         * @param {Object} plugins the config object with all plugins\n\t         */},{key:\"addExternalPlugins\",value:function addExternalPlugins(plugins){var loadExternalPluginsFirst=typeof plugins.loadExternalPluginsFirst === 'boolean'?plugins.loadExternalPluginsFirst:true;var loadExternalPlaybacksFirst=typeof plugins.loadExternalPlaybacksFirst === 'boolean'?plugins.loadExternalPlaybacksFirst:true;plugins = this.groupPluginsByType(plugins);if(plugins.playback){var playbacks=plugins.playback.filter(function(playback){return Loader.checkVersionSupport(playback),true;});this.playbackPlugins = loadExternalPlaybacksFirst?this.removeDups(playbacks.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(playbacks),true);}if(plugins.container){var containerPlugins=plugins.container.filter(function(plugin){return Loader.checkVersionSupport(plugin),true;});this.containerPlugins = loadExternalPluginsFirst?this.removeDups(containerPlugins.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(containerPlugins),true);}if(plugins.core){var corePlugins=plugins.core.filter(function(plugin){return Loader.checkVersionSupport(plugin),true;});this.corePlugins = loadExternalPluginsFirst?this.removeDups(corePlugins.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(corePlugins),true);}} /**\n\t         * validate if the external plugins that were passed through `options.plugins` are associated to the correct type\n\t         * @method validateExternalPluginsType\n\t         * @private\n\t         * @param {Object} plugins the config object with all plugins\n\t         */},{key:\"validateExternalPluginsType\",value:function validateExternalPluginsType(plugins){var pluginTypes=['playback','container','core'];pluginTypes.forEach(function(type){(plugins[type] || []).forEach(function(el){var errorMessage='external ' + el.type + ' plugin on ' + type + ' array';if(el.type !== type)throw new ReferenceError(errorMessage);});});}}]);return Loader;})());})();var baseUrl=currentScriptUrl().replace(/\\/[^/]+$/,''); /**\n\t   * @class Player\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module components\n\t   * @example\n\t   * ### Using the Player\n\t   *\n\t   * Add the following script on your HTML:\n\t   * ```html\n\t   * <head>\n\t   *   <script type=\"text/javascript\" src=\"http://cdn.clappr.io/latest/clappr.min.js\"></script>\n\t   * </head>\n\t   * ```\n\t   * Now, create the player:\n\t   * ```html\n\t   * <body>\n\t   *   <div id=\"player\"></div>\n\t   *   <script>\n\t   *     var player = new Clappr.Player({source: \"http://your.video/here.mp4\", parentId: \"#player\"});\n\t   *   </script>\n\t   * </body>\n\t   * ```\n\t   */var Player= /*#__PURE__*/(function(_BaseObject){_inherits(Player,_BaseObject);var _super=_createSuper(Player);_createClass(Player,[{key:\"loader\",set:function set(loader){this._loader = loader;},get:function get(){if(!this._loader)this._loader = new Loader(this.options.plugins || {},this.options.playerId);return this._loader;} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return this.core.activeContainer.ended;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * (i.e if a live stream is playing smoothly, this will be false)\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return this.core.activeContainer.buffering;} /*\n\t       * determine if the player is ready.\n\t       * @property isReady\n\t       * @type {Boolean} `true` if the player is ready. ie PLAYER_READY event has fired\n\t       */},{key:\"isReady\",get:function get(){return !!this._ready;} /**\n\t       * An events map that allows the user to add custom callbacks in player's options.\n\t       * @property eventsMapping\n\t       * @type {Object}\n\t       */},{key:\"eventsMapping\",get:function get(){return {onReady:Events.PLAYER_READY,onResize:Events.PLAYER_RESIZE,onPlay:Events.PLAYER_PLAY,onPause:Events.PLAYER_PAUSE,onStop:Events.PLAYER_STOP,onEnded:Events.PLAYER_ENDED,onSeek:Events.PLAYER_SEEK,onError:Events.PLAYER_ERROR,onTimeUpdate:Events.PLAYER_TIMEUPDATE,onVolumeUpdate:Events.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:Events.PLAYER_SUBTITLE_AVAILABLE};} /**\n\t       * @typedef {Object} PlaybackConfig\n\t       * @prop {boolean} disableContextMenu\n\t       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n\t       * @prop {boolean} preload\n\t       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n\t       * @prop {boolean} controls\n\t       * enabled/disables displaying controls\n\t       * @prop {boolean} crossOrigin\n\t       * enables cross-origin capability for media-resources\n\t       * @prop {boolean} playInline\n\t       * enables in-line video elements\n\t       * @prop {boolean} audioOnly\n\t       * enforce audio-only playback (when possible)\n\t       * @prop {Object} externalTracks\n\t       * pass externaly loaded track to playback\n\t       * @prop {Number} [maxBufferLength]\n\t       * The default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n\t       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n\t       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n\t       * @prop {Number} [maxBackBufferLength]\n\t       * After how much distance of the playhead data should be pruned from the buffer (influences memory consumption\n\t       * of adaptive media-engines like Hls.js or Shaka)\n\t       * @prop {Number} [minBufferLength]\n\t       * After how much data in the buffer at least we attempt to consume it (influences QoS-related behavior\n\t       * of adaptive media-engines like Hls.js or Shaka). If this is too low, and the available bandwidth is varying a lot\n\t       * and too close to the streamed bitrate, we may continuously hit under-runs.\n\t       * @prop {Number} [initialBandwidthEstimate]\n\t       * define an initial bandwidth \"guess\" (or previously stored/established value) for underlying adaptive-bitreate engines\n\t       * of adaptive playback implementations, like Hls.js or Shaka\n\t       * @prop {Number} [maxAdaptiveBitrate]\n\t       * Limits the streamed bitrate (for adaptive media-engines in underlying playback implementations)\n\t       * @prop {Object} [maxAdaptiveVideoDimensions]\n\t       * Limits the video dimensions in adaptive media-engines. Should be a literal object with `height` and `width`.\n\t       * @prop {Boolean}[enableAutomaticABR] **default**: `true`\n\t       * Allows to enable/disable automatic bitrate switching in adaptive media-engines\n\t       * @prop {String} [preferredTextLanguage] **default**: `'pt-BR'`\n\t       * Allows to set a preferred text language, that may be enabled by the media-engine if available.\n\t       * @prop {String} [preferredAudioLanguage] **default**: `'pt-BR'`\n\t       * Allows to set a preferred audio language, that may be enabled by the media-engine if available.\n\t       */ /**\n\t       * ## Player's constructor\n\t       *\n\t       * You might pass the options object to build the player.\n\t       * ```javascript\n\t       * var options = {source: \"http://example.com/video.mp4\", param1: \"val1\"};\n\t       * var player = new Clappr.Player(options);\n\t       * ```\n\t       *\n\t       * @method constructor\n\t       * @param {Object} options Data\n\t       * options to build a player instance\n\t       * @param {Number} [options.width]\n\t       * player's width **default**: `640`\n\t       * @param {Number} [options.height]\n\t       * player's height **default**: `360`\n\t       * @param {String} [options.parentId]\n\t       * the id of the element on the page that the player should be inserted into\n\t       * @param {Object} [options.parent]\n\t       * a reference to a dom element that the player should be inserted into\n\t       * @param {String} [options.source]\n\t       * The media source URL, or {source: <<source URL>>, mimeType: <<source mime type>>}\n\t       * @param {Object} [options.sources]\n\t       * An array of media source URL's, or an array of {source: <<source URL>>, mimeType: <<source mime type>>}\n\t       * @param {Boolean} [options.autoPlay]\n\t       * automatically play after page load **default**: `false`\n\t       * @param {Boolean} [options.loop]\n\t       * automatically replay after it ends **default**: `false`\n\t       * @param {Boolean} [options.chromeless]\n\t       * player acts in chromeless mode **default**: `false`\n\t       * @param {Boolean} [options.allowUserInteraction]\n\t       * whether or not the player should handle click events when in chromeless mode **default**: `false` on desktops browsers, `true` on mobile.\n\t       * @param {Boolean} [options.disableKeyboardShortcuts]\n\t       * disable keyboard shortcuts. **default**: `false`. `true` if `allowUserInteraction` is `false`.\n\t       * @param {Boolean} [options.mute]\n\t       * start the video muted **default**: `false`\n\t       * @param {String} [options.mimeType]\n\t       * add `mimeType: \"application/vnd.apple.mpegurl\"` if you need to use a url without extension.\n\t       * @param {Boolean} [options.actualLiveTime]\n\t       * show duration and seek time relative to actual time.\n\t       * @param {String} [options.actualLiveServerTime]\n\t       * specify server time as a string, format: \"2015/11/26 06:01:03\". This option is meant to be used with actualLiveTime.\n\t       * @param {Boolean} [options.persistConfig]\n\t       * persist player's settings (volume) through the same domain **default**: `true`\n\t       * @param {String} [options.preload] @deprecated\n\t       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n\t       * @param {Number} [options.maxBufferLength] @deprecated\n\t       * the default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n\t       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n\t       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n\t       * @param {String} [options.gaAccount]\n\t       * enable Google Analytics events dispatch **(play/pause/stop/buffering/etc)** by adding your `gaAccount`\n\t       * @param {String} [options.gaTrackerName]\n\t       * besides `gaAccount` you can optionally, pass your favorite trackerName as `gaTrackerName`\n\t       * @param {Object} [options.mediacontrol]\n\t       * customize control bar colors, example: `mediacontrol: {seekbar: \"#E113D3\", buttons: \"#66B2FF\"}`\n\t       * @param {Boolean} [options.hideMediaControl]\n\t       * control media control auto hide **default**: `true`\n\t       * @param {Boolean} [options.hideVolumeBar]\n\t       * when embedded with width less than 320, volume bar will hide. You can force this behavior for all sizes by adding `true` **default**: `false`\n\t       * @param {String} [options.watermark]\n\t       * put `watermark: 'http://url/img.png'` on your embed parameters to automatically add watermark on your video.\n\t       * You can customize corner position by defining position parameter. Positions can be `bottom-left`, `bottom-right`, `top-left` and `top-right`.\n\t       * @param {String} [options.watermarkLink]\n\t       * `watermarkLink: 'http://example.net/'` - define URL to open when the watermark is clicked. If not provided watermark will not be clickable.\n\t       * @param {Boolean} [options.disableVideoTagContextMenu] @deprecated\n\t       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n\t       * @param {Boolean} [options.autoSeekFromUrl]\n\t       * Automatically seek to the seconds provided in the url (e.g example.com?t=100) **default**: `true`\n\t       * @param {Boolean} [options.exitFullscreenOnEnd]\n\t       * Automatically exit full screen when the media finishes. **default**: `true`\n\t       * @param {String} [options.poster]\n\t       * define a poster by adding its address `poster: 'http://url/img.png'`. It will appear after video embed, disappear on play and go back when user stops the video.\n\t       * @param {String} [options.playbackNotSupportedMessage]\n\t       * define a custom message to be displayed when a playback is not supported.\n\t       * @param {Object} [options.events]\n\t       * Specify listeners which will be registered with their corresponding player events.\n\t       * E.g. onReady -> \"PLAYER_READY\", onTimeUpdate -> \"PLAYER_TIMEUPDATE\"\n\t       * @param {PlaybackConfig} [options.playback]\n\t       * Generic `Playback` component related configuration\n\t       * @param {Boolean} [options.disableErrorScreen]\n\t       * disables the error screen plugin.\n\t       * @param {Number} [options.autoPlayTimeout]\n\t       * autoplay check timeout.\n\t       */}]);function Player(options){var _this;_classCallCheck(this,Player);_this = _super.call(this,options);var playbackDefaultOptions={recycleVideo:true};var defaultOptions={playerId:uniqueId(''),persistConfig:true,width:640,height:360,baseUrl:baseUrl,allowUserInteraction:Browser.isMobile,includeResetStyle:true,playback:playbackDefaultOptions};_this._options = zepto.extend(true,defaultOptions,options);_this.options.sources = _this._normalizeSources(options);if(!_this.options.chromeless){ // \"allowUserInteraction\" cannot be false if not in chromeless mode.\n\t_this.options.allowUserInteraction = true;}if(!_this.options.allowUserInteraction){ // if user iteraction is not allowed ensure keyboard shortcuts are disabled\n\t_this.options.disableKeyboardShortcuts = true;}_this._registerOptionEventListeners(_this.options.events);_this._coreFactory = new CoreFactory(_assertThisInitialized(_this));if(_this.options.parentId)_this.setParentId(_this.options.parentId);else if(_this.options.parent)_this.attachTo(_this.options.parent);return _this;} /**\n\t     * Specify a `parentId` to the player.\n\t     * @method setParentId\n\t     * @param {String} parentId the element parent id.\n\t     * @return {Player} itself\n\t     */_createClass(Player,[{key:\"setParentId\",value:function setParentId(parentId){var el=document.querySelector(parentId);if(el)this.attachTo(el);return this;} /**\n\t       * You can use this method to attach the player to a given element. You don't need to do this when you specify it during the player instantiation passing the `parentId` param.\n\t       * @method attachTo\n\t       * @param {Object} element a given element.\n\t       * @return {Player} itself\n\t       */},{key:\"attachTo\",value:function attachTo(element){this.options.parentElement = element;this.core = this._coreFactory.create();this._addEventListeners();return this;}},{key:\"_addEventListeners\",value:function _addEventListeners(){if(!this.core.isReady)this.listenToOnce(this.core,Events.CORE_READY,this._onReady);else this._onReady();this.listenTo(this.core,Events.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged);this.listenTo(this.core,Events.CORE_FULLSCREEN,this._onFullscreenChange);this.listenTo(this.core,Events.CORE_RESIZE,this._onResize);return this;}},{key:\"_addContainerEventListeners\",value:function _addContainerEventListeners(){var container=this.core.activeContainer;if(container){this.listenTo(container,Events.CONTAINER_PLAY,this._onPlay);this.listenTo(container,Events.CONTAINER_PAUSE,this._onPause);this.listenTo(container,Events.CONTAINER_STOP,this._onStop);this.listenTo(container,Events.CONTAINER_ENDED,this._onEnded);this.listenTo(container,Events.CONTAINER_SEEK,this._onSeek);this.listenTo(container,Events.CONTAINER_ERROR,this._onError);this.listenTo(container,Events.CONTAINER_TIMEUPDATE,this._onTimeUpdate);this.listenTo(container,Events.CONTAINER_VOLUME,this._onVolumeUpdate);this.listenTo(container,Events.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable);}return this;}},{key:\"_registerOptionEventListeners\",value:function _registerOptionEventListeners(){var _this2=this;var newEvents=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};var events=arguments.length > 1 && arguments[1] !== undefined?arguments[1]:{};var hasNewEvents=Object.keys(newEvents).length > 0;hasNewEvents && Object.keys(events).forEach(function(userEvent){var eventType=_this2.eventsMapping[userEvent];eventType && _this2.off(eventType,events[userEvent]);});Object.keys(newEvents).forEach(function(userEvent){var eventType=_this2.eventsMapping[userEvent];if(eventType){var eventFunction=newEvents[userEvent];eventFunction = typeof eventFunction === 'function' && eventFunction;eventFunction && _this2.on(eventType,eventFunction);}});return this;}},{key:\"_containerChanged\",value:function _containerChanged(){this.stopListening();this._addEventListeners();}},{key:\"_onReady\",value:function _onReady(){this._ready = true;this._addContainerEventListeners();this.trigger(Events.PLAYER_READY);}},{key:\"_onFullscreenChange\",value:function _onFullscreenChange(fullscreen){this.trigger(Events.PLAYER_FULLSCREEN,fullscreen);}},{key:\"_onVolumeUpdate\",value:function _onVolumeUpdate(volume){this.trigger(Events.PLAYER_VOLUMEUPDATE,volume);}},{key:\"_onSubtitleAvailable\",value:function _onSubtitleAvailable(){this.trigger(Events.PLAYER_SUBTITLE_AVAILABLE);}},{key:\"_onResize\",value:function _onResize(size){this.trigger(Events.PLAYER_RESIZE,size);}},{key:\"_onPlay\",value:function _onPlay(){this.trigger(Events.PLAYER_PLAY);}},{key:\"_onPause\",value:function _onPause(){this.trigger(Events.PLAYER_PAUSE);}},{key:\"_onStop\",value:function _onStop(){this.trigger(Events.PLAYER_STOP,this.getCurrentTime());}},{key:\"_onEnded\",value:function _onEnded(){this.trigger(Events.PLAYER_ENDED);}},{key:\"_onSeek\",value:function _onSeek(time){this.trigger(Events.PLAYER_SEEK,time);}},{key:\"_onTimeUpdate\",value:function _onTimeUpdate(timeProgress){this.trigger(Events.PLAYER_TIMEUPDATE,timeProgress);}},{key:\"_onError\",value:function _onError(error){this.trigger(Events.PLAYER_ERROR,error);}},{key:\"_normalizeSources\",value:function _normalizeSources(options){var sources=options.sources || (options.source !== undefined?[options.source]:[]);return sources.length === 0?[{source:'',mimeType:''}]:sources;} /**\n\t       * resizes the current player canvas.\n\t       * @method resize\n\t       * @param {Object} size should be a literal object with `height` and `width`.\n\t       * @return {Player} itself\n\t       * @example\n\t       * ```javascript\n\t       * player.resize({height: 360, width: 640})\n\t       * ```\n\t       */},{key:\"resize\",value:function resize(size){this.core.resize(size);return this;} /**\n\t       * loads a new source.\n\t       * @method load\n\t       * @param {Array|String} sources source or sources of video.\n\t       * An array item can be a string or {source: <<source URL>>, mimeType: <<source mime type>>}\n\t       * @param {String} mimeType a mime type, example: `'application/vnd.apple.mpegurl'`\n\t       * @param {Boolean} [autoPlay=false] whether playing should be started immediately\n\t       * @return {Player} itself\n\t       */},{key:\"load\",value:function load(sources,mimeType,autoPlay){if(autoPlay !== undefined)this.configure({autoPlay:!!autoPlay});this.core.load(sources,mimeType);return this;} /**\n\t       * destroys the current player and removes it from the DOM.\n\t       * @method destroy\n\t       * @return {Player} itself\n\t       */},{key:\"destroy\",value:function destroy(){this.stopListening();this.core.destroy();return this;} /**\n\t       * Gives user consent to playback. Required by mobile device after a click event before Player.load().\n\t       * @method consent\n\t       * @param {Function} callback function called when current playback is consented\n\t       * @example\n\t       * ```javascript\n\t       * player.consent(function() { doSomethingNext(); });\n\t       * ```\n\t       */},{key:\"consent\",value:function consent(cb){this.core.getCurrentPlayback().consent(cb);} /**\n\t       * plays the current video (`source`).\n\t       * @method play\n\t       * @return {Player} itself\n\t       */},{key:\"play\",value:function play(){this.core.activeContainer.play();return this;} /**\n\t       * pauses the current video (`source`).\n\t       * @method pause\n\t       * @return {Player} itself\n\t       */},{key:\"pause\",value:function pause(){this.core.activeContainer.pause();return this;} /**\n\t       * stops the current video (`source`).\n\t       * @method stop\n\t       * @return {Player} itself\n\t       */},{key:\"stop\",value:function stop(){this.core.activeContainer.stop();return this;} /**\n\t       * seeks the current video (`source`). For example, `player.seek(120)` will seek to second 120 (2minutes) of the current video.\n\t       * @method seek\n\t       * @param {Number} time should be a number between 0 and the video duration.\n\t       * @return {Player} itself\n\t       */},{key:\"seek\",value:function seek(time){this.core.activeContainer.seek(time);return this;} /**\n\t       * seeks the current video (`source`). For example, `player.seek(50)` will seek to the middle of the current video.\n\t       * @method seekPercentage\n\t       * @param {Number} time should be a number between 0 and 100.\n\t       * @return {Player} itself\n\t       */},{key:\"seekPercentage\",value:function seekPercentage(percentage){this.core.activeContainer.seekPercentage(percentage);return this;} /**\n\t       * mutes the current video (`source`).\n\t       * @method mute\n\t       * @return {Player} itself\n\t       */},{key:\"mute\",value:function mute(){this.core.activePlayback.mute();return this;} /**\n\t       * unmutes the current video (`source`).\n\t       * @method unmute\n\t       * @return {Player} itself\n\t       */},{key:\"unmute\",value:function unmute(){this.core.activePlayback.unmute();return this;} /**\n\t       * checks if the player is playing.\n\t       * @method isPlaying\n\t       * @return {Boolean} `true` if the current source is playing, otherwise `false`\n\t       */},{key:\"isPlaying\",value:function isPlaying(){return this.core.activeContainer.isPlaying();} /**\n\t       * returns `true` if DVR is enable otherwise `false`.\n\t       * @method isDvrEnabled\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrEnabled\",value:function isDvrEnabled(){return this.core.activeContainer.isDvrEnabled();} /**\n\t       * returns `true` if DVR is in use otherwise `false`.\n\t       * @method isDvrInUse\n\t       * @return {Boolean}\n\t       */},{key:\"isDvrInUse\",value:function isDvrInUse(){return this.core.activeContainer.isDvrInUse();} /**\n\t       * enables to configure a player after its creation\n\t       * @method configure\n\t       * @param {Object} options all the options to change in form of a javascript object\n\t       * @return {Player} itself\n\t       */},{key:\"configure\",value:function configure(){var options=arguments.length > 0 && arguments[0] !== undefined?arguments[0]:{};this._registerOptionEventListeners(options.events,this.options.events);this.core.configure(options);return this;} /**\n\t       * get a plugin by its name.\n\t       * @method getPlugin\n\t       * @param {String} name of the plugin.\n\t       * @return {Object} the plugin instance\n\t       * @example\n\t       * ```javascript\n\t       * var poster = player.getPlugin('poster');\n\t       * poster.hidePlayButton();\n\t       * ```\n\t       */},{key:\"getPlugin\",value:function getPlugin(name){var plugins=this.core.plugins.concat(this.core.activeContainer.plugins);return plugins.filter(function(plugin){return plugin.name === name;})[0];} /**\n\t       * the current time in seconds.\n\t       * @method getCurrentTime\n\t       * @return {Number} current time (in seconds) of the current source\n\t       */},{key:\"getCurrentTime\",value:function getCurrentTime(){return this.core.activeContainer.getCurrentTime();} /**\n\t       * The time that \"0\" now represents relative to when playback started.\n\t       * For a stream with a sliding window this will increase as content is\n\t       * removed from the beginning.\n\t       * @method getStartTimeOffset\n\t       * @return {Number} time (in seconds) that time \"0\" represents.\n\t       */},{key:\"getStartTimeOffset\",value:function getStartTimeOffset(){return this.core.activeContainer.getStartTimeOffset();} /**\n\t       * the duration time in seconds.\n\t       * @method getDuration\n\t       * @return {Number} duration time (in seconds) of the current source\n\t       */},{key:\"getDuration\",value:function getDuration(){return this.core.activeContainer.getDuration();}}]);return Player;})(BaseObject);Object.assign(Player.prototype,ErrorMixin); /**\n\t   * The base class for a container plugin\n\t   * @class ContainerPlugin\n\t   * @constructor\n\t   * @extends BaseObject\n\t   * @module base\n\t   */var ContainerPlugin= /*#__PURE__*/(function(_BaseObject){_inherits(ContainerPlugin,_BaseObject);var _super=_createSuper(ContainerPlugin);_createClass(ContainerPlugin,[{key:\"playerError\",get:function get(){return this.container.playerError;}}]);function ContainerPlugin(container){var _this;_classCallCheck(this,ContainerPlugin);_this = _super.call(this,container.options);_this.container = container;_this.enabled = true;_this.bindEvents();return _this;}_createClass(ContainerPlugin,[{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.enabled = true;}}},{key:\"disable\",value:function disable(){if(this.enabled){this.stopListening();this.enabled = false;}}},{key:\"bindEvents\",value:function bindEvents(){}},{key:\"destroy\",value:function destroy(){this.stopListening();}}]);return ContainerPlugin;})(BaseObject);Object.assign(ContainerPlugin.prototype,ErrorMixin);ContainerPlugin.extend = function(properties){return extend(ContainerPlugin,properties);};ContainerPlugin.type = 'container';var CorePlugin= /*#__PURE__*/(function(_BaseObject){_inherits(CorePlugin,_BaseObject);var _super=_createSuper(CorePlugin);_createClass(CorePlugin,[{key:\"playerError\",get:function get(){return this.core.playerError;}}]);function CorePlugin(core){var _this;_classCallCheck(this,CorePlugin);_this = _super.call(this,core.options);_this.core = core;_this.enabled = true;_this.bindEvents();return _this;}_createClass(CorePlugin,[{key:\"bindEvents\",value:function bindEvents(){}},{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.enabled = true;}}},{key:\"disable\",value:function disable(){if(this.enabled){this.stopListening();this.enabled = false;}}},{key:\"getExternalInterface\",value:function getExternalInterface(){return {};}},{key:\"destroy\",value:function destroy(){this.stopListening();}}]);return CorePlugin;})(BaseObject);Object.assign(CorePlugin.prototype,ErrorMixin);CorePlugin.extend = function(properties){return extend(CorePlugin,properties);};CorePlugin.type = 'core'; /**\n\t   * The base class for an ui container plugin\n\t   * @class UIContainerPlugin\n\t   * @constructor\n\t   * @extends UIObject\n\t   * @module base\n\t   */var UIContainerPlugin= /*#__PURE__*/(function(_UIObject){_inherits(UIContainerPlugin,_UIObject);var _super=_createSuper(UIContainerPlugin);_createClass(UIContainerPlugin,[{key:\"playerError\",get:function get(){return this.container.playerError;}}]);function UIContainerPlugin(container){var _this;_classCallCheck(this,UIContainerPlugin);_this = _super.call(this,container.options);_this.container = container;_this.enabled = true;_this.bindEvents();return _this;}_createClass(UIContainerPlugin,[{key:\"enable\",value:function enable(){if(!this.enabled){this.bindEvents();this.$el.show();this.enabled = true;}}},{key:\"disable\",value:function disable(){this.stopListening();this.$el.hide();this.enabled = false;}},{key:\"bindEvents\",value:function bindEvents(){}}]);return UIContainerPlugin;})(UIObject);Object.assign(UIContainerPlugin.prototype,ErrorMixin);UIContainerPlugin.extend = function(properties){return extend(UIContainerPlugin,properties);};UIContainerPlugin.type = 'container';var tracksHTML=\"<% for (var i = 0; i < tracks.length; i++) { %>\\n  <track data-html5-video-track=\\\"<%= i %>\\\" kind=\\\"<%= tracks[i].kind %>\\\" label=\\\"<%= tracks[i].label %>\\\" srclang=\\\"<%= tracks[i].lang %>\\\" src=\\\"<%= tracks[i].src %>\\\">\\n<% }; %>\\n\";var css_248z$3=\"[data-html5-video] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  display: block; }\\n\";var MIMETYPES={'mp4':['avc1.42E01E','avc1.58A01E','avc1.4D401E','avc1.64001E','mp4v.20.8','mp4v.20.240','mp4a.40.2'].map(function(codec){return 'video/mp4; codecs=\"' + codec + ', mp4a.40.2\"';}),'ogg':['video/ogg; codecs=\"theora, vorbis\"','video/ogg; codecs=\"dirac\"','video/ogg; codecs=\"theora, speex\"'],'3gpp':['video/3gpp; codecs=\"mp4v.20.8, samr\"'],'webm':['video/webm; codecs=\"vp8, vorbis\"'],'mkv':['video/x-matroska; codecs=\"theora, vorbis\"'],'m3u8':['application/x-mpegurl']};MIMETYPES['ogv'] = MIMETYPES['ogg'];MIMETYPES['3gp'] = MIMETYPES['3gpp'];var AUDIO_MIMETYPES={'wav':['audio/wav'],'mp3':['audio/mp3','audio/mpeg;codecs=\"mp3\"'],'aac':['audio/mp4;codecs=\"mp4a.40.5\"'],'oga':['audio/ogg']};var KNOWN_AUDIO_MIMETYPES=Object.keys(AUDIO_MIMETYPES).reduce(function(acc,k){return [].concat(_toConsumableArray(acc),_toConsumableArray(AUDIO_MIMETYPES[k]));},[]);var UNKNOWN_ERROR={code:'unknown',message:'unknown'}; // TODO: rename this Playback to HTML5Playback (breaking change, only after 0.3.0)\n\tvar HTML5Video= /*#__PURE__*/(function(_Playback){_inherits(HTML5Video,_Playback);var _super=_createSuper(HTML5Video);_createClass(HTML5Video,[{key:\"name\",get:function get(){return 'html5_video';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"tagName\",get:function get(){return this.isAudioOnly?'audio':'video';}},{key:\"isAudioOnly\",get:function get(){var resourceUrl=this.options.src;var mimeTypes=HTML5Video._mimeTypesForUrl(resourceUrl,AUDIO_MIMETYPES,this.options.mimeType);return this.options.playback && this.options.playback.audioOnly || this.options.audioOnly || KNOWN_AUDIO_MIMETYPES.indexOf(mimeTypes[0]) >= 0;}},{key:\"attributes\",get:function get(){return {'data-html5-video':''};}},{key:\"events\",get:function get(){return {'canplay':'_onCanPlay','canplaythrough':'_handleBufferingEvents','durationchange':'_onDurationChange','ended':'_onEnded','error':'_onError','loadeddata':'_onLoadedData','loadedmetadata':'_onLoadedMetadata','pause':'_onPause','playing':'_onPlaying','progress':'_onProgress','seeking':'_onSeeking','seeked':'_onSeeked','stalled':'_handleBufferingEvents','timeupdate':'_onTimeUpdate','waiting':'_onWaiting'};} /**\n\t       * Determine if the playback has ended.\n\t       * @property ended\n\t       * @type Boolean\n\t       */},{key:\"ended\",get:function get(){return this.el.ended;} /**\n\t       * Determine if the playback is having to buffer in order for\n\t       * playback to be smooth.\n\t       * This is related to the PLAYBACK_BUFFERING and PLAYBACK_BUFFERFULL events\n\t       * @property buffering\n\t       * @type Boolean\n\t       */},{key:\"buffering\",get:function get(){return this._isBuffering;}},{key:\"isLive\",get:function get(){return this.getPlaybackType() === Playback.LIVE;}},{key:\"dvrEnabled\",get:function get(){return this.getDuration() >= this._minDvrSize && this.isLive;}},{key:\"minimumDVRSizeConfig\",get:function get(){return this.options.playback && this.options.playback.minimumDvrSize;}},{key:\"isValidMinimumDVRSizeConfig\",get:function get(){return typeof this.minimumDVRSizeConfig !== 'undefined' && typeof this.minimumDVRSizeConfig === 'number';}}]);function HTML5Video(){var _this;_classCallCheck(this,HTML5Video);for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}_this = _super.call.apply(_super,[this].concat(args));_this._destroyed = false;_this._loadStarted = false;_this._isBuffering = false;_this._playheadMoving = false;_this._playheadMovingTimer = null;_this._stopped = false;_this._ccTrackId = -1;_this._setupSrc(_this.options.src); // backwards compatibility (TODO: remove on 0.3.0)\n\t_this.options.playback || (_this.options.playback = _this.options || {});_this.options.playback.disableContextMenu = _this.options.playback.disableContextMenu || _this.options.disableVideoTagContextMenu;_this._minDvrSize = _this.isValidMinimumDVRSizeConfig?_this.minimumDVRSizeConfig:60;var playbackConfig=_this.options.playback;var preload=playbackConfig.preload || (Browser.isSafari?'auto':_this.options.preload);var posterUrl; // FIXME: poster plugin should always convert poster to object with expected properties ?\n\tif(_this.options.poster){if(typeof _this.options.poster === 'string')posterUrl = _this.options.poster;else if(typeof _this.options.poster.url === 'string')posterUrl = _this.options.poster.url;}zepto.extend(true,_this.el,{muted:_this.options.mute,defaultMuted:_this.options.mute,loop:_this.options.loop,poster:posterUrl,preload:preload || 'metadata',crossOrigin:playbackConfig.crossOrigin,'x-webkit-playsinline':playbackConfig.playInline});if(playbackConfig.controls || _this.options.useVideoTagDefaultControls)_this.$el.attr('controls','');playbackConfig.playInline && _this.$el.attr({playsinline:'playsinline'});playbackConfig.crossOrigin && _this.$el.attr({crossorigin:playbackConfig.crossOrigin}); // TODO should settings be private?\n\t_this.settings = {\"default\":['seekbar']};_this.settings.left = ['playpause','position','duration'];_this.settings.right = ['fullscreen','volume','hd-indicator'];playbackConfig.externalTracks && _this._setupExternalTracks(playbackConfig.externalTracks);_this.options.autoPlay && _this.attemptAutoPlay();return _this;}_createClass(HTML5Video,[{key:\"configure\",value:function configure(options){_get(_getPrototypeOf(HTML5Video.prototype),\"configure\",this).call(this,options);this.el.loop = !!options.loop;} // See Playback.attemptAutoPlay()\n\t},{key:\"attemptAutoPlay\",value:function attemptAutoPlay(){var _this2=this;this.canAutoPlay(function(result,error){error && Log.warn(_this2.name,'autoplay error.',{result:result,error:error}); // https://github.com/clappr/clappr/issues/1076\n\tresult && setTimeout(function(){return !_this2._destroyed && _this2.play();},0);});} // See Playback.canAutoPlay()\n\t},{key:\"canAutoPlay\",value:function canAutoPlay(cb){if(this.options.disableCanAutoPlay){cb(true,null);return;}var opts={timeout:this.options.autoPlayTimeout || 500,inline:this.options.playback.playInline || false,muted:this.options.mute || false // Known issue: mediacontrols may asynchronously mute video\n\t}; // Use current video element if recycling feature enabled with mobile devices\n\tif(Browser.isMobile && DomRecycler.options.recycleVideo)opts.element = this.el; // Desktop browser autoplay policy may require user action\n\t// Mobile browser autoplay require user consent and video recycling feature enabled\n\t// It may returns a false positive with source-less player consent\n\tcanAutoPlayMedia(cb,opts);}},{key:\"_setupExternalTracks\",value:function _setupExternalTracks(tracks){this._externalTracks = tracks.map(function(track){return {kind:track.kind || 'subtitles', // Default is 'subtitles'\n\tlabel:track.label,lang:track.lang,src:track.src};});} /**\n\t       * Sets the source url on the <video> element, and also the 'src' property.\n\t       * @method setupSrc\n\t       * @private\n\t       * @param {String} srcUrl The source URL.\n\t       */},{key:\"_setupSrc\",value:function _setupSrc(srcUrl){if(this.el.src === srcUrl)return;this._ccIsSetup = false;this.el.src = srcUrl;this._src = this.el.src;}},{key:\"_onLoadedMetadata\",value:function _onLoadedMetadata(e){this._handleBufferingEvents();this.trigger(Events.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e});this._updateSettings();var autoSeekFromUrl=typeof this._options.autoSeekFromUrl === 'undefined' || this._options.autoSeekFromUrl;if(this.getPlaybackType() !== Playback.LIVE && autoSeekFromUrl)this._checkInitialSeek();}},{key:\"_onDurationChange\",value:function _onDurationChange(){this._updateSettings();this._onTimeUpdate(); // onProgress uses the duration\n\tthis._onProgress();}},{key:\"_updateSettings\",value:function _updateSettings(){ // we can't figure out if hls resource is VoD or not until it is being loaded or duration has changed.\n\t// that's why we check it again and update media control accordingly.\n\tif(this.getPlaybackType() === Playback.VOD || this.getPlaybackType() === Playback.AOD)this.settings.left = ['playpause','position','duration'];else this.settings.left = ['playstop'];this.settings.seekEnabled = this.isSeekEnabled();this.trigger(Events.PLAYBACK_SETTINGSUPDATE);}},{key:\"isSeekEnabled\",value:function isSeekEnabled(){return isFinite(this.getDuration());}},{key:\"getPlaybackType\",value:function getPlaybackType(){var onDemandType=this.tagName === 'audio'?Playback.AOD:Playback.VOD;return [0,undefined,Infinity].indexOf(this.el.duration) >= 0?Playback.LIVE:onDemandType;}},{key:\"isHighDefinitionInUse\",value:function isHighDefinitionInUse(){return false;} // On mobile device, HTML5 video element \"retains\" user action consent if\n\t// load() method is called. See Player.consent().\n\t},{key:\"consent\",value:function consent(cb){var _this3=this;if(this.isPlaying() || this.el._consented){_get(_getPrototypeOf(HTML5Video.prototype),\"consent\",this).call(this,cb);}else {var eventHandler=function eventHandler(){_this3.el.removeEventListener('loadedmetadata',eventHandler,false);_this3.el.removeEventListener('error',eventHandler,false);_this3.el._consented = true; // Flag to call load() only once\n\t_get(_getPrototypeOf(HTML5Video.prototype),\"consent\",_this3).call(_this3,cb);};this.el.addEventListener('loadedmetadata',eventHandler,false);this.el.addEventListener('error',eventHandler,false);this.el.load();}}},{key:\"play\",value:function play(){this.trigger(Events.PLAYBACK_PLAY_INTENT);this._stopped = false;this._setupSrc(this._src);this._handleBufferingEvents();var promise=this.el.play(); // For more details, see https://developers.google.com/web/updates/2016/03/play-returns-promise\n\tif(promise && promise[\"catch\"])promise[\"catch\"](function(){});}},{key:\"pause\",value:function pause(){this.el.pause();this.dvrEnabled && this._updateDvr(true);}},{key:\"stop\",value:function stop(){this.pause();this._stopped = true; // src will be added again in play()\n\tthis.el.removeAttribute('src');this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\tthis._stopPlayheadMovingChecks();this._handleBufferingEvents();this.trigger(Events.PLAYBACK_STOP);}},{key:\"volume\",value:function volume(value){if(value === 0){this.$el.attr({muted:'true'});this.el.muted = true;}else {this.$el.attr({muted:null});this.el.muted = false;this.el.volume = value / 100;}} /**\n\t       * @deprecated\n\t       * @private\n\t       */},{key:\"mute\",value:function mute(){this.el.muted = true;} /**\n\t       * @deprecated\n\t       * @private\n\t       */},{key:\"unmute\",value:function unmute(){this.el.muted = false;}},{key:\"isMuted\",value:function isMuted(){return this.el.muted === true || this.el.volume === 0;}},{key:\"isPlaying\",value:function isPlaying(){return !this.el.paused && !this.el.ended;}},{key:\"_startPlayheadMovingChecks\",value:function _startPlayheadMovingChecks(){if(this._playheadMovingTimer !== null)return;this._playheadMovingTimeOnCheck = null;this._determineIfPlayheadMoving();this._playheadMovingTimer = setInterval(this._determineIfPlayheadMoving.bind(this),500);}},{key:\"_stopPlayheadMovingChecks\",value:function _stopPlayheadMovingChecks(){if(this._playheadMovingTimer === null)return;clearInterval(this._playheadMovingTimer);this._playheadMovingTimer = null;this._playheadMoving = false;}},{key:\"_determineIfPlayheadMoving\",value:function _determineIfPlayheadMoving(){var before=this._playheadMovingTimeOnCheck;var now=this.el.currentTime;this._playheadMoving = before !== now;this._playheadMovingTimeOnCheck = now;this._handleBufferingEvents();} // this seems to happen when the user is having to wait\n\t// for something to happen AFTER A USER INTERACTION\n\t// e.g the player might be buffering, but when `play()` is called\n\t// only at this point will this be called.\n\t// Or the user may seek somewhere but the new area requires buffering,\n\t// so it will fire then as well.\n\t// On devices where playing is blocked until requested with a user action,\n\t// buffering may start, but never finish until the user initiates a play,\n\t// but this only happens when play is actually requested\n\t},{key:\"_onWaiting\",value:function _onWaiting(){this._loadStarted = true;this._handleBufferingEvents();} // called after the first frame has loaded\n\t// note this doesn't fire on ios before the user has requested play\n\t// ideally the \"loadstart\" event would be used instead, but this fires\n\t// before a user has requested play on iOS, and also this is always fired\n\t// even if the preload setting is \"none\". In both these cases this causes\n\t// infinite buffering until the user does something which isn't great.\n\t},{key:\"_onLoadedData\",value:function _onLoadedData(){this._loadStarted = true;this._handleBufferingEvents();} // note this doesn't fire on ios before user has requested play\n\t},{key:\"_onCanPlay\",value:function _onCanPlay(){this._handleBufferingEvents();}},{key:\"_onPlaying\",value:function _onPlaying(){this._checkForClosedCaptions();this._startPlayheadMovingChecks();this._handleBufferingEvents();this.trigger(Events.PLAYBACK_PLAY);}},{key:\"_onPause\",value:function _onPause(){this._stopPlayheadMovingChecks();this._handleBufferingEvents();this.trigger(Events.PLAYBACK_PAUSE);}},{key:\"_onSeeking\",value:function _onSeeking(){this.trigger(Events.PLAYBACK_SEEK,this.getCurrentTime());this._handleBufferingEvents();}},{key:\"_onSeeked\",value:function _onSeeked(){this._handleBufferingEvents();this.trigger(Events.PLAYBACK_SEEKED);}},{key:\"_onEnded\",value:function _onEnded(){this._handleBufferingEvents();this.trigger(Events.PLAYBACK_ENDED,this.name);} // The playback should be classed as buffering if the following are true:\n\t// - the ready state is less then HAVE_FUTURE_DATA or the playhead isn't moving and it should be\n\t// - the media hasn't \"ended\",\n\t// - the media hasn't been stopped\n\t// - loading has started\n\t},{key:\"_handleBufferingEvents\",value:function _handleBufferingEvents(){var playheadShouldBeMoving=!this.el.ended && !this.el.paused;var buffering=this._loadStarted && !this.el.ended && !this._stopped && (playheadShouldBeMoving && !this._playheadMoving || this.el.readyState < this.el.HAVE_FUTURE_DATA);if(this._isBuffering !== buffering){this._isBuffering = buffering;if(buffering)this.trigger(Events.PLAYBACK_BUFFERING,this.name);else this.trigger(Events.PLAYBACK_BUFFERFULL,this.name);}}},{key:\"_onError\",value:function _onError(){var _ref=this.el.error || UNKNOWN_ERROR,code=_ref.code,message=_ref.message;var isUnknownError=code === UNKNOWN_ERROR.code;var formattedError=this.createError({code:code,description:message,raw:this.el.error,level:isUnknownError?PlayerError.Levels.WARN:PlayerError.Levels.FATAL});if(isUnknownError)Log.warn(this.name,'HTML5 unknown error: ',formattedError);else this.trigger(Events.PLAYBACK_ERROR,formattedError);}},{key:\"destroy\",value:function destroy(){this._destroyed = true;this.handleTextTrackChange && this.el.textTracks.removeEventListener('change',this.handleTextTrackChange);_get(_getPrototypeOf(HTML5Video.prototype),\"destroy\",this).call(this);this.el.removeAttribute('src');this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\tthis._src = null;DomRecycler.garbage(this.el);}},{key:\"_updateDvr\",value:function _updateDvr(status){this.trigger(Events.PLAYBACK_DVR,status);this.trigger(Events.PLAYBACK_STATS_ADD,{'dvr':status});}},{key:\"seek\",value:function seek(time){if(time < 0){Log.warn('Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point.');time = this.getDuration();} // assume live if time within 3 seconds of end of stream\n\tthis.dvrEnabled && this._updateDvr(time < this.getDuration() - 3);time += this.el.seekable.start(0);this.el.currentTime = time;}},{key:\"seekPercentage\",value:function seekPercentage(percentage){var time=this.el.duration * (percentage / 100);this.seek(time);}},{key:\"_checkInitialSeek\",value:function _checkInitialSeek(){var seekTime=seekStringToSeconds();if(seekTime !== 0)this.seek(seekTime);}},{key:\"getCurrentTime\",value:function getCurrentTime(){return this.el.currentTime;}},{key:\"getDuration\",value:function getDuration(){var _this4=this;if(this.isLive){try{return this.el.seekable.end(0) - this.el.seekable.start(0);}catch(e) {setTimeout(function(){return _this4._updateSettings();},1000);}}return this.el.duration;}},{key:\"_onTimeUpdate\",value:function _onTimeUpdate(){var duration=this.isLive?this.getDuration():this.el.duration;this.trigger(Events.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:duration},this.name);}},{key:\"_onProgress\",value:function _onProgress(){if(!this.el.buffered.length)return;var buffered=[];var bufferedPos=0;for(var i=0;i < this.el.buffered.length;i++) {buffered = [].concat(_toConsumableArray(buffered),[{start:this.el.buffered.start(i),end:this.el.buffered.end(i)}]);if(this.el.currentTime >= buffered[i].start && this.el.currentTime <= buffered[i].end)bufferedPos = i;}var progress={start:buffered[bufferedPos].start,current:buffered[bufferedPos].end,total:this.el.duration};this.trigger(Events.PLAYBACK_PROGRESS,progress,buffered);}},{key:\"_typeFor\",value:function _typeFor(src){var mimeTypes=HTML5Video._mimeTypesForUrl(src,MIMETYPES,this.options.mimeType);if(mimeTypes.length === 0)mimeTypes = HTML5Video._mimeTypesForUrl(src,AUDIO_MIMETYPES,this.options.mimeType);var mimeType=mimeTypes[0] || '';return mimeType.split(';')[0];}},{key:\"_ready\",value:function _ready(){if(this._isReadyState)return;this._isReadyState = true;this.trigger(Events.PLAYBACK_READY,this.name);}},{key:\"_checkForClosedCaptions\",value:function _checkForClosedCaptions(){ // Check if CC available only if current playback is HTML5Video\n\tif(this.isHTML5Video && !this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(Events.PLAYBACK_SUBTITLE_AVAILABLE);var trackId=this.closedCaptionsTrackId;this.closedCaptionsTrackId = trackId;this.handleTextTrackChange = this._handleTextTrackChange.bind(this);this.el.textTracks.addEventListener('change',this.handleTextTrackChange);}this._ccIsSetup = true;}}},{key:\"_handleTextTrackChange\",value:function _handleTextTrackChange(){var tracks=this.closedCaptionsTracks;var track=tracks.find(function(track){return track.track.mode === 'showing';}) || {id:-1};if(this._ccTrackId !== track.id){this._ccTrackId = track.id;this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED,{id:track.id});}}},{key:\"render\",value:function render(){if(this.options.playback.disableContextMenu){this.$el.on('contextmenu',function(){return false;});}if(this._externalTracks && this._externalTracks.length > 0){this.$el.html(this.template({tracks:this._externalTracks}));}this._ready();var style=Styler.getStyleFor(css_248z$3.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);return this;}},{key:\"isReady\",get:function get(){return this._isReadyState;}},{key:\"isHTML5Video\",get:function get(){return this.name === HTML5Video.prototype.name;}},{key:\"closedCaptionsTracks\",get:function get(){var id=0;var trackId=function trackId(){return id++;};var textTracks=this.el.textTracks?Array.from(this.el.textTracks):[];return textTracks.filter(function(track){return track.kind === 'subtitles' || track.kind === 'captions';}).map(function(track){return {id:trackId(),name:track.label,track:track};});}},{key:\"closedCaptionsTrackId\",get:function get(){return this._ccTrackId;},set:function set(trackId){if(!isNumber(trackId))return;var tracks=this.closedCaptionsTracks;var showingTrack; // Note: -1 is for hide all tracks\n\tif(trackId !== -1){showingTrack = tracks.find(function(track){return track.id === trackId;});if(!showingTrack)return; // Track id not found\n\tif(showingTrack.track.mode === 'showing')return; // Track already showing\n\t} // Since it is possible to display multiple tracks,\n\t// ensure that all tracks are hidden.\n\ttracks.filter(function(track){return track.track.mode !== 'hidden';}).forEach(function(track){return track.track.mode = 'hidden';});showingTrack && (showingTrack.track.mode = 'showing');this._ccTrackId = trackId;this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED,{id:trackId});}},{key:\"template\",get:function get(){return tmpl(tracksHTML);}}]);return HTML5Video;})(Playback);HTML5Video._mimeTypesForUrl = function(resourceUrl,mimeTypesByExtension,mimeType){var extension=(resourceUrl.split('?')[0].match(/.*\\.(.*)$/) || [])[1];var mimeTypes=mimeType || extension && mimeTypesByExtension[extension.toLowerCase()] || [];return mimeTypes.constructor === Array?mimeTypes:[mimeTypes];};HTML5Video._canPlay = function(type,mimeTypesByExtension,resourceUrl,mimeType){var mimeTypes=HTML5Video._mimeTypesForUrl(resourceUrl,mimeTypesByExtension,mimeType);var media=document.createElement(type);return !!mimeTypes.filter(function(mediaType){return !!media.canPlayType(mediaType).replace(/no/,'');})[0];};HTML5Video.canPlay = function(resourceUrl,mimeType){return HTML5Video._canPlay('audio',AUDIO_MIMETYPES,resourceUrl,mimeType) || HTML5Video._canPlay('video',MIMETYPES,resourceUrl,mimeType);};var HTML5Audio= /*#__PURE__*/(function(_HTML5Video){_inherits(HTML5Audio,_HTML5Video);var _super=_createSuper(HTML5Audio);function HTML5Audio(){_classCallCheck(this,HTML5Audio);return _super.apply(this,arguments);}_createClass(HTML5Audio,[{key:\"updateSettings\",value:function updateSettings(){this.settings.left = ['playpause','position','duration'];this.settings.seekEnabled = this.isSeekEnabled();this.trigger(Events.PLAYBACK_SETTINGSUPDATE);}},{key:\"getPlaybackType\",value:function getPlaybackType(){return Playback.AOD;}},{key:\"name\",get:function get(){return 'html5_audio';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"tagName\",get:function get(){return 'audio';}},{key:\"isAudioOnly\",get:function get(){return true;}}]);return HTML5Audio;})(HTML5Video);HTML5Audio.canPlay = function(resourceUrl,mimeType){var mimetypes={'wav':['audio/wav'],'mp3':['audio/mp3','audio/mpeg;codecs=\"mp3\"'],'aac':['audio/mp4;codecs=\"mp4a.40.5\"'],'oga':['audio/ogg']};return HTML5Video._canPlay('audio',mimetypes,resourceUrl,mimeType);};var css_248z$4=\"[data-html-img] {\\n  max-width: 100%;\\n  max-height: 100%; }\\n\";var HTMLImg= /*#__PURE__*/(function(_Playback){_inherits(HTMLImg,_Playback);var _super=_createSuper(HTMLImg);_createClass(HTMLImg,[{key:\"getPlaybackType\",value:function getPlaybackType(){return Playback.NO_OP;}},{key:\"name\",get:function get(){return 'html_img';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"tagName\",get:function get(){return 'img';}},{key:\"attributes\",get:function get(){return {'data-html-img':''};}},{key:\"events\",get:function get(){return {'load':'_onLoad','abort':'_onError','error':'_onError'};}}]);function HTMLImg(params){var _this;_classCallCheck(this,HTMLImg);_this = _super.call(this,params);_this.el.src = params.src;return _this;}_createClass(HTMLImg,[{key:\"render\",value:function render(){var style=Styler.getStyleFor(css_248z$4.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.trigger(Events.PLAYBACK_READY,this.name);return this;}},{key:\"_onLoad\",value:function _onLoad(){this.trigger(Events.PLAYBACK_ENDED,this.name);}},{key:\"_onError\",value:function _onError(evt){var m=evt.type === 'error'?'load error':'loading aborted';this.trigger(Events.PLAYBACK_ERROR,{message:m},this.name);}}]);return HTMLImg;})(Playback);HTMLImg.canPlay = function(resource){return (/\\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\\?.*)$/i.test(resource));};var noOpHTML=\"<canvas data-no-op-canvas></canvas>\\n<p data-no-op-msg><%=message%></p><p>\\n</p>\";var css_248z$5=\"[data-no-op] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  text-align: center; }\\n\\n[data-no-op] p[data-no-op-msg] {\\n  position: absolute;\\n  text-align: center;\\n  font-size: 25px;\\n  left: 0;\\n  right: 0;\\n  color: white;\\n  padding: 10px;\\n  /* center vertically */\\n  top: 50%;\\n  transform: translateY(-50%);\\n  max-height: 100%;\\n  overflow: auto; }\\n\\n[data-no-op] canvas[data-no-op-canvas] {\\n  background-color: #777;\\n  height: 100%;\\n  width: 100%; }\\n\";var NoOp= /*#__PURE__*/(function(_Playback){_inherits(NoOp,_Playback);var _super=_createSuper(NoOp);_createClass(NoOp,[{key:\"name\",get:function get(){return 'no_op';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}},{key:\"template\",get:function get(){return tmpl(noOpHTML);}},{key:\"attributes\",get:function get(){return {'data-no-op':''};}}]);function NoOp(){var _this;_classCallCheck(this,NoOp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key < _len;_key++) {args[_key] = arguments[_key];}_this = _super.call.apply(_super,[this].concat(args));_this._noiseFrameNum = -1;return _this;}_createClass(NoOp,[{key:\"render\",value:function render(){var playbackNotSupported=this.options.playbackNotSupportedMessage || this.i18n.t('playback_not_supported');var style=Styler.getStyleFor(css_248z$5.toString(),{baseUrl:this.options.baseUrl});this.$el.append(style[0]);this.$el.html(this.template({message:playbackNotSupported}));this.trigger(Events.PLAYBACK_READY,this.name);var showForNoOp=!!(this.options.poster && this.options.poster.showForNoOp);if(this.options.autoPlay || !showForNoOp)this._animate();return this;}},{key:\"_noise\",value:function _noise(){this._noiseFrameNum = (this._noiseFrameNum + 1) % 5;if(this._noiseFrameNum){ // only update noise every 5 frames to save cpu\n\treturn;}var idata=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);var buffer32;try{buffer32 = new Uint32Array(idata.data.buffer);}catch(err) {buffer32 = new Uint32Array(this.context.canvas.width * this.context.canvas.height * 4);var data=idata.data;for(var i=0;i < data.length;i++) {buffer32[i] = data[i];}}var len=buffer32.length,m=Math.random() * 6 + 4;var run=0,color=0;for(var _i=0;_i < len;) {if(run < 0){run = m * Math.random();var p=Math.pow(Math.random(),0.4);color = 255 * p << 24;}run -= 1;buffer32[_i++] = color;}this.context.putImageData(idata,0,0);}},{key:\"_loop\",value:function _loop(){var _this2=this;if(this._stop)return;this._noise();this._animationHandle = requestAnimationFrame(function(){return _this2._loop();});}},{key:\"destroy\",value:function destroy(){if(this._animationHandle){cancelAnimationFrame(this._animationHandle);this._stop = true;}}},{key:\"_animate\",value:function _animate(){this.canvas = this.$el.find('canvas[data-no-op-canvas]')[0];this.context = this.canvas.getContext('2d');this._loop();}}]);return NoOp;})(Playback);NoOp.canPlay = function(source){ // eslint-disable-line no-unused-vars\n\treturn true;}; /**\n\t   * The internationalization (i18n) plugin\n\t   * @class Strings\n\t   * @constructor\n\t   * @extends CorePlugin\n\t   * @module plugins\n\t   */var Strings= /*#__PURE__*/(function(_CorePlugin){_inherits(Strings,_CorePlugin);var _super=_createSuper(Strings);_createClass(Strings,[{key:\"name\",get:function get(){return 'strings';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}}]);function Strings(core){var _this;_classCallCheck(this,Strings);_this = _super.call(this,core);_this._initializeMessages();return _this;} /**\n\t     * Gets a translated string for the given key.\n\t     * @method t\n\t     * @param {String} key the key to all messages\n\t     * @return {String} translated label\n\t     */_createClass(Strings,[{key:\"t\",value:function t(key){var lang=this._language();var fallbackLang=this._messages['en'];var i18n=lang && this._messages[lang] || fallbackLang;return i18n[key] || fallbackLang[key] || key;}},{key:\"_language\",value:function _language(){return this.core.options.language || getBrowserLanguage();}},{key:\"_initializeMessages\",value:function _initializeMessages(){var defaultMessages={'en':{'live':'live','back_to_live':'back to live','disabled':'Disabled','playback_not_supported':'Your browser does not support the playback of this video. Please try using a different browser.','default_error_title':'Could not play video.','default_error_message':'There was a problem trying to load the video.'},'pt':{'live':'ao vivo','back_to_live':'voltar para o ao vivo','disabled':'Desativado','playback_not_supported':'Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.','default_error_title':'Não foi possível reproduzir o vídeo.','default_error_message':'Ocorreu um problema ao tentar carregar o vídeo.'},'es':{'live':'vivo','back_to_live':'volver en vivo','disabled':'Discapacitado','playback_not_supported':'Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente.'},'ru':{'live':'прямой эфир','back_to_live':'к прямому эфиру','disabled':'Отключено','playback_not_supported':'Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер.'},'fr':{'live':'en direct','back_to_live':'retour au direct','disabled':'Désactivé','playback_not_supported':'Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.','default_error_title':'Impossible de lire la vidéo.','default_error_message':'Un problème est survenu lors du chargement de la vidéo.'},'tr':{'live':'canlı','back_to_live':'canlı yayına dön','disabled':'Engelli','playback_not_supported':'Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin.'},'et':{'live':'Otseülekanne','back_to_live':'Tagasi otseülekande juurde','disabled':'Keelatud','playback_not_supported':'Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit.'},'ar':{'live':'مباشر','back_to_live':'الرجوع إلى المباشر','disabled':'معطّل','playback_not_supported':'المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.','default_error_title':'غير قادر الى التشغيل.','default_error_message':'حدثت مشكلة أثناء تحميل الفيديو.'}};this._messages = zepto.extend(true,defaultMessages,this.core.options.strings || {});this._messages['pt-BR'] = this._messages['pt'];this._messages['en-US'] = this._messages['en'];this._messages['es-419'] = this._messages['es'];this._messages['fr-FR'] = this._messages['fr'];this._messages['tr-TR'] = this._messages['tr'];this._messages['et-EE'] = this._messages['et'];this._messages['ar-IQ'] = this._messages['ar'];}}]);return Strings;})(CorePlugin);var SourcesPlugin= /*#__PURE__*/(function(_CorePlugin){_inherits(SourcesPlugin,_CorePlugin);var _super=_createSuper(SourcesPlugin);function SourcesPlugin(){_classCallCheck(this,SourcesPlugin);return _super.apply(this,arguments);}_createClass(SourcesPlugin,[{key:\"bindEvents\",value:function bindEvents(){this.listenTo(this.core,Events.CORE_CONTAINERS_CREATED,this.onContainersCreated);}},{key:\"onContainersCreated\",value:function onContainersCreated(){var firstValidSource=this.core.containers.filter(function(container){return container.playback.name !== 'no_op';})[0] || this.core.containers[0];firstValidSource && this.core.containers.forEach(function(container){if(container !== firstValidSource)container.destroy();});}},{key:\"name\",get:function get(){return 'sources';}},{key:\"supportedVersion\",get:function get(){return {min:\"0.4.17\"};}}]);return SourcesPlugin;})(CorePlugin); // Copyright 2014 Globo.com Player authors. All rights reserved.\n\tvar version=\"0.4.17\"; // Built-in Plugins/Playbacks\n\tLoader.registerPlugin(Strings);Loader.registerPlugin(SourcesPlugin);Loader.registerPlayback(NoOp);Loader.registerPlayback(HTMLImg);Loader.registerPlayback(HTML5Audio);Loader.registerPlayback(HTML5Video);var main={Player:Player,Events:Events,Browser:Browser,ContainerPlugin:ContainerPlugin,UIContainerPlugin:UIContainerPlugin,CorePlugin:CorePlugin,UICorePlugin:UICorePlugin,Playback:Playback,Container:Container,Core:Core,PlayerError:PlayerError,Loader:Loader,BaseObject:BaseObject,UIObject:UIObject,Utils:Utils,HTML5Audio:HTML5Audio,HTML5Video:HTML5Video,HTMLImg:HTMLImg,Log:Log,Styler:Styler,version:version,template:tmpl,$:zepto};exports.$ = zepto;exports.BaseObject = BaseObject;exports.Browser = Browser;exports.Container = Container;exports.ContainerPlugin = ContainerPlugin;exports.Core = Core;exports.CorePlugin = CorePlugin;exports.Events = Events;exports.HTML5Audio = HTML5Audio;exports.HTML5Video = HTML5Video;exports.HTMLImg = HTMLImg;exports.Loader = Loader;exports.Log = Log;exports.Playback = Playback;exports.Player = Player;exports.PlayerError = PlayerError;exports.Styler = Styler;exports.UIContainerPlugin = UIContainerPlugin;exports.UICorePlugin = UICorePlugin;exports.UIObject = UIObject;exports.Utils = Utils;exports['default'] = main;exports.template = tmpl;exports.version = version;Object.defineProperty(exports,'__esModule',{value:true});}); //# sourceMappingURL=clappr-core.js.map\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<param name=movie value=\\\"<%= swfPath %>?inline=1\\\"> <param name=quality value=autohigh> <param name=swliveconnect value=true> <param name=allowScriptAccess value=always> <param name=allownetworking value=all> <param name=bgcolor value=#000000> <param name=allowFullScreen value=false> <param name=wmode value=\\\"<%= wmode %>\\\"> <param name=tabindex value=1> <param name=FlashVars value=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\"/> <embed name=\\\"<%= cid %>\\\" type=application/x-shockwave-flash disabled=disabled tabindex=-1 enablecontextmenu=false allowscriptaccess=always allownetworking=all quality=autohigh pluginspage=http://www.macromedia.com/go/getflashplayer wmode=\\\"<%= wmode %>\\\" swliveconnect=true allowfullscreen=false bgcolor=#000000 flashvars=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\" data=\\\"<%= swfPath %>\\\" src=\\\"<%= swfPath %>\\\" width=100% height=100%> \";\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}\\n\"\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// rtmp.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9a178bb641cdceda385e","export default require('./src/main.js')\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","// Copyright 2014 Globo.com Player authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\n\nimport {\n  Browser,\n  Events,\n  Flash,\n  Mediator,\n  Styler,\n  UICorePlugin,\n  template,\n} from \"@clappr/core\";\n\nimport flashHTML from \"!html-loader!../public/flash.html\";\nimport flashStyle from \"!raw-loader!sass-loader!../public/flash.scss\";\n\nexport default class RTMP extends Flash {\n  get name() {\n    return \"rtmp\";\n  }\n  get tagName() {\n    return \"object\";\n  }\n  get template() {\n    return template(flashHTML);\n  }\n  get attributes() {\n    return {\n      \"data-rtmp\": \"\",\n      data: this.swfPath,\n      type: \"application/x-shockwave-flash\",\n      width: \"100%\",\n      height: \"100%\",\n    };\n  }\n\n  constructor(options) {\n    super(options);\n    this.options.rtmpConfig = this.options.rtmpConfig || {};\n    this.options.rtmpConfig.swfPath =\n      this.options.rtmpConfig.swfPath ||\n      \"//cdn.jsdelivr.net/clappr.rtmp/latest/assets/RTMP.swf\";\n    this.options.rtmpConfig.wmode =\n      this.options.rtmpConfig.wmode || \"transparent\"; // Default to transparent wmode - IE always uses gpu as per objectIE\n    this.options.rtmpConfig.bufferTime =\n      this.options.rtmpConfig.bufferTime === undefined\n        ? 0.1\n        : this.options.rtmpConfig.bufferTime;\n    this.options.rtmpConfig.scaling =\n      this.options.rtmpConfig.scaling || \"letterbox\";\n    this.options.rtmpConfig.playbackType =\n      this.options.rtmpConfig.playbackType ||\n      this.options.src.indexOf(\"live\") > -1;\n    this.options.rtmpConfig.useAppInstance =\n      this.options.rtmpConfig.useAppInstance === undefined\n        ? false\n        : this.options.rtmpConfig.useAppInstance;\n    this.options.rtmpConfig.proxyType =\n      this.options.rtmpConfig.proxyType || \"none\";\n    this.options.rtmpConfig.startLevel =\n      this.options.rtmpConfig.startLevel === undefined\n        ? -1\n        : this.options.rtmpConfig.startLevel;\n    this.options.rtmpConfig.autoSwitch =\n      this.options.rtmpConfig.autoSwitch === undefined\n        ? false\n        : this.options.rtmpConfig.autoSwitch;\n    this.options.rtmpConfig.switchRules = this.options.rtmpConfig.switchRules;\n\n    this.addListeners();\n    this._setupPlaybackType();\n  }\n\n  getPlaybackType() {\n    return this._playbackType;\n  }\n\n  get swfPath() {\n    return this.options.rtmpConfig.swfPath;\n  }\n\n  get currentLevel() {\n    if (this._isReadyState) {\n      return this.el.getCurrentLevel();\n    }\n\n    return undefined;\n  }\n\n  get numLevels() {\n    if (this._isReadyState) {\n      return this.el.getNumLevels();\n    }\n\n    return undefined;\n  }\n\n  set currentLevel(level) {\n    this.el.setLevel(level);\n\n    if (level === -1 && level !== this.currentLevel) {\n      this.trigger(Events.PLAYBACK_LEVEL_SWITCH_END);\n      this.trigger(Events.PLAYBACK_BITRATE, { level: this.currentLevel });\n    }\n  }\n\n  get autoSwitchLevels() {\n    return this.el.isAutoSwitchLevels();\n  }\n\n  get levels() {\n    var levels = [];\n\n    for (var i = 0; i < this.numLevels; i++) {\n      var bitrate = this.el.getBitrateForLevel(i);\n\n      levels.push({\n        id: i,\n        label: bitrate + \"Kbps\",\n      });\n    }\n\n    return levels;\n  }\n\n  get isDynamicStream() {\n    return this.el.isDynamicStream();\n  }\n\n  addListeners() {\n    Mediator.on(this.uniqueId + \":progress\", this._progress, this);\n    Mediator.on(this.uniqueId + \":timeupdate\", this._updateTime, this);\n    Mediator.on(this.uniqueId + \":statechanged\", this._checkState, this);\n    Mediator.on(this.uniqueId + \":playbackready\", this._playbackReady, this);\n    Mediator.on(this.uniqueId + \":onloaded\", this._reporLevels, this);\n    Mediator.on(this.uniqueId + \":levelChanging\", this._levelChanging, this);\n    Mediator.on(this.uniqueId + \":levelChanged\", this._levelChange, this);\n    Mediator.on(this.uniqueId + \":flashready\", this._bootstrap, this);\n  }\n\n  stopListening() {\n    super.stopListening();\n    Mediator.off(this.uniqueId + \":progress\");\n    Mediator.off(this.uniqueId + \":timeupdate\");\n    Mediator.off(this.uniqueId + \":statechanged\");\n    Mediator.off(this.uniqueId + \":flashready\");\n  }\n\n  _bootstrap() {\n    this.el.width = \"100%\";\n    this.el.height = \"100%\";\n    this.options.autoPlay && this.play();\n    this._setupSettings();\n  }\n\n  _updateTime() {\n    if (this.getPlaybackType() === \"live\") {\n      this.trigger(\n        Events.PLAYBACK_TIMEUPDATE,\n        { current: 1, total: 1 },\n        this.name\n      );\n    } else {\n      this.trigger(\n        Events.PLAYBACK_TIMEUPDATE,\n        { current: this.el.getPosition(), total: this.el.getDuration() },\n        this.name\n      );\n    }\n  }\n\n  _levelChanging() {\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_START);\n  }\n\n  _levelChange() {\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_END);\n    this.trigger(Events.PLAYBACK_BITRATE, { level: this.currentLevel });\n  }\n\n  findLevelBy(id) {\n    var foundLevel;\n    this.levels.forEach((level) => {\n      if (level.id === id) {\n        foundLevel = level;\n      }\n    });\n    return foundLevel;\n  }\n\n  _setupPlaybackType() {\n    this._playbackType = this.options.rtmpConfig.playbackType;\n  }\n\n  _setupSettings() {\n    if (this.getPlaybackType() === \"live\") {\n      this.settings.left = [\"playpause\"];\n      this.settings.right = [\"fullscreen\", \"volume\"];\n      this.settings.seekEnabled = false;\n    } else {\n      this.settings.left = [\"playpause\", \"position\", \"duration\"];\n      this.settings.right = [\"fullscreen\", \"volume\"];\n    }\n\n    this.trigger(Events.PLAYBACK_SETTINGSUPDATE, this.name);\n  }\n\n  get _switchRulesJSON() {\n    if (this.options.rtmpConfig.switchRules !== undefined) {\n      return JSON.stringify(this.options.rtmpConfig.switchRules).replace(\n        /\"/g,\n        \"&quot;\"\n      );\n    }\n\n    return \"\";\n  }\n\n  render() {\n    this.$el.html(\n      this.template({\n        cid: this.cid,\n        swfPath: this.swfPath,\n        playbackId: this.uniqueId,\n        wmode: this.options.rtmpConfig.wmode,\n        scaling: this.options.rtmpConfig.scaling,\n        bufferTime: this.options.rtmpConfig.bufferTime,\n        playbackType: this.options.rtmpConfig.playbackType,\n        startLevel: this.options.rtmpConfig.startLevel,\n        autoSwitch: this.options.rtmpConfig.autoSwitch,\n        switchRules: this._switchRulesJSON,\n        useAppInstance: this.options.rtmpConfig.useAppInstance,\n        proxyType: this.options.rtmpConfig.proxyType,\n      })\n    );\n\n    if (Browser.isIE) {\n      this.$(\"embed\").remove();\n      if (Browser.isLegacyIE) {\n        this.$el.attr(\"classid\", IE_CLASSID);\n      }\n    }\n    this.el.id = this.cid;\n    var style = Styler.getStyleFor(flashStyle);\n    this.$el.append(style);\n    return this;\n  }\n\n  _checkState() {\n    super._checkState();\n\n    if (this.el.getState() === \"ERROR\") {\n      this.trigger(Events.PLAYBACK_ERROR, this.name);\n    }\n  }\n\n  _playbackReady() {\n    this._isReadyState = true;\n    this.trigger(Events.PLAYBACK_READY, this.name);\n  }\n\n  _reporLevels() {\n    if (this.isDynamicStream) {\n      if (this.levels) {\n        if (this.options.rtmpConfig.autoSwitch === true) {\n          this.trigger(Events.PLAYBACK_LEVELS_AVAILABLE, this.levels, -1);\n          this.trigger(Events.PLAYBACK_BITRATE, { level: this.currentLevel });\n        } else {\n          this.trigger(\n            Events.PLAYBACK_LEVELS_AVAILABLE,\n            this.levels,\n            this.options.rtmpConfig.startLevel\n          );\n        }\n      }\n    }\n  }\n}\n\nRTMP.canPlay = function (source, mimeType) {\n  return !!(\n    source.indexOf(\"rtmp://\") > -1 ||\n    source.indexOf(\"rtmps://\") > -1 ||\n    source.indexOf(\".smil\") > -1 ||\n    (mimeType && mimeType.indexOf(\"rtmp\") > -1)\n  );\n};\n\nRTMP.debug = (s) => console.log(s);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Clappr = {}));\n}(this, (function (exports) { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _createForOfIteratorHelper(o, allowArrayLike) {\n    var it;\n\n    if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n\n        var F = function () {};\n\n        return {\n          s: F,\n          n: function () {\n            if (i >= o.length) return {\n              done: true\n            };\n            return {\n              done: false,\n              value: o[i++]\n            };\n          },\n          e: function (e) {\n            throw e;\n          },\n          f: F\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    var normalCompletion = true,\n        didErr = false,\n        err;\n    return {\n      s: function () {\n        it = o[Symbol.iterator]();\n      },\n      n: function () {\n        var step = it.next();\n        normalCompletion = step.done;\n        return step;\n      },\n      e: function (e) {\n        didErr = true;\n        err = e;\n      },\n      f: function () {\n        try {\n          if (!normalCompletion && it.return != null) it.return();\n        } finally {\n          if (didErr) throw err;\n        }\n      }\n    };\n  }\n\n  // Copyright 2014 Globo.com Player authors. All rights reserved.\n  // Use of this source code is governed by a BSD-style\n  // license that can be found in the LICENSE file.\n\n  /* istanbul ignore file */\n\n  /**\n   * Array.prototype.find\n   *\n   * Original source : https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n   * See also : https://tc39.github.io/ecma262/#sec-array.prototype.find\n   */\n  if (!Array.prototype.find) {\n    // eslint-disable-next-line\n    Object.defineProperty(Array.prototype, 'find', {\n      // Note: ES6 arrow function syntax is not used on purpose to avoid this to be undefined\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) throw new TypeError('\"this\" is null or not defined');\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') throw new TypeError('predicate must be a function'); // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return kValue.\n          var kValue = o[k];\n          if (predicate.call(thisArg, kValue, k, o)) return kValue; // e. Increase k by 1.\n\n          k++;\n        } // 7. Return undefined.\n\n\n        return undefined;\n      }\n    });\n  } // polyfills for smart TVs\n\n\n  if (!Object.entries) {\n    Object.entries = function (obj) {\n      var ownProps = Object.keys(obj),\n          i = ownProps.length,\n          resArray = new Array(i); // preallocate the Array\n\n      while (i--) {\n        resArray[i] = [ownProps[i], obj[ownProps[i]]];\n      }\n\n      return resArray;\n    };\n  }\n\n  if (!Object.values) {\n    Object.values = function (obj) {\n      var ownProps = Object.keys(obj),\n          i = ownProps.length,\n          resArray = new Array(i); // preallocate the Array\n\n      while (i--) {\n        resArray[i] = obj[ownProps[i]];\n      }\n\n      return resArray;\n    };\n  }\n  /**\n   * Object.assign\n   * This polyfill doesn't support symbol properties, since ES5 doesn't have symbols anyway\n   *\n   * Original source : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n   */\n\n\n  if (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n      // length of function is 2.\n      value: function assign(target, varArgs) {\n\n        if (target == null) {\n          // TypeError if undefined or null\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n\n          if (nextSource != null) {\n            // Skip over if undefined or null\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  } // https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n\n\n  if (!Array.prototype.findIndex) {\n    Object.defineProperty(Array.prototype, 'findIndex', {\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        }\n\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') {\n          throw new TypeError('predicate must be a function');\n        } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return k.\n          var kValue = o[k];\n\n          if (predicate.call(thisArg, kValue, k, o)) {\n            return k;\n          } // e. Increase k by 1.\n\n\n          k++;\n        } // 7. Return -1.\n\n\n        return -1;\n      },\n      configurable: true,\n      writable: true\n    });\n  }\n\n  /* istanbul ignore file */\n  // https://github.com/mathiasbynens/small\n  var mp4 = 'data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=';\n  var Media = {\n    mp4: mp4\n  };\n\n  /* Zepto v1.2.0 - zepto ajax callbacks deferred event ie selector - zeptojs.com/license */\n  var Zepto = function () {\n    var undefined$1,\n        key,\n        $,\n        classList,\n        emptyArray = [],\n        concat = emptyArray.concat,\n        filter = emptyArray.filter,\n        slice = emptyArray.slice,\n        document = window.document,\n        elementDisplay = {},\n        classCache = {},\n        cssNumber = {\n      'column-count': 1,\n      'columns': 1,\n      'font-weight': 1,\n      'line-height': 1,\n      'opacity': 1,\n      'z-index': 1,\n      'zoom': 1\n    },\n        fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\n        singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n        tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\n        rootNodeRE = /^(?:body|html)$/i,\n        capitalRE = /([A-Z])/g,\n        // special attributes that should be get/set via method calls\n    methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\n        adjacencyOperators = ['after', 'prepend', 'before', 'append'],\n        table = document.createElement('table'),\n        tableRow = document.createElement('tr'),\n        containers = {\n      'tr': document.createElement('tbody'),\n      'tbody': table,\n      'thead': table,\n      'tfoot': table,\n      'td': tableRow,\n      'th': tableRow,\n      '*': document.createElement('div')\n    },\n        readyRE = /complete|loaded|interactive/,\n        simpleSelectorRE = /^[\\w-]*$/,\n        class2type = {},\n        toString = class2type.toString,\n        zepto = {},\n        camelize,\n        uniq,\n        tempParent = document.createElement('div'),\n        propMap = {\n      'tabindex': 'tabIndex',\n      'readonly': 'readOnly',\n      'for': 'htmlFor',\n      'class': 'className',\n      'maxlength': 'maxLength',\n      'cellspacing': 'cellSpacing',\n      'cellpadding': 'cellPadding',\n      'rowspan': 'rowSpan',\n      'colspan': 'colSpan',\n      'usemap': 'useMap',\n      'frameborder': 'frameBorder',\n      'contenteditable': 'contentEditable'\n    },\n        isArray = Array.isArray || function (object) {\n      return object instanceof Array;\n    };\n\n    zepto.matches = function (element, selector) {\n      if (!selector || !element || element.nodeType !== 1) return false;\n      var matchesSelector = element.matches || element.webkitMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.matchesSelector;\n      if (matchesSelector) return matchesSelector.call(element, selector); // fall back to performing a selector:\n\n      var match,\n          parent = element.parentNode,\n          temp = !parent;\n      if (temp) (parent = tempParent).appendChild(element);\n      match = ~zepto.qsa(parent, selector).indexOf(element);\n      temp && tempParent.removeChild(element);\n      return match;\n    };\n\n    function type(obj) {\n      return obj == null ? String(obj) : class2type[toString.call(obj)] || \"object\";\n    }\n\n    function isFunction(value) {\n      return type(value) == \"function\";\n    }\n\n    function isWindow(obj) {\n      return obj != null && obj == obj.window;\n    }\n\n    function isDocument(obj) {\n      return obj != null && obj.nodeType == obj.DOCUMENT_NODE;\n    }\n\n    function isObject(obj) {\n      return type(obj) == \"object\";\n    }\n\n    function isPlainObject(obj) {\n      return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype;\n    }\n\n    function likeArray(obj) {\n      var length = !!obj && 'length' in obj && obj.length,\n          type = $.type(obj);\n      return 'function' != type && !isWindow(obj) && ('array' == type || length === 0 || typeof length == 'number' && length > 0 && length - 1 in obj);\n    }\n\n    function compact(array) {\n      return filter.call(array, function (item) {\n        return item != null;\n      });\n    }\n\n    function flatten(array) {\n      return array.length > 0 ? $.fn.concat.apply([], array) : array;\n    }\n\n    camelize = function (str) {\n      return str.replace(/-+(.)?/g, function (match, chr) {\n        return chr ? chr.toUpperCase() : '';\n      });\n    };\n\n    function dasherize(str) {\n      return str.replace(/::/g, '/').replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2').replace(/([a-z\\d])([A-Z])/g, '$1_$2').replace(/_/g, '-').toLowerCase();\n    }\n\n    uniq = function (array) {\n      return filter.call(array, function (item, idx) {\n        return array.indexOf(item) == idx;\n      });\n    };\n\n    function classRE(name) {\n      return name in classCache ? classCache[name] : classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)');\n    }\n\n    function maybeAddPx(name, value) {\n      return typeof value == \"number\" && !cssNumber[dasherize(name)] ? value + \"px\" : value;\n    }\n\n    function defaultDisplay(nodeName) {\n      var element, display;\n\n      if (!elementDisplay[nodeName]) {\n        element = document.createElement(nodeName);\n        document.body.appendChild(element);\n        display = getComputedStyle(element, '').getPropertyValue(\"display\");\n        element.parentNode.removeChild(element);\n        display == \"none\" && (display = \"block\");\n        elementDisplay[nodeName] = display;\n      }\n\n      return elementDisplay[nodeName];\n    }\n\n    function children(element) {\n      return 'children' in element ? slice.call(element.children) : $.map(element.childNodes, function (node) {\n        if (node.nodeType == 1) return node;\n      });\n    }\n\n    function Z(dom, selector) {\n      var i,\n          len = dom ? dom.length : 0;\n\n      for (i = 0; i < len; i++) this[i] = dom[i];\n\n      this.length = len;\n      this.selector = selector || '';\n    } // `$.zepto.fragment` takes a html string and an optional tag name\n    // to generate DOM nodes from the given html string.\n    // The generated DOM nodes are returned as an array.\n    // This function can be overridden in plugins for example to make\n    // it compatible with browsers that don't support the DOM fully.\n\n\n    zepto.fragment = function (html, name, properties) {\n      var dom, nodes, container; // A special case optimization for a single tag\n\n      if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1));\n\n      if (!dom) {\n        if (html.replace) html = html.replace(tagExpanderRE, \"<$1></$2>\");\n        if (name === undefined$1) name = fragmentRE.test(html) && RegExp.$1;\n        if (!(name in containers)) name = '*';\n        container = containers[name];\n        container.innerHTML = '' + html;\n        dom = $.each(slice.call(container.childNodes), function () {\n          container.removeChild(this);\n        });\n      }\n\n      if (isPlainObject(properties)) {\n        nodes = $(dom);\n        $.each(properties, function (key, value) {\n          if (methodAttributes.indexOf(key) > -1) nodes[key](value);else nodes.attr(key, value);\n        });\n      }\n\n      return dom;\n    }; // `$.zepto.Z` swaps out the prototype of the given `dom` array\n    // of nodes with `$.fn` and thus supplying all the Zepto functions\n    // to the array. This method can be overridden in plugins.\n\n\n    zepto.Z = function (dom, selector) {\n      return new Z(dom, selector);\n    }; // `$.zepto.isZ` should return `true` if the given object is a Zepto\n    // collection. This method can be overridden in plugins.\n\n\n    zepto.isZ = function (object) {\n      return object instanceof zepto.Z;\n    }; // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\n    // takes a CSS selector and an optional context (and handles various\n    // special cases).\n    // This method can be overridden in plugins.\n\n\n    zepto.init = function (selector, context) {\n      var dom; // If nothing given, return an empty Zepto collection\n\n      if (!selector) return zepto.Z(); // Optimize for string selectors\n      else if (typeof selector == 'string') {\n          selector = selector.trim(); // If it's a html fragment, create nodes from it\n          // Note: In both Chrome 21 and Firefox 15, DOM error 12\n          // is thrown if the fragment doesn't begin with <\n\n          if (selector[0] == '<' && fragmentRE.test(selector)) dom = zepto.fragment(selector, RegExp.$1, context), selector = null; // If there's a context, create a collection on that context first, and select\n          // nodes from there\n          else if (context !== undefined$1) return $(context).find(selector); // If it's a CSS selector, use it to select nodes.\n            else dom = zepto.qsa(document, selector);\n        } // If a function is given, call it when the DOM is ready\n        else if (isFunction(selector)) return $(document).ready(selector); // If a Zepto collection is given, just return it\n          else if (zepto.isZ(selector)) return selector;else {\n              // normalize array if an array of nodes is given\n              if (isArray(selector)) dom = compact(selector); // Wrap DOM nodes.\n              else if (isObject(selector)) dom = [selector], selector = null; // If it's a html fragment, create nodes from it\n                else if (fragmentRE.test(selector)) dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null; // If there's a context, create a collection on that context first, and select\n                  // nodes from there\n                  else if (context !== undefined$1) return $(context).find(selector); // And last but no least, if it's a CSS selector, use it to select nodes.\n                    else dom = zepto.qsa(document, selector);\n            } // create a new Zepto collection from the nodes found\n\n      return zepto.Z(dom, selector);\n    }; // `$` will be the base `Zepto` object. When calling this\n    // function just call `$.zepto.init, which makes the implementation\n    // details of selecting nodes and creating Zepto collections\n    // patchable in plugins.\n\n\n    $ = function (selector, context) {\n      return zepto.init(selector, context);\n    };\n\n    function extend(target, source, deep) {\n      for (key in source) if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {\n        if (isPlainObject(source[key]) && !isPlainObject(target[key])) target[key] = {};\n        if (isArray(source[key]) && !isArray(target[key])) target[key] = [];\n        extend(target[key], source[key], deep);\n      } else if (source[key] !== undefined$1) target[key] = source[key];\n    } // Copy all but undefined properties from one or more\n    // objects to the `target` object.\n\n\n    $.extend = function (target) {\n      var deep,\n          args = slice.call(arguments, 1);\n\n      if (typeof target == 'boolean') {\n        deep = target;\n        target = args.shift();\n      }\n\n      args.forEach(function (arg) {\n        extend(target, arg, deep);\n      });\n      return target;\n    }; // `$.zepto.qsa` is Zepto's CSS selector implementation which\n    // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\n    // This method can be overridden in plugins.\n\n\n    zepto.qsa = function (element, selector) {\n      var found,\n          maybeID = selector[0] == '#',\n          maybeClass = !maybeID && selector[0] == '.',\n          nameOnly = maybeID || maybeClass ? selector.slice(1) : selector,\n          // Ensure that a 1 char tag name still gets checked\n      isSimple = simpleSelectorRE.test(nameOnly);\n      return element.getElementById && isSimple && maybeID ? // Safari DocumentFragment doesn't have getElementById\n      (found = element.getElementById(nameOnly)) ? [found] : [] : element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11 ? [] : slice.call(isSimple && !maybeID && element.getElementsByClassName ? // DocumentFragment doesn't have getElementsByClassName/TagName\n      maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class\n      element.getElementsByTagName(selector) : // Or a tag\n      element.querySelectorAll(selector) // Or it's not simple, and we need to query all\n      );\n    };\n\n    function filtered(nodes, selector) {\n      return selector == null ? $(nodes) : $(nodes).filter(selector);\n    }\n\n    $.contains = document.documentElement.contains ? function (parent, node) {\n      return parent !== node && parent.contains(node);\n    } : function (parent, node) {\n      while (node && (node = node.parentNode)) if (node === parent) return true;\n\n      return false;\n    };\n\n    function funcArg(context, arg, idx, payload) {\n      return isFunction(arg) ? arg.call(context, idx, payload) : arg;\n    }\n\n    function setAttribute(node, name, value) {\n      value == null ? node.removeAttribute(name) : node.setAttribute(name, value);\n    } // access className property while respecting SVGAnimatedString\n\n\n    function className(node, value) {\n      var klass = node.className || '',\n          svg = klass && klass.baseVal !== undefined$1;\n      if (value === undefined$1) return svg ? klass.baseVal : klass;\n      svg ? klass.baseVal = value : node.className = value;\n    } // \"true\"  => true\n    // \"false\" => false\n    // \"null\"  => null\n    // \"42\"    => 42\n    // \"42.5\"  => 42.5\n    // \"08\"    => \"08\"\n    // JSON    => parse if valid\n    // String  => self\n\n\n    function deserializeValue(value) {\n      try {\n        return value ? value == \"true\" || (value == \"false\" ? false : value == \"null\" ? null : +value + \"\" == value ? +value : /^[\\[\\{]/.test(value) ? $.parseJSON(value) : value) : value;\n      } catch (e) {\n        return value;\n      }\n    }\n\n    $.type = type;\n    $.isFunction = isFunction;\n    $.isWindow = isWindow;\n    $.isArray = isArray;\n    $.isPlainObject = isPlainObject;\n\n    $.isEmptyObject = function (obj) {\n      var name;\n\n      for (name in obj) return false;\n\n      return true;\n    };\n\n    $.isNumeric = function (val) {\n      var num = Number(val),\n          type = typeof val;\n      return val != null && type != 'boolean' && (type != 'string' || val.length) && !isNaN(num) && isFinite(num) || false;\n    };\n\n    $.inArray = function (elem, array, i) {\n      return emptyArray.indexOf.call(array, elem, i);\n    };\n\n    $.camelCase = camelize;\n\n    $.trim = function (str) {\n      return str == null ? \"\" : String.prototype.trim.call(str);\n    }; // plugin compatibility\n\n\n    $.uuid = 0;\n    $.support = {};\n    $.expr = {};\n\n    $.noop = function () {};\n\n    $.map = function (elements, callback) {\n      var value,\n          values = [],\n          i,\n          key;\n      if (likeArray(elements)) for (i = 0; i < elements.length; i++) {\n        value = callback(elements[i], i);\n        if (value != null) values.push(value);\n      } else for (key in elements) {\n        value = callback(elements[key], key);\n        if (value != null) values.push(value);\n      }\n      return flatten(values);\n    };\n\n    $.each = function (elements, callback) {\n      var i, key;\n\n      if (likeArray(elements)) {\n        for (i = 0; i < elements.length; i++) if (callback.call(elements[i], i, elements[i]) === false) return elements;\n      } else {\n        for (key in elements) if (callback.call(elements[key], key, elements[key]) === false) return elements;\n      }\n\n      return elements;\n    };\n\n    $.grep = function (elements, callback) {\n      return filter.call(elements, callback);\n    };\n\n    if (window.JSON) $.parseJSON = JSON.parse; // Populate the class2type map\n\n    $.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function (i, name) {\n      class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }); // Define methods that will be available on all\n    // Zepto collections\n\n    $.fn = {\n      constructor: zepto.Z,\n      length: 0,\n      // Because a collection acts like an array\n      // copy over these useful array functions.\n      forEach: emptyArray.forEach,\n      reduce: emptyArray.reduce,\n      push: emptyArray.push,\n      sort: emptyArray.sort,\n      splice: emptyArray.splice,\n      indexOf: emptyArray.indexOf,\n      concat: function () {\n        var i,\n            value,\n            args = [];\n\n        for (i = 0; i < arguments.length; i++) {\n          value = arguments[i];\n          args[i] = zepto.isZ(value) ? value.toArray() : value;\n        }\n\n        return concat.apply(zepto.isZ(this) ? this.toArray() : this, args);\n      },\n      // `map` and `slice` in the jQuery API work differently\n      // from their array counterparts\n      map: function (fn) {\n        return $($.map(this, function (el, i) {\n          return fn.call(el, i, el);\n        }));\n      },\n      slice: function () {\n        return $(slice.apply(this, arguments));\n      },\n      ready: function (callback) {\n        // need to check if document.body exists for IE as that browser reports\n        // document ready when it hasn't yet created the body element\n        if (readyRE.test(document.readyState) && document.body) callback($);else document.addEventListener('DOMContentLoaded', function () {\n          callback($);\n        }, false);\n        return this;\n      },\n      get: function (idx) {\n        return idx === undefined$1 ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length];\n      },\n      toArray: function () {\n        return this.get();\n      },\n      size: function () {\n        return this.length;\n      },\n      remove: function () {\n        return this.each(function () {\n          if (this.parentNode != null) this.parentNode.removeChild(this);\n        });\n      },\n      each: function (callback) {\n        emptyArray.every.call(this, function (el, idx) {\n          return callback.call(el, idx, el) !== false;\n        });\n        return this;\n      },\n      filter: function (selector) {\n        if (isFunction(selector)) return this.not(this.not(selector));\n        return $(filter.call(this, function (element) {\n          return zepto.matches(element, selector);\n        }));\n      },\n      add: function (selector, context) {\n        return $(uniq(this.concat($(selector, context))));\n      },\n      is: function (selector) {\n        return this.length > 0 && zepto.matches(this[0], selector);\n      },\n      not: function (selector) {\n        var nodes = [];\n        if (isFunction(selector) && selector.call !== undefined$1) this.each(function (idx) {\n          if (!selector.call(this, idx)) nodes.push(this);\n        });else {\n          var excludes = typeof selector == 'string' ? this.filter(selector) : likeArray(selector) && isFunction(selector.item) ? slice.call(selector) : $(selector);\n          this.forEach(function (el) {\n            if (excludes.indexOf(el) < 0) nodes.push(el);\n          });\n        }\n        return $(nodes);\n      },\n      has: function (selector) {\n        return this.filter(function () {\n          return isObject(selector) ? $.contains(this, selector) : $(this).find(selector).size();\n        });\n      },\n      eq: function (idx) {\n        return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1);\n      },\n      first: function () {\n        var el = this[0];\n        return el && !isObject(el) ? el : $(el);\n      },\n      last: function () {\n        var el = this[this.length - 1];\n        return el && !isObject(el) ? el : $(el);\n      },\n      find: function (selector) {\n        var result,\n            $this = this;\n        if (!selector) result = $();else if (typeof selector == 'object') result = $(selector).filter(function () {\n          var node = this;\n          return emptyArray.some.call($this, function (parent) {\n            return $.contains(parent, node);\n          });\n        });else if (this.length == 1) result = $(zepto.qsa(this[0], selector));else result = this.map(function () {\n          return zepto.qsa(this, selector);\n        });\n        return result;\n      },\n      closest: function (selector, context) {\n        var nodes = [],\n            collection = typeof selector == 'object' && $(selector);\n        this.each(function (_, node) {\n          while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector))) node = node !== context && !isDocument(node) && node.parentNode;\n\n          if (node && nodes.indexOf(node) < 0) nodes.push(node);\n        });\n        return $(nodes);\n      },\n      parents: function (selector) {\n        var ancestors = [],\n            nodes = this;\n\n        while (nodes.length > 0) nodes = $.map(nodes, function (node) {\n          if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\n            ancestors.push(node);\n            return node;\n          }\n        });\n\n        return filtered(ancestors, selector);\n      },\n      parent: function (selector) {\n        return filtered(uniq(this.pluck('parentNode')), selector);\n      },\n      children: function (selector) {\n        return filtered(this.map(function () {\n          return children(this);\n        }), selector);\n      },\n      contents: function () {\n        return this.map(function () {\n          return this.contentDocument || slice.call(this.childNodes);\n        });\n      },\n      siblings: function (selector) {\n        return filtered(this.map(function (i, el) {\n          return filter.call(children(el.parentNode), function (child) {\n            return child !== el;\n          });\n        }), selector);\n      },\n      empty: function () {\n        return this.each(function () {\n          this.innerHTML = '';\n        });\n      },\n      // `pluck` is borrowed from Prototype.js\n      pluck: function (property) {\n        return $.map(this, function (el) {\n          return el[property];\n        });\n      },\n      show: function () {\n        return this.each(function () {\n          this.style.display == \"none\" && (this.style.display = '');\n          if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\") this.style.display = defaultDisplay(this.nodeName);\n        });\n      },\n      replaceWith: function (newContent) {\n        return this.before(newContent).remove();\n      },\n      wrap: function (structure) {\n        var func = isFunction(structure);\n        if (this[0] && !func) var dom = $(structure).get(0),\n            clone = dom.parentNode || this.length > 1;\n        return this.each(function (index) {\n          $(this).wrapAll(func ? structure.call(this, index) : clone ? dom.cloneNode(true) : dom);\n        });\n      },\n      wrapAll: function (structure) {\n        if (this[0]) {\n          $(this[0]).before(structure = $(structure));\n          var children; // drill down to the inmost element\n\n          while ((children = structure.children()).length) structure = children.first();\n\n          $(structure).append(this);\n        }\n\n        return this;\n      },\n      wrapInner: function (structure) {\n        var func = isFunction(structure);\n        return this.each(function (index) {\n          var self = $(this),\n              contents = self.contents(),\n              dom = func ? structure.call(this, index) : structure;\n          contents.length ? contents.wrapAll(dom) : self.append(dom);\n        });\n      },\n      unwrap: function () {\n        this.parent().each(function () {\n          $(this).replaceWith($(this).children());\n        });\n        return this;\n      },\n      clone: function () {\n        return this.map(function () {\n          return this.cloneNode(true);\n        });\n      },\n      hide: function () {\n        return this.css(\"display\", \"none\");\n      },\n      toggle: function (setting) {\n        return this.each(function () {\n          var el = $(this);\n          (setting === undefined$1 ? el.css(\"display\") == \"none\" : setting) ? el.show() : el.hide();\n        });\n      },\n      prev: function (selector) {\n        return $(this.pluck('previousElementSibling')).filter(selector || '*');\n      },\n      next: function (selector) {\n        return $(this.pluck('nextElementSibling')).filter(selector || '*');\n      },\n      html: function (html) {\n        return 0 in arguments ? this.each(function (idx) {\n          var originHtml = this.innerHTML;\n          $(this).empty().append(funcArg(this, html, idx, originHtml));\n        }) : 0 in this ? this[0].innerHTML : null;\n      },\n      text: function (text) {\n        return 0 in arguments ? this.each(function (idx) {\n          var newText = funcArg(this, text, idx, this.textContent);\n          this.textContent = newText == null ? '' : '' + newText;\n        }) : 0 in this ? this.pluck('textContent').join(\"\") : null;\n      },\n      attr: function (name, value) {\n        var result;\n        return typeof name == 'string' && !(1 in arguments) ? 0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined$1 : this.each(function (idx) {\n          if (this.nodeType !== 1) return;\n          if (isObject(name)) for (key in name) setAttribute(this, key, name[key]);else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)));\n        });\n      },\n      removeAttr: function (name) {\n        return this.each(function () {\n          this.nodeType === 1 && name.split(' ').forEach(function (attribute) {\n            setAttribute(this, attribute);\n          }, this);\n        });\n      },\n      prop: function (name, value) {\n        name = propMap[name] || name;\n        return 1 in arguments ? this.each(function (idx) {\n          this[name] = funcArg(this, value, idx, this[name]);\n        }) : this[0] && this[0][name];\n      },\n      removeProp: function (name) {\n        name = propMap[name] || name;\n        return this.each(function () {\n          delete this[name];\n        });\n      },\n      data: function (name, value) {\n        var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase();\n        var data = 1 in arguments ? this.attr(attrName, value) : this.attr(attrName);\n        return data !== null ? deserializeValue(data) : undefined$1;\n      },\n      val: function (value) {\n        if (0 in arguments) {\n          if (value == null) value = \"\";\n          return this.each(function (idx) {\n            this.value = funcArg(this, value, idx, this.value);\n          });\n        } else {\n          return this[0] && (this[0].multiple ? $(this[0]).find('option').filter(function () {\n            return this.selected;\n          }).pluck('value') : this[0].value);\n        }\n      },\n      offset: function (coordinates) {\n        if (coordinates) return this.each(function (index) {\n          var $this = $(this),\n              coords = funcArg(this, coordinates, index, $this.offset()),\n              parentOffset = $this.offsetParent().offset(),\n              props = {\n            top: coords.top - parentOffset.top,\n            left: coords.left - parentOffset.left\n          };\n          if ($this.css('position') == 'static') props['position'] = 'relative';\n          $this.css(props);\n        });\n        if (!this.length) return null;\n        if (document.documentElement !== this[0] && !$.contains(document.documentElement, this[0])) return {\n          top: 0,\n          left: 0\n        };\n        var obj = this[0].getBoundingClientRect();\n        return {\n          left: obj.left + window.pageXOffset,\n          top: obj.top + window.pageYOffset,\n          width: Math.round(obj.width),\n          height: Math.round(obj.height)\n        };\n      },\n      css: function (property, value) {\n        if (arguments.length < 2) {\n          var element = this[0];\n\n          if (typeof property == 'string') {\n            if (!element) return;\n            return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property);\n          } else if (isArray(property)) {\n            if (!element) return;\n            var props = {};\n            var computedStyle = getComputedStyle(element, '');\n            $.each(property, function (_, prop) {\n              props[prop] = element.style[camelize(prop)] || computedStyle.getPropertyValue(prop);\n            });\n            return props;\n          }\n        }\n\n        var css = '';\n\n        if (type(property) == 'string') {\n          if (!value && value !== 0) this.each(function () {\n            this.style.removeProperty(dasherize(property));\n          });else css = dasherize(property) + \":\" + maybeAddPx(property, value);\n        } else {\n          for (key in property) if (!property[key] && property[key] !== 0) this.each(function () {\n            this.style.removeProperty(dasherize(key));\n          });else css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';';\n        }\n\n        return this.each(function () {\n          this.style.cssText += ';' + css;\n        });\n      },\n      index: function (element) {\n        return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0]);\n      },\n      hasClass: function (name) {\n        if (!name) return false;\n        return emptyArray.some.call(this, function (el) {\n          return this.test(className(el));\n        }, classRE(name));\n      },\n      addClass: function (name) {\n        if (!name) return this;\n        return this.each(function (idx) {\n          if (!('className' in this)) return;\n          classList = [];\n          var cls = className(this),\n              newName = funcArg(this, name, idx, cls);\n          newName.split(/\\s+/g).forEach(function (klass) {\n            if (!$(this).hasClass(klass)) classList.push(klass);\n          }, this);\n          classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"));\n        });\n      },\n      removeClass: function (name) {\n        return this.each(function (idx) {\n          if (!('className' in this)) return;\n          if (name === undefined$1) return className(this, '');\n          classList = className(this);\n          funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function (klass) {\n            classList = classList.replace(classRE(klass), \" \");\n          });\n          className(this, classList.trim());\n        });\n      },\n      toggleClass: function (name, when) {\n        if (!name) return this;\n        return this.each(function (idx) {\n          var $this = $(this),\n              names = funcArg(this, name, idx, className(this));\n          names.split(/\\s+/g).forEach(function (klass) {\n            (when === undefined$1 ? !$this.hasClass(klass) : when) ? $this.addClass(klass) : $this.removeClass(klass);\n          });\n        });\n      },\n      scrollTop: function (value) {\n        if (!this.length) return;\n        var hasScrollTop = ('scrollTop' in this[0]);\n        if (value === undefined$1) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset;\n        return this.each(hasScrollTop ? function () {\n          this.scrollTop = value;\n        } : function () {\n          this.scrollTo(this.scrollX, value);\n        });\n      },\n      scrollLeft: function (value) {\n        if (!this.length) return;\n        var hasScrollLeft = ('scrollLeft' in this[0]);\n        if (value === undefined$1) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset;\n        return this.each(hasScrollLeft ? function () {\n          this.scrollLeft = value;\n        } : function () {\n          this.scrollTo(value, this.scrollY);\n        });\n      },\n      position: function () {\n        if (!this.length) return;\n        var elem = this[0],\n            // Get *real* offsetParent\n        offsetParent = this.offsetParent(),\n            // Get correct offsets\n        offset = this.offset(),\n            parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? {\n          top: 0,\n          left: 0\n        } : offsetParent.offset(); // Subtract element margins\n        // note: when an element has margin: auto the offsetLeft and marginLeft\n        // are the same in Safari causing offset.left to incorrectly be 0\n\n        offset.top -= parseFloat($(elem).css('margin-top')) || 0;\n        offset.left -= parseFloat($(elem).css('margin-left')) || 0; // Add offsetParent borders\n\n        parentOffset.top += parseFloat($(offsetParent[0]).css('border-top-width')) || 0;\n        parentOffset.left += parseFloat($(offsetParent[0]).css('border-left-width')) || 0; // Subtract the two offsets\n\n        return {\n          top: offset.top - parentOffset.top,\n          left: offset.left - parentOffset.left\n        };\n      },\n      offsetParent: function () {\n        return this.map(function () {\n          var parent = this.offsetParent || document.body;\n\n          while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\") parent = parent.offsetParent;\n\n          return parent;\n        });\n      }\n    }; // for now\n\n    $.fn.detach = $.fn.remove // Generate the `width` and `height` functions\n    ;\n    ['width', 'height'].forEach(function (dimension) {\n      var dimensionProperty = dimension.replace(/./, function (m) {\n        return m[0].toUpperCase();\n      });\n\n      $.fn[dimension] = function (value) {\n        var offset,\n            el = this[0];\n        if (value === undefined$1) return isWindow(el) ? el['inner' + dimensionProperty] : isDocument(el) ? el.documentElement['scroll' + dimensionProperty] : (offset = this.offset()) && offset[dimension];else return this.each(function (idx) {\n          el = $(this);\n          el.css(dimension, funcArg(this, value, idx, el[dimension]()));\n        });\n      };\n    });\n\n    function traverseNode(node, fun) {\n      fun(node);\n\n      for (var i = 0, len = node.childNodes.length; i < len; i++) traverseNode(node.childNodes[i], fun);\n    } // Generate the `after`, `prepend`, `before`, `append`,\n    // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n\n\n    adjacencyOperators.forEach(function (operator, operatorIndex) {\n      var inside = operatorIndex % 2; //=> prepend, append\n\n      $.fn[operator] = function () {\n        // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n        var argType,\n            nodes = $.map(arguments, function (arg) {\n          var arr = [];\n          argType = type(arg);\n\n          if (argType == \"array\") {\n            arg.forEach(function (el) {\n              if (el.nodeType !== undefined$1) return arr.push(el);else if ($.zepto.isZ(el)) return arr = arr.concat(el.get());\n              arr = arr.concat(zepto.fragment(el));\n            });\n            return arr;\n          }\n\n          return argType == \"object\" || arg == null ? arg : zepto.fragment(arg);\n        }),\n            parent,\n            copyByClone = this.length > 1;\n        if (nodes.length < 1) return this;\n        return this.each(function (_, target) {\n          parent = inside ? target : target.parentNode; // convert all methods to a \"before\" operation\n\n          target = operatorIndex == 0 ? target.nextSibling : operatorIndex == 1 ? target.firstChild : operatorIndex == 2 ? target : null;\n          var parentInDocument = $.contains(document.documentElement, parent);\n          nodes.forEach(function (node) {\n            if (copyByClone) node = node.cloneNode(true);else if (!parent) return $(node).remove();\n            parent.insertBefore(node, target);\n            if (parentInDocument) traverseNode(node, function (el) {\n              if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' && (!el.type || el.type === 'text/javascript') && !el.src) {\n                var target = el.ownerDocument ? el.ownerDocument.defaultView : window;\n                target['eval'].call(target, el.innerHTML);\n              }\n            });\n          });\n        });\n      }; // after    => insertAfter\n      // prepend  => prependTo\n      // before   => insertBefore\n      // append   => appendTo\n\n\n      $.fn[inside ? operator + 'To' : 'insert' + (operatorIndex ? 'Before' : 'After')] = function (html) {\n        $(html)[operator](this);\n        return this;\n      };\n    });\n    zepto.Z.prototype = Z.prototype = $.fn; // Export internal API functions in the `$.zepto` namespace\n\n    zepto.uniq = uniq;\n    zepto.deserializeValue = deserializeValue;\n    $.zepto = zepto;\n    return $;\n  }();\n\n  window.Zepto = Zepto;\n  window.$ === undefined && (window.$ = Zepto);\n\n  (function ($) {\n    var jsonpID = +new Date(),\n        document = window.document,\n        key,\n        name,\n        rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n        scriptTypeRE = /^(?:text|application)\\/javascript/i,\n        xmlTypeRE = /^(?:text|application)\\/xml/i,\n        jsonType = 'application/json',\n        htmlType = 'text/html',\n        blankRE = /^\\s*$/,\n        originAnchor = document.createElement('a');\n    originAnchor.href = window.location.href; // trigger a custom event and return false if it was cancelled\n\n    function triggerAndReturn(context, eventName, data) {\n      var event = $.Event(eventName);\n      $(context).trigger(event, data);\n      return !event.isDefaultPrevented();\n    } // trigger an Ajax \"global\" event\n\n\n    function triggerGlobal(settings, context, eventName, data) {\n      if (settings.global) return triggerAndReturn(context || document, eventName, data);\n    } // Number of active Ajax requests\n\n\n    $.active = 0;\n\n    function ajaxStart(settings) {\n      if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart');\n    }\n\n    function ajaxStop(settings) {\n      if (settings.global && ! --$.active) triggerGlobal(settings, null, 'ajaxStop');\n    } // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n\n\n    function ajaxBeforeSend(xhr, settings) {\n      var context = settings.context;\n      if (settings.beforeSend.call(context, xhr, settings) === false || triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false) return false;\n      triggerGlobal(settings, context, 'ajaxSend', [xhr, settings]);\n    }\n\n    function ajaxSuccess(data, xhr, settings, deferred) {\n      var context = settings.context,\n          status = 'success';\n      settings.success.call(context, data, status, xhr);\n      if (deferred) deferred.resolveWith(context, [data, status, xhr]);\n      triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data]);\n      ajaxComplete(status, xhr, settings);\n    } // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\n\n    function ajaxError(error, type, xhr, settings, deferred) {\n      var context = settings.context;\n      settings.error.call(context, xhr, type, error);\n      if (deferred) deferred.rejectWith(context, [xhr, type, error]);\n      triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type]);\n      ajaxComplete(type, xhr, settings);\n    } // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\n\n    function ajaxComplete(status, xhr, settings) {\n      var context = settings.context;\n      settings.complete.call(context, xhr, status);\n      triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings]);\n      ajaxStop(settings);\n    }\n\n    function ajaxDataFilter(data, type, settings) {\n      if (settings.dataFilter == empty) return data;\n      var context = settings.context;\n      return settings.dataFilter.call(context, data, type);\n    } // Empty function, used as default callback\n\n\n    function empty() {}\n\n    $.ajaxJSONP = function (options, deferred) {\n      if (!('type' in options)) return $.ajax(options);\n\n      var _callbackName = options.jsonpCallback,\n          callbackName = ($.isFunction(_callbackName) ? _callbackName() : _callbackName) || 'Zepto' + jsonpID++,\n          script = document.createElement('script'),\n          originalCallback = window[callbackName],\n          responseData,\n          abort = function (errorType) {\n        $(script).triggerHandler('error', errorType || 'abort');\n      },\n          xhr = {\n        abort: abort\n      },\n          abortTimeout;\n\n      if (deferred) deferred.promise(xhr);\n      $(script).on('load error', function (e, errorType) {\n        clearTimeout(abortTimeout);\n        $(script).off().remove();\n\n        if (e.type == 'error' || !responseData) {\n          ajaxError(null, errorType || 'error', xhr, options, deferred);\n        } else {\n          ajaxSuccess(responseData[0], xhr, options, deferred);\n        }\n\n        window[callbackName] = originalCallback;\n        if (responseData && $.isFunction(originalCallback)) originalCallback(responseData[0]);\n        originalCallback = responseData = undefined;\n      });\n\n      if (ajaxBeforeSend(xhr, options) === false) {\n        abort('abort');\n        return xhr;\n      }\n\n      window[callbackName] = function () {\n        responseData = arguments;\n      };\n\n      script.src = options.url.replace(/\\?(.+)=\\?/, '?$1=' + callbackName);\n      document.head.appendChild(script);\n      if (options.timeout > 0) abortTimeout = setTimeout(function () {\n        abort('timeout');\n      }, options.timeout);\n      return xhr;\n    };\n\n    $.ajaxSettings = {\n      // Default type of request\n      type: 'GET',\n      // Callback that is executed before request\n      beforeSend: empty,\n      // Callback that is executed if the request succeeds\n      success: empty,\n      // Callback that is executed the the server drops error\n      error: empty,\n      // Callback that is executed on request complete (both: error and success)\n      complete: empty,\n      // The context for the callbacks\n      context: null,\n      // Whether to trigger \"global\" Ajax events\n      global: true,\n      // Transport\n      xhr: function () {\n        return new window.XMLHttpRequest();\n      },\n      // MIME types mapping\n      // IIS returns Javascript as \"application/x-javascript\"\n      accepts: {\n        script: 'text/javascript, application/javascript, application/x-javascript',\n        json: jsonType,\n        xml: 'application/xml, text/xml',\n        html: htmlType,\n        text: 'text/plain'\n      },\n      // Whether the request is to another domain\n      crossDomain: false,\n      // Default timeout\n      timeout: 0,\n      // Whether data should be serialized to string\n      processData: true,\n      // Whether the browser should be allowed to cache GET responses\n      cache: true,\n      //Used to handle the raw response data of XMLHttpRequest.\n      //This is a pre-filtering function to sanitize the response.\n      //The sanitized response should be returned\n      dataFilter: empty\n    };\n\n    function mimeToDataType(mime) {\n      if (mime) mime = mime.split(';', 2)[0];\n      return mime && (mime == htmlType ? 'html' : mime == jsonType ? 'json' : scriptTypeRE.test(mime) ? 'script' : xmlTypeRE.test(mime) && 'xml') || 'text';\n    }\n\n    function appendQuery(url, query) {\n      if (query == '') return url;\n      return (url + '&' + query).replace(/[&?]{1,2}/, '?');\n    } // serialize payload and append it to the URL for GET requests\n\n\n    function serializeData(options) {\n      if (options.processData && options.data && $.type(options.data) != \"string\") options.data = $.param(options.data, options.traditional);\n      if (options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType)) options.url = appendQuery(options.url, options.data), options.data = undefined;\n    }\n\n    $.ajax = function (options) {\n      var settings = $.extend({}, options || {}),\n          deferred = $.Deferred && $.Deferred(),\n          urlAnchor,\n          hashIndex;\n\n      for (key in $.ajaxSettings) if (settings[key] === undefined) settings[key] = $.ajaxSettings[key];\n\n      ajaxStart(settings);\n\n      if (!settings.crossDomain) {\n        urlAnchor = document.createElement('a');\n        urlAnchor.href = settings.url; // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049\n\n        urlAnchor.href = urlAnchor.href;\n        settings.crossDomain = originAnchor.protocol + '//' + originAnchor.host !== urlAnchor.protocol + '//' + urlAnchor.host;\n      }\n\n      if (!settings.url) settings.url = window.location.toString();\n      if ((hashIndex = settings.url.indexOf('#')) > -1) settings.url = settings.url.slice(0, hashIndex);\n      serializeData(settings);\n      var dataType = settings.dataType,\n          hasPlaceholder = /\\?.+=\\?/.test(settings.url);\n      if (hasPlaceholder) dataType = 'jsonp';\n      if (settings.cache === false || (!options || options.cache !== true) && ('script' == dataType || 'jsonp' == dataType)) settings.url = appendQuery(settings.url, '_=' + Date.now());\n\n      if ('jsonp' == dataType) {\n        if (!hasPlaceholder) settings.url = appendQuery(settings.url, settings.jsonp ? settings.jsonp + '=?' : settings.jsonp === false ? '' : 'callback=?');\n        return $.ajaxJSONP(settings, deferred);\n      }\n\n      var mime = settings.accepts[dataType],\n          headers = {},\n          setHeader = function (name, value) {\n        headers[name.toLowerCase()] = [name, value];\n      },\n          protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n          xhr = settings.xhr(),\n          nativeSetHeader = xhr.setRequestHeader,\n          abortTimeout;\n\n      if (deferred) deferred.promise(xhr);\n      if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest');\n      setHeader('Accept', mime || '*/*');\n\n      if (mime = settings.mimeType || mime) {\n        if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0];\n        xhr.overrideMimeType && xhr.overrideMimeType(mime);\n      }\n\n      if (settings.contentType || settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET') setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\n      if (settings.headers) for (name in settings.headers) setHeader(name, settings.headers[name]);\n      xhr.setRequestHeader = setHeader;\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState == 4) {\n          xhr.onreadystatechange = empty;\n          clearTimeout(abortTimeout);\n          var result,\n              error = false;\n\n          if (xhr.status >= 200 && xhr.status < 300 || xhr.status == 304 || xhr.status == 0 && protocol == 'file:') {\n            dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\n            if (xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob') result = xhr.response;else {\n              result = xhr.responseText;\n\n              try {\n                // http://perfectionkills.com/global-eval-what-are-the-options/\n                // sanitize response accordingly if data filter callback provided\n                result = ajaxDataFilter(result, dataType, settings);\n                if (dataType == 'script') (1, eval)(result);else if (dataType == 'xml') result = xhr.responseXML;else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result);\n              } catch (e) {\n                error = e;\n              }\n\n              if (error) return ajaxError(error, 'parsererror', xhr, settings, deferred);\n            }\n            ajaxSuccess(result, xhr, settings, deferred);\n          } else {\n            ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred);\n          }\n        }\n      };\n\n      if (ajaxBeforeSend(xhr, settings) === false) {\n        xhr.abort();\n        ajaxError(null, 'abort', xhr, settings, deferred);\n        return xhr;\n      }\n\n      var async = 'async' in settings ? settings.async : true;\n      xhr.open(settings.type, settings.url, async, settings.username, settings.password);\n      if (settings.xhrFields) for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name];\n\n      for (name in headers) nativeSetHeader.apply(xhr, headers[name]);\n\n      if (settings.timeout > 0) abortTimeout = setTimeout(function () {\n        xhr.onreadystatechange = empty;\n        xhr.abort();\n        ajaxError(null, 'timeout', xhr, settings, deferred);\n      }, settings.timeout); // avoid sending empty string (#319)\n\n      xhr.send(settings.data ? settings.data : null);\n      return xhr;\n    }; // handle optional data/success arguments\n\n\n    function parseArguments(url, data, success, dataType) {\n      if ($.isFunction(data)) dataType = success, success = data, data = undefined;\n      if (!$.isFunction(success)) dataType = success, success = undefined;\n      return {\n        url: url,\n        data: data,\n        success: success,\n        dataType: dataType\n      };\n    }\n\n    $.get = function ()\n    /* url, data, success, dataType */\n    {\n      return $.ajax(parseArguments.apply(null, arguments));\n    };\n\n    $.post = function ()\n    /* url, data, success, dataType */\n    {\n      var options = parseArguments.apply(null, arguments);\n      options.type = 'POST';\n      return $.ajax(options);\n    };\n\n    $.getJSON = function ()\n    /* url, data, success */\n    {\n      var options = parseArguments.apply(null, arguments);\n      options.dataType = 'json';\n      return $.ajax(options);\n    };\n\n    $.fn.load = function (url, data, success) {\n      if (!this.length) return this;\n      var self = this,\n          parts = url.split(/\\s/),\n          selector,\n          options = parseArguments(url, data, success),\n          callback = options.success;\n      if (parts.length > 1) options.url = parts[0], selector = parts[1];\n\n      options.success = function (response) {\n        self.html(selector ? $('<div>').html(response.replace(rscript, \"\")).find(selector) : response);\n        callback && callback.apply(self, arguments);\n      };\n\n      $.ajax(options);\n      return this;\n    };\n\n    var escape = encodeURIComponent;\n\n    function serialize(params, obj, traditional, scope) {\n      var type,\n          array = $.isArray(obj),\n          hash = $.isPlainObject(obj);\n      $.each(obj, function (key, value) {\n        type = $.type(value);\n        if (scope) key = traditional ? scope : scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'; // handle data in serializeArray() format\n\n        if (!scope && array) params.add(value.name, value.value); // recurse into nested objects\n        else if (type == \"array\" || !traditional && type == \"object\") serialize(params, value, traditional, key);else params.add(key, value);\n      });\n    }\n\n    $.param = function (obj, traditional) {\n      var params = [];\n\n      params.add = function (key, value) {\n        if ($.isFunction(value)) value = value();\n        if (value == null) value = \"\";\n        this.push(escape(key) + '=' + escape(value));\n      };\n\n      serialize(params, obj, traditional);\n      return params.join('&').replace(/%20/g, '+');\n    };\n  })(Zepto);\n\n  (function ($) {\n    // Create a collection of callbacks to be fired in a sequence, with configurable behaviour\n    // Option flags:\n    //   - once: Callbacks fired at most one time.\n    //   - memory: Remember the most recent context and arguments\n    //   - stopOnFalse: Cease iterating over callback list\n    //   - unique: Permit adding at most one instance of the same callback\n    $.Callbacks = function (options) {\n      options = $.extend({}, options);\n\n      var memory,\n          // Last fire value (for non-forgettable lists)\n      fired,\n          // Flag to know if list was already fired\n      firing,\n          // Flag to know if list is currently firing\n      firingStart,\n          // First callback to fire (used internally by add and fireWith)\n      firingLength,\n          // End of the loop when firing\n      firingIndex,\n          // Index of currently firing callback (modified by remove if needed)\n      list = [],\n          // Actual callback list\n      stack = !options.once && [],\n          // Stack of fire calls for repeatable lists\n      fire = function (data) {\n        memory = options.memory && data;\n        fired = true;\n        firingIndex = firingStart || 0;\n        firingStart = 0;\n        firingLength = list.length;\n        firing = true;\n\n        for (; list && firingIndex < firingLength; ++firingIndex) {\n          if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {\n            memory = false;\n            break;\n          }\n        }\n\n        firing = false;\n\n        if (list) {\n          if (stack) stack.length && fire(stack.shift());else if (memory) list.length = 0;else Callbacks.disable();\n        }\n      },\n          Callbacks = {\n        add: function () {\n          if (list) {\n            var start = list.length,\n                add = function (args) {\n              $.each(args, function (_, arg) {\n                if (typeof arg === \"function\") {\n                  if (!options.unique || !Callbacks.has(arg)) list.push(arg);\n                } else if (arg && arg.length && typeof arg !== 'string') add(arg);\n              });\n            };\n\n            add(arguments);\n            if (firing) firingLength = list.length;else if (memory) {\n              firingStart = start;\n              fire(memory);\n            }\n          }\n\n          return this;\n        },\n        remove: function () {\n          if (list) {\n            $.each(arguments, function (_, arg) {\n              var index;\n\n              while ((index = $.inArray(arg, list, index)) > -1) {\n                list.splice(index, 1); // Handle firing indexes\n\n                if (firing) {\n                  if (index <= firingLength) --firingLength;\n                  if (index <= firingIndex) --firingIndex;\n                }\n              }\n            });\n          }\n\n          return this;\n        },\n        has: function (fn) {\n          return !!(list && (fn ? $.inArray(fn, list) > -1 : list.length));\n        },\n        empty: function () {\n          firingLength = list.length = 0;\n          return this;\n        },\n        disable: function () {\n          list = stack = memory = undefined;\n          return this;\n        },\n        disabled: function () {\n          return !list;\n        },\n        lock: function () {\n          stack = undefined;\n          if (!memory) Callbacks.disable();\n          return this;\n        },\n        locked: function () {\n          return !stack;\n        },\n        fireWith: function (context, args) {\n          if (list && (!fired || stack)) {\n            args = args || [];\n            args = [context, args.slice ? args.slice() : args];\n            if (firing) stack.push(args);else fire(args);\n          }\n\n          return this;\n        },\n        fire: function () {\n          return Callbacks.fireWith(this, arguments);\n        },\n        fired: function () {\n          return !!fired;\n        }\n      };\n\n      return Callbacks;\n    };\n  })(Zepto);\n\n  (function ($) {\n    var slice = Array.prototype.slice;\n\n    function Deferred(func) {\n      var tuples = [// action, add listener, listener list, final state\n      [\"resolve\", \"done\", $.Callbacks({\n        once: 1,\n        memory: 1\n      }), \"resolved\"], [\"reject\", \"fail\", $.Callbacks({\n        once: 1,\n        memory: 1\n      }), \"rejected\"], [\"notify\", \"progress\", $.Callbacks({\n        memory: 1\n      })]],\n          state = \"pending\",\n          promise = {\n        state: function () {\n          return state;\n        },\n        always: function () {\n          deferred.done(arguments).fail(arguments);\n          return this;\n        },\n        then: function ()\n        /* fnDone [, fnFailed [, fnProgress]] */\n        {\n          var fns = arguments;\n          return Deferred(function (defer) {\n            $.each(tuples, function (i, tuple) {\n              var fn = $.isFunction(fns[i]) && fns[i];\n              deferred[tuple[1]](function () {\n                var returned = fn && fn.apply(this, arguments);\n\n                if (returned && $.isFunction(returned.promise)) {\n                  returned.promise().done(defer.resolve).fail(defer.reject).progress(defer.notify);\n                } else {\n                  var context = this === promise ? defer.promise() : this,\n                      values = fn ? [returned] : arguments;\n                  defer[tuple[0] + \"With\"](context, values);\n                }\n              });\n            });\n            fns = null;\n          }).promise();\n        },\n        promise: function (obj) {\n          return obj != null ? $.extend(obj, promise) : promise;\n        }\n      },\n          deferred = {};\n      $.each(tuples, function (i, tuple) {\n        var list = tuple[2],\n            stateString = tuple[3];\n        promise[tuple[1]] = list.add;\n\n        if (stateString) {\n          list.add(function () {\n            state = stateString;\n          }, tuples[i ^ 1][2].disable, tuples[2][2].lock);\n        }\n\n        deferred[tuple[0]] = function () {\n          deferred[tuple[0] + \"With\"](this === deferred ? promise : this, arguments);\n          return this;\n        };\n\n        deferred[tuple[0] + \"With\"] = list.fireWith;\n      });\n      promise.promise(deferred);\n      if (func) func.call(deferred, deferred);\n      return deferred;\n    }\n\n    $.when = function (sub) {\n      var resolveValues = slice.call(arguments),\n          len = resolveValues.length,\n          i = 0,\n          remain = len !== 1 || sub && $.isFunction(sub.promise) ? len : 0,\n          deferred = remain === 1 ? sub : Deferred(),\n          progressValues,\n          progressContexts,\n          resolveContexts,\n          updateFn = function (i, ctx, val) {\n        return function (value) {\n          ctx[i] = this;\n          val[i] = arguments.length > 1 ? slice.call(arguments) : value;\n\n          if (val === progressValues) {\n            deferred.notifyWith(ctx, val);\n          } else if (! --remain) {\n            deferred.resolveWith(ctx, val);\n          }\n        };\n      };\n\n      if (len > 1) {\n        progressValues = new Array(len);\n        progressContexts = new Array(len);\n        resolveContexts = new Array(len);\n\n        for (; i < len; ++i) {\n          if (resolveValues[i] && $.isFunction(resolveValues[i].promise)) {\n            resolveValues[i].promise().done(updateFn(i, resolveContexts, resolveValues)).fail(deferred.reject).progress(updateFn(i, progressContexts, progressValues));\n          } else {\n            --remain;\n          }\n        }\n      }\n\n      if (!remain) deferred.resolveWith(resolveContexts, resolveValues);\n      return deferred.promise();\n    };\n\n    $.Deferred = Deferred;\n  })(Zepto);\n\n  (function ($) {\n    var _zid = 1,\n        undefined$1,\n        slice = Array.prototype.slice,\n        isFunction = $.isFunction,\n        isString = function (obj) {\n      return typeof obj == 'string';\n    },\n        handlers = {},\n        specialEvents = {},\n        focusinSupported = ('onfocusin' in window),\n        focus = {\n      focus: 'focusin',\n      blur: 'focusout'\n    },\n        hover = {\n      mouseenter: 'mouseover',\n      mouseleave: 'mouseout'\n    };\n\n    specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents';\n\n    function zid(element) {\n      return element._zid || (element._zid = _zid++);\n    }\n\n    function findHandlers(element, event, fn, selector) {\n      event = parse(event);\n      if (event.ns) var matcher = matcherFor(event.ns);\n      return (handlers[zid(element)] || []).filter(function (handler) {\n        return handler && (!event.e || handler.e == event.e) && (!event.ns || matcher.test(handler.ns)) && (!fn || zid(handler.fn) === zid(fn)) && (!selector || handler.sel == selector);\n      });\n    }\n\n    function parse(event) {\n      var parts = ('' + event).split('.');\n      return {\n        e: parts[0],\n        ns: parts.slice(1).sort().join(' ')\n      };\n    }\n\n    function matcherFor(ns) {\n      return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)');\n    }\n\n    function eventCapture(handler, captureSetting) {\n      return handler.del && !focusinSupported && handler.e in focus || !!captureSetting;\n    }\n\n    function realEvent(type) {\n      return hover[type] || focusinSupported && focus[type] || type;\n    }\n\n    function add(element, events, fn, data, selector, delegator, capture) {\n      var id = zid(element),\n          set = handlers[id] || (handlers[id] = []);\n      events.split(/\\s/).forEach(function (event) {\n        if (event == 'ready') return $(document).ready(fn);\n        var handler = parse(event);\n        handler.fn = fn;\n        handler.sel = selector; // emulate mouseenter, mouseleave\n\n        if (handler.e in hover) fn = function (e) {\n          var related = e.relatedTarget;\n          if (!related || related !== this && !$.contains(this, related)) return handler.fn.apply(this, arguments);\n        };\n        handler.del = delegator;\n        var callback = delegator || fn;\n\n        handler.proxy = function (e) {\n          e = compatible(e);\n          if (e.isImmediatePropagationStopped()) return;\n          e.data = data;\n          var result = callback.apply(element, e._args == undefined$1 ? [e] : [e].concat(e._args));\n          if (result === false) e.preventDefault(), e.stopPropagation();\n          return result;\n        };\n\n        handler.i = set.length;\n        set.push(handler);\n        if ('addEventListener' in element) element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture));\n      });\n    }\n\n    function remove(element, events, fn, selector, capture) {\n      var id = zid(element);\n      (events || '').split(/\\s/).forEach(function (event) {\n        findHandlers(element, event, fn, selector).forEach(function (handler) {\n          delete handlers[id][handler.i];\n          if ('removeEventListener' in element) element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture));\n        });\n      });\n    }\n\n    $.event = {\n      add: add,\n      remove: remove\n    };\n\n    $.proxy = function (fn, context) {\n      var args = 2 in arguments && slice.call(arguments, 2);\n\n      if (isFunction(fn)) {\n        var proxyFn = function () {\n          return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments);\n        };\n\n        proxyFn._zid = zid(fn);\n        return proxyFn;\n      } else if (isString(context)) {\n        if (args) {\n          args.unshift(fn[context], fn);\n          return $.proxy.apply(null, args);\n        } else {\n          return $.proxy(fn[context], fn);\n        }\n      } else {\n        throw new TypeError(\"expected function\");\n      }\n    };\n\n    $.fn.bind = function (event, data, callback) {\n      return this.on(event, data, callback);\n    };\n\n    $.fn.unbind = function (event, callback) {\n      return this.off(event, callback);\n    };\n\n    $.fn.one = function (event, selector, data, callback) {\n      return this.on(event, selector, data, callback, 1);\n    };\n\n    var returnTrue = function () {\n      return true;\n    },\n        returnFalse = function () {\n      return false;\n    },\n        ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,\n        eventMethods = {\n      preventDefault: 'isDefaultPrevented',\n      stopImmediatePropagation: 'isImmediatePropagationStopped',\n      stopPropagation: 'isPropagationStopped'\n    };\n\n    function compatible(event, source) {\n      if (source || !event.isDefaultPrevented) {\n        source || (source = event);\n        $.each(eventMethods, function (name, predicate) {\n          var sourceMethod = source[name];\n\n          event[name] = function () {\n            this[predicate] = returnTrue;\n            return sourceMethod && sourceMethod.apply(source, arguments);\n          };\n\n          event[predicate] = returnFalse;\n        });\n        event.timeStamp || (event.timeStamp = Date.now());\n        if (source.defaultPrevented !== undefined$1 ? source.defaultPrevented : 'returnValue' in source ? source.returnValue === false : source.getPreventDefault && source.getPreventDefault()) event.isDefaultPrevented = returnTrue;\n      }\n\n      return event;\n    }\n\n    function createProxy(event) {\n      var key,\n          proxy = {\n        originalEvent: event\n      };\n\n      for (key in event) if (!ignoreProperties.test(key) && event[key] !== undefined$1) proxy[key] = event[key];\n\n      return compatible(proxy, event);\n    }\n\n    $.fn.delegate = function (selector, event, callback) {\n      return this.on(event, selector, callback);\n    };\n\n    $.fn.undelegate = function (selector, event, callback) {\n      return this.off(event, selector, callback);\n    };\n\n    $.fn.live = function (event, callback) {\n      $(document.body).delegate(this.selector, event, callback);\n      return this;\n    };\n\n    $.fn.die = function (event, callback) {\n      $(document.body).undelegate(this.selector, event, callback);\n      return this;\n    };\n\n    $.fn.on = function (event, selector, data, callback, one) {\n      var autoRemove,\n          delegator,\n          $this = this;\n\n      if (event && !isString(event)) {\n        $.each(event, function (type, fn) {\n          $this.on(type, selector, data, fn, one);\n        });\n        return $this;\n      }\n\n      if (!isString(selector) && !isFunction(callback) && callback !== false) callback = data, data = selector, selector = undefined$1;\n      if (callback === undefined$1 || data === false) callback = data, data = undefined$1;\n      if (callback === false) callback = returnFalse;\n      return $this.each(function (_, element) {\n        if (one) autoRemove = function (e) {\n          remove(element, e.type, callback);\n          return callback.apply(this, arguments);\n        };\n        if (selector) delegator = function (e) {\n          var evt,\n              match = $(e.target).closest(selector, element).get(0);\n\n          if (match && match !== element) {\n            evt = $.extend(createProxy(e), {\n              currentTarget: match,\n              liveFired: element\n            });\n            return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)));\n          }\n        };\n        add(element, event, callback, data, selector, delegator || autoRemove);\n      });\n    };\n\n    $.fn.off = function (event, selector, callback) {\n      var $this = this;\n\n      if (event && !isString(event)) {\n        $.each(event, function (type, fn) {\n          $this.off(type, selector, fn);\n        });\n        return $this;\n      }\n\n      if (!isString(selector) && !isFunction(callback) && callback !== false) callback = selector, selector = undefined$1;\n      if (callback === false) callback = returnFalse;\n      return $this.each(function () {\n        remove(this, event, callback, selector);\n      });\n    };\n\n    $.fn.trigger = function (event, args) {\n      event = isString(event) || $.isPlainObject(event) ? $.Event(event) : compatible(event);\n      event._args = args;\n      return this.each(function () {\n        // handle focus(), blur() by calling them directly\n        if (event.type in focus && typeof this[event.type] == \"function\") this[event.type](); // items in the collection might not be DOM elements\n        else if ('dispatchEvent' in this) this.dispatchEvent(event);else $(this).triggerHandler(event, args);\n      });\n    }; // triggers event handlers on current element just as if an event occurred,\n    // doesn't trigger an actual event, doesn't bubble\n\n\n    $.fn.triggerHandler = function (event, args) {\n      var e, result;\n      this.each(function (i, element) {\n        e = createProxy(isString(event) ? $.Event(event) : event);\n        e._args = args;\n        e.target = element;\n        $.each(findHandlers(element, event.type || event), function (i, handler) {\n          result = handler.proxy(e);\n          if (e.isImmediatePropagationStopped()) return false;\n        });\n      });\n      return result;\n    } // shortcut methods for `.bind(event, fn)` for each event type\n    ;\n\n    ('focusin focusout focus blur load resize scroll unload click dblclick ' + 'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' + 'change select keydown keypress keyup error').split(' ').forEach(function (event) {\n      $.fn[event] = function (callback) {\n        return 0 in arguments ? this.bind(event, callback) : this.trigger(event);\n      };\n    });\n\n    $.Event = function (type, props) {\n      if (!isString(type)) props = type, type = props.type;\n      var event = document.createEvent(specialEvents[type] || 'Events'),\n          bubbles = true;\n      if (props) for (var name in props) name == 'bubbles' ? bubbles = !!props[name] : event[name] = props[name];\n      event.initEvent(type, bubbles, true);\n      return compatible(event);\n    };\n  })(Zepto);\n\n  (function () {\n    // getComputedStyle shouldn't freak out when called\n    // without a valid element as argument\n    try {\n      getComputedStyle(undefined);\n    } catch (e) {\n      var nativeGetComputedStyle = getComputedStyle;\n\n      window.getComputedStyle = function (element, pseudoElement) {\n        try {\n          return nativeGetComputedStyle(element, pseudoElement);\n        } catch (e) {\n          return null;\n        }\n      };\n    }\n  })();\n\n  (function ($) {\n    var zepto = $.zepto,\n        oldQsa = zepto.qsa,\n        oldMatches = zepto.matches;\n\n    function visible(elem) {\n      elem = $(elem);\n      return !!(elem.width() || elem.height()) && elem.css(\"display\") !== \"none\";\n    } // Implements a subset from:\n    // http://api.jquery.com/category/selectors/jquery-selector-extensions/\n    //\n    // Each filter function receives the current index, all nodes in the\n    // considered set, and a value if there were parentheses. The value\n    // of `this` is the node currently being considered. The function returns the\n    // resulting node(s), null, or undefined.\n    //\n    // Complex selectors are not supported:\n    //   li:has(label:contains(\"foo\")) + li:has(label:contains(\"bar\"))\n    //   ul.inner:first > li\n\n\n    var filters = $.expr[':'] = {\n      visible: function () {\n        if (visible(this)) return this;\n      },\n      hidden: function () {\n        if (!visible(this)) return this;\n      },\n      selected: function () {\n        if (this.selected) return this;\n      },\n      checked: function () {\n        if (this.checked) return this;\n      },\n      parent: function () {\n        return this.parentNode;\n      },\n      first: function (idx) {\n        if (idx === 0) return this;\n      },\n      last: function (idx, nodes) {\n        if (idx === nodes.length - 1) return this;\n      },\n      eq: function (idx, _, value) {\n        if (idx === value) return this;\n      },\n      contains: function (idx, _, text) {\n        if ($(this).text().indexOf(text) > -1) return this;\n      },\n      has: function (idx, _, sel) {\n        if (zepto.qsa(this, sel).length) return this;\n      }\n    };\n    var filterRe = new RegExp('(.*):(\\\\w+)(?:\\\\(([^)]+)\\\\))?$\\\\s*'),\n        childRe = /^\\s*>/,\n        classTag = 'Zepto' + +new Date();\n\n    function process(sel, fn) {\n      // quote the hash in `a[href^=#]` expression\n      sel = sel.replace(/=#\\]/g, '=\"#\"]');\n      var filter,\n          arg,\n          match = filterRe.exec(sel);\n\n      if (match && match[2] in filters) {\n        filter = filters[match[2]], arg = match[3];\n        sel = match[1];\n\n        if (arg) {\n          var num = Number(arg);\n          if (isNaN(num)) arg = arg.replace(/^[\"']|[\"']$/g, '');else arg = num;\n        }\n      }\n\n      return fn(sel, filter, arg);\n    }\n\n    zepto.qsa = function (node, selector) {\n      return process(selector, function (sel, filter, arg) {\n        try {\n          var taggedParent;\n          if (!sel && filter) sel = '*';else if (childRe.test(sel)) // support \"> *\" child queries by tagging the parent node with a\n            // unique class and prepending that classname onto the selector\n            taggedParent = $(node).addClass(classTag), sel = '.' + classTag + ' ' + sel;\n          var nodes = oldQsa(node, sel);\n        } catch (e) {\n          console.error('error performing selector: %o', selector);\n          throw e;\n        } finally {\n          if (taggedParent) taggedParent.removeClass(classTag);\n        }\n\n        return !filter ? nodes : zepto.uniq($.map(nodes, function (n, i) {\n          return filter.call(n, i, nodes, arg);\n        }));\n      });\n    };\n\n    zepto.matches = function (node, selector) {\n      return process(selector, function (sel, filter, arg) {\n        return (!sel || oldMatches(node, sel)) && (!filter || filter.call(node, null, arg) === node);\n      });\n    };\n  })(Zepto);\n\n  var zepto = Zepto;\n\n  /* eslint-disable no-useless-escape */\n  // The order of the following arrays is important, be careful if you change it.\n  var BROWSER_DATA = [{\n    name: 'Chromium',\n    group: 'Chrome',\n    identifier: 'Chromium/([0-9\\.]*)'\n  }, {\n    name: 'Chrome Mobile',\n    group: 'Chrome',\n    identifier: 'Chrome/([0-9\\.]*) Mobile',\n    versionIdentifier: 'Chrome/([0-9\\.]*)'\n  }, {\n    name: 'Chrome',\n    group: 'Chrome',\n    identifier: 'Chrome/([0-9\\.]*)'\n  }, {\n    name: 'Chrome for iOS',\n    group: 'Chrome',\n    identifier: 'CriOS/([0-9\\.]*)'\n  }, {\n    name: 'Android Browser',\n    group: 'Chrome',\n    identifier: 'CrMo/([0-9\\.]*)'\n  }, {\n    name: 'Firefox',\n    group: 'Firefox',\n    identifier: 'Firefox/([0-9\\.]*)'\n  }, {\n    name: 'Opera Mini',\n    group: 'Opera',\n    identifier: 'Opera Mini/([0-9\\.]*)'\n  }, {\n    name: 'Opera',\n    group: 'Opera',\n    identifier: 'Opera ([0-9\\.]*)'\n  }, {\n    name: 'Opera',\n    group: 'Opera',\n    identifier: 'Opera/([0-9\\.]*)',\n    versionIdentifier: 'Version/([0-9\\.]*)'\n  }, {\n    name: 'IEMobile',\n    group: 'Explorer',\n    identifier: 'IEMobile/([0-9\\.]*)'\n  }, {\n    name: 'Internet Explorer',\n    group: 'Explorer',\n    identifier: 'MSIE ([a-zA-Z0-9\\.]*)'\n  }, {\n    name: 'Internet Explorer',\n    group: 'Explorer',\n    identifier: 'Trident/([0-9\\.]*)',\n    versionIdentifier: 'rv:([0-9\\.]*)'\n  }, {\n    name: 'Spartan',\n    group: 'Spartan',\n    identifier: 'Edge/([0-9\\.]*)',\n    versionIdentifier: 'Edge/([0-9\\.]*)'\n  }, {\n    name: 'Safari',\n    group: 'Safari',\n    identifier: 'Safari/([0-9\\.]*)',\n    versionIdentifier: 'Version/([0-9\\.]*)'\n  }];\n\n  /* eslint-disable no-useless-escape */\n  // The order of the following arrays is important, be careful if you change it.\n  var OS_DATA = [{\n    name: 'Windows 2000',\n    group: 'Windows',\n    identifier: 'Windows NT 5.0',\n    version: '5.0'\n  }, {\n    name: 'Windows XP',\n    group: 'Windows',\n    identifier: 'Windows NT 5.1',\n    version: '5.1'\n  }, {\n    name: 'Windows Vista',\n    group: 'Windows',\n    identifier: 'Windows NT 6.0',\n    version: '6.0'\n  }, {\n    name: 'Windows 7',\n    group: 'Windows',\n    identifier: 'Windows NT 6.1',\n    version: '7.0'\n  }, {\n    name: 'Windows 8',\n    group: 'Windows',\n    identifier: 'Windows NT 6.2',\n    version: '8.0'\n  }, {\n    name: 'Windows 8.1',\n    group: 'Windows',\n    identifier: 'Windows NT 6.3',\n    version: '8.1'\n  }, {\n    name: 'Windows 10',\n    group: 'Windows',\n    identifier: 'Windows NT 10.0',\n    version: '10.0'\n  }, {\n    name: 'Windows Phone',\n    group: 'Windows Phone',\n    identifier: 'Windows Phone ([0-9\\.]*)'\n  }, {\n    name: 'Windows Phone',\n    group: 'Windows Phone',\n    identifier: 'Windows Phone OS ([0-9\\.]*)'\n  }, {\n    name: 'Windows',\n    group: 'Windows',\n    identifier: 'Windows'\n  }, {\n    name: 'Chrome OS',\n    group: 'Chrome OS',\n    identifier: 'CrOS'\n  }, {\n    name: 'Android',\n    group: 'Android',\n    identifier: 'Android',\n    versionIdentifier: 'Android ([a-zA-Z0-9\\.-]*)'\n  }, {\n    name: 'iPad',\n    group: 'iOS',\n    identifier: 'iPad',\n    versionIdentifier: 'OS ([0-9_]*)',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'iPod',\n    group: 'iOS',\n    identifier: 'iPod',\n    versionIdentifier: 'OS ([0-9_]*)',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'iPhone',\n    group: 'iOS',\n    identifier: 'iPhone OS',\n    versionIdentifier: 'OS ([0-9_]*)',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X High Sierra',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])13([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Sierra',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])12([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X El Capitan',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])11([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Yosemite',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])10([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Mavericks',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])9([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Mountain Lion',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])8([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Lion',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])7([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Snow Leopard',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])6([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Leopard',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])5([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Tiger',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])4([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Panther',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])3([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Jaguar',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])2([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Puma',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])1([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS X Cheetah',\n    group: 'Mac OS',\n    identifier: 'Mac OS X (10([_|\\.])0([0-9_\\.]*))',\n    versionSeparator: '[_|\\.]'\n  }, {\n    name: 'Mac OS',\n    group: 'Mac OS',\n    identifier: 'Mac OS'\n  }, {\n    name: 'Ubuntu',\n    group: 'Linux',\n    identifier: 'Ubuntu',\n    versionIdentifier: 'Ubuntu/([0-9\\.]*)'\n  }, {\n    name: 'Debian',\n    group: 'Linux',\n    identifier: 'Debian'\n  }, {\n    name: 'Gentoo',\n    group: 'Linux',\n    identifier: 'Gentoo'\n  }, {\n    name: 'Linux',\n    group: 'Linux',\n    identifier: 'Linux'\n  }, {\n    name: 'BlackBerry',\n    group: 'BlackBerry',\n    identifier: 'BlackBerry'\n  }];\n\n  var Browser = {};\n\n  var hasLocalstorage = function hasLocalstorage() {\n    try {\n      localStorage.setItem('clappr', 'clappr');\n      localStorage.removeItem('clappr');\n      return true;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  var hasFlash = function hasFlash() {\n    try {\n      var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n      return !!fo;\n    } catch (e) {\n      return !!(navigator.mimeTypes && navigator.mimeTypes['application/x-shockwave-flash'] !== undefined && navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin);\n    }\n  };\n\n  var getBrowserInfo = function getBrowserInfo(ua) {\n    var parts = ua.match(/\\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [],\n        extra;\n\n    if (/trident/i.test(parts[1])) {\n      extra = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return {\n        name: 'IE',\n        version: parseInt(extra[1] || '')\n      };\n    } else if (parts[1] === 'Chrome') {\n      extra = ua.match(/\\bOPR\\/(\\d+)/);\n      if (extra != null) return {\n        name: 'Opera',\n        version: parseInt(extra[1])\n      };\n      extra = ua.match(/\\bEdge\\/(\\d+)/);\n      if (extra != null) return {\n        name: 'Edge',\n        version: parseInt(extra[1])\n      };\n    } else if (/android/i.test(ua) && (extra = ua.match(/version\\/(\\d+)/i))) {\n      parts.splice(1, 1, 'Android WebView');\n      parts.splice(2, 1, extra[1]);\n    }\n\n    parts = parts[2] ? [parts[1], parts[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    return {\n      name: parts[0],\n      version: parseInt(parts[1])\n    };\n  }; //  Get browser data\n\n  var getBrowserData = function getBrowserData() {\n    var browserObject = {};\n    var userAgent = Browser.userAgent.toLowerCase(); // Check browser type\n\n    var _iterator = _createForOfIteratorHelper(BROWSER_DATA),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var browser = _step.value;\n        var browserRegExp = new RegExp(browser.identifier.toLowerCase());\n        var browserRegExpResult = browserRegExp.exec(userAgent);\n\n        if (browserRegExpResult != null && browserRegExpResult[1]) {\n          browserObject.name = browser.name;\n          browserObject.group = browser.group; // Check version\n\n          if (browser.versionIdentifier) {\n            var versionRegExp = new RegExp(browser.versionIdentifier.toLowerCase());\n            var versionRegExpResult = versionRegExp.exec(userAgent);\n            if (versionRegExpResult != null && versionRegExpResult[1]) setBrowserVersion(versionRegExpResult[1], browserObject);\n          } else {\n            setBrowserVersion(browserRegExpResult[1], browserObject);\n          }\n\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return browserObject;\n  }; // Set browser version\n\n  var setBrowserVersion = function setBrowserVersion(version, browserObject) {\n    var splitVersion = version.split('.', 2);\n    browserObject.fullVersion = version; // Major version\n\n    if (splitVersion[0]) browserObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\n    if (splitVersion[1]) browserObject.minorVersion = parseInt(splitVersion[1]);\n  }; //  Get OS data\n\n\n  var getOsData = function getOsData() {\n    var osObject = {};\n    var userAgent = Browser.userAgent.toLowerCase(); // Check browser type\n\n    var _iterator2 = _createForOfIteratorHelper(OS_DATA),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var os = _step2.value;\n        var osRegExp = new RegExp(os.identifier.toLowerCase());\n        var osRegExpResult = osRegExp.exec(userAgent);\n\n        if (osRegExpResult != null) {\n          osObject.name = os.name;\n          osObject.group = os.group; // Version defined\n\n          if (os.version) {\n            setOsVersion(os.version, os.versionSeparator ? os.versionSeparator : '.', osObject); // Version detected\n          } else if (osRegExpResult[1]) {\n            setOsVersion(osRegExpResult[1], os.versionSeparator ? os.versionSeparator : '.', osObject); // Version identifier\n          } else if (os.versionIdentifier) {\n            var versionRegExp = new RegExp(os.versionIdentifier.toLowerCase());\n            var versionRegExpResult = versionRegExp.exec(userAgent);\n            if (versionRegExpResult != null && versionRegExpResult[1]) setOsVersion(versionRegExpResult[1], os.versionSeparator ? os.versionSeparator : '.', osObject);\n          }\n\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return osObject;\n  }; // Set OS version\n\n  var setOsVersion = function setOsVersion(version, separator, osObject) {\n    var finalSeparator = separator.substr(0, 1) == '[' ? new RegExp(separator, 'g') : separator;\n    var splitVersion = version.split(finalSeparator, 2);\n    if (separator != '.') version = version.replace(new RegExp(separator, 'g'), '.');\n    osObject.fullVersion = version; // Major version\n\n    if (splitVersion && splitVersion[0]) osObject.majorVersion = parseInt(splitVersion[0]); // Minor version\n\n    if (splitVersion && splitVersion[1]) osObject.minorVersion = parseInt(splitVersion[1]);\n  }; // Set viewport size\n\n\n  var getViewportSize = function getViewportSize() {\n    var viewportObject = {};\n    viewportObject.width = zepto(window).width();\n    viewportObject.height = zepto(window).height();\n    return viewportObject;\n  }; // Set viewport orientation\n\n  var setViewportOrientation = function setViewportOrientation() {\n    switch (window.orientation) {\n      case -90:\n      case 90:\n        Browser.viewport.orientation = 'landscape';\n        break;\n\n      default:\n        Browser.viewport.orientation = 'portrait';\n        break;\n    }\n  };\n\n  var getDevice = function getDevice(ua) {\n    var platformRegExp = /\\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\\)))/;\n    var matches = platformRegExp.exec(ua);\n    var device = matches && (matches[1] || matches[2]) || '';\n    return device;\n  };\n  var browserInfo = getBrowserInfo(navigator.userAgent);\n  Browser.isEdge = /edge/i.test(navigator.userAgent);\n  Browser.isChrome = /chrome|CriOS/i.test(navigator.userAgent) && !Browser.isEdge;\n  Browser.isSafari = /safari/i.test(navigator.userAgent) && !Browser.isChrome && !Browser.isEdge;\n  Browser.isFirefox = /firefox/i.test(navigator.userAgent);\n  Browser.isLegacyIE = !!window.ActiveXObject;\n  Browser.isIE = Browser.isLegacyIE || /trident.*rv:1\\d/i.test(navigator.userAgent);\n  Browser.isIE11 = /trident.*rv:11/i.test(navigator.userAgent);\n  Browser.isChromecast = Browser.isChrome && /CrKey/i.test(navigator.userAgent);\n  Browser.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent);\n  Browser.isiOS = /iPad|iPhone|iPod/i.test(navigator.userAgent);\n  Browser.isAndroid = /Android/i.test(navigator.userAgent);\n  Browser.isWindowsPhone = /Windows Phone/i.test(navigator.userAgent);\n  Browser.isWin8App = /MSAppHost/i.test(navigator.userAgent);\n  Browser.isWiiU = /WiiU/i.test(navigator.userAgent);\n  Browser.isPS4 = /PlayStation 4/i.test(navigator.userAgent);\n  Browser.hasLocalstorage = hasLocalstorage();\n  Browser.hasFlash = hasFlash();\n  /**\n  * @deprecated\n  * This parameter currently exists for retrocompatibility reasons.\n  * Use Browser.data.name instead.\n  */\n\n  Browser.name = browserInfo.name;\n  /**\n  * @deprecated\n  * This parameter currently exists for retrocompatibility reasons.\n  * Use Browser.data.fullVersion instead.\n  */\n\n  Browser.version = browserInfo.version;\n  Browser.userAgent = navigator.userAgent;\n  Browser.data = getBrowserData();\n  Browser.os = getOsData();\n  Browser.viewport = getViewportSize();\n  Browser.device = getDevice(Browser.userAgent);\n  typeof window.orientation !== 'undefined' && setViewportOrientation();\n\n  var idsCounter = {};\n  var videoStack = [];\n  var requestAnimationFrame = (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function (fn) {\n    window.setTimeout(fn, 1000 / 60);\n  }).bind(window);\n  var cancelAnimationFrame = (window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout).bind(window);\n  function assign(obj, source) {\n    if (source) {\n      for (var prop in source) {\n        var propDescriptor = Object.getOwnPropertyDescriptor(source, prop);\n        propDescriptor ? Object.defineProperty(obj, prop, propDescriptor) : obj[prop] = source[prop];\n      }\n    }\n\n    return obj;\n  }\n  function extend(parent, properties) {\n    var Surrogate = /*#__PURE__*/function (_parent) {\n      _inherits(Surrogate, _parent);\n\n      var _super = _createSuper(Surrogate);\n\n      function Surrogate() {\n        var _this;\n\n        _classCallCheck(this, Surrogate);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n        if (properties.initialize) properties.initialize.apply(_assertThisInitialized(_this), args);\n        return _this;\n      }\n\n      return Surrogate;\n    }(parent);\n\n    assign(Surrogate.prototype, properties);\n    return Surrogate;\n  }\n  function formatTime(time, paddedHours) {\n    if (!isFinite(time)) return '--:--';\n    time = time * 1000;\n    time = parseInt(time / 1000);\n    var seconds = time % 60;\n    time = parseInt(time / 60);\n    var minutes = time % 60;\n    time = parseInt(time / 60);\n    var hours = time % 24;\n    var days = parseInt(time / 24);\n    var out = '';\n\n    if (days && days > 0) {\n      out += days + ':';\n      if (hours < 1) out += '00:';\n    }\n\n    if (hours && hours > 0 || paddedHours) out += ('0' + hours).slice(-2) + ':';\n    out += ('0' + minutes).slice(-2) + ':';\n    out += ('0' + seconds).slice(-2);\n    return out.trim();\n  }\n  var Fullscreen = {\n    fullscreenElement: function fullscreenElement() {\n      return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n    },\n    requestFullscreen: function requestFullscreen(el) {\n      if (el.requestFullscreen) {\n        return el.requestFullscreen();\n      } else if (el.webkitRequestFullscreen) {\n        if (typeof el.then === 'function') return el.webkitRequestFullscreen();\n        el.webkitRequestFullscreen();\n      } else if (el.mozRequestFullScreen) {\n        return el.mozRequestFullScreen();\n      } else if (el.msRequestFullscreen) {\n        return el.msRequestFullscreen();\n      } else if (el.querySelector && el.querySelector('video') && el.querySelector('video').webkitEnterFullScreen) {\n        el.querySelector('video').webkitEnterFullScreen();\n      } else if (el.webkitEnterFullScreen) {\n        el.webkitEnterFullScreen();\n      }\n    },\n    cancelFullscreen: function cancelFullscreen() {\n      var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      if (el.exitFullscreen) el.exitFullscreen();else if (el.webkitCancelFullScreen) el.webkitCancelFullScreen();else if (el.webkitExitFullscreen) el.webkitExitFullscreen();else if (el.mozCancelFullScreen) el.mozCancelFullScreen();else if (el.msExitFullscreen) el.msExitFullscreen();\n    },\n    fullscreenEnabled: function fullscreenEnabled() {\n      return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled);\n    }\n  };\n  var Config = /*#__PURE__*/function () {\n    function Config() {\n      _classCallCheck(this, Config);\n    }\n\n    _createClass(Config, null, [{\n      key: \"_defaultConfig\",\n      value: function _defaultConfig() {\n        return {\n          volume: {\n            value: 100,\n            parse: parseInt\n          }\n        };\n      }\n    }, {\n      key: \"_defaultValueFor\",\n      value: function _defaultValueFor(key) {\n        try {\n          return this._defaultConfig()[key].parse(this._defaultConfig()[key].value);\n        } catch (e) {\n          return undefined;\n        }\n      }\n    }, {\n      key: \"_createKeyspace\",\n      value: function _createKeyspace(key) {\n        return \"clappr.\".concat(document.domain, \".\").concat(key);\n      }\n    }, {\n      key: \"restore\",\n      value: function restore(key) {\n        if (Browser.hasLocalstorage && localStorage[this._createKeyspace(key)]) return this._defaultConfig()[key].parse(localStorage[this._createKeyspace(key)]);\n        return this._defaultValueFor(key);\n      }\n    }, {\n      key: \"persist\",\n      value: function persist(key, value) {\n        if (Browser.hasLocalstorage) {\n          try {\n            localStorage[this._createKeyspace(key)] = value;\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n      }\n    }]);\n\n    return Config;\n  }();\n  var QueryString = /*#__PURE__*/function () {\n    function QueryString() {\n      _classCallCheck(this, QueryString);\n    }\n\n    _createClass(QueryString, null, [{\n      key: \"parse\",\n      value: function parse(paramsString) {\n        var match;\n\n        var pl = /\\+/g,\n            // Regex for replacing addition symbol with a space\n        search = /([^&=]+)=?([^&]*)/g,\n            decode = function decode(s) {\n          return decodeURIComponent(s.replace(pl, ' '));\n        },\n            params = {};\n\n        while (match = search.exec(paramsString)) {\n          // eslint-disable-line no-cond-assign\n          params[decode(match[1]).toLowerCase()] = decode(match[2]);\n        }\n\n        return params;\n      }\n    }, {\n      key: \"params\",\n      get: function get() {\n        var query = window.location.search.substring(1);\n\n        if (query !== this.query) {\n          this._urlParams = this.parse(query);\n          this.query = query;\n        }\n\n        return this._urlParams;\n      }\n    }, {\n      key: \"hashParams\",\n      get: function get() {\n        var hash = window.location.hash.substring(1);\n\n        if (hash !== this.hash) {\n          this._hashParams = this.parse(hash);\n          this.hash = hash;\n        }\n\n        return this._hashParams;\n      }\n    }]);\n\n    return QueryString;\n  }();\n  function seekStringToSeconds() {\n    var paramName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 't';\n    var seconds = 0;\n    var seekString = QueryString.params[paramName] || QueryString.hashParams[paramName] || '';\n    var parts = seekString.match(/[0-9]+[hms]+/g) || [];\n\n    if (parts.length > 0) {\n      var factor = {\n        'h': 3600,\n        'm': 60,\n        's': 1\n      };\n      parts.forEach(function (el) {\n        if (el) {\n          var suffix = el[el.length - 1];\n          var time = parseInt(el.slice(0, el.length - 1), 10);\n          seconds += time * factor[suffix];\n        }\n      });\n    } else if (seekString) {\n      seconds = parseInt(seekString, 10);\n    }\n\n    return seconds;\n  }\n  function uniqueId(prefix) {\n    idsCounter[prefix] || (idsCounter[prefix] = 0);\n    var id = ++idsCounter[prefix];\n    return prefix + id;\n  }\n  function isNumber(value) {\n    return value - parseFloat(value) + 1 >= 0;\n  }\n  function currentScriptUrl() {\n    var scripts = document.getElementsByTagName('script');\n    return scripts.length ? scripts[scripts.length - 1].src : '';\n  }\n  function getBrowserLanguage() {\n    return window.navigator && window.navigator.language;\n  }\n  function now() {\n    if (window.performance && window.performance.now) return performance.now();\n    return Date.now();\n  } // remove the item from the array if it exists in the array\n\n  function removeArrayItem(arr, item) {\n    var i = arr.indexOf(item);\n    if (i >= 0) arr.splice(i, 1);\n  } // find an item regardless of its letter case\n\n  function listContainsIgnoreCase(item, items) {\n    if (item === undefined || items === undefined) return false;\n    return items.find(function (itemEach) {\n      return item.toLowerCase() === itemEach.toLowerCase();\n    }) !== undefined;\n  } // https://github.com/video-dev/can-autoplay\n\n  function canAutoPlayMedia(cb, options) {\n    options = Object.assign({\n      inline: false,\n      muted: false,\n      timeout: 250,\n      type: 'video',\n      source: Media.mp4,\n      element: null\n    }, options);\n    var element = options.element ? options.element : document.createElement(options.type);\n    element.muted = options.muted;\n    if (options.muted === true) element.setAttribute('muted', 'muted');\n    if (options.inline === true) element.setAttribute('playsinline', 'playsinline');\n    element.src = options.source;\n    var promise = element.play();\n    var timeoutId = setTimeout(function () {\n      setResult(false, new Error(\"Timeout \".concat(options.timeout, \" ms has been reached\")));\n    }, options.timeout);\n\n    var setResult = function setResult(result) {\n      var error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      clearTimeout(timeoutId);\n      cb(result, error);\n    };\n\n    if (promise !== undefined) {\n      promise.then(function () {\n        return setResult(true);\n      })[\"catch\"](function (err) {\n        return setResult(false, err);\n      });\n    } else {\n      setResult(true);\n    }\n  } // Simple element factory with video recycle feature.\n\n  var DomRecycler = /*#__PURE__*/function () {\n    function DomRecycler() {\n      _classCallCheck(this, DomRecycler);\n    }\n\n    _createClass(DomRecycler, null, [{\n      key: \"configure\",\n      value: function configure(options) {\n        this.options = zepto.extend(true, this.options, options);\n      }\n    }, {\n      key: \"create\",\n      value: function create(name) {\n        if (this.options.recycleVideo && name === 'video' && videoStack.length > 0) return videoStack.shift();\n        return document.createElement(name);\n      }\n    }, {\n      key: \"garbage\",\n      value: function garbage(el) {\n        if (!this.options.recycleVideo || el.tagName.toUpperCase() !== 'VIDEO') return;\n        zepto(el).children().remove();\n        Object.values(el.attributes).forEach(function (attr) {\n          return el.removeAttribute(attr.name);\n        });\n        videoStack.push(el);\n      }\n    }]);\n\n    return DomRecycler;\n  }();\n  DomRecycler.options = {\n    recycleVideo: false\n  };\n  var DoubleEventHandler = /*#__PURE__*/function () {\n    function DoubleEventHandler() {\n      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 500;\n\n      _classCallCheck(this, DoubleEventHandler);\n\n      this.delay = delay;\n      this.lastTime = 0;\n    }\n\n    _createClass(DoubleEventHandler, [{\n      key: \"handle\",\n      value: function handle(event, cb) {\n        var prevented = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        // Based on http://jsfiddle.net/brettwp/J4djY/\n        var currentTime = new Date().getTime();\n        var diffTime = currentTime - this.lastTime;\n\n        if (diffTime < this.delay && diffTime > 0) {\n          cb();\n          prevented && event.preventDefault();\n        }\n\n        this.lastTime = currentTime;\n      }\n    }]);\n\n    return DoubleEventHandler;\n  }();\n  var Utils = {\n    Config: Config,\n    Fullscreen: Fullscreen,\n    QueryString: QueryString,\n    DomRecycler: DomRecycler,\n    assign: assign,\n    extend: extend,\n    formatTime: formatTime,\n    seekStringToSeconds: seekStringToSeconds,\n    uniqueId: uniqueId,\n    currentScriptUrl: currentScriptUrl,\n    isNumber: isNumber,\n    requestAnimationFrame: requestAnimationFrame,\n    cancelAnimationFrame: cancelAnimationFrame,\n    getBrowserLanguage: getBrowserLanguage,\n    now: now,\n    removeArrayItem: removeArrayItem,\n    listContainsIgnoreCase: listContainsIgnoreCase,\n    canAutoPlayMedia: canAutoPlayMedia,\n    Media: Media,\n    DoubleEventHandler: DoubleEventHandler\n  };\n\n  // Use of this source code is governed by a BSD-style\n  // license that can be found in the LICENSE file.\n  var BOLD = 'font-weight: bold; font-size: 13px;';\n  var INFO = 'color: #006600;' + BOLD;\n  var DEBUG = 'color: #0000ff;' + BOLD;\n  var WARN = 'color: #ff8000;' + BOLD;\n  var ERROR = 'color: #ff0000;' + BOLD;\n  var LEVEL_DEBUG = 0;\n  var LEVEL_INFO = 1;\n  var LEVEL_WARN = 2;\n  var LEVEL_ERROR = 3;\n  var LEVEL_DISABLED = LEVEL_ERROR;\n  var COLORS = [DEBUG, INFO, WARN, ERROR, ERROR];\n  var DESCRIPTIONS = ['debug', 'info', 'warn', 'error', 'disabled'];\n\n  var Log = /*#__PURE__*/function () {\n    _createClass(Log, [{\n      key: \"level\",\n      get: function get() {\n        return this._level;\n      },\n      set: function set(newLevel) {\n        this._level = newLevel;\n      }\n    }]);\n\n    function Log() {\n      var level = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : LEVEL_INFO;\n      var offLevel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : LEVEL_DISABLED;\n\n      _classCallCheck(this, Log);\n\n      this.EXCLUDE_LIST = ['timeupdate', 'playback:timeupdate', 'playback:progress', 'container:hover', 'container:timeupdate', 'container:progress'];\n      this.level = level;\n      this.previousLevel = this.level;\n      this.offLevel = offLevel;\n    }\n\n    _createClass(Log, [{\n      key: \"debug\",\n      value: function debug(klass) {\n        this.log(klass, LEVEL_DEBUG, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"info\",\n      value: function info(klass) {\n        this.log(klass, LEVEL_INFO, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"warn\",\n      value: function warn(klass) {\n        this.log(klass, LEVEL_WARN, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"error\",\n      value: function error(klass) {\n        this.log(klass, LEVEL_ERROR, Array.prototype.slice.call(arguments, 1));\n      }\n    }, {\n      key: \"onOff\",\n      value: function onOff() {\n        if (this.level === this.offLevel) {\n          this.level = this.previousLevel;\n        } else {\n          this.previousLevel = this.level;\n          this.level = this.offLevel;\n        } // handle instances where console.log is unavailable\n\n\n        window.console && window.console.log && window.console.log('%c[Clappr.Log] set log level to ' + DESCRIPTIONS[this.level], WARN);\n      }\n    }, {\n      key: \"log\",\n      value: function log(klass, level, message) {\n        if (this.EXCLUDE_LIST.indexOf(message[0]) >= 0) return;\n        if (level < this.level) return;\n\n        if (!message) {\n          message = klass;\n          klass = null;\n        }\n\n        var color = COLORS[level];\n        var klassDescription = '';\n        if (klass) klassDescription = '[' + klass + ']';\n        window.console && window.console.log && window.console.log.apply(console, ['%c[' + DESCRIPTIONS[level] + ']' + klassDescription, color].concat(message));\n      }\n    }]);\n\n    return Log;\n  }();\n  Log.LEVEL_DEBUG = LEVEL_DEBUG;\n  Log.LEVEL_INFO = LEVEL_INFO;\n  Log.LEVEL_WARN = LEVEL_WARN;\n  Log.LEVEL_ERROR = LEVEL_ERROR;\n\n  Log.getInstance = function () {\n    if (this._instance === undefined) this._instance = new this();\n    return this._instance;\n  };\n\n  Log.setLevel = function (level) {\n    this.getInstance().level = level;\n  };\n\n  Log.debug = function () {\n    this.getInstance().debug.apply(this.getInstance(), arguments);\n  };\n\n  Log.info = function () {\n    this.getInstance().info.apply(this.getInstance(), arguments);\n  };\n\n  Log.warn = function () {\n    this.getInstance().warn.apply(this.getInstance(), arguments);\n  };\n\n  Log.error = function () {\n    this.getInstance().error.apply(this.getInstance(), arguments);\n  };\n\n  var slice = Array.prototype.slice;\n  var eventSplitter = /\\s+/;\n\n  var eventsApi = function eventsApi(obj, action, name, rest) {\n    if (!name) return true; // Handle event maps.\n\n    if (_typeof(name) === 'object') {\n      for (var key in name) {\n        obj[action].apply(obj, [key, name[key]].concat(rest));\n      }\n\n      return false;\n    } // Handle space separated event names.\n\n\n    if (eventSplitter.test(name)) {\n      var names = name.split(eventSplitter);\n\n      for (var i = 0, l = names.length; i < l; i++) {\n        obj[action].apply(obj, [names[i]].concat(rest));\n      }\n\n      return false;\n    }\n\n    return true;\n  };\n\n  var triggerEvents = function triggerEvents(events, args, klass, name) {\n    var ev,\n        i = -1;\n    var l = events.length,\n        a1 = args[0],\n        a2 = args[1],\n        a3 = args[2];\n    run();\n\n    function run() {\n      try {\n        switch (args.length) {\n          /* eslint-disable curly */\n          case 0:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx);\n            }\n\n            return;\n\n          case 1:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx, a1);\n            }\n\n            return;\n\n          case 2:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx, a1, a2);\n            }\n\n            return;\n\n          case 3:\n            while (++i < l) {\n              (ev = events[i]).callback.call(ev.ctx, a1, a2, a3);\n            }\n\n            return;\n\n          default:\n            while (++i < l) {\n              (ev = events[i]).callback.apply(ev.ctx, args);\n            }\n\n            return;\n        }\n      } catch (exception) {\n        Log.error.apply(Log, [klass, 'error on event', name, 'trigger', '-', exception]);\n        run();\n      }\n    }\n  };\n  /**\n   * @class Events\n   * @constructor\n   * @module base\n   */\n\n\n  var Events = /*#__PURE__*/function () {\n    function Events() {\n      _classCallCheck(this, Events);\n    }\n\n    _createClass(Events, [{\n      key: \"on\",\n\n      /**\n       * listen to an event indefinitely, if you want to stop you need to call `off`\n       * @method on\n       * @param {String} name\n       * @param {Function} callback\n       * @param {Object} context\n       */\n      value: function on(name, callback, context) {\n        if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;\n        this._events || (this._events = {});\n        var events = this._events[name] || (this._events[name] = []);\n        events.push({\n          callback: callback,\n          context: context,\n          ctx: context || this\n        });\n        return this;\n      }\n      /**\n       * listen to an event only once\n       * @method once\n       * @param {String} name\n       * @param {Function} callback\n       * @param {Object} context\n       */\n\n    }, {\n      key: \"once\",\n      value: function once(name, callback, context) {\n        var _this = this;\n\n        var _once;\n\n        if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;\n\n        var off = function off() {\n          return _this.off(name, _once);\n        };\n\n        _once = function once() {\n          off();\n          callback.apply(this, arguments);\n        };\n\n        return this.on(name, _once, context);\n      }\n      /**\n       * stop listening to an event\n       * @method off\n       * @param {String} name\n       * @param {Function} callback\n       * @param {Object} context\n       */\n\n    }, {\n      key: \"off\",\n      value: function off(name, callback, context) {\n        var retain, ev, events, names, i, l, j, k;\n        if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;\n\n        if (!name && !callback && !context) {\n          this._events = void 0;\n          return this;\n        }\n\n        names = name ? [name] : Object.keys(this._events); // jshint maxdepth:5\n\n        for (i = 0, l = names.length; i < l; i++) {\n          name = names[i];\n          events = this._events[name];\n\n          if (events) {\n            this._events[name] = retain = [];\n\n            if (callback || context) {\n              for (j = 0, k = events.length; j < k; j++) {\n                ev = events[j];\n                if (callback && callback !== ev.callback && callback !== ev.callback._callback || context && context !== ev.context) retain.push(ev);\n              }\n            }\n\n            if (!retain.length) delete this._events[name];\n          }\n        }\n\n        return this;\n      }\n      /**\n       * triggers an event given its `name`\n       * @method trigger\n       * @param {String} name\n       */\n\n    }, {\n      key: \"trigger\",\n      value: function trigger(name) {\n        var klass = this.name || this.constructor.name;\n        Log.debug.apply(Log, [klass].concat(Array.prototype.slice.call(arguments)));\n        if (!this._events) return this;\n        var args = slice.call(arguments, 1);\n        if (!eventsApi(this, 'trigger', name, args)) return this;\n        var events = this._events[name];\n        var allEvents = this._events.all;\n        if (events) triggerEvents(events, args, klass, name);\n        if (allEvents) triggerEvents(allEvents, arguments, klass, name);\n        return this;\n      }\n      /**\n       * stop listening an event for a given object\n       * @method stopListening\n       * @param {Object} obj\n       * @param {String} name\n       * @param {Function} callback\n       */\n\n    }, {\n      key: \"stopListening\",\n      value: function stopListening(obj, name, callback) {\n        var listeningTo = this._listeningTo;\n        if (!listeningTo) return this;\n        var remove = !name && !callback;\n        if (!callback && _typeof(name) === 'object') callback = this;\n        if (obj) (listeningTo = {})[obj._listenId] = obj;\n\n        for (var id in listeningTo) {\n          obj = listeningTo[id];\n          obj.off(name, callback, this);\n          if (remove || Object.keys(obj._events).length === 0) delete this._listeningTo[id];\n        }\n\n        return this;\n      }\n    }], [{\n      key: \"register\",\n      value: function register(eventName) {\n        Events.Custom || (Events.Custom = {});\n        var property = typeof eventName === 'string' && eventName.toUpperCase().trim();\n\n        if (property && !Events.Custom[property]) {\n          Events.Custom[property] = property.toLowerCase().split('_').map(function (value, index) {\n            return index === 0 ? value : value = value[0].toUpperCase() + value.slice(1);\n          }).join('');\n        } else Log.error('Events', 'Error when register event: ' + eventName);\n      }\n    }, {\n      key: \"listAvailableCustomEvents\",\n      value: function listAvailableCustomEvents() {\n        Events.Custom || (Events.Custom = {});\n        return Object.keys(Events.Custom).filter(function (property) {\n          return typeof Events.Custom[property] === 'string';\n        });\n      }\n    }]);\n\n    return Events;\n  }();\n  var listenMethods = {\n    listenTo: 'on',\n    listenToOnce: 'once'\n  };\n  Object.keys(listenMethods).forEach(function (method) {\n    Events.prototype[method] = function (obj, name, callback) {\n      var listeningTo = this._listeningTo || (this._listeningTo = {});\n      var id = obj._listenId || (obj._listenId = uniqueId('l'));\n      listeningTo[id] = obj;\n      if (!callback && _typeof(name) === 'object') callback = this;\n      obj[listenMethods[method]](name, callback, this);\n      return this;\n    };\n  }); // PLAYER EVENTS\n\n  /**\n   * Fired when the player is ready on startup\n   *\n   * @event PLAYER_READY\n   */\n\n  Events.PLAYER_READY = 'ready';\n  /**\n   * Fired when player resizes\n   *\n   * @event PLAYER_RESIZE\n   * @param {Object} currentSize an object with the current size\n   */\n\n  Events.PLAYER_RESIZE = 'resize';\n  /**\n   * Fired when player changes its fullscreen state\n   *\n   * @event PLAYER_FULLSCREEN\n   * @param {Boolean} whether or not the player is on fullscreen mode\n   */\n\n  Events.PLAYER_FULLSCREEN = 'fullscreen';\n  /**\n   * Fired when player starts to play\n   *\n   * @event PLAYER_PLAY\n   */\n\n  Events.PLAYER_PLAY = 'play';\n  /**\n   * Fired when player pauses\n   *\n   * @event PLAYER_PAUSE\n   */\n\n  Events.PLAYER_PAUSE = 'pause';\n  /**\n   * Fired when player stops\n   *\n   * @event PLAYER_STOP\n   */\n\n  Events.PLAYER_STOP = 'stop';\n  /**\n   * Fired when player ends the video\n   *\n   * @event PLAYER_ENDED\n   */\n\n  Events.PLAYER_ENDED = 'ended';\n  /**\n   * Fired when player seeks the video\n   *\n   * @event PLAYER_SEEK\n   * @param {Number} time the current time in seconds\n   */\n\n  Events.PLAYER_SEEK = 'seek';\n  /**\n   * Fired when player receives an error\n   *\n   * @event PLAYER_ERROR\n   * @param {Object} error the error\n   */\n\n  Events.PLAYER_ERROR = 'playererror';\n  /**\n   * Fired when there is an error\n   *\n   * @event ERROR\n   * @param {Object} error\n   * the error with the following format `{code, description, level, raw, origin, scope}`\n   * @param {String} [options.code]\n   * error's code: code to identify error in the following format: origin:code\n   * @param {String} [options.description]\n   * error's description: description of the error\n   * @param {String} [options.level]\n   * error's level: FATAL or WARN.\n   * @param {String} [options.origin]\n   * error's origin. Example: hls, html5, etc\n   * @param {String} [options.scope]\n   * error's scope. Example: playback, container, etc\n   * @param {String} [options.raw]\n   * raw error: the initial error received\n   */\n\n  Events.ERROR = 'error';\n  /**\n   * Fired when the time is updated on player\n   *\n   * @event PLAYER_TIMEUPDATE\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.current]\n   * current time (in seconds)\n   * @param {Number} [progress.total]\n   * total time (in seconds)\n   */\n\n  Events.PLAYER_TIMEUPDATE = 'timeupdate';\n  /**\n   * Fired when player updates its volume\n   *\n   * @event PLAYER_VOLUMEUPDATE\n   * @param {Number} volume the current volume\n   */\n\n  Events.PLAYER_VOLUMEUPDATE = 'volumeupdate';\n  /**\n   * Fired when subtitle is available\n   *\n   * @event PLAYER_SUBTITLE_AVAILABLE\n   */\n\n  Events.PLAYER_SUBTITLE_AVAILABLE = 'subtitleavailable'; // Playback Events\n\n  /**\n   * Fired when the playback is downloading the media\n   *\n   * @event PLAYBACK_PROGRESS\n   * @param progress {Object}\n   * Data progress object\n   * @param [progress.start] {Number}\n   * start position of buffered content at current position\n   * @param [progress.current] {Number}\n   * end position of buffered content at current position\n   * @param [progress.total] {Number}\n   * total content to be downloaded\n   * @param buffered {Array}\n   * array of buffered segments ({start, end}). [Only for supported playbacks]\n   */\n\n  Events.PLAYBACK_PROGRESS = 'playback:progress';\n  /**\n   * Fired when the time is updated on playback\n   *\n   * @event PLAYBACK_TIMEUPDATE\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.current]\n   * current time (in seconds)\n   * @param {Number} [progress.total]\n   * total time (in seconds)\n   */\n\n  Events.PLAYBACK_TIMEUPDATE = 'playback:timeupdate';\n  /**\n   * Fired when playback is ready\n   *\n   * @event PLAYBACK_READY\n   */\n\n  Events.PLAYBACK_READY = 'playback:ready';\n  /**\n   * Fired when the playback starts having to buffer because\n   * playback can currently not be smooth.\n   *\n   * This corresponds to the playback `buffering` property being\n   * `true`.\n   *\n   * @event PLAYBACK_BUFFERING\n   */\n\n  Events.PLAYBACK_BUFFERING = 'playback:buffering';\n  /**\n   * Fired when the playback has enough in the buffer to be\n   * able to play smoothly, after previously being unable to\n   * do this.\n   *\n   * This corresponds to the playback `buffering` property being\n   * `false`.\n   *\n   * @event PLAYBACK_BUFFERFULL\n   */\n\n  Events.PLAYBACK_BUFFERFULL = 'playback:bufferfull';\n  /**\n   * Fired when playback changes any settings (volume, seek and etc)\n   *\n   * @event PLAYBACK_SETTINGSUPDATE\n   */\n\n  Events.PLAYBACK_SETTINGSUPDATE = 'playback:settingsupdate';\n  /**\n   * Fired when playback loaded its metadata\n   *\n   * @event PLAYBACK_LOADEDMETADATA\n   * @param {Object} metadata Data\n   * settings object\n   * @param {Number} [metadata.duration]\n   * the playback duration\n   * @param {Object} [metadata.data]\n   * extra meta data\n   */\n\n  Events.PLAYBACK_LOADEDMETADATA = 'playback:loadedmetadata';\n  /**\n   * Fired when playback updates its video quality\n   *\n   * @event PLAYBACK_HIGHDEFINITIONUPDATE\n   * @param {Boolean} isHD\n   * true when is on HD, false otherwise\n   */\n\n  Events.PLAYBACK_HIGHDEFINITIONUPDATE = 'playback:highdefinitionupdate';\n  /**\n   * Fired when playback updates its bitrate\n   *\n   * @event PLAYBACK_BITRATE\n   * @param {Object} bitrate Data\n   * bitrate object\n   * @param {Number} [bitrate.bandwidth]\n   * bitrate bandwidth when it's available\n   * @param {Number} [bitrate.width]\n   * playback width (ex: 720, 640, 1080)\n   * @param {Number} [bitrate.height]\n   * playback height (ex: 240, 480, 720)\n   * @param {Number} [bitrate.level]\n   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n   */\n\n  Events.PLAYBACK_BITRATE = 'playback:bitrate';\n  /**\n   * Fired when the playback has its levels\n   *\n   * @event PLAYBACK_LEVELS_AVAILABLE\n   * @param {Array} levels\n   * the ordered levels, each one with the following format `{id: 1, label: '500kbps'}` ps: id should be a number >= 0\n   * @param {Number} initial\n   * the initial level otherwise -1 (AUTO)\n   */\n\n  Events.PLAYBACK_LEVELS_AVAILABLE = 'playback:levels:available';\n  /**\n   * Fired when the playback starts to switch level\n   *\n   * @event PLAYBACK_LEVEL_SWITCH_START\n   *\n   */\n\n  Events.PLAYBACK_LEVEL_SWITCH_START = 'playback:levels:switch:start';\n  /**\n   * Fired when the playback ends the level switch\n   *\n   * @event PLAYBACK_LEVEL_SWITCH_END\n   *\n   */\n\n  Events.PLAYBACK_LEVEL_SWITCH_END = 'playback:levels:switch:end';\n  /**\n   * Fired when playback internal state changes\n   *\n   * @event PLAYBACK_PLAYBACKSTATE\n   * @param {Object} state Data\n   * state object\n   * @param {String} [state.type]\n   * the playback type\n   */\n\n  Events.PLAYBACK_PLAYBACKSTATE = 'playback:playbackstate';\n  /**\n   * Fired when DVR becomes enabled/disabled.\n   *\n   * @event PLAYBACK_DVR\n   * @param {boolean} state true if dvr enabled\n   */\n\n  Events.PLAYBACK_DVR = 'playback:dvr'; // TODO doc\n\n  Events.PLAYBACK_MEDIACONTROL_DISABLE = 'playback:mediacontrol:disable'; // TODO doc\n\n  Events.PLAYBACK_MEDIACONTROL_ENABLE = 'playback:mediacontrol:enable';\n  /**\n   * Fired when the media for a playback ends.\n   *\n   * @event PLAYBACK_ENDED\n   * @param {String} name the name of the playback\n   */\n\n  Events.PLAYBACK_ENDED = 'playback:ended';\n  /**\n   * Fired when user requests `play()`\n   *\n   * @event PLAYBACK_PLAY_INTENT\n   */\n\n  Events.PLAYBACK_PLAY_INTENT = 'playback:play:intent';\n  /**\n   * Fired when the media for a playback starts playing.\n   * This is not necessarily when the user requests `play()`\n   * The media may have to buffer first.\n   * I.e. `isPlaying()` might return `true` before this event is fired,\n   * because `isPlaying()` represents the intended state.\n   *\n   * @event PLAYBACK_PLAY\n   */\n\n  Events.PLAYBACK_PLAY = 'playback:play';\n  /**\n   * Fired when the media for a playback pauses.\n   *\n   * @event PLAYBACK_PAUSE\n   */\n\n  Events.PLAYBACK_PAUSE = 'playback:pause';\n  /**\n   * Fired when the media for a playback is seeking.\n   *\n   * @event PLAYBACK_SEEK\n   */\n\n  Events.PLAYBACK_SEEK = 'playback:seek';\n  /**\n   * Fired when the media for a playback is seeked.\n   *\n   * @event PLAYBACK_SEEKED\n   */\n\n  Events.PLAYBACK_SEEKED = 'playback:seeked';\n  /**\n   * Fired when the media for a playback is stopped.\n   *\n   * @event PLAYBACK_STOP\n   */\n\n  Events.PLAYBACK_STOP = 'playback:stop';\n  /**\n   * Fired if an error occurs in the playback.\n   *\n   * @event PLAYBACK_ERROR\n   * @param {Object} error An object containing the error details\n   * @param {String} name Playback name\n   */\n\n  Events.PLAYBACK_ERROR = 'playback:error'; // TODO doc\n\n  Events.PLAYBACK_STATS_ADD = 'playback:stats:add'; // TODO doc\n\n  Events.PLAYBACK_FRAGMENT_LOADED = 'playback:fragment:loaded'; // TODO doc\n\n  Events.PLAYBACK_LEVEL_SWITCH = 'playback:level:switch';\n  /**\n   * Fired when subtitle is available on playback for display\n   *\n   * @event PLAYBACK_SUBTITLE_AVAILABLE\n   */\n\n  Events.PLAYBACK_SUBTITLE_AVAILABLE = 'playback:subtitle:available';\n  /**\n   * Fired when playback subtitle track has changed\n   *\n   * @event CONTAINER_SUBTITLE_CHANGED\n   * @param {Object} track Data\n   * track object\n   * @param {Number} [track.id]\n   * selected track id\n   */\n\n  Events.PLAYBACK_SUBTITLE_CHANGED = 'playback:subtitle:changed'; // Core Events\n\n  /**\n   * Fired when the containers are created\n   *\n   * @event CORE_CONTAINERS_CREATED\n   */\n\n  Events.CORE_CONTAINERS_CREATED = 'core:containers:created';\n  /**\n   * Fired when the active container changed\n   *\n   * @event CORE_ACTIVE_CONTAINER_CHANGED\n   */\n\n  Events.CORE_ACTIVE_CONTAINER_CHANGED = 'core:active:container:changed';\n  /**\n   * Fired when the options were changed for the core\n   *\n   * @event CORE_OPTIONS_CHANGE\n   * @param {Object} new options provided to configure() method\n   */\n\n  Events.CORE_OPTIONS_CHANGE = 'core:options:change';\n  /**\n   * Fired after creating containers, when the core is ready\n   *\n   * @event CORE_READY\n   */\n\n  Events.CORE_READY = 'core:ready';\n  /**\n   * Fired when the fullscreen state change\n   *\n   * @event CORE_FULLSCREEN\n   * @param {Boolean} whether or not the player is on fullscreen mode\n   */\n\n  Events.CORE_FULLSCREEN = 'core:fullscreen';\n  /**\n   * Fired when core updates size\n   *\n   * @event CORE_RESIZE\n   * @param {Object} currentSize an object with the current size\n   */\n\n  Events.CORE_RESIZE = 'core:resize';\n  /**\n   * Fired when the screen orientation has changed.\n   * This event is trigger only for mobile devices.\n   *\n   * @event CORE_SCREEN_ORIENTATION_CHANGED\n   * @param {Object} screen An object with screen orientation\n   * screen object\n   * @param {Object} [screen.event]\n   * window resize event object\n   * @param {String} [screen.orientation]\n   * screen orientation (ie: 'landscape' or 'portrait')\n   */\n\n  Events.CORE_SCREEN_ORIENTATION_CHANGED = 'core:screen:orientation:changed';\n  /**\n   * Fired when occurs mouse move event on core element\n   *\n   * @event CORE_MOUSE_MOVE\n   * @param {Object} event a DOM event\n   */\n\n  Events.CORE_MOUSE_MOVE = 'core:mousemove';\n  /**\n   * Fired when occurs mouse leave event on core element\n   *\n   * @event CORE_MOUSE_LEAVE\n   * @param {Object} event a DOM event\n   */\n\n  Events.CORE_MOUSE_LEAVE = 'core:mouseleave'; // Container Events\n\n  /**\n   * Fired when the container internal state changes\n   *\n   * @event CONTAINER_PLAYBACKSTATE\n   * @param {Object} state Data\n   * state object\n   * @param {String} [state.type]\n   * the playback type\n   */\n\n  Events.CONTAINER_PLAYBACKSTATE = 'container:playbackstate';\n  Events.CONTAINER_PLAYBACKDVRSTATECHANGED = 'container:dvr';\n  /**\n   * Fired when the container updates its bitrate\n   *\n   * @event CONTAINER_BITRATE\n   * @param {Object} bitrate Data\n   * bitrate object\n   * @param {Number} [bitrate.bandwidth]\n   * bitrate bandwidth when it's available\n   * @param {Number} [bitrate.width]\n   * playback width (ex: 720, 640, 1080)\n   * @param {Number} [bitrate.height]\n   * playback height (ex: 240, 480, 720)\n   * @param {Number} [bitrate.level]\n   * playback level when it's available, it could be just a map for width (0 => 240, 1 => 480, 2 => 720)\n   */\n\n  Events.CONTAINER_BITRATE = 'container:bitrate';\n  Events.CONTAINER_STATS_REPORT = 'container:stats:report';\n  Events.CONTAINER_DESTROYED = 'container:destroyed';\n  /**\n   * Fired when the container is ready\n   *\n   * @event CONTAINER_READY\n   */\n\n  Events.CONTAINER_READY = 'container:ready';\n  /**\n   * Fired when the container was resized.\n   *\n   * Some fullscreen modes won't trigger this resize since they don't affect the container, only the playback contents.\n   *\n   * @event CONTAINER_RESIZE\n   */\n\n  Events.CONTAINER_RESIZE = 'container:resize';\n  Events.CONTAINER_ERROR = 'container:error';\n  /**\n   * Fired when the container loaded its metadata\n   *\n   * @event CONTAINER_LOADEDMETADATA\n   * @param {Object} metadata Data\n   * settings object\n   * @param {Number} [metadata.duration]\n   * the playback duration\n   * @param {Object} [metadata.data]\n   * extra meta data\n   */\n\n  Events.CONTAINER_LOADEDMETADATA = 'container:loadedmetadata';\n  /**\n   * Fired when subtitle is available on container for display\n   *\n   * @event CONTAINER_SUBTITLE_AVAILABLE\n   */\n\n  Events.CONTAINER_SUBTITLE_AVAILABLE = 'container:subtitle:available';\n  /**\n   * Fired when subtitle track has changed\n   *\n   * @event CONTAINER_SUBTITLE_CHANGED\n   * @param {Object} track Data\n   * track object\n   * @param {Number} [track.id]\n   * selected track id\n   */\n\n  Events.CONTAINER_SUBTITLE_CHANGED = 'container:subtitle:changed';\n  /**\n   * Fired when the time is updated on container\n   *\n   * @event CONTAINER_TIMEUPDATE\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.current]\n   * current time (in seconds)\n   * @param {Number} [progress.total]\n   * total time (in seconds)\n   */\n\n  Events.CONTAINER_TIMEUPDATE = 'container:timeupdate';\n  /**\n   * Fired when the container is downloading the media\n   *\n   * @event CONTAINER_PROGRESS\n   * @param {Object} progress Data\n   * progress object\n   * @param {Number} [progress.start]\n   * initial downloaded content\n   * @param {Number} [progress.current]\n   * current dowloaded content\n   * @param {Number} [progress.total]\n   * total content to be downloaded\n   */\n\n  Events.CONTAINER_PROGRESS = 'container:progress';\n  Events.CONTAINER_PLAY = 'container:play';\n  Events.CONTAINER_STOP = 'container:stop';\n  Events.CONTAINER_PAUSE = 'container:pause';\n  Events.CONTAINER_ENDED = 'container:ended';\n  Events.CONTAINER_CLICK = 'container:click';\n  Events.CONTAINER_DBLCLICK = 'container:dblclick';\n  Events.CONTAINER_CONTEXTMENU = 'container:contextmenu';\n  Events.CONTAINER_MOUSE_ENTER = 'container:mouseenter';\n  Events.CONTAINER_MOUSE_LEAVE = 'container:mouseleave';\n  /**\n   * Fired when the container seeks the video\n   *\n   * @event CONTAINER_SEEK\n   * @param {Number} time the current time in seconds\n   */\n\n  Events.CONTAINER_SEEK = 'container:seek';\n  /**\n   * Fired when the container was finished the seek video\n   *\n   * @event CONTAINER_SEEKED\n   * @param {Number} time the current time in seconds\n   */\n\n  Events.CONTAINER_SEEKED = 'container:seeked';\n  Events.CONTAINER_VOLUME = 'container:volume';\n  Events.CONTAINER_FULLSCREEN = 'container:fullscreen';\n  /**\n   * Fired when container is buffering\n   *\n   * @event CONTAINER_STATE_BUFFERING\n   */\n\n  Events.CONTAINER_STATE_BUFFERING = 'container:state:buffering';\n  /**\n   * Fired when the container filled the buffer\n   *\n   * @event CONTAINER_STATE_BUFFERFULL\n   */\n\n  Events.CONTAINER_STATE_BUFFERFULL = 'container:state:bufferfull';\n  /**\n   * Fired when the container changes any settings (volume, seek and etc)\n   *\n   * @event CONTAINER_SETTINGSUPDATE\n   */\n\n  Events.CONTAINER_SETTINGSUPDATE = 'container:settingsupdate';\n  /**\n   * Fired when container updates its video quality\n   *\n   * @event CONTAINER_HIGHDEFINITIONUPDATE\n   * @param {Boolean} isHD\n   * true when is on HD, false otherwise\n   */\n\n  Events.CONTAINER_HIGHDEFINITIONUPDATE = 'container:highdefinitionupdate';\n  /**\n   * Fired when the media control shows\n   *\n   * @event CONTAINER_MEDIACONTROL_SHOW\n   */\n\n  Events.CONTAINER_MEDIACONTROL_SHOW = 'container:mediacontrol:show';\n  /**\n   * Fired when the media control hides\n   *\n   * @event CONTAINER_MEDIACONTROL_HIDE\n   */\n\n  Events.CONTAINER_MEDIACONTROL_HIDE = 'container:mediacontrol:hide';\n  Events.CONTAINER_MEDIACONTROL_DISABLE = 'container:mediacontrol:disable';\n  Events.CONTAINER_MEDIACONTROL_ENABLE = 'container:mediacontrol:enable';\n  Events.CONTAINER_STATS_ADD = 'container:stats:add';\n  /**\n   * Fired when the options were changed for the container\n   *\n   * @event CONTAINER_OPTIONS_CHANGE\n   */\n\n  Events.CONTAINER_OPTIONS_CHANGE = 'container:options:change'; // MediaControl Events\n\n  Events.MEDIACONTROL_RENDERED = 'mediacontrol:rendered';\n  /**\n   * Fired when the player enters/exit on fullscreen\n   *\n   * @event MEDIACONTROL_FULLSCREEN\n   */\n\n  Events.MEDIACONTROL_FULLSCREEN = 'mediacontrol:fullscreen';\n  /**\n   * Fired when the media control shows\n   *\n   * @event MEDIACONTROL_SHOW\n   */\n\n  Events.MEDIACONTROL_SHOW = 'mediacontrol:show';\n  /**\n   * Fired when the media control hides\n   *\n   * @event MEDIACONTROL_HIDE\n   */\n\n  Events.MEDIACONTROL_HIDE = 'mediacontrol:hide';\n  /**\n   * Fired when mouse enters on the seekbar\n   *\n   * @event MEDIACONTROL_MOUSEMOVE_SEEKBAR\n   * @param {Object} event\n   * the javascript event\n   */\n\n  Events.MEDIACONTROL_MOUSEMOVE_SEEKBAR = 'mediacontrol:mousemove:seekbar';\n  /**\n   * Fired when mouse leaves the seekbar\n   *\n   * @event MEDIACONTROL_MOUSELEAVE_SEEKBAR\n   * @param {Object} event\n   * the javascript event\n   */\n\n  Events.MEDIACONTROL_MOUSELEAVE_SEEKBAR = 'mediacontrol:mouseleave:seekbar';\n  /**\n   * Fired when the media is being played\n   *\n   * @event MEDIACONTROL_PLAYING\n   */\n\n  Events.MEDIACONTROL_PLAYING = 'mediacontrol:playing';\n  /**\n   * Fired when the media is not being played\n   *\n   * @event MEDIACONTROL_NOTPLAYING\n   */\n\n  Events.MEDIACONTROL_NOTPLAYING = 'mediacontrol:notplaying';\n  /**\n   * Fired when the container was changed\n   *\n   * @event MEDIACONTROL_CONTAINERCHANGED\n   */\n\n  Events.MEDIACONTROL_CONTAINERCHANGED = 'mediacontrol:containerchanged';\n  /**\n   * Fired when the options were changed for the mediacontrol\n   *\n   * @event MEDIACONTROL_OPTIONS_CHANGE\n   */\n\n  Events.MEDIACONTROL_OPTIONS_CHANGE = 'mediacontrol:options:change';\n\n  /**\n   * @class BaseObject\n   * @constructor\n   * @extends Events\n   * @module base\n   */\n\n  var BaseObject = /*#__PURE__*/function (_Events) {\n    _inherits(BaseObject, _Events);\n\n    var _super = _createSuper(BaseObject);\n\n    _createClass(BaseObject, [{\n      key: \"options\",\n\n      /**\n       * returns the object options\n       * @property options\n       * @type Object\n       */\n      get: function get() {\n        return this._options;\n      }\n      /**\n       * @method constructor\n       * @param {Object} options\n       */\n\n    }]);\n\n    function BaseObject() {\n      var _this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _classCallCheck(this, BaseObject);\n\n      _this = _super.call(this, options);\n      _this._options = options;\n      _this.uniqueId = uniqueId('o');\n      return _this;\n    }\n    /**\n    * a unique id prefixed with `'o'`, `o1, o232`\n    *\n    * @property uniqueId\n    * @type String\n    */\n\n\n    return BaseObject;\n  }(Events);\n\n  /* eslint-disable no-var */\n  // Simple JavaScript Templating\n  // Paul Miller (http://paulmillr.com)\n  // http://underscorejs.org\n  // (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  var settings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  }; // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n\n  var noMatch = /(.)^/; // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n\n  var escapes = {\n    '\\'': '\\'',\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    \"\\u2028\": 'u2028',\n    \"\\u2029\": 'u2029'\n  };\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g; // List of HTML entities for escaping.\n\n  var htmlEntities = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#x27;'\n  };\n  var entityRe = new RegExp('[&<>\"\\']', 'g');\n\n  var escapeExpr = function escapeExpr(string) {\n    if (string === null) return '';\n    return ('' + string).replace(entityRe, function (match) {\n      return htmlEntities[match];\n    });\n  };\n\n  var counter = 0; // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n\n  var tmpl = function tmpl(text, data) {\n    var render; // Combine delimiters into one regular expression via alternation.\n\n    var matcher = new RegExp([(settings.escape || noMatch).source, (settings.interpolate || noMatch).source, (settings.evaluate || noMatch).source].join('|') + '|$', 'g'); // Compile the template source, escaping string literals appropriately.\n\n    var index = 0;\n    var source = '__p+=\\'';\n    text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, function (match) {\n        return '\\\\' + escapes[match];\n      });\n      if (escape) source += '\\'+\\n((__t=(' + escape + '))==null?\\'\\':escapeExpr(__t))+\\n\\'';\n      if (interpolate) source += '\\'+\\n((__t=(' + interpolate + '))==null?\\'\\':__t)+\\n\\'';\n      if (evaluate) source += '\\';\\n' + evaluate + '\\n__p+=\\'';\n      index = offset + match.length;\n      return match;\n    });\n    source += '\\';\\n'; // If a variable is not specified, place data values in local scope.\n\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n    source = 'var __t,__p=\\'\\',__j=Array.prototype.join,' + 'print=function(){__p+=__j.call(arguments,\\'\\');};\\n' + source + 'return __p;\\n//# sourceURL=/microtemplates/source[' + counter++ + ']';\n\n    try {\n      /*jshint -W054 */\n      // TODO: find a way to avoid eval\n      render = new Function(settings.variable || 'obj', 'escapeExpr', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, escapeExpr);\n\n    var template = function template(data) {\n      return render.call(this, data, escapeExpr);\n    }; // Provide the compiled function source as a convenience for precompilation.\n\n\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n    return template;\n  };\n\n  tmpl.settings = settings;\n\n  // Copyright 2014 Globo.com Player authors. All rights reserved.\n  var Styler = {\n    getStyleFor: function getStyleFor(style) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        baseUrl: ''\n      };\n      return zepto('<style class=\"clappr-style\"></style>').html(tmpl(style.toString())(options));\n    }\n  };\n\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n  /**\n   * A base class to create ui object.\n   * @class UIObject\n   * @constructor\n   * @extends BaseObject\n   * @module base\n   */\n\n  var UIObject = /*#__PURE__*/function (_BaseObject) {\n    _inherits(UIObject, _BaseObject);\n\n    var _super = _createSuper(UIObject);\n\n    _createClass(UIObject, [{\n      key: \"tagName\",\n\n      /**\n       * a unique id prefixed with `'c'`, `c1, c232`\n       *\n       * @property cid\n       * @type String\n       */\n\n      /**\n       * the dom element itself\n       *\n       * @property el\n       * @type HTMLElement\n       */\n\n      /**\n       * the dom element wrapped by `$`\n       *\n       * @property $el\n       * @type HTMLElement\n       */\n\n      /**\n       * gets the tag name for the ui component\n       * @method tagName\n       * @default div\n       * @return {String} tag's name\n       */\n      get: function get() {\n        return 'div';\n      }\n      /**\n       * a literal object mapping element's events to methods\n       * @property events\n       * @type Object\n       * @example\n       *\n       *```javascript\n       *\n       * class MyButton extends UIObject {\n       *   constructor(options) {\n       *     super(options)\n       *     this.myId = 0\n       *   }\n       *   get events() { return { 'click': 'myClick' } }\n       *   myClick(){ this.myId = 42 }\n       * }\n       *\n       * // when you click on MyButton the method `myClick` will be called\n       *```\n       */\n\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {};\n      }\n      /**\n       * a literal object mapping attributes and values to the element\n       * element's attribute name and the value the attribute value\n       * @property attributes\n       * @type Object\n       * @example\n       *\n       *```javascript\n       *\n       * class MyButton extends UIObject {\n       *    constructor(options) { super(options) }\n       *    get attributes() { return { class: 'my-button'} }\n       * }\n       *\n       * // MyButton.el.className will be 'my-button'\n       * ```\n       */\n\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {};\n      }\n      /**\n       * it builds an ui component by:\n       *  * creating an id for the component `cid`\n       *  * making sure the element is created `$el`\n       *  * delegating all `events` to the element\n       * @method constructor\n       * @param {Object} options the options object\n       */\n\n    }]);\n\n    function UIObject(options) {\n      var _this;\n\n      _classCallCheck(this, UIObject);\n\n      _this = _super.call(this, options);\n      _this.cid = uniqueId('c');\n\n      _this._ensureElement();\n\n      _this.delegateEvents();\n\n      return _this;\n    }\n    /**\n     * selects within the component.\n     * @method $\n     * @param {String} selector a selector to find within the component.\n     * @return {HTMLElement} an element, if it exists.\n     * @example\n     * ```javascript\n     * fullScreenBarUIComponent.$('.button-full') //will return only `.button-full` within the component\n     * ```\n     */\n\n\n    _createClass(UIObject, [{\n      key: \"$\",\n      value: function $(selector) {\n        return this.$el.find(selector);\n      }\n      /**\n       * render the component, usually attach it to a real existent `element`\n       * @method render\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        return this;\n      }\n      /**\n       * removes the ui component from DOM\n       * @method destroy\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.$el.remove();\n        this.stopListening();\n        this.undelegateEvents();\n        return this;\n      }\n      /**\n       * set element to `el` and `$el`\n       * @method setElement\n       * @param {HTMLElement} element\n       * @param {Boolean} delegate whether is delegate or not\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"setElement\",\n      value: function setElement(element, delegate) {\n        if (this.$el) this.undelegateEvents();\n        this.$el = zepto.zepto.isZ(element) ? element : zepto(element);\n        this.el = this.$el[0];\n        if (delegate !== false) this.delegateEvents();\n        return this;\n      }\n      /**\n       * delegates all the original `events` on `element` to its callbacks\n       * @method delegateEvents\n       * @param {Object} events\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"delegateEvents\",\n      value: function delegateEvents(events) {\n        if (!events) events = this.events;\n        this.undelegateEvents();\n\n        for (var key in events) {\n          var method = events[key];\n          if (method && method.constructor !== Function) method = this[events[key]];\n          if (!method) continue;\n          var match = key.match(delegateEventSplitter);\n          var eventName = match[1],\n              selector = match[2];\n          eventName += '.delegateEvents' + this.cid;\n          if (selector === '') this.$el.on(eventName, method.bind(this));else this.$el.on(eventName, selector, method.bind(this));\n        }\n\n        return this;\n      }\n      /**\n       * undelegats all the `events`\n       * @method undelegateEvents\n       * @return {UIObject} itself\n       */\n\n    }, {\n      key: \"undelegateEvents\",\n      value: function undelegateEvents() {\n        this.$el.off('.delegateEvents' + this.cid);\n        return this;\n      }\n      /**\n       * ensures the creation of this ui component\n       * @method _ensureElement\n       * @private\n       */\n\n    }, {\n      key: \"_ensureElement\",\n      value: function _ensureElement() {\n        if (!this.el) {\n          var attrs = zepto.extend(true, {}, this.attributes);\n          if (this.id) attrs.id = this.id;\n          if (this.className) attrs['class'] = this.className;\n          var $el = zepto(DomRecycler.create(this.tagName)).attr(attrs);\n          this.setElement($el, false);\n        } else {\n          this.setElement(this.el, false);\n        }\n      }\n    }]);\n\n    return UIObject;\n  }(BaseObject);\n\n  /**\n   * The PlayerError is responsible to receive and propagate errors.\n   * @class PlayerError\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   */\n\n  var PlayerError = /*#__PURE__*/function (_BaseObject) {\n    _inherits(PlayerError, _BaseObject);\n\n    var _super = _createSuper(PlayerError);\n\n    _createClass(PlayerError, [{\n      key: \"name\",\n      get: function get() {\n        return 'error';\n      }\n      /**\n       * @property Levels\n       * @type {Object} object with error levels\n       */\n\n    }], [{\n      key: \"Levels\",\n      get: function get() {\n        return {\n          FATAL: 'FATAL',\n          WARN: 'WARN',\n          INFO: 'INFO'\n        };\n      }\n    }]);\n\n    function PlayerError() {\n      var _this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var core = arguments.length > 1 ? arguments[1] : undefined;\n\n      _classCallCheck(this, PlayerError);\n\n      _this = _super.call(this, options);\n      _this.core = core;\n      return _this;\n    }\n    /**\n     * creates and trigger an error.\n     * @method createError\n     * @param {Object} err should be an object with code, description, level, origin, scope and raw error.\n     */\n\n\n    _createClass(PlayerError, [{\n      key: \"createError\",\n      value: function createError(err) {\n        if (!this.core) {\n          Log.warn(this.name, 'Core is not set. Error: ', err);\n          return;\n        }\n\n        this.core.trigger(Events.ERROR, err);\n      }\n    }]);\n\n    return PlayerError;\n  }(BaseObject);\n\n  var ErrorMixin = {\n    /**\n     * creates an error.\n     * @method createError\n     * @param {Object} error should be an object with code, description, level and raw error.\n     * @return {Object} Object with formatted error data including origin and scope\n     */\n    createError: function createError(error) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        useCodePrefix: true\n      };\n      var scope = this.constructor && this.constructor.type || '';\n      var origin = this.name || scope;\n      var i18n = this.i18n || this.core && this.core.i18n || this.container && this.container.i18n;\n      var prefixedCode = \"\".concat(origin, \":\").concat(error && error.code || 'unknown');\n      var defaultError = {\n        description: '',\n        level: PlayerError.Levels.FATAL,\n        origin: origin,\n        scope: scope,\n        raw: {}\n      };\n      var errorData = Object.assign({}, defaultError, error, {\n        code: options.useCodePrefix ? prefixedCode : error.code\n      });\n\n      if (i18n && errorData.level == PlayerError.Levels.FATAL && !errorData.UI) {\n        var defaultUI = {\n          title: i18n.t('default_error_title'),\n          message: i18n.t('default_error_message')\n        };\n        errorData.UI = defaultUI;\n      }\n\n      this.playerError ? this.playerError.createError(errorData) : Log.warn(origin, 'PlayerError is not defined. Error: ', errorData);\n      return errorData;\n    }\n  };\n\n  var UICorePlugin = /*#__PURE__*/function (_UIObject) {\n    _inherits(UICorePlugin, _UIObject);\n\n    var _super = _createSuper(UICorePlugin);\n\n    _createClass(UICorePlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.core.playerError;\n      }\n    }]);\n\n    function UICorePlugin(core) {\n      var _this;\n\n      _classCallCheck(this, UICorePlugin);\n\n      _this = _super.call(this, core.options);\n      _this.core = core;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      _this.render();\n\n      return _this;\n    }\n\n    _createClass(UICorePlugin, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }, {\n      key: \"getExternalInterface\",\n      value: function getExternalInterface() {\n        return {};\n      }\n    }, {\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.$el.show();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        this.stopListening();\n        this.$el.hide();\n        this.enabled = false;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return this;\n      }\n    }]);\n\n    return UICorePlugin;\n  }(UIObject);\n  Object.assign(UICorePlugin.prototype, ErrorMixin);\n\n  UICorePlugin.extend = function (properties) {\n    return extend(UICorePlugin, properties);\n  };\n\n  UICorePlugin.type = 'core';\n\n  var css_248z = \".container[data-container] {\\n  position: absolute;\\n  background-color: black;\\n  height: 100%;\\n  width: 100%;\\n  max-width: 100%; }\\n  .container[data-container] .chromeless {\\n    cursor: default; }\\n\\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\\n  cursor: pointer; }\\n\";\n\n  /**\n   * An abstraction to represent a container for a given playback\n   * TODO: describe its responsabilities\n   * @class Container\n   * @constructor\n   * @extends UIObject\n   * @module base\n   */\n\n  var Container = /*#__PURE__*/function (_UIObject) {\n    _inherits(Container, _UIObject);\n\n    var _super = _createSuper(Container);\n\n    _createClass(Container, [{\n      key: \"name\",\n\n      /**\n       * container's name\n       * @method name\n       * @default Container\n       * @return {String} container's name\n       */\n      get: function get() {\n        return 'Container';\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          \"class\": 'container',\n          'data-container': ''\n        };\n      }\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {\n          'click': 'clicked',\n          'dblclick': 'dblClicked',\n          'touchend': 'dblTap',\n          'contextmenu': 'onContextMenu',\n          'mouseenter': 'mouseEnter',\n          'mouseleave': 'mouseLeave'\n        };\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return this.playback.ended;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * (i.e if a live stream is playing smoothly, this will be false)\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return this.playback.buffering;\n      }\n      /**\n       * The internationalization plugin.\n       * @property i18n\n       * @type {Strings}\n       */\n\n    }, {\n      key: \"i18n\",\n      get: function get() {\n        return this._i18n;\n      }\n      /**\n       * checks if has closed caption tracks.\n       * @property hasClosedCaptionsTracks\n       * @type {Boolean}\n       */\n\n    }, {\n      key: \"hasClosedCaptionsTracks\",\n      get: function get() {\n        return this.playback.hasClosedCaptionsTracks;\n      }\n      /**\n       * gets the available closed caption tracks.\n       * @property closedCaptionsTracks\n       * @type {Array} an array of objects with at least 'id' and 'name' properties\n       */\n\n    }, {\n      key: \"closedCaptionsTracks\",\n      get: function get() {\n        return this.playback.closedCaptionsTracks;\n      }\n      /**\n       * gets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n\n    }, {\n      key: \"closedCaptionsTrackId\",\n      get: function get() {\n        return this.playback.closedCaptionsTrackId;\n      }\n      /**\n       * sets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n      ,\n      set: function set(trackId) {\n        this.playback.closedCaptionsTrackId = trackId;\n      }\n      /**\n       * it builds a container\n       * @method constructor\n       * @param {Object} options the options object\n       * @param {Strings} i18n the internationalization component\n       */\n\n    }]);\n\n    function Container(options, i18n, playerError) {\n      var _this;\n\n      _classCallCheck(this, Container);\n\n      _this = _super.call(this, options);\n      _this._i18n = i18n;\n      _this.currentTime = 0;\n      _this.volume = 100;\n      _this.playback = options.playback;\n      _this.playerError = playerError;\n      _this.settings = zepto.extend(true, {}, _this.playback.settings);\n      _this.isReady = false;\n      _this.mediaControlDisabled = false;\n      _this.plugins = [_this.playback];\n      _this.dblTapHandler = new DoubleEventHandler(500);\n      _this.clickTimer = null;\n      _this.clickDelay = 200; // FIXME: could be a player option\n\n      _this.bindEvents();\n\n      return _this;\n    }\n    /**\n     * binds playback events to the methods of the container.\n     * it listens to playback's events and triggers them as container events.\n     *\n     * | Playback |\n     * |----------|\n     * | progress |\n     * | timeupdate |\n     * | ready |\n     * | buffering |\n     * | bufferfull |\n     * | settingsupdate |\n     * | loadedmetadata |\n     * | highdefinitionupdate |\n     * | bitrate |\n     * | playbackstate |\n     * | dvr |\n     * | mediacontrol_disable |\n     * | mediacontrol_enable |\n     * | ended |\n     * | play |\n     * | pause |\n     * | error |\n     *\n     * ps: the events usually translate from PLABACK_x to CONTAINER_x, you can check all the events at `Event` class.\n     *\n     * @method bindEvents\n     */\n\n\n    _createClass(Container, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {\n        this.listenTo(this.playback, Events.PLAYBACK_PROGRESS, this.onProgress);\n        this.listenTo(this.playback, Events.PLAYBACK_TIMEUPDATE, this.timeUpdated);\n        this.listenTo(this.playback, Events.PLAYBACK_READY, this.ready);\n        this.listenTo(this.playback, Events.PLAYBACK_BUFFERING, this.onBuffering);\n        this.listenTo(this.playback, Events.PLAYBACK_BUFFERFULL, this.bufferfull);\n        this.listenTo(this.playback, Events.PLAYBACK_SETTINGSUPDATE, this.settingsUpdate);\n        this.listenTo(this.playback, Events.PLAYBACK_LOADEDMETADATA, this.loadedMetadata);\n        this.listenTo(this.playback, Events.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinitionUpdate);\n        this.listenTo(this.playback, Events.PLAYBACK_BITRATE, this.updateBitrate);\n        this.listenTo(this.playback, Events.PLAYBACK_PLAYBACKSTATE, this.playbackStateChanged);\n        this.listenTo(this.playback, Events.PLAYBACK_DVR, this.playbackDvrStateChanged);\n        this.listenTo(this.playback, Events.PLAYBACK_MEDIACONTROL_DISABLE, this.disableMediaControl);\n        this.listenTo(this.playback, Events.PLAYBACK_MEDIACONTROL_ENABLE, this.enableMediaControl);\n        this.listenTo(this.playback, Events.PLAYBACK_SEEK, this.onSeek);\n        this.listenTo(this.playback, Events.PLAYBACK_SEEKED, this.onSeeked);\n        this.listenTo(this.playback, Events.PLAYBACK_ENDED, this.onEnded);\n        this.listenTo(this.playback, Events.PLAYBACK_PLAY, this.playing);\n        this.listenTo(this.playback, Events.PLAYBACK_PAUSE, this.paused);\n        this.listenTo(this.playback, Events.PLAYBACK_STOP, this.stopped);\n        this.listenTo(this.playback, Events.PLAYBACK_ERROR, this.error);\n        this.listenTo(this.playback, Events.PLAYBACK_SUBTITLE_AVAILABLE, this.subtitleAvailable);\n        this.listenTo(this.playback, Events.PLAYBACK_SUBTITLE_CHANGED, this.subtitleChanged);\n      }\n    }, {\n      key: \"subtitleAvailable\",\n      value: function subtitleAvailable() {\n        this.trigger(Events.CONTAINER_SUBTITLE_AVAILABLE);\n      }\n    }, {\n      key: \"subtitleChanged\",\n      value: function subtitleChanged(track) {\n        this.trigger(Events.CONTAINER_SUBTITLE_CHANGED, track);\n      }\n    }, {\n      key: \"playbackStateChanged\",\n      value: function playbackStateChanged(state) {\n        this.trigger(Events.CONTAINER_PLAYBACKSTATE, state);\n      }\n    }, {\n      key: \"playbackDvrStateChanged\",\n      value: function playbackDvrStateChanged(dvrInUse) {\n        this.settings = this.playback.settings;\n        this.dvrInUse = dvrInUse;\n        this.trigger(Events.CONTAINER_PLAYBACKDVRSTATECHANGED, dvrInUse);\n      }\n    }, {\n      key: \"updateBitrate\",\n      value: function updateBitrate(newBitrate) {\n        this.trigger(Events.CONTAINER_BITRATE, newBitrate);\n      }\n    }, {\n      key: \"statsReport\",\n      value: function statsReport(metrics) {\n        this.trigger(Events.CONTAINER_STATS_REPORT, metrics);\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return this.playback.getPlaybackType();\n      }\n      /**\n       * returns `true` if DVR is enable otherwise `false`.\n       * @method isDvrEnabled\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrEnabled\",\n      value: function isDvrEnabled() {\n        return !!this.playback.dvrEnabled;\n      }\n      /**\n       * returns `true` if DVR is in use otherwise `false`.\n       * @method isDvrInUse\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrInUse\",\n      value: function isDvrInUse() {\n        return !!this.dvrInUse;\n      }\n      /**\n       * destroys the container\n       * @method destroy\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.disableResizeObserver();\n        this.trigger(Events.CONTAINER_DESTROYED, this, this.name);\n        this.stopListening();\n        this.plugins.forEach(function (plugin) {\n          return plugin.destroy();\n        });\n        this.$el.remove();\n      }\n    }, {\n      key: \"setStyle\",\n      value: function setStyle(style) {\n        this.$el.css(style);\n      }\n    }, {\n      key: \"animate\",\n      value: function animate(style, duration) {\n        return this.$el.animate(style, duration).promise();\n      }\n    }, {\n      key: \"ready\",\n      value: function ready() {\n        this.isReady = true;\n        this.trigger(Events.CONTAINER_READY, this.name);\n      }\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return this.playback.isPlaying();\n      }\n    }, {\n      key: \"getStartTimeOffset\",\n      value: function getStartTimeOffset() {\n        return this.playback.getStartTimeOffset();\n      }\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this.currentTime;\n      }\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        return this.playback.getDuration();\n      }\n    }, {\n      key: \"error\",\n      value: function error(_error) {\n        if (!this.isReady) this.ready();\n        this.trigger(Events.CONTAINER_ERROR, _error, this.name);\n      }\n    }, {\n      key: \"loadedMetadata\",\n      value: function loadedMetadata(metadata) {\n        this.trigger(Events.CONTAINER_LOADEDMETADATA, metadata);\n      }\n    }, {\n      key: \"timeUpdated\",\n      value: function timeUpdated(timeProgress) {\n        this.currentTime = timeProgress.current;\n        this.trigger(Events.CONTAINER_TIMEUPDATE, timeProgress, this.name);\n      }\n    }, {\n      key: \"onProgress\",\n      value: function onProgress() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        this.trigger.apply(this, [Events.CONTAINER_PROGRESS].concat(args, [this.name]));\n      }\n    }, {\n      key: \"playing\",\n      value: function playing() {\n        this.trigger(Events.CONTAINER_PLAY, this.name);\n      }\n    }, {\n      key: \"paused\",\n      value: function paused() {\n        this.trigger(Events.CONTAINER_PAUSE, this.name);\n      }\n      /**\n       * plays the playback\n       * @method play\n       */\n\n    }, {\n      key: \"play\",\n      value: function play() {\n        this.playback.play();\n      }\n      /**\n       * stops the playback\n       * @method stop\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this.playback.stop();\n        this.currentTime = 0;\n      }\n      /**\n       * pauses the playback\n       * @method pause\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.playback.pause();\n      }\n    }, {\n      key: \"onEnded\",\n      value: function onEnded() {\n        this.trigger(Events.CONTAINER_ENDED, this, this.name);\n        this.currentTime = 0;\n      }\n    }, {\n      key: \"stopped\",\n      value: function stopped() {\n        this.trigger(Events.CONTAINER_STOP);\n      }\n    }, {\n      key: \"clicked\",\n      value: function clicked() {\n        var _this2 = this;\n\n        if (!this.options.chromeless || this.options.allowUserInteraction) {\n          // The event is delayed because it can be canceled by a double-click event\n          // An example of use is to prevent playback from pausing when switching to full screen\n          this.clickTimer = setTimeout(function () {\n            _this2.clickTimer && _this2.trigger(Events.CONTAINER_CLICK, _this2, _this2.name);\n          }, this.clickDelay);\n        }\n      }\n    }, {\n      key: \"cancelClicked\",\n      value: function cancelClicked() {\n        clearTimeout(this.clickTimer);\n        this.clickTimer = null;\n      }\n    }, {\n      key: \"dblClicked\",\n      value: function dblClicked() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) {\n          this.cancelClicked();\n          this.trigger(Events.CONTAINER_DBLCLICK, this, this.name);\n        }\n      }\n    }, {\n      key: \"dblTap\",\n      value: function dblTap(evt) {\n        var _this3 = this;\n\n        if (!this.options.chromeless || this.options.allowUserInteraction) {\n          this.dblTapHandler.handle(evt, function () {\n            _this3.cancelClicked();\n\n            _this3.trigger(Events.CONTAINER_DBLCLICK, _this3, _this3.name);\n          });\n        }\n      }\n    }, {\n      key: \"onContextMenu\",\n      value: function onContextMenu(event) {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.trigger(Events.CONTAINER_CONTEXTMENU, event, this.name);\n      }\n    }, {\n      key: \"seek\",\n      value: function seek(time) {\n        this.playback.seek(time);\n      }\n    }, {\n      key: \"onSeek\",\n      value: function onSeek(time) {\n        this.trigger(Events.CONTAINER_SEEK, time, this.name);\n      }\n    }, {\n      key: \"onSeeked\",\n      value: function onSeeked() {\n        this.trigger(Events.CONTAINER_SEEKED, this.name);\n      }\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {\n        var duration = this.getDuration();\n\n        if (percentage >= 0 && percentage <= 100) {\n          var time = duration * (percentage / 100);\n          this.seek(time);\n        }\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(value) {\n        this.volume = parseFloat(value);\n        this.trigger(Events.CONTAINER_VOLUME, this.volume, this.name);\n        this.playback.volume(this.volume);\n      }\n    }, {\n      key: \"fullscreen\",\n      value: function fullscreen() {\n        this.trigger(Events.CONTAINER_FULLSCREEN, this.name);\n      }\n    }, {\n      key: \"onBuffering\",\n      value: function onBuffering() {\n        this.trigger(Events.CONTAINER_STATE_BUFFERING, this.name);\n      }\n    }, {\n      key: \"bufferfull\",\n      value: function bufferfull() {\n        this.trigger(Events.CONTAINER_STATE_BUFFERFULL, this.name);\n      }\n      /**\n       * adds plugin to the container\n       * @method addPlugin\n       * @param {Object} plugin\n       */\n\n    }, {\n      key: \"addPlugin\",\n      value: function addPlugin(plugin) {\n        this.plugins.push(plugin);\n      }\n      /**\n       * checks if a plugin, given its name, exist\n       * @method hasPlugin\n       * @param {String} name\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"hasPlugin\",\n      value: function hasPlugin(name) {\n        return !!this.getPlugin(name);\n      }\n      /**\n       * get the plugin given its name\n       * @method getPlugin\n       * @param {String} name\n       */\n\n    }, {\n      key: \"getPlugin\",\n      value: function getPlugin(name) {\n        return this.plugins.filter(function (plugin) {\n          return plugin.name === name;\n        })[0];\n      }\n    }, {\n      key: \"mouseEnter\",\n      value: function mouseEnter() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.trigger(Events.CONTAINER_MOUSE_ENTER);\n      }\n    }, {\n      key: \"mouseLeave\",\n      value: function mouseLeave() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.trigger(Events.CONTAINER_MOUSE_LEAVE);\n      }\n    }, {\n      key: \"settingsUpdate\",\n      value: function settingsUpdate() {\n        this.settings = this.playback.settings;\n        this.trigger(Events.CONTAINER_SETTINGSUPDATE);\n      }\n    }, {\n      key: \"highDefinitionUpdate\",\n      value: function highDefinitionUpdate(isHD) {\n        this.trigger(Events.CONTAINER_HIGHDEFINITIONUPDATE, isHD);\n      }\n    }, {\n      key: \"isHighDefinitionInUse\",\n      value: function isHighDefinitionInUse() {\n        return this.playback.isHighDefinitionInUse();\n      }\n    }, {\n      key: \"disableMediaControl\",\n      value: function disableMediaControl() {\n        if (!this.mediaControlDisabled) {\n          this.mediaControlDisabled = true;\n          this.trigger(Events.CONTAINER_MEDIACONTROL_DISABLE);\n        }\n      }\n    }, {\n      key: \"enableMediaControl\",\n      value: function enableMediaControl() {\n        if (this.mediaControlDisabled) {\n          this.mediaControlDisabled = false;\n          this.trigger(Events.CONTAINER_MEDIACONTROL_ENABLE);\n        }\n      }\n    }, {\n      key: \"updateStyle\",\n      value: function updateStyle() {\n        if (!this.options.chromeless || this.options.allowUserInteraction) this.$el.removeClass('chromeless');else this.$el.addClass('chromeless');\n      }\n    }, {\n      key: \"enableResizeObserver\",\n      value: function enableResizeObserver() {\n        var _this4 = this;\n\n        this.disableResizeObserver();\n        this.resizeObserverInterval = setInterval(function () {\n          return _this4.checkResize();\n        }, 500);\n      }\n    }, {\n      key: \"disableResizeObserver\",\n      value: function disableResizeObserver() {\n        this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);\n      }\n    }, {\n      key: \"checkResize\",\n      value: function checkResize() {\n        var newSize = {\n          width: this.el.clientWidth,\n          height: this.el.clientHeight\n        };\n\n        var _ref = this.currentSize || {},\n            width = _ref.width,\n            height = _ref.height;\n\n        var isResize = height !== newSize.height || width !== newSize.width;\n\n        if (isResize) {\n          this.currentSize = newSize;\n          this.trigger(Events.CONTAINER_RESIZE, newSize);\n        }\n      }\n      /**\n       * enables to configure the container after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure(options) {\n        this._options = zepto.extend(true, this._options, options);\n        this.updateStyle();\n        this.playback.configure(this.options);\n        this.trigger(Events.CONTAINER_OPTIONS_CHANGE);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var style = Styler.getStyleFor(css_248z.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.$el.append(this.playback.render().el);\n        this.updateStyle();\n        this.checkResize();\n        this.enableResizeObserver();\n        return this;\n      }\n    }]);\n\n    return Container;\n  }(UIObject);\n  Object.assign(Container.prototype, ErrorMixin);\n\n  /**\n   * An abstraction to represent a generic playback, it's like an interface to be implemented by subclasses.\n   * @class Playback\n   * @constructor\n   * @extends UIObject\n   * @module base\n   */\n\n  var Playback = /*#__PURE__*/function (_UIObject) {\n    _inherits(Playback, _UIObject);\n\n    var _super = _createSuper(Playback);\n\n    _createClass(Playback, [{\n      key: \"isAudioOnly\",\n\n      /**\n      * Determine if the playback does not contain video/has video but video should be ignored.\n      * @property isAudioOnly\n      * @type Boolean\n      */\n      get: function get() {\n        return false;\n      }\n    }, {\n      key: \"isAdaptive\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * The internationalization plugin.\n       * @property i18n\n       * @type {Strings}\n       */\n\n    }, {\n      key: \"i18n\",\n      get: function get() {\n        return this._i18n;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * (i.e if a live stream is playing smoothly, this will be false)\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * @method constructor\n       * @param {Object} options the options object\n       * @param {Strings} i18n the internationalization component\n       */\n\n    }]);\n\n    function Playback(options, i18n, playerError) {\n      var _this;\n\n      _classCallCheck(this, Playback);\n\n      _this = _super.call(this, options);\n      _this.settings = {};\n      _this._i18n = i18n;\n      _this.playerError = playerError;\n      _this._consented = false;\n      return _this;\n    }\n    /**\n     * Gives user consent to playback (mobile devices).\n     * @method consent\n     * @param {Function} callback function called when playback is consented\n     */\n\n\n    _createClass(Playback, [{\n      key: \"consent\",\n      value: function consent(cb) {\n        typeof cb === 'function' && cb();\n      }\n      /**\n       * plays the playback.\n       * @method play\n       */\n\n    }, {\n      key: \"play\",\n      value: function play() {}\n      /**\n       * pauses the playback.\n       * @method pause\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {}\n      /**\n       * stops the playback.\n       * @method stop\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {}\n      /**\n       * seeks the playback to a given `time` in seconds\n       * @method seek\n       * @param {Number} time should be a number between 0 and the video duration\n       */\n\n    }, {\n      key: \"seek\",\n      value: function seek(time) {} // eslint-disable-line no-unused-vars\n\n      /**\n       * seeks the playback to a given `percentage` in percentage\n       * @method seekPercentage\n       * @param {Number} time should be a number between 0 and 100\n       */\n\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {} // eslint-disable-line no-unused-vars\n\n      /**\n       * The time that \"0\" now represents relative to when playback started.\n       * For a stream with a sliding window this will increase as content is\n       * removed from the beginning.\n       * @method getStartTimeOffset\n       * @return {Number} time (in seconds) that time \"0\" represents.\n       */\n\n    }, {\n      key: \"getStartTimeOffset\",\n      value: function getStartTimeOffset() {\n        return 0;\n      }\n      /**\n       * gets the duration in seconds\n       * @method getDuration\n       * @return {Number} duration (in seconds) of the current source\n       */\n\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        return 0;\n      }\n      /**\n       * checks if the playback is playing.\n       * @method isPlaying\n       * @return {Boolean} `true` if the current playback is playing, otherwise `false`\n       */\n\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return false;\n      }\n      /**\n       * checks if the playback is ready.\n       * @property isReady\n       * @type {Boolean} `true` if the current playback is ready, otherwise `false`\n       */\n\n    }, {\n      key: \"getPlaybackType\",\n      // eslint-disable-line no-unused-vars\n\n      /**\n       * gets the playback type (`'vod', 'live', 'aod'`)\n       * @method getPlaybackType\n       * @return {String} you should write the playback type otherwise it'll assume `'no_op'`\n       * @example\n       * ```javascript\n       * html5VideoPlayback.getPlaybackType() //vod\n       * html5AudioPlayback.getPlaybackType() //aod\n       * html5VideoPlayback.getPlaybackType() //live\n       * flashHlsPlayback.getPlaybackType() //live\n       * ```\n       */\n      value: function getPlaybackType() {\n        return Playback.NO_OP;\n      }\n      /**\n       * checks if the playback is in HD.\n       * @method isHighDefinitionInUse\n       * @return {Boolean} `true` if the playback is playing in HD, otherwise `false`\n       */\n\n    }, {\n      key: \"isHighDefinitionInUse\",\n      value: function isHighDefinitionInUse() {\n        return false;\n      }\n      /**\n       * mutes the playback\n       * @method mute\n       */\n\n    }, {\n      key: \"mute\",\n      value: function mute() {}\n      /**\n       * restores the playback volume\n       * @method unmute\n       */\n\n    }, {\n      key: \"unmute\",\n      value: function unmute() {}\n      /**\n       * sets the volume for the playback\n       * @method volume\n       * @param {Number} value a number between 0 (`muted`) to 100 (`max`)\n       */\n\n    }, {\n      key: \"volume\",\n      value: function volume(value) {} // eslint-disable-line no-unused-vars\n\n      /**\n       * enables to configure the playback after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure(options) {\n        this._options = zepto.extend(true, this._options, options);\n      }\n      /**\n       * attempt to autoplays the playback.\n       * @method attemptAutoPlay\n       */\n\n    }, {\n      key: \"attemptAutoPlay\",\n      value: function attemptAutoPlay() {\n        var _this2 = this;\n\n        this.canAutoPlay(function (result, error) {\n          // eslint-disable-line no-unused-vars\n          result && _this2.play();\n        });\n      }\n      /**\n       * checks if the playback can autoplay.\n       * @method canAutoPlay\n       * @param {Function} callback function where first param is Boolean and second param is playback Error or null\n       */\n\n    }, {\n      key: \"canAutoPlay\",\n      value: function canAutoPlay(cb) {\n        cb(true, null); // Assume playback can autoplay by default\n      }\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return false;\n      }\n      /**\n       * checks if the playback has closed caption tracks.\n       * @property hasClosedCaptionsTracks\n       * @type {Boolean}\n       */\n\n    }, {\n      key: \"hasClosedCaptionsTracks\",\n      get: function get() {\n        return this.closedCaptionsTracks.length > 0;\n      }\n      /**\n       * gets the playback available closed caption tracks.\n       * @property closedCaptionsTracks\n       * @type {Array} an array of objects with at least 'id' and 'name' properties\n       */\n\n    }, {\n      key: \"closedCaptionsTracks\",\n      get: function get() {\n        return [];\n      }\n      /**\n       * gets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n\n    }, {\n      key: \"closedCaptionsTrackId\",\n      get: function get() {\n        return -1;\n      }\n      /**\n       * sets the selected closed caption track index. (-1 is disabled)\n       * @property closedCaptionsTrackId\n       * @type {Number}\n       */\n      ,\n      set: function set(trackId) {}\n    }]);\n\n    return Playback;\n  }(UIObject);\n  Object.assign(Playback.prototype, ErrorMixin);\n\n  Playback.extend = function (properties) {\n    return extend(Playback, properties);\n  };\n  /**\n   * checks if the playback can play a given `source`\n   * If a mimeType is provided then this will be used instead of inferring the mimetype\n   * from the source extension.\n   * @method canPlay\n   * @static\n   * @param {String} source the given source ex: `http://example.com/play.mp4`\n   * @param {String} [mimeType] the given mime type, ex: `'application/vnd.apple.mpegurl'`\n   * @return {Boolean} `true` if the playback is playable, otherwise `false`\n   */\n\n\n  Playback.canPlay = function (source, mimeType) {\n    // eslint-disable-line no-unused-vars\n    return false;\n  };\n  /**\n   * a playback type for video on demand\n   *\n   * @property VOD\n   * @static\n   * @type String\n   */\n\n\n  Playback.VOD = 'vod';\n  /**\n   * a playback type for audio on demand\n   *\n   * @property AOD\n   * @static\n   * @type String\n   */\n\n  Playback.AOD = 'aod';\n  /**\n   * a playback type for live video\n   *\n   * @property LIVE\n   * @static\n   * @type String\n   */\n\n  Playback.LIVE = 'live';\n  /**\n   * a default playback type\n   *\n   * @property NO_OP\n   * @static\n   * @type String\n   */\n\n  Playback.NO_OP = 'no_op';\n  /**\n   * the plugin type\n   *\n   * @property type\n   * @static\n   * @type String\n   */\n\n  Playback.type = 'playback';\n\n  var ContainerFactory = /*#__PURE__*/function (_BaseObject) {\n    _inherits(ContainerFactory, _BaseObject);\n\n    var _super = _createSuper(ContainerFactory);\n\n    _createClass(ContainerFactory, [{\n      key: \"options\",\n      get: function get() {\n        return this._options;\n      },\n      set: function set(options) {\n        this._options = options;\n      }\n    }]);\n\n    function ContainerFactory(options, loader, i18n, playerError) {\n      var _this;\n\n      _classCallCheck(this, ContainerFactory);\n\n      _this = _super.call(this, options);\n      _this._i18n = i18n;\n      _this.loader = loader;\n      _this.playerError = playerError;\n      return _this;\n    }\n\n    _createClass(ContainerFactory, [{\n      key: \"createContainers\",\n      value: function createContainers() {\n        var _this2 = this;\n\n        return zepto.Deferred(function (promise) {\n          promise.resolve(_this2.options.sources.map(function (source) {\n            return _this2.createContainer(source);\n          }));\n        });\n      }\n    }, {\n      key: \"findPlaybackPlugin\",\n      value: function findPlaybackPlugin(source, mimeType) {\n        return this.loader.playbackPlugins.filter(function (p) {\n          return p.canPlay(source, mimeType);\n        })[0];\n      }\n    }, {\n      key: \"createContainer\",\n      value: function createContainer(source) {\n        var resolvedSource = null;\n        var mimeType = this.options.mimeType;\n\n        if (_typeof(source) === 'object') {\n          resolvedSource = source.source.toString();\n          if (source.mimeType) mimeType = source.mimeType;\n        } else {\n          resolvedSource = source.toString();\n        }\n\n        if (resolvedSource.match(/^\\/\\//)) resolvedSource = window.location.protocol + resolvedSource;\n\n        var options = _objectSpread2(_objectSpread2({}, this.options), {}, {\n          src: resolvedSource,\n          mimeType: mimeType\n        });\n\n        var playbackPlugin = this.findPlaybackPlugin(resolvedSource, mimeType); // Fallback to empty playback object until we sort out unsupported sources error without NoOp playback\n\n        var playback = playbackPlugin ? new playbackPlugin(options, this._i18n, this.playerError) : new Playback();\n        options = _objectSpread2(_objectSpread2({}, options), {}, {\n          playback: playback\n        });\n        var container = new Container(options, this._i18n, this.playerError);\n        var defer = zepto.Deferred();\n        defer.promise(container);\n        this.addContainerPlugins(container);\n        this.listenToOnce(container, Events.CONTAINER_READY, function () {\n          return defer.resolve(container);\n        });\n        return container;\n      }\n    }, {\n      key: \"addContainerPlugins\",\n      value: function addContainerPlugins(container) {\n        this.loader.containerPlugins.forEach(function (Plugin) {\n          container.addPlugin(new Plugin(container));\n        });\n      }\n    }]);\n\n    return ContainerFactory;\n  }(BaseObject);\n\n  var css_248z$1 = \"[data-player] {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  -o-user-select: none;\\n  user-select: none;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  transform: translate3d(0, 0, 0);\\n  position: relative;\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font-style: normal;\\n  font-weight: normal;\\n  text-align: center;\\n  overflow: hidden;\\n  font-size: 100%;\\n  font-family: \\\"Roboto\\\", \\\"Open Sans\\\", Arial, sans-serif;\\n  text-shadow: 0 0 0;\\n  box-sizing: border-box; }\\n  [data-player]:focus {\\n    outline: 0; }\\n  [data-player] * {\\n    box-sizing: inherit; }\\n  [data-player] > * {\\n    float: none;\\n    max-width: none; }\\n  [data-player] > div {\\n    display: block; }\\n  [data-player].fullscreen {\\n    width: 100% !important;\\n    height: 100% !important;\\n    top: 0;\\n    left: 0; }\\n  [data-player].nocursor {\\n    cursor: none; }\\n\\n.clappr-style {\\n  display: none !important; }\\n\";\n\n  var css_248z$2 = \"[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\\n  margin: 0;\\n  padding: 0;\\n  border: 0;\\n  font: inherit;\\n  font-size: 100%;\\n  vertical-align: baseline; }\\n\\n[data-player] table {\\n  border-collapse: collapse;\\n  border-spacing: 0; }\\n\\n[data-player] caption, [data-player] th, [data-player] td {\\n  text-align: left;\\n  font-weight: normal;\\n  vertical-align: middle; }\\n\\n[data-player] q, [data-player] blockquote {\\n  quotes: none; }\\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\\n    content: \\\"\\\";\\n    content: none; }\\n\\n[data-player] a img {\\n  border: none; }\\n\";\n\n  /**\n   * The Core is responsible to manage Containers and the player state.\n   * @class Core\n   * @constructor\n   * @extends UIObject\n   * @module components\n   */\n\n  var Core = /*#__PURE__*/function (_UIObject) {\n    _inherits(Core, _UIObject);\n\n    var _super = _createSuper(Core);\n\n    _createClass(Core, [{\n      key: \"events\",\n      get: function get() {\n        return {\n          'webkitfullscreenchange': 'handleFullscreenChange',\n          'mousemove': 'onMouseMove',\n          'mouseleave': 'onMouseLeave'\n        };\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-player': '',\n          tabindex: 9999\n        };\n      }\n      /**\n       * checks if the core is ready.\n       * @property isReady\n       * @type {Boolean} `true` if the core is ready, otherwise `false`\n       */\n\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return !!this.ready;\n      }\n      /**\n       * The internationalization plugin.\n       * @property i18n\n       * @type {Strings}\n       */\n\n    }, {\n      key: \"i18n\",\n      get: function get() {\n        return this.getPlugin('strings') || {\n          t: function t(key) {\n            return key;\n          }\n        };\n      }\n      /**\n       * @deprecated\n       * This property currently exists for backward compatibility reasons.\n       * If you need to access the media control instance, use the method getPlugin('media_control').\n       * This approach is still not recommended.\n       */\n\n    }, {\n      key: \"mediaControl\",\n      get: function get() {\n        return this._mediaControl || (this._mediaControl = this.getPlugin('media_control')) || this.dummyMediaControl;\n      }\n    }, {\n      key: \"dummyMediaControl\",\n      get: function get() {\n        if (this._dummyMediaControl) return this._dummyMediaControl;\n        this._dummyMediaControl = new UICorePlugin(this);\n        return this._dummyMediaControl;\n      }\n      /**\n       * gets the active container reference.\n       * @property activeContainer\n       * @type {Object}\n       */\n\n    }, {\n      key: \"activeContainer\",\n      get: function get() {\n        return this._activeContainer;\n      }\n      /**\n       * sets the active container reference and trigger a event with the new reference.\n       * @property activeContainer\n       * @type {Object}\n       */\n      ,\n      set: function set(container) {\n        this._activeContainer = container;\n        this.trigger(Events.CORE_ACTIVE_CONTAINER_CHANGED, this._activeContainer);\n      }\n      /**\n       * gets the active playback reference.\n       * @property activePlayback\n       * @type {Object}\n       */\n\n    }, {\n      key: \"activePlayback\",\n      get: function get() {\n        return this.activeContainer && this.activeContainer.playback;\n      }\n    }]);\n\n    function Core(options) {\n      var _this;\n\n      _classCallCheck(this, Core);\n\n      _this = _super.call(this, options);\n      _this.playerError = new PlayerError(options, _assertThisInitialized(_this));\n\n      _this.configureDomRecycler();\n\n      _this.firstResize = true;\n      _this.plugins = [];\n      _this.containers = []; //FIXME fullscreen api sucks\n\n      _this._boundFullscreenHandler = function () {\n        return _this.handleFullscreenChange();\n      };\n\n      zepto(document).bind('fullscreenchange', _this._boundFullscreenHandler);\n      zepto(document).bind('MSFullscreenChange', _this._boundFullscreenHandler);\n      zepto(document).bind('mozfullscreenchange', _this._boundFullscreenHandler);\n      Browser.isMobile && zepto(window).bind('resize', function (o) {\n        _this.handleWindowResize(o);\n      });\n      return _this;\n    }\n\n    _createClass(Core, [{\n      key: \"configureDomRecycler\",\n      value: function configureDomRecycler() {\n        var recycleVideo = this.options && this.options.playback && this.options.playback.recycleVideo;\n        DomRecycler.configure({\n          recycleVideo: recycleVideo\n        });\n      }\n    }, {\n      key: \"createContainers\",\n      value: function createContainers(options) {\n        this.defer = zepto.Deferred();\n        this.defer.promise(this);\n        this.containerFactory = new ContainerFactory(options, options.loader, this.i18n, this.playerError);\n        this.prepareContainers();\n      }\n    }, {\n      key: \"prepareContainers\",\n      value: function prepareContainers() {\n        var _this2 = this;\n\n        this.containerFactory.createContainers().then(function (containers) {\n          return _this2.setupContainers(containers);\n        }).then(function (containers) {\n          return _this2.resolveOnContainersReady(containers);\n        });\n      }\n    }, {\n      key: \"updateSize\",\n      value: function updateSize() {\n        this.isFullscreen() ? this.setFullscreen() : this.setPlayerSize();\n      }\n    }, {\n      key: \"setFullscreen\",\n      value: function setFullscreen() {\n        if (!Browser.isiOS) {\n          this.$el.addClass('fullscreen');\n          this.$el.removeAttr('style');\n          this.previousSize = {\n            width: this.options.width,\n            height: this.options.height\n          };\n          this.currentSize = {\n            width: zepto(window).width(),\n            height: zepto(window).height()\n          };\n        }\n      }\n    }, {\n      key: \"setPlayerSize\",\n      value: function setPlayerSize() {\n        this.$el.removeClass('fullscreen');\n        this.currentSize = this.previousSize;\n        this.previousSize = {\n          width: zepto(window).width(),\n          height: zepto(window).height()\n        };\n        this.resize(this.currentSize);\n      }\n    }, {\n      key: \"resize\",\n      value: function resize(options) {\n        if (!isNumber(options.height) && !isNumber(options.width)) {\n          this.el.style.height = \"\".concat(options.height);\n          this.el.style.width = \"\".concat(options.width);\n        } else {\n          this.el.style.height = \"\".concat(options.height, \"px\");\n          this.el.style.width = \"\".concat(options.width, \"px\");\n        }\n\n        this.previousSize = {\n          width: this.options.width,\n          height: this.options.height\n        };\n        this.options.width = options.width;\n        this.options.height = options.height;\n        this.currentSize = options;\n        this.triggerResize(this.currentSize);\n      }\n    }, {\n      key: \"enableResizeObserver\",\n      value: function enableResizeObserver() {\n        var _this3 = this;\n\n        this.disableResizeObserver();\n\n        var checkSizeCallback = function checkSizeCallback() {\n          _this3.triggerResize({\n            width: _this3.el.clientWidth,\n            height: _this3.el.clientHeight\n          });\n        };\n\n        this.resizeObserverInterval = setInterval(checkSizeCallback, 500);\n      }\n    }, {\n      key: \"triggerResize\",\n      value: function triggerResize(newSize) {\n        var thereWasChange = this.firstResize || this.oldHeight !== newSize.height || this.oldWidth !== newSize.width;\n\n        if (thereWasChange) {\n          this.oldHeight = newSize.height;\n          this.oldWidth = newSize.width;\n          this.computedSize = newSize;\n          this.firstResize = false;\n          this.trigger(Events.CORE_RESIZE, newSize);\n        }\n      }\n    }, {\n      key: \"disableResizeObserver\",\n      value: function disableResizeObserver() {\n        this.resizeObserverInterval && clearInterval(this.resizeObserverInterval);\n        this.resizeObserverInterval = null;\n      }\n    }, {\n      key: \"resolveOnContainersReady\",\n      value: function resolveOnContainersReady(containers) {\n        var _this4 = this;\n\n        zepto.when.apply(zepto, containers).done(function () {\n          _this4.defer.resolve(_this4);\n\n          _this4.ready = true;\n\n          _this4.trigger(Events.CORE_READY);\n        });\n      }\n    }, {\n      key: \"addPlugin\",\n      value: function addPlugin(plugin) {\n        this.plugins.push(plugin);\n      }\n    }, {\n      key: \"hasPlugin\",\n      value: function hasPlugin(name) {\n        return !!this.getPlugin(name);\n      }\n    }, {\n      key: \"getPlugin\",\n      value: function getPlugin(name) {\n        return this.plugins.filter(function (plugin) {\n          return plugin.name === name;\n        })[0];\n      }\n    }, {\n      key: \"load\",\n      value: function load(sources, mimeType) {\n        this.options.mimeType = mimeType;\n        sources = sources && sources.constructor === Array ? sources : [sources];\n        this.options.sources = sources;\n        this.containers.forEach(function (container) {\n          return container.destroy();\n        });\n        this.containerFactory.options = zepto.extend(true, this.options, {\n          sources: sources\n        });\n        this.prepareContainers();\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.disableResizeObserver();\n        this.containers.forEach(function (container) {\n          return container.destroy();\n        });\n        this.plugins.forEach(function (plugin) {\n          return plugin.destroy();\n        });\n        this.$el.remove();\n        zepto(document).unbind('fullscreenchange', this._boundFullscreenHandler);\n        zepto(document).unbind('MSFullscreenChange', this._boundFullscreenHandler);\n        zepto(document).unbind('mozfullscreenchange', this._boundFullscreenHandler);\n        this.stopListening();\n      }\n    }, {\n      key: \"handleFullscreenChange\",\n      value: function handleFullscreenChange() {\n        this.trigger(Events.CORE_FULLSCREEN, this.isFullscreen());\n        this.updateSize();\n      }\n    }, {\n      key: \"handleWindowResize\",\n      value: function handleWindowResize(event) {\n        var orientation = window.innerWidth > window.innerHeight ? 'landscape' : 'portrait';\n        if (this._screenOrientation === orientation) return;\n        this._screenOrientation = orientation;\n        this.triggerResize({\n          width: this.el.clientWidth,\n          height: this.el.clientHeight\n        });\n        this.trigger(Events.CORE_SCREEN_ORIENTATION_CHANGED, {\n          event: event,\n          orientation: this._screenOrientation\n        });\n      }\n    }, {\n      key: \"removeContainer\",\n      value: function removeContainer(container) {\n        this.stopListening(container);\n        this.containers = this.containers.filter(function (c) {\n          return c !== container;\n        });\n      }\n    }, {\n      key: \"setupContainer\",\n      value: function setupContainer(container) {\n        this.listenTo(container, Events.CONTAINER_DESTROYED, this.removeContainer);\n        this.containers.push(container);\n      }\n    }, {\n      key: \"setupContainers\",\n      value: function setupContainers(containers) {\n        containers.forEach(this.setupContainer.bind(this));\n        this.trigger(Events.CORE_CONTAINERS_CREATED);\n        this.renderContainers();\n        this.activeContainer = containers[0];\n        this.render();\n        this.appendToParent();\n        return this.containers;\n      }\n    }, {\n      key: \"renderContainers\",\n      value: function renderContainers() {\n        var _this5 = this;\n\n        this.containers.forEach(function (container) {\n          return _this5.el.appendChild(container.render().el);\n        });\n      }\n    }, {\n      key: \"createContainer\",\n      value: function createContainer(source, options) {\n        var container = this.containerFactory.createContainer(source, options);\n        this.setupContainer(container);\n        this.el.appendChild(container.render().el);\n        return container;\n      }\n      /**\n       * @deprecated\n       * This method currently exists for retrocompatibility reasons.\n       * If you want the current container reference, use the activeContainer getter.\n       */\n\n    }, {\n      key: \"getCurrentContainer\",\n      value: function getCurrentContainer() {\n        return this.activeContainer;\n      }\n      /**\n       * @deprecated\n       * This method currently exists for retrocompatibility reasons.\n       * If you want the current playback reference, use the activePlayback getter.\n       */\n\n    }, {\n      key: \"getCurrentPlayback\",\n      value: function getCurrentPlayback() {\n        return this.activePlayback;\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return this.activeContainer && this.activeContainer.getPlaybackType();\n      }\n    }, {\n      key: \"isFullscreen\",\n      value: function isFullscreen() {\n        // Ensure current instance is in fullscreen mode by checking fullscreen element\n        var fullscreenElement = Fullscreen.fullscreenElement();\n        if (!fullscreenElement) return false;\n        var playbackEl = this.activePlayback && this.activePlayback.el;\n        return fullscreenElement === this.el || fullscreenElement === playbackEl;\n      }\n    }, {\n      key: \"toggleFullscreen\",\n      value: function toggleFullscreen() {\n        var _this6 = this;\n\n        if (this.isFullscreen()) {\n          Fullscreen.cancelFullscreen();\n          !Browser.isiOS && this.$el.removeClass('fullscreen nocursor');\n        } else {\n          var fullscreenEl = Browser.isiOS ? this.activePlayback && this.activePlayback.el : this.el;\n          if (!fullscreenEl) return;\n          Browser.isSafari || Browser.isiOS ? // Safari doesn't return a promise like the other browsers. See more in https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullScreen\n          Fullscreen.requestFullscreen(fullscreenEl) : Fullscreen.requestFullscreen(fullscreenEl).then(function (_) {\n            return _;\n          }, function (error) {\n            return setTimeout(function () {\n              // fixes the issue https://github.com/clappr/clappr/issues/1860\n              if (!_this6.isFullscreen()) throw new ReferenceError(error);\n            }, 600);\n          });\n          !Browser.isiOS && this.$el.addClass('fullscreen');\n        }\n      }\n    }, {\n      key: \"onMouseMove\",\n      value: function onMouseMove(event) {\n        this.trigger(Events.CORE_MOUSE_MOVE, event);\n      }\n    }, {\n      key: \"onMouseLeave\",\n      value: function onMouseLeave(event) {\n        this.trigger(Events.CORE_MOUSE_LEAVE, event);\n      }\n      /**\n       * enables to configure the container after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure(options) {\n        var _this7 = this;\n\n        this._options = zepto.extend(true, this._options, options);\n        this.configureDomRecycler();\n        var sources = options.source || options.sources;\n        sources && this.load(sources, options.mimeType || this.options.mimeType);\n        this.trigger(Events.CORE_OPTIONS_CHANGE, options); // Trigger with newly provided options\n\n        this.containers.forEach(function (container) {\n          return container.configure(_this7.options);\n        });\n      }\n    }, {\n      key: \"appendToParent\",\n      value: function appendToParent() {\n        var style = Styler.getStyleFor(css_248z$1.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        var resetStyle = Styler.getStyleFor(css_248z$2.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.options.includeResetStyle && this.$el.append(resetStyle[0]);\n        var hasCoreParent = this.$el.parent() && this.$el.parent().length;\n        !hasCoreParent && this.$el.appendTo(this.options.parentElement);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        this.options.width = this.options.width || this.$el.width();\n        this.options.height = this.options.height || this.$el.height();\n        var size = {\n          width: this.options.width,\n          height: this.options.height\n        };\n        this.previousSize = this.currentSize = this.computedSize = size;\n        this.updateSize();\n        this.enableResizeObserver();\n        return this;\n      }\n    }]);\n\n    return Core;\n  }(UIObject);\n  Object.assign(Core.prototype, ErrorMixin);\n\n  /**\n   * The Core Factory is responsible for instantiate the core and it's plugins.\n   * @class CoreFactory\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   */\n\n  var CoreFactory = /*#__PURE__*/function (_BaseObject) {\n    _inherits(CoreFactory, _BaseObject);\n\n    var _super = _createSuper(CoreFactory);\n\n    _createClass(CoreFactory, [{\n      key: \"loader\",\n      get: function get() {\n        return this.player.loader;\n      }\n      /**\n       * it builds the core factory\n       * @method constructor\n       * @param {Player} player the player object\n       */\n\n    }]);\n\n    function CoreFactory(player) {\n      var _this;\n\n      _classCallCheck(this, CoreFactory);\n\n      _this = _super.call(this, player.options);\n      _this.player = player;\n      return _this;\n    }\n    /**\n     * creates a core and its plugins\n     * @method create\n     * @return {Core} created core\n     */\n\n\n    _createClass(CoreFactory, [{\n      key: \"create\",\n      value: function create() {\n        this.options.loader = this.loader;\n        this.core = new Core(this.options);\n        this.addCorePlugins();\n        this.core.createContainers(this.options);\n        return this.core;\n      }\n      /**\n       * given the core plugins (`loader.corePlugins`) it builds each one\n       * @method addCorePlugins\n       * @return {Core} the core with all plugins\n       */\n\n    }, {\n      key: \"addCorePlugins\",\n      value: function addCorePlugins() {\n        var _this2 = this;\n\n        this.loader.corePlugins.forEach(function (Plugin) {\n          var plugin = new Plugin(_this2.core);\n\n          _this2.core.addPlugin(plugin);\n\n          _this2.setupExternalInterface(plugin);\n        });\n        return this.core;\n      }\n    }, {\n      key: \"setupExternalInterface\",\n      value: function setupExternalInterface(plugin) {\n        var externalFunctions = plugin.getExternalInterface();\n\n        for (var key in externalFunctions) {\n          this.player[key] = externalFunctions[key].bind(plugin);\n        }\n      }\n    }]);\n\n    return CoreFactory;\n  }(BaseObject);\n\n  var VERSION_REGEX = /(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?/;\n\n  var Version = /*#__PURE__*/function () {\n    _createClass(Version, null, [{\n      key: \"parse\",\n      value: function parse() {\n        var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var matches = str.match(VERSION_REGEX) || [];\n\n        var _matches = _slicedToArray(matches, 4),\n            major = _matches[1],\n            minor = _matches[2],\n            patch = _matches[3];\n\n        if (typeof major === 'undefined') return null;\n        return new Version(major, minor, patch);\n      }\n    }]);\n\n    function Version(major, minor, patch) {\n      _classCallCheck(this, Version);\n\n      this.major = parseInt(major || 0, 10);\n      this.minor = parseInt(minor || 0, 10);\n      this.patch = parseInt(patch || 0, 10);\n    }\n\n    _createClass(Version, [{\n      key: \"compare\",\n      value: function compare(other) {\n        var diff = this.major - other.major;\n        diff = diff || this.minor - other.minor;\n        diff = diff || this.patch - other.patch;\n        return diff;\n      }\n    }, {\n      key: \"inc\",\n      value: function inc() {\n        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'patch';\n        typeof this[type] !== 'undefined' && (this[type] += 1);\n        return this;\n      }\n    }, {\n      key: \"satisfies\",\n      value: function satisfies(min, max) {\n        return this.compare(min) >= 0 && (!max || this.compare(max) < 0);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return \"\".concat(this.major, \".\").concat(this.minor, \".\").concat(this.patch);\n      }\n    }]);\n\n    return Version;\n  }();\n\n  var filterPluginsByType = function filterPluginsByType(plugins, type) {\n    if (!plugins || !type) return {};\n    return Object.entries(plugins).filter(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          value = _ref2[1];\n\n      return value.type === type;\n    }).reduce(function (obj, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      return obj[key] = value, obj;\n    }, {});\n  };\n  /**\n   * It keeps a list of the default plugins (playback, container, core) and it merges external plugins with its internals.\n   * @class Loader\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   */\n\n\n  var Loader = (function () {\n    var registry = {\n      plugins: {},\n      playbacks: []\n    };\n    var currentVersion = \"0.4.17\";\n    return /*#__PURE__*/function () {\n      _createClass(Loader, null, [{\n        key: \"checkVersionSupport\",\n        value: function checkVersionSupport(entry) {\n          var _entry$prototype = entry.prototype,\n              supportedVersion = _entry$prototype.supportedVersion,\n              name = _entry$prototype.name;\n\n          if (!supportedVersion || !supportedVersion.min) {\n            Log.warn('Loader', \"missing version information for \".concat(name));\n            return false;\n          }\n\n          var maxVersion = supportedVersion.max ? Version.parse(supportedVersion.max) : Version.parse(supportedVersion.min).inc('minor');\n          var minVersion = Version.parse(supportedVersion.min);\n\n          if (!Version.parse(currentVersion).satisfies(minVersion, maxVersion)) {\n            Log.warn('Loader', \"unsupported plugin \".concat(name, \": Clappr version \").concat(currentVersion, \" does not match required range [\").concat(minVersion, \",\").concat(maxVersion, \")\"));\n            return false;\n          }\n\n          return true;\n        }\n      }, {\n        key: \"registerPlugin\",\n        value: function registerPlugin(pluginEntry) {\n          if (!pluginEntry || !pluginEntry.prototype.name) {\n            Log.warn('Loader', \"missing information to register plugin: \".concat(pluginEntry));\n            return false;\n          }\n\n          Loader.checkVersionSupport(pluginEntry);\n          var pluginRegistry = registry.plugins;\n          if (!pluginRegistry) return false;\n          var previousEntry = pluginRegistry[pluginEntry.prototype.name];\n          if (previousEntry) Log.warn('Loader', \"overriding plugin entry: \".concat(pluginEntry.prototype.name, \" - \").concat(previousEntry));\n          pluginRegistry[pluginEntry.prototype.name] = pluginEntry;\n          return true;\n        }\n      }, {\n        key: \"registerPlayback\",\n        value: function registerPlayback(playbackEntry) {\n          if (!playbackEntry || !playbackEntry.prototype.name) return false;\n          Loader.checkVersionSupport(playbackEntry);\n          var playbacks = registry.playbacks;\n          var previousEntryIdx = playbacks.findIndex(function (entry) {\n            return entry.prototype.name === playbackEntry.prototype.name;\n          });\n\n          if (previousEntryIdx >= 0) {\n            var previousEntry = playbacks[previousEntryIdx];\n            playbacks.splice(previousEntryIdx, 1);\n            Log.warn('Loader', \"overriding playback entry: \".concat(previousEntry.name, \" - \").concat(previousEntry));\n          }\n\n          registry.playbacks = [playbackEntry].concat(_toConsumableArray(playbacks));\n          return true;\n        }\n      }, {\n        key: \"unregisterPlugin\",\n        value: function unregisterPlugin(name) {\n          if (!name) return false;\n          var plugins = registry.plugins;\n          var plugin = plugins[name];\n          if (!plugin) return false;\n          delete plugins[name];\n          return true;\n        }\n      }, {\n        key: \"unregisterPlayback\",\n        value: function unregisterPlayback(name) {\n          if (!name) return false;\n          var playbacks = registry.playbacks;\n          var index = playbacks.findIndex(function (entry) {\n            return entry.prototype.name === name;\n          });\n          if (index < 0) return false;\n          playbacks.splice(index, 1);\n          registry.playbacks = playbacks;\n          return true;\n        }\n      }, {\n        key: \"clearPlugins\",\n        value: function clearPlugins() {\n          registry.plugins = {};\n        }\n      }, {\n        key: \"clearPlaybacks\",\n        value: function clearPlaybacks() {\n          registry.playbacks = [];\n        }\n        /**\n         * builds the loader\n         * @method constructor\n         * @param {Object} externalPlugins the external plugins\n         * @param {Number} playerId you can embed multiple instances of clappr, therefore this is the unique id of each one.\n         */\n\n      }, {\n        key: \"registeredPlaybacks\",\n        get: function get() {\n          return _toConsumableArray(registry.playbacks);\n        }\n      }, {\n        key: \"registeredPlugins\",\n        get: function get() {\n          var plugins = registry.plugins;\n          var core = filterPluginsByType(plugins, 'core');\n          var container = filterPluginsByType(plugins, 'container');\n          return {\n            core: core,\n            container: container\n          };\n        }\n      }]);\n\n      function Loader() {\n        var externalPlugins = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var playerId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n        _classCallCheck(this, Loader);\n\n        this.playerId = playerId;\n        this.playbackPlugins = _toConsumableArray(registry.playbacks);\n        var _Loader$registeredPlu = Loader.registeredPlugins,\n            core = _Loader$registeredPlu.core,\n            container = _Loader$registeredPlu.container;\n        this.containerPlugins = Object.values(container);\n        this.corePlugins = Object.values(core);\n        if (!Array.isArray(externalPlugins)) this.validateExternalPluginsType(externalPlugins);\n        this.addExternalPlugins(externalPlugins);\n      }\n      /**\n       * groups by type the external plugins that were passed through `options.plugins` it they're on a flat array\n       * @method addExternalPlugins\n       * @private\n       * @param {Object} an config object or an array of plugins\n       * @return {Object} plugins the config object with the plugins separated by type\n       */\n\n\n      _createClass(Loader, [{\n        key: \"groupPluginsByType\",\n        value: function groupPluginsByType(plugins) {\n          if (Array.isArray(plugins)) {\n            plugins = plugins.reduce(function (memo, plugin) {\n              memo[plugin.type] || (memo[plugin.type] = []);\n              memo[plugin.type].push(plugin);\n              return memo;\n            }, {});\n          }\n\n          return plugins;\n        }\n      }, {\n        key: \"removeDups\",\n        value: function removeDups(list) {\n          var useReversePrecedence = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          var groupUp = function groupUp(plugins, plugin) {\n            if (plugins[plugin.prototype.name] && useReversePrecedence) return plugins;\n            plugins[plugin.prototype.name] && delete plugins[plugin.prototype.name];\n            plugins[plugin.prototype.name] = plugin;\n            return plugins;\n          };\n\n          var pluginsMap = list.reduceRight(groupUp, Object.create(null));\n          var plugins = [];\n\n          for (var key in pluginsMap) {\n            plugins.unshift(pluginsMap[key]);\n          }\n\n          return plugins;\n        }\n        /**\n         * adds all the external plugins that were passed through `options.plugins`\n         * @method addExternalPlugins\n         * @private\n         * @param {Object} plugins the config object with all plugins\n         */\n\n      }, {\n        key: \"addExternalPlugins\",\n        value: function addExternalPlugins(plugins) {\n          var loadExternalPluginsFirst = typeof plugins.loadExternalPluginsFirst === 'boolean' ? plugins.loadExternalPluginsFirst : true;\n          var loadExternalPlaybacksFirst = typeof plugins.loadExternalPlaybacksFirst === 'boolean' ? plugins.loadExternalPlaybacksFirst : true;\n          plugins = this.groupPluginsByType(plugins);\n\n          if (plugins.playback) {\n            var playbacks = plugins.playback.filter(function (playback) {\n              return Loader.checkVersionSupport(playback), true;\n            });\n            this.playbackPlugins = loadExternalPlaybacksFirst ? this.removeDups(playbacks.concat(this.playbackPlugins)) : this.removeDups(this.playbackPlugins.concat(playbacks), true);\n          }\n\n          if (plugins.container) {\n            var containerPlugins = plugins.container.filter(function (plugin) {\n              return Loader.checkVersionSupport(plugin), true;\n            });\n            this.containerPlugins = loadExternalPluginsFirst ? this.removeDups(containerPlugins.concat(this.containerPlugins)) : this.removeDups(this.containerPlugins.concat(containerPlugins), true);\n          }\n\n          if (plugins.core) {\n            var corePlugins = plugins.core.filter(function (plugin) {\n              return Loader.checkVersionSupport(plugin), true;\n            });\n            this.corePlugins = loadExternalPluginsFirst ? this.removeDups(corePlugins.concat(this.corePlugins)) : this.removeDups(this.corePlugins.concat(corePlugins), true);\n          }\n        }\n        /**\n         * validate if the external plugins that were passed through `options.plugins` are associated to the correct type\n         * @method validateExternalPluginsType\n         * @private\n         * @param {Object} plugins the config object with all plugins\n         */\n\n      }, {\n        key: \"validateExternalPluginsType\",\n        value: function validateExternalPluginsType(plugins) {\n          var pluginTypes = ['playback', 'container', 'core'];\n          pluginTypes.forEach(function (type) {\n            (plugins[type] || []).forEach(function (el) {\n              var errorMessage = 'external ' + el.type + ' plugin on ' + type + ' array';\n              if (el.type !== type) throw new ReferenceError(errorMessage);\n            });\n          });\n        }\n      }]);\n\n      return Loader;\n    }();\n  })();\n\n  var baseUrl = currentScriptUrl().replace(/\\/[^/]+$/, '');\n  /**\n   * @class Player\n   * @constructor\n   * @extends BaseObject\n   * @module components\n   * @example\n   * ### Using the Player\n   *\n   * Add the following script on your HTML:\n   * ```html\n   * <head>\n   *   <script type=\"text/javascript\" src=\"http://cdn.clappr.io/latest/clappr.min.js\"></script>\n   * </head>\n   * ```\n   * Now, create the player:\n   * ```html\n   * <body>\n   *   <div id=\"player\"></div>\n   *   <script>\n   *     var player = new Clappr.Player({source: \"http://your.video/here.mp4\", parentId: \"#player\"});\n   *   </script>\n   * </body>\n   * ```\n   */\n\n  var Player = /*#__PURE__*/function (_BaseObject) {\n    _inherits(Player, _BaseObject);\n\n    var _super = _createSuper(Player);\n\n    _createClass(Player, [{\n      key: \"loader\",\n      set: function set(loader) {\n        this._loader = loader;\n      },\n      get: function get() {\n        if (!this._loader) this._loader = new Loader(this.options.plugins || {}, this.options.playerId);\n        return this._loader;\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return this.core.activeContainer.ended;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * (i.e if a live stream is playing smoothly, this will be false)\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return this.core.activeContainer.buffering;\n      }\n      /*\n       * determine if the player is ready.\n       * @property isReady\n       * @type {Boolean} `true` if the player is ready. ie PLAYER_READY event has fired\n       */\n\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return !!this._ready;\n      }\n      /**\n       * An events map that allows the user to add custom callbacks in player's options.\n       * @property eventsMapping\n       * @type {Object}\n       */\n\n    }, {\n      key: \"eventsMapping\",\n      get: function get() {\n        return {\n          onReady: Events.PLAYER_READY,\n          onResize: Events.PLAYER_RESIZE,\n          onPlay: Events.PLAYER_PLAY,\n          onPause: Events.PLAYER_PAUSE,\n          onStop: Events.PLAYER_STOP,\n          onEnded: Events.PLAYER_ENDED,\n          onSeek: Events.PLAYER_SEEK,\n          onError: Events.PLAYER_ERROR,\n          onTimeUpdate: Events.PLAYER_TIMEUPDATE,\n          onVolumeUpdate: Events.PLAYER_VOLUMEUPDATE,\n          onSubtitleAvailable: Events.PLAYER_SUBTITLE_AVAILABLE\n        };\n      }\n      /**\n       * @typedef {Object} PlaybackConfig\n       * @prop {boolean} disableContextMenu\n       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n       * @prop {boolean} preload\n       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n       * @prop {boolean} controls\n       * enabled/disables displaying controls\n       * @prop {boolean} crossOrigin\n       * enables cross-origin capability for media-resources\n       * @prop {boolean} playInline\n       * enables in-line video elements\n       * @prop {boolean} audioOnly\n       * enforce audio-only playback (when possible)\n       * @prop {Object} externalTracks\n       * pass externaly loaded track to playback\n       * @prop {Number} [maxBufferLength]\n       * The default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n       * @prop {Number} [maxBackBufferLength]\n       * After how much distance of the playhead data should be pruned from the buffer (influences memory consumption\n       * of adaptive media-engines like Hls.js or Shaka)\n       * @prop {Number} [minBufferLength]\n       * After how much data in the buffer at least we attempt to consume it (influences QoS-related behavior\n       * of adaptive media-engines like Hls.js or Shaka). If this is too low, and the available bandwidth is varying a lot\n       * and too close to the streamed bitrate, we may continuously hit under-runs.\n       * @prop {Number} [initialBandwidthEstimate]\n       * define an initial bandwidth \"guess\" (or previously stored/established value) for underlying adaptive-bitreate engines\n       * of adaptive playback implementations, like Hls.js or Shaka\n       * @prop {Number} [maxAdaptiveBitrate]\n       * Limits the streamed bitrate (for adaptive media-engines in underlying playback implementations)\n       * @prop {Object} [maxAdaptiveVideoDimensions]\n       * Limits the video dimensions in adaptive media-engines. Should be a literal object with `height` and `width`.\n       * @prop {Boolean}[enableAutomaticABR] **default**: `true`\n       * Allows to enable/disable automatic bitrate switching in adaptive media-engines\n       * @prop {String} [preferredTextLanguage] **default**: `'pt-BR'`\n       * Allows to set a preferred text language, that may be enabled by the media-engine if available.\n       * @prop {String} [preferredAudioLanguage] **default**: `'pt-BR'`\n       * Allows to set a preferred audio language, that may be enabled by the media-engine if available.\n       */\n\n      /**\n       * ## Player's constructor\n       *\n       * You might pass the options object to build the player.\n       * ```javascript\n       * var options = {source: \"http://example.com/video.mp4\", param1: \"val1\"};\n       * var player = new Clappr.Player(options);\n       * ```\n       *\n       * @method constructor\n       * @param {Object} options Data\n       * options to build a player instance\n       * @param {Number} [options.width]\n       * player's width **default**: `640`\n       * @param {Number} [options.height]\n       * player's height **default**: `360`\n       * @param {String} [options.parentId]\n       * the id of the element on the page that the player should be inserted into\n       * @param {Object} [options.parent]\n       * a reference to a dom element that the player should be inserted into\n       * @param {String} [options.source]\n       * The media source URL, or {source: <<source URL>>, mimeType: <<source mime type>>}\n       * @param {Object} [options.sources]\n       * An array of media source URL's, or an array of {source: <<source URL>>, mimeType: <<source mime type>>}\n       * @param {Boolean} [options.autoPlay]\n       * automatically play after page load **default**: `false`\n       * @param {Boolean} [options.loop]\n       * automatically replay after it ends **default**: `false`\n       * @param {Boolean} [options.chromeless]\n       * player acts in chromeless mode **default**: `false`\n       * @param {Boolean} [options.allowUserInteraction]\n       * whether or not the player should handle click events when in chromeless mode **default**: `false` on desktops browsers, `true` on mobile.\n       * @param {Boolean} [options.disableKeyboardShortcuts]\n       * disable keyboard shortcuts. **default**: `false`. `true` if `allowUserInteraction` is `false`.\n       * @param {Boolean} [options.mute]\n       * start the video muted **default**: `false`\n       * @param {String} [options.mimeType]\n       * add `mimeType: \"application/vnd.apple.mpegurl\"` if you need to use a url without extension.\n       * @param {Boolean} [options.actualLiveTime]\n       * show duration and seek time relative to actual time.\n       * @param {String} [options.actualLiveServerTime]\n       * specify server time as a string, format: \"2015/11/26 06:01:03\". This option is meant to be used with actualLiveTime.\n       * @param {Boolean} [options.persistConfig]\n       * persist player's settings (volume) through the same domain **default**: `true`\n       * @param {String} [options.preload] @deprecated\n       * video will be preloaded according to `preload` attribute options **default**: `'metadata'`\n       * @param {Number} [options.maxBufferLength] @deprecated\n       * the default behavior for the **HLS playback** is to keep buffering indefinitely, even on VoD.\n       * This replicates the behavior for progressive download, which continues buffering when pausing the video, thus making the video available for playback even on slow networks.\n       * To change this behavior use `maxBufferLength` where **value is in seconds**.\n       * @param {String} [options.gaAccount]\n       * enable Google Analytics events dispatch **(play/pause/stop/buffering/etc)** by adding your `gaAccount`\n       * @param {String} [options.gaTrackerName]\n       * besides `gaAccount` you can optionally, pass your favorite trackerName as `gaTrackerName`\n       * @param {Object} [options.mediacontrol]\n       * customize control bar colors, example: `mediacontrol: {seekbar: \"#E113D3\", buttons: \"#66B2FF\"}`\n       * @param {Boolean} [options.hideMediaControl]\n       * control media control auto hide **default**: `true`\n       * @param {Boolean} [options.hideVolumeBar]\n       * when embedded with width less than 320, volume bar will hide. You can force this behavior for all sizes by adding `true` **default**: `false`\n       * @param {String} [options.watermark]\n       * put `watermark: 'http://url/img.png'` on your embed parameters to automatically add watermark on your video.\n       * You can customize corner position by defining position parameter. Positions can be `bottom-left`, `bottom-right`, `top-left` and `top-right`.\n       * @param {String} [options.watermarkLink]\n       * `watermarkLink: 'http://example.net/'` - define URL to open when the watermark is clicked. If not provided watermark will not be clickable.\n       * @param {Boolean} [options.disableVideoTagContextMenu] @deprecated\n       * disables the context menu (right click) on the video element if a HTML5Video playback is used.\n       * @param {Boolean} [options.autoSeekFromUrl]\n       * Automatically seek to the seconds provided in the url (e.g example.com?t=100) **default**: `true`\n       * @param {Boolean} [options.exitFullscreenOnEnd]\n       * Automatically exit full screen when the media finishes. **default**: `true`\n       * @param {String} [options.poster]\n       * define a poster by adding its address `poster: 'http://url/img.png'`. It will appear after video embed, disappear on play and go back when user stops the video.\n       * @param {String} [options.playbackNotSupportedMessage]\n       * define a custom message to be displayed when a playback is not supported.\n       * @param {Object} [options.events]\n       * Specify listeners which will be registered with their corresponding player events.\n       * E.g. onReady -> \"PLAYER_READY\", onTimeUpdate -> \"PLAYER_TIMEUPDATE\"\n       * @param {PlaybackConfig} [options.playback]\n       * Generic `Playback` component related configuration\n       * @param {Boolean} [options.disableErrorScreen]\n       * disables the error screen plugin.\n       * @param {Number} [options.autoPlayTimeout]\n       * autoplay check timeout.\n       */\n\n    }]);\n\n    function Player(options) {\n      var _this;\n\n      _classCallCheck(this, Player);\n\n      _this = _super.call(this, options);\n      var playbackDefaultOptions = {\n        recycleVideo: true\n      };\n      var defaultOptions = {\n        playerId: uniqueId(''),\n        persistConfig: true,\n        width: 640,\n        height: 360,\n        baseUrl: baseUrl,\n        allowUserInteraction: Browser.isMobile,\n        includeResetStyle: true,\n        playback: playbackDefaultOptions\n      };\n      _this._options = zepto.extend(true, defaultOptions, options);\n      _this.options.sources = _this._normalizeSources(options);\n\n      if (!_this.options.chromeless) {\n        // \"allowUserInteraction\" cannot be false if not in chromeless mode.\n        _this.options.allowUserInteraction = true;\n      }\n\n      if (!_this.options.allowUserInteraction) {\n        // if user iteraction is not allowed ensure keyboard shortcuts are disabled\n        _this.options.disableKeyboardShortcuts = true;\n      }\n\n      _this._registerOptionEventListeners(_this.options.events);\n\n      _this._coreFactory = new CoreFactory(_assertThisInitialized(_this));\n      if (_this.options.parentId) _this.setParentId(_this.options.parentId);else if (_this.options.parent) _this.attachTo(_this.options.parent);\n      return _this;\n    }\n    /**\n     * Specify a `parentId` to the player.\n     * @method setParentId\n     * @param {String} parentId the element parent id.\n     * @return {Player} itself\n     */\n\n\n    _createClass(Player, [{\n      key: \"setParentId\",\n      value: function setParentId(parentId) {\n        var el = document.querySelector(parentId);\n        if (el) this.attachTo(el);\n        return this;\n      }\n      /**\n       * You can use this method to attach the player to a given element. You don't need to do this when you specify it during the player instantiation passing the `parentId` param.\n       * @method attachTo\n       * @param {Object} element a given element.\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"attachTo\",\n      value: function attachTo(element) {\n        this.options.parentElement = element;\n        this.core = this._coreFactory.create();\n\n        this._addEventListeners();\n\n        return this;\n      }\n    }, {\n      key: \"_addEventListeners\",\n      value: function _addEventListeners() {\n        if (!this.core.isReady) this.listenToOnce(this.core, Events.CORE_READY, this._onReady);else this._onReady();\n        this.listenTo(this.core, Events.CORE_ACTIVE_CONTAINER_CHANGED, this._containerChanged);\n        this.listenTo(this.core, Events.CORE_FULLSCREEN, this._onFullscreenChange);\n        this.listenTo(this.core, Events.CORE_RESIZE, this._onResize);\n        return this;\n      }\n    }, {\n      key: \"_addContainerEventListeners\",\n      value: function _addContainerEventListeners() {\n        var container = this.core.activeContainer;\n\n        if (container) {\n          this.listenTo(container, Events.CONTAINER_PLAY, this._onPlay);\n          this.listenTo(container, Events.CONTAINER_PAUSE, this._onPause);\n          this.listenTo(container, Events.CONTAINER_STOP, this._onStop);\n          this.listenTo(container, Events.CONTAINER_ENDED, this._onEnded);\n          this.listenTo(container, Events.CONTAINER_SEEK, this._onSeek);\n          this.listenTo(container, Events.CONTAINER_ERROR, this._onError);\n          this.listenTo(container, Events.CONTAINER_TIMEUPDATE, this._onTimeUpdate);\n          this.listenTo(container, Events.CONTAINER_VOLUME, this._onVolumeUpdate);\n          this.listenTo(container, Events.CONTAINER_SUBTITLE_AVAILABLE, this._onSubtitleAvailable);\n        }\n\n        return this;\n      }\n    }, {\n      key: \"_registerOptionEventListeners\",\n      value: function _registerOptionEventListeners() {\n        var _this2 = this;\n\n        var newEvents = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var hasNewEvents = Object.keys(newEvents).length > 0;\n        hasNewEvents && Object.keys(events).forEach(function (userEvent) {\n          var eventType = _this2.eventsMapping[userEvent];\n          eventType && _this2.off(eventType, events[userEvent]);\n        });\n        Object.keys(newEvents).forEach(function (userEvent) {\n          var eventType = _this2.eventsMapping[userEvent];\n\n          if (eventType) {\n            var eventFunction = newEvents[userEvent];\n            eventFunction = typeof eventFunction === 'function' && eventFunction;\n            eventFunction && _this2.on(eventType, eventFunction);\n          }\n        });\n        return this;\n      }\n    }, {\n      key: \"_containerChanged\",\n      value: function _containerChanged() {\n        this.stopListening();\n\n        this._addEventListeners();\n      }\n    }, {\n      key: \"_onReady\",\n      value: function _onReady() {\n        this._ready = true;\n\n        this._addContainerEventListeners();\n\n        this.trigger(Events.PLAYER_READY);\n      }\n    }, {\n      key: \"_onFullscreenChange\",\n      value: function _onFullscreenChange(fullscreen) {\n        this.trigger(Events.PLAYER_FULLSCREEN, fullscreen);\n      }\n    }, {\n      key: \"_onVolumeUpdate\",\n      value: function _onVolumeUpdate(volume) {\n        this.trigger(Events.PLAYER_VOLUMEUPDATE, volume);\n      }\n    }, {\n      key: \"_onSubtitleAvailable\",\n      value: function _onSubtitleAvailable() {\n        this.trigger(Events.PLAYER_SUBTITLE_AVAILABLE);\n      }\n    }, {\n      key: \"_onResize\",\n      value: function _onResize(size) {\n        this.trigger(Events.PLAYER_RESIZE, size);\n      }\n    }, {\n      key: \"_onPlay\",\n      value: function _onPlay() {\n        this.trigger(Events.PLAYER_PLAY);\n      }\n    }, {\n      key: \"_onPause\",\n      value: function _onPause() {\n        this.trigger(Events.PLAYER_PAUSE);\n      }\n    }, {\n      key: \"_onStop\",\n      value: function _onStop() {\n        this.trigger(Events.PLAYER_STOP, this.getCurrentTime());\n      }\n    }, {\n      key: \"_onEnded\",\n      value: function _onEnded() {\n        this.trigger(Events.PLAYER_ENDED);\n      }\n    }, {\n      key: \"_onSeek\",\n      value: function _onSeek(time) {\n        this.trigger(Events.PLAYER_SEEK, time);\n      }\n    }, {\n      key: \"_onTimeUpdate\",\n      value: function _onTimeUpdate(timeProgress) {\n        this.trigger(Events.PLAYER_TIMEUPDATE, timeProgress);\n      }\n    }, {\n      key: \"_onError\",\n      value: function _onError(error) {\n        this.trigger(Events.PLAYER_ERROR, error);\n      }\n    }, {\n      key: \"_normalizeSources\",\n      value: function _normalizeSources(options) {\n        var sources = options.sources || (options.source !== undefined ? [options.source] : []);\n        return sources.length === 0 ? [{\n          source: '',\n          mimeType: ''\n        }] : sources;\n      }\n      /**\n       * resizes the current player canvas.\n       * @method resize\n       * @param {Object} size should be a literal object with `height` and `width`.\n       * @return {Player} itself\n       * @example\n       * ```javascript\n       * player.resize({height: 360, width: 640})\n       * ```\n       */\n\n    }, {\n      key: \"resize\",\n      value: function resize(size) {\n        this.core.resize(size);\n        return this;\n      }\n      /**\n       * loads a new source.\n       * @method load\n       * @param {Array|String} sources source or sources of video.\n       * An array item can be a string or {source: <<source URL>>, mimeType: <<source mime type>>}\n       * @param {String} mimeType a mime type, example: `'application/vnd.apple.mpegurl'`\n       * @param {Boolean} [autoPlay=false] whether playing should be started immediately\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"load\",\n      value: function load(sources, mimeType, autoPlay) {\n        if (autoPlay !== undefined) this.configure({\n          autoPlay: !!autoPlay\n        });\n        this.core.load(sources, mimeType);\n        return this;\n      }\n      /**\n       * destroys the current player and removes it from the DOM.\n       * @method destroy\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.stopListening();\n        this.core.destroy();\n        return this;\n      }\n      /**\n       * Gives user consent to playback. Required by mobile device after a click event before Player.load().\n       * @method consent\n       * @param {Function} callback function called when current playback is consented\n       * @example\n       * ```javascript\n       * player.consent(function() { doSomethingNext(); });\n       * ```\n       */\n\n    }, {\n      key: \"consent\",\n      value: function consent(cb) {\n        this.core.getCurrentPlayback().consent(cb);\n      }\n      /**\n       * plays the current video (`source`).\n       * @method play\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"play\",\n      value: function play() {\n        this.core.activeContainer.play();\n        return this;\n      }\n      /**\n       * pauses the current video (`source`).\n       * @method pause\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.core.activeContainer.pause();\n        return this;\n      }\n      /**\n       * stops the current video (`source`).\n       * @method stop\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this.core.activeContainer.stop();\n        return this;\n      }\n      /**\n       * seeks the current video (`source`). For example, `player.seek(120)` will seek to second 120 (2minutes) of the current video.\n       * @method seek\n       * @param {Number} time should be a number between 0 and the video duration.\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"seek\",\n      value: function seek(time) {\n        this.core.activeContainer.seek(time);\n        return this;\n      }\n      /**\n       * seeks the current video (`source`). For example, `player.seek(50)` will seek to the middle of the current video.\n       * @method seekPercentage\n       * @param {Number} time should be a number between 0 and 100.\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {\n        this.core.activeContainer.seekPercentage(percentage);\n        return this;\n      }\n      /**\n       * mutes the current video (`source`).\n       * @method mute\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"mute\",\n      value: function mute() {\n        this.core.activePlayback.mute();\n        return this;\n      }\n      /**\n       * unmutes the current video (`source`).\n       * @method unmute\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"unmute\",\n      value: function unmute() {\n        this.core.activePlayback.unmute();\n        return this;\n      }\n      /**\n       * checks if the player is playing.\n       * @method isPlaying\n       * @return {Boolean} `true` if the current source is playing, otherwise `false`\n       */\n\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return this.core.activeContainer.isPlaying();\n      }\n      /**\n       * returns `true` if DVR is enable otherwise `false`.\n       * @method isDvrEnabled\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrEnabled\",\n      value: function isDvrEnabled() {\n        return this.core.activeContainer.isDvrEnabled();\n      }\n      /**\n       * returns `true` if DVR is in use otherwise `false`.\n       * @method isDvrInUse\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isDvrInUse\",\n      value: function isDvrInUse() {\n        return this.core.activeContainer.isDvrInUse();\n      }\n      /**\n       * enables to configure a player after its creation\n       * @method configure\n       * @param {Object} options all the options to change in form of a javascript object\n       * @return {Player} itself\n       */\n\n    }, {\n      key: \"configure\",\n      value: function configure() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        this._registerOptionEventListeners(options.events, this.options.events);\n\n        this.core.configure(options);\n        return this;\n      }\n      /**\n       * get a plugin by its name.\n       * @method getPlugin\n       * @param {String} name of the plugin.\n       * @return {Object} the plugin instance\n       * @example\n       * ```javascript\n       * var poster = player.getPlugin('poster');\n       * poster.hidePlayButton();\n       * ```\n       */\n\n    }, {\n      key: \"getPlugin\",\n      value: function getPlugin(name) {\n        var plugins = this.core.plugins.concat(this.core.activeContainer.plugins);\n        return plugins.filter(function (plugin) {\n          return plugin.name === name;\n        })[0];\n      }\n      /**\n       * the current time in seconds.\n       * @method getCurrentTime\n       * @return {Number} current time (in seconds) of the current source\n       */\n\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this.core.activeContainer.getCurrentTime();\n      }\n      /**\n       * The time that \"0\" now represents relative to when playback started.\n       * For a stream with a sliding window this will increase as content is\n       * removed from the beginning.\n       * @method getStartTimeOffset\n       * @return {Number} time (in seconds) that time \"0\" represents.\n       */\n\n    }, {\n      key: \"getStartTimeOffset\",\n      value: function getStartTimeOffset() {\n        return this.core.activeContainer.getStartTimeOffset();\n      }\n      /**\n       * the duration time in seconds.\n       * @method getDuration\n       * @return {Number} duration time (in seconds) of the current source\n       */\n\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        return this.core.activeContainer.getDuration();\n      }\n    }]);\n\n    return Player;\n  }(BaseObject);\n  Object.assign(Player.prototype, ErrorMixin);\n\n  /**\n   * The base class for a container plugin\n   * @class ContainerPlugin\n   * @constructor\n   * @extends BaseObject\n   * @module base\n   */\n\n  var ContainerPlugin = /*#__PURE__*/function (_BaseObject) {\n    _inherits(ContainerPlugin, _BaseObject);\n\n    var _super = _createSuper(ContainerPlugin);\n\n    _createClass(ContainerPlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.container.playerError;\n      }\n    }]);\n\n    function ContainerPlugin(container) {\n      var _this;\n\n      _classCallCheck(this, ContainerPlugin);\n\n      _this = _super.call(this, container.options);\n      _this.container = container;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      return _this;\n    }\n\n    _createClass(ContainerPlugin, [{\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this.enabled) {\n          this.stopListening();\n          this.enabled = false;\n        }\n      }\n    }, {\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.stopListening();\n      }\n    }]);\n\n    return ContainerPlugin;\n  }(BaseObject);\n  Object.assign(ContainerPlugin.prototype, ErrorMixin);\n\n  ContainerPlugin.extend = function (properties) {\n    return extend(ContainerPlugin, properties);\n  };\n\n  ContainerPlugin.type = 'container';\n\n  var CorePlugin = /*#__PURE__*/function (_BaseObject) {\n    _inherits(CorePlugin, _BaseObject);\n\n    var _super = _createSuper(CorePlugin);\n\n    _createClass(CorePlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.core.playerError;\n      }\n    }]);\n\n    function CorePlugin(core) {\n      var _this;\n\n      _classCallCheck(this, CorePlugin);\n\n      _this = _super.call(this, core.options);\n      _this.core = core;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      return _this;\n    }\n\n    _createClass(CorePlugin, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }, {\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this.enabled) {\n          this.stopListening();\n          this.enabled = false;\n        }\n      }\n    }, {\n      key: \"getExternalInterface\",\n      value: function getExternalInterface() {\n        return {};\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.stopListening();\n      }\n    }]);\n\n    return CorePlugin;\n  }(BaseObject);\n  Object.assign(CorePlugin.prototype, ErrorMixin);\n\n  CorePlugin.extend = function (properties) {\n    return extend(CorePlugin, properties);\n  };\n\n  CorePlugin.type = 'core';\n\n  /**\n   * The base class for an ui container plugin\n   * @class UIContainerPlugin\n   * @constructor\n   * @extends UIObject\n   * @module base\n   */\n\n  var UIContainerPlugin = /*#__PURE__*/function (_UIObject) {\n    _inherits(UIContainerPlugin, _UIObject);\n\n    var _super = _createSuper(UIContainerPlugin);\n\n    _createClass(UIContainerPlugin, [{\n      key: \"playerError\",\n      get: function get() {\n        return this.container.playerError;\n      }\n    }]);\n\n    function UIContainerPlugin(container) {\n      var _this;\n\n      _classCallCheck(this, UIContainerPlugin);\n\n      _this = _super.call(this, container.options);\n      _this.container = container;\n      _this.enabled = true;\n\n      _this.bindEvents();\n\n      return _this;\n    }\n\n    _createClass(UIContainerPlugin, [{\n      key: \"enable\",\n      value: function enable() {\n        if (!this.enabled) {\n          this.bindEvents();\n          this.$el.show();\n          this.enabled = true;\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        this.stopListening();\n        this.$el.hide();\n        this.enabled = false;\n      }\n    }, {\n      key: \"bindEvents\",\n      value: function bindEvents() {}\n    }]);\n\n    return UIContainerPlugin;\n  }(UIObject);\n  Object.assign(UIContainerPlugin.prototype, ErrorMixin);\n\n  UIContainerPlugin.extend = function (properties) {\n    return extend(UIContainerPlugin, properties);\n  };\n\n  UIContainerPlugin.type = 'container';\n\n  var tracksHTML = \"<% for (var i = 0; i < tracks.length; i++) { %>\\n  <track data-html5-video-track=\\\"<%= i %>\\\" kind=\\\"<%= tracks[i].kind %>\\\" label=\\\"<%= tracks[i].label %>\\\" srclang=\\\"<%= tracks[i].lang %>\\\" src=\\\"<%= tracks[i].src %>\\\">\\n<% }; %>\\n\";\n\n  var css_248z$3 = \"[data-html5-video] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  display: block; }\\n\";\n\n  var MIMETYPES = {\n    'mp4': ['avc1.42E01E', 'avc1.58A01E', 'avc1.4D401E', 'avc1.64001E', 'mp4v.20.8', 'mp4v.20.240', 'mp4a.40.2'].map(function (codec) {\n      return 'video/mp4; codecs=\"' + codec + ', mp4a.40.2\"';\n    }),\n    'ogg': ['video/ogg; codecs=\"theora, vorbis\"', 'video/ogg; codecs=\"dirac\"', 'video/ogg; codecs=\"theora, speex\"'],\n    '3gpp': ['video/3gpp; codecs=\"mp4v.20.8, samr\"'],\n    'webm': ['video/webm; codecs=\"vp8, vorbis\"'],\n    'mkv': ['video/x-matroska; codecs=\"theora, vorbis\"'],\n    'm3u8': ['application/x-mpegurl']\n  };\n  MIMETYPES['ogv'] = MIMETYPES['ogg'];\n  MIMETYPES['3gp'] = MIMETYPES['3gpp'];\n  var AUDIO_MIMETYPES = {\n    'wav': ['audio/wav'],\n    'mp3': ['audio/mp3', 'audio/mpeg;codecs=\"mp3\"'],\n    'aac': ['audio/mp4;codecs=\"mp4a.40.5\"'],\n    'oga': ['audio/ogg']\n  };\n  var KNOWN_AUDIO_MIMETYPES = Object.keys(AUDIO_MIMETYPES).reduce(function (acc, k) {\n    return [].concat(_toConsumableArray(acc), _toConsumableArray(AUDIO_MIMETYPES[k]));\n  }, []);\n  var UNKNOWN_ERROR = {\n    code: 'unknown',\n    message: 'unknown'\n  }; // TODO: rename this Playback to HTML5Playback (breaking change, only after 0.3.0)\n\n  var HTML5Video = /*#__PURE__*/function (_Playback) {\n    _inherits(HTML5Video, _Playback);\n\n    var _super = _createSuper(HTML5Video);\n\n    _createClass(HTML5Video, [{\n      key: \"name\",\n      get: function get() {\n        return 'html5_video';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"tagName\",\n      get: function get() {\n        return this.isAudioOnly ? 'audio' : 'video';\n      }\n    }, {\n      key: \"isAudioOnly\",\n      get: function get() {\n        var resourceUrl = this.options.src;\n\n        var mimeTypes = HTML5Video._mimeTypesForUrl(resourceUrl, AUDIO_MIMETYPES, this.options.mimeType);\n\n        return this.options.playback && this.options.playback.audioOnly || this.options.audioOnly || KNOWN_AUDIO_MIMETYPES.indexOf(mimeTypes[0]) >= 0;\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-html5-video': ''\n        };\n      }\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {\n          'canplay': '_onCanPlay',\n          'canplaythrough': '_handleBufferingEvents',\n          'durationchange': '_onDurationChange',\n          'ended': '_onEnded',\n          'error': '_onError',\n          'loadeddata': '_onLoadedData',\n          'loadedmetadata': '_onLoadedMetadata',\n          'pause': '_onPause',\n          'playing': '_onPlaying',\n          'progress': '_onProgress',\n          'seeking': '_onSeeking',\n          'seeked': '_onSeeked',\n          'stalled': '_handleBufferingEvents',\n          'timeupdate': '_onTimeUpdate',\n          'waiting': '_onWaiting'\n        };\n      }\n      /**\n       * Determine if the playback has ended.\n       * @property ended\n       * @type Boolean\n       */\n\n    }, {\n      key: \"ended\",\n      get: function get() {\n        return this.el.ended;\n      }\n      /**\n       * Determine if the playback is having to buffer in order for\n       * playback to be smooth.\n       * This is related to the PLAYBACK_BUFFERING and PLAYBACK_BUFFERFULL events\n       * @property buffering\n       * @type Boolean\n       */\n\n    }, {\n      key: \"buffering\",\n      get: function get() {\n        return this._isBuffering;\n      }\n    }, {\n      key: \"isLive\",\n      get: function get() {\n        return this.getPlaybackType() === Playback.LIVE;\n      }\n    }, {\n      key: \"dvrEnabled\",\n      get: function get() {\n        return this.getDuration() >= this._minDvrSize && this.isLive;\n      }\n    }, {\n      key: \"minimumDVRSizeConfig\",\n      get: function get() {\n        return this.options.playback && this.options.playback.minimumDvrSize;\n      }\n    }, {\n      key: \"isValidMinimumDVRSizeConfig\",\n      get: function get() {\n        return typeof this.minimumDVRSizeConfig !== 'undefined' && typeof this.minimumDVRSizeConfig === 'number';\n      }\n    }]);\n\n    function HTML5Video() {\n      var _this;\n\n      _classCallCheck(this, HTML5Video);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this._destroyed = false;\n      _this._loadStarted = false;\n      _this._isBuffering = false;\n      _this._playheadMoving = false;\n      _this._playheadMovingTimer = null;\n      _this._stopped = false;\n      _this._ccTrackId = -1;\n\n      _this._setupSrc(_this.options.src); // backwards compatibility (TODO: remove on 0.3.0)\n\n\n      _this.options.playback || (_this.options.playback = _this.options || {});\n      _this.options.playback.disableContextMenu = _this.options.playback.disableContextMenu || _this.options.disableVideoTagContextMenu;\n      _this._minDvrSize = _this.isValidMinimumDVRSizeConfig ? _this.minimumDVRSizeConfig : 60;\n      var playbackConfig = _this.options.playback;\n      var preload = playbackConfig.preload || (Browser.isSafari ? 'auto' : _this.options.preload);\n      var posterUrl; // FIXME: poster plugin should always convert poster to object with expected properties ?\n\n      if (_this.options.poster) {\n        if (typeof _this.options.poster === 'string') posterUrl = _this.options.poster;else if (typeof _this.options.poster.url === 'string') posterUrl = _this.options.poster.url;\n      }\n\n      zepto.extend(true, _this.el, {\n        muted: _this.options.mute,\n        defaultMuted: _this.options.mute,\n        loop: _this.options.loop,\n        poster: posterUrl,\n        preload: preload || 'metadata',\n        crossOrigin: playbackConfig.crossOrigin,\n        'x-webkit-playsinline': playbackConfig.playInline\n      });\n      if (playbackConfig.controls || _this.options.useVideoTagDefaultControls) _this.$el.attr('controls', '');\n      playbackConfig.playInline && _this.$el.attr({\n        playsinline: 'playsinline'\n      });\n      playbackConfig.crossOrigin && _this.$el.attr({\n        crossorigin: playbackConfig.crossOrigin\n      }); // TODO should settings be private?\n\n      _this.settings = {\n        \"default\": ['seekbar']\n      };\n      _this.settings.left = ['playpause', 'position', 'duration'];\n      _this.settings.right = ['fullscreen', 'volume', 'hd-indicator'];\n      playbackConfig.externalTracks && _this._setupExternalTracks(playbackConfig.externalTracks);\n      _this.options.autoPlay && _this.attemptAutoPlay();\n      return _this;\n    }\n\n    _createClass(HTML5Video, [{\n      key: \"configure\",\n      value: function configure(options) {\n        _get(_getPrototypeOf(HTML5Video.prototype), \"configure\", this).call(this, options);\n\n        this.el.loop = !!options.loop;\n      } // See Playback.attemptAutoPlay()\n\n    }, {\n      key: \"attemptAutoPlay\",\n      value: function attemptAutoPlay() {\n        var _this2 = this;\n\n        this.canAutoPlay(function (result, error) {\n          error && Log.warn(_this2.name, 'autoplay error.', {\n            result: result,\n            error: error\n          }); // https://github.com/clappr/clappr/issues/1076\n\n          result && setTimeout(function () {\n            return !_this2._destroyed && _this2.play();\n          }, 0);\n        });\n      } // See Playback.canAutoPlay()\n\n    }, {\n      key: \"canAutoPlay\",\n      value: function canAutoPlay(cb) {\n        if (this.options.disableCanAutoPlay) {\n          cb(true, null);\n          return;\n        }\n\n        var opts = {\n          timeout: this.options.autoPlayTimeout || 500,\n          inline: this.options.playback.playInline || false,\n          muted: this.options.mute || false // Known issue: mediacontrols may asynchronously mute video\n\n        }; // Use current video element if recycling feature enabled with mobile devices\n\n        if (Browser.isMobile && DomRecycler.options.recycleVideo) opts.element = this.el; // Desktop browser autoplay policy may require user action\n        // Mobile browser autoplay require user consent and video recycling feature enabled\n        // It may returns a false positive with source-less player consent\n\n        canAutoPlayMedia(cb, opts);\n      }\n    }, {\n      key: \"_setupExternalTracks\",\n      value: function _setupExternalTracks(tracks) {\n        this._externalTracks = tracks.map(function (track) {\n          return {\n            kind: track.kind || 'subtitles',\n            // Default is 'subtitles'\n            label: track.label,\n            lang: track.lang,\n            src: track.src\n          };\n        });\n      }\n      /**\n       * Sets the source url on the <video> element, and also the 'src' property.\n       * @method setupSrc\n       * @private\n       * @param {String} srcUrl The source URL.\n       */\n\n    }, {\n      key: \"_setupSrc\",\n      value: function _setupSrc(srcUrl) {\n        if (this.el.src === srcUrl) return;\n        this._ccIsSetup = false;\n        this.el.src = srcUrl;\n        this._src = this.el.src;\n      }\n    }, {\n      key: \"_onLoadedMetadata\",\n      value: function _onLoadedMetadata(e) {\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_LOADEDMETADATA, {\n          duration: e.target.duration,\n          data: e\n        });\n\n        this._updateSettings();\n\n        var autoSeekFromUrl = typeof this._options.autoSeekFromUrl === 'undefined' || this._options.autoSeekFromUrl;\n        if (this.getPlaybackType() !== Playback.LIVE && autoSeekFromUrl) this._checkInitialSeek();\n      }\n    }, {\n      key: \"_onDurationChange\",\n      value: function _onDurationChange() {\n        this._updateSettings();\n\n        this._onTimeUpdate(); // onProgress uses the duration\n\n\n        this._onProgress();\n      }\n    }, {\n      key: \"_updateSettings\",\n      value: function _updateSettings() {\n        // we can't figure out if hls resource is VoD or not until it is being loaded or duration has changed.\n        // that's why we check it again and update media control accordingly.\n        if (this.getPlaybackType() === Playback.VOD || this.getPlaybackType() === Playback.AOD) this.settings.left = ['playpause', 'position', 'duration'];else this.settings.left = ['playstop'];\n        this.settings.seekEnabled = this.isSeekEnabled();\n        this.trigger(Events.PLAYBACK_SETTINGSUPDATE);\n      }\n    }, {\n      key: \"isSeekEnabled\",\n      value: function isSeekEnabled() {\n        return isFinite(this.getDuration());\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        var onDemandType = this.tagName === 'audio' ? Playback.AOD : Playback.VOD;\n        return [0, undefined, Infinity].indexOf(this.el.duration) >= 0 ? Playback.LIVE : onDemandType;\n      }\n    }, {\n      key: \"isHighDefinitionInUse\",\n      value: function isHighDefinitionInUse() {\n        return false;\n      } // On mobile device, HTML5 video element \"retains\" user action consent if\n      // load() method is called. See Player.consent().\n\n    }, {\n      key: \"consent\",\n      value: function consent(cb) {\n        var _this3 = this;\n\n        if (this.isPlaying() || this.el._consented) {\n          _get(_getPrototypeOf(HTML5Video.prototype), \"consent\", this).call(this, cb);\n        } else {\n          var eventHandler = function eventHandler() {\n            _this3.el.removeEventListener('loadedmetadata', eventHandler, false);\n\n            _this3.el.removeEventListener('error', eventHandler, false);\n\n            _this3.el._consented = true; // Flag to call load() only once\n\n            _get(_getPrototypeOf(HTML5Video.prototype), \"consent\", _this3).call(_this3, cb);\n          };\n\n          this.el.addEventListener('loadedmetadata', eventHandler, false);\n          this.el.addEventListener('error', eventHandler, false);\n          this.el.load();\n        }\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        this.trigger(Events.PLAYBACK_PLAY_INTENT);\n        this._stopped = false;\n\n        this._setupSrc(this._src);\n\n        this._handleBufferingEvents();\n\n        var promise = this.el.play(); // For more details, see https://developers.google.com/web/updates/2016/03/play-returns-promise\n\n        if (promise && promise[\"catch\"]) promise[\"catch\"](function () {});\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.el.pause();\n        this.dvrEnabled && this._updateDvr(true);\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this.pause();\n        this._stopped = true; // src will be added again in play()\n\n        this.el.removeAttribute('src');\n        this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\n        this._stopPlayheadMovingChecks();\n\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_STOP);\n      }\n    }, {\n      key: \"volume\",\n      value: function volume(value) {\n        if (value === 0) {\n          this.$el.attr({\n            muted: 'true'\n          });\n          this.el.muted = true;\n        } else {\n          this.$el.attr({\n            muted: null\n          });\n          this.el.muted = false;\n          this.el.volume = value / 100;\n        }\n      }\n      /**\n       * @deprecated\n       * @private\n       */\n\n    }, {\n      key: \"mute\",\n      value: function mute() {\n        this.el.muted = true;\n      }\n      /**\n       * @deprecated\n       * @private\n       */\n\n    }, {\n      key: \"unmute\",\n      value: function unmute() {\n        this.el.muted = false;\n      }\n    }, {\n      key: \"isMuted\",\n      value: function isMuted() {\n        return this.el.muted === true || this.el.volume === 0;\n      }\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return !this.el.paused && !this.el.ended;\n      }\n    }, {\n      key: \"_startPlayheadMovingChecks\",\n      value: function _startPlayheadMovingChecks() {\n        if (this._playheadMovingTimer !== null) return;\n        this._playheadMovingTimeOnCheck = null;\n\n        this._determineIfPlayheadMoving();\n\n        this._playheadMovingTimer = setInterval(this._determineIfPlayheadMoving.bind(this), 500);\n      }\n    }, {\n      key: \"_stopPlayheadMovingChecks\",\n      value: function _stopPlayheadMovingChecks() {\n        if (this._playheadMovingTimer === null) return;\n        clearInterval(this._playheadMovingTimer);\n        this._playheadMovingTimer = null;\n        this._playheadMoving = false;\n      }\n    }, {\n      key: \"_determineIfPlayheadMoving\",\n      value: function _determineIfPlayheadMoving() {\n        var before = this._playheadMovingTimeOnCheck;\n        var now = this.el.currentTime;\n        this._playheadMoving = before !== now;\n        this._playheadMovingTimeOnCheck = now;\n\n        this._handleBufferingEvents();\n      } // this seems to happen when the user is having to wait\n      // for something to happen AFTER A USER INTERACTION\n      // e.g the player might be buffering, but when `play()` is called\n      // only at this point will this be called.\n      // Or the user may seek somewhere but the new area requires buffering,\n      // so it will fire then as well.\n      // On devices where playing is blocked until requested with a user action,\n      // buffering may start, but never finish until the user initiates a play,\n      // but this only happens when play is actually requested\n\n    }, {\n      key: \"_onWaiting\",\n      value: function _onWaiting() {\n        this._loadStarted = true;\n\n        this._handleBufferingEvents();\n      } // called after the first frame has loaded\n      // note this doesn't fire on ios before the user has requested play\n      // ideally the \"loadstart\" event would be used instead, but this fires\n      // before a user has requested play on iOS, and also this is always fired\n      // even if the preload setting is \"none\". In both these cases this causes\n      // infinite buffering until the user does something which isn't great.\n\n    }, {\n      key: \"_onLoadedData\",\n      value: function _onLoadedData() {\n        this._loadStarted = true;\n\n        this._handleBufferingEvents();\n      } // note this doesn't fire on ios before user has requested play\n\n    }, {\n      key: \"_onCanPlay\",\n      value: function _onCanPlay() {\n        this._handleBufferingEvents();\n      }\n    }, {\n      key: \"_onPlaying\",\n      value: function _onPlaying() {\n        this._checkForClosedCaptions();\n\n        this._startPlayheadMovingChecks();\n\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_PLAY);\n      }\n    }, {\n      key: \"_onPause\",\n      value: function _onPause() {\n        this._stopPlayheadMovingChecks();\n\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_PAUSE);\n      }\n    }, {\n      key: \"_onSeeking\",\n      value: function _onSeeking() {\n        this.trigger(Events.PLAYBACK_SEEK, this.getCurrentTime());\n\n        this._handleBufferingEvents();\n      }\n    }, {\n      key: \"_onSeeked\",\n      value: function _onSeeked() {\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_SEEKED);\n      }\n    }, {\n      key: \"_onEnded\",\n      value: function _onEnded() {\n        this._handleBufferingEvents();\n\n        this.trigger(Events.PLAYBACK_ENDED, this.name);\n      } // The playback should be classed as buffering if the following are true:\n      // - the ready state is less then HAVE_FUTURE_DATA or the playhead isn't moving and it should be\n      // - the media hasn't \"ended\",\n      // - the media hasn't been stopped\n      // - loading has started\n\n    }, {\n      key: \"_handleBufferingEvents\",\n      value: function _handleBufferingEvents() {\n        var playheadShouldBeMoving = !this.el.ended && !this.el.paused;\n        var buffering = this._loadStarted && !this.el.ended && !this._stopped && (playheadShouldBeMoving && !this._playheadMoving || this.el.readyState < this.el.HAVE_FUTURE_DATA);\n\n        if (this._isBuffering !== buffering) {\n          this._isBuffering = buffering;\n          if (buffering) this.trigger(Events.PLAYBACK_BUFFERING, this.name);else this.trigger(Events.PLAYBACK_BUFFERFULL, this.name);\n        }\n      }\n    }, {\n      key: \"_onError\",\n      value: function _onError() {\n        var _ref = this.el.error || UNKNOWN_ERROR,\n            code = _ref.code,\n            message = _ref.message;\n\n        var isUnknownError = code === UNKNOWN_ERROR.code;\n        var formattedError = this.createError({\n          code: code,\n          description: message,\n          raw: this.el.error,\n          level: isUnknownError ? PlayerError.Levels.WARN : PlayerError.Levels.FATAL\n        });\n        if (isUnknownError) Log.warn(this.name, 'HTML5 unknown error: ', formattedError);else this.trigger(Events.PLAYBACK_ERROR, formattedError);\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this._destroyed = true;\n        this.handleTextTrackChange && this.el.textTracks.removeEventListener('change', this.handleTextTrackChange);\n\n        _get(_getPrototypeOf(HTML5Video.prototype), \"destroy\", this).call(this);\n\n        this.el.removeAttribute('src');\n        this.el.load(); // load with no src to stop loading of the previous source and avoid leaks\n\n        this._src = null;\n        DomRecycler.garbage(this.el);\n      }\n    }, {\n      key: \"_updateDvr\",\n      value: function _updateDvr(status) {\n        this.trigger(Events.PLAYBACK_DVR, status);\n        this.trigger(Events.PLAYBACK_STATS_ADD, {\n          'dvr': status\n        });\n      }\n    }, {\n      key: \"seek\",\n      value: function seek(time) {\n        if (time < 0) {\n          Log.warn('Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point.');\n          time = this.getDuration();\n        } // assume live if time within 3 seconds of end of stream\n\n\n        this.dvrEnabled && this._updateDvr(time < this.getDuration() - 3);\n        time += this.el.seekable.start(0);\n        this.el.currentTime = time;\n      }\n    }, {\n      key: \"seekPercentage\",\n      value: function seekPercentage(percentage) {\n        var time = this.el.duration * (percentage / 100);\n        this.seek(time);\n      }\n    }, {\n      key: \"_checkInitialSeek\",\n      value: function _checkInitialSeek() {\n        var seekTime = seekStringToSeconds();\n        if (seekTime !== 0) this.seek(seekTime);\n      }\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime() {\n        return this.el.currentTime;\n      }\n    }, {\n      key: \"getDuration\",\n      value: function getDuration() {\n        var _this4 = this;\n\n        if (this.isLive) {\n          try {\n            return this.el.seekable.end(0) - this.el.seekable.start(0);\n          } catch (e) {\n            setTimeout(function () {\n              return _this4._updateSettings();\n            }, 1000);\n          }\n        }\n\n        return this.el.duration;\n      }\n    }, {\n      key: \"_onTimeUpdate\",\n      value: function _onTimeUpdate() {\n        var duration = this.isLive ? this.getDuration() : this.el.duration;\n        this.trigger(Events.PLAYBACK_TIMEUPDATE, {\n          current: this.el.currentTime,\n          total: duration\n        }, this.name);\n      }\n    }, {\n      key: \"_onProgress\",\n      value: function _onProgress() {\n        if (!this.el.buffered.length) return;\n        var buffered = [];\n        var bufferedPos = 0;\n\n        for (var i = 0; i < this.el.buffered.length; i++) {\n          buffered = [].concat(_toConsumableArray(buffered), [{\n            start: this.el.buffered.start(i),\n            end: this.el.buffered.end(i)\n          }]);\n          if (this.el.currentTime >= buffered[i].start && this.el.currentTime <= buffered[i].end) bufferedPos = i;\n        }\n\n        var progress = {\n          start: buffered[bufferedPos].start,\n          current: buffered[bufferedPos].end,\n          total: this.el.duration\n        };\n        this.trigger(Events.PLAYBACK_PROGRESS, progress, buffered);\n      }\n    }, {\n      key: \"_typeFor\",\n      value: function _typeFor(src) {\n        var mimeTypes = HTML5Video._mimeTypesForUrl(src, MIMETYPES, this.options.mimeType);\n\n        if (mimeTypes.length === 0) mimeTypes = HTML5Video._mimeTypesForUrl(src, AUDIO_MIMETYPES, this.options.mimeType);\n        var mimeType = mimeTypes[0] || '';\n        return mimeType.split(';')[0];\n      }\n    }, {\n      key: \"_ready\",\n      value: function _ready() {\n        if (this._isReadyState) return;\n        this._isReadyState = true;\n        this.trigger(Events.PLAYBACK_READY, this.name);\n      }\n    }, {\n      key: \"_checkForClosedCaptions\",\n      value: function _checkForClosedCaptions() {\n        // Check if CC available only if current playback is HTML5Video\n        if (this.isHTML5Video && !this._ccIsSetup) {\n          if (this.hasClosedCaptionsTracks) {\n            this.trigger(Events.PLAYBACK_SUBTITLE_AVAILABLE);\n            var trackId = this.closedCaptionsTrackId;\n            this.closedCaptionsTrackId = trackId;\n            this.handleTextTrackChange = this._handleTextTrackChange.bind(this);\n            this.el.textTracks.addEventListener('change', this.handleTextTrackChange);\n          }\n\n          this._ccIsSetup = true;\n        }\n      }\n    }, {\n      key: \"_handleTextTrackChange\",\n      value: function _handleTextTrackChange() {\n        var tracks = this.closedCaptionsTracks;\n        var track = tracks.find(function (track) {\n          return track.track.mode === 'showing';\n        }) || {\n          id: -1\n        };\n\n        if (this._ccTrackId !== track.id) {\n          this._ccTrackId = track.id;\n          this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED, {\n            id: track.id\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        if (this.options.playback.disableContextMenu) {\n          this.$el.on('contextmenu', function () {\n            return false;\n          });\n        }\n\n        if (this._externalTracks && this._externalTracks.length > 0) {\n          this.$el.html(this.template({\n            tracks: this._externalTracks\n          }));\n        }\n\n        this._ready();\n\n        var style = Styler.getStyleFor(css_248z$3.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        return this;\n      }\n    }, {\n      key: \"isReady\",\n      get: function get() {\n        return this._isReadyState;\n      }\n    }, {\n      key: \"isHTML5Video\",\n      get: function get() {\n        return this.name === HTML5Video.prototype.name;\n      }\n    }, {\n      key: \"closedCaptionsTracks\",\n      get: function get() {\n        var id = 0;\n\n        var trackId = function trackId() {\n          return id++;\n        };\n\n        var textTracks = this.el.textTracks ? Array.from(this.el.textTracks) : [];\n        return textTracks.filter(function (track) {\n          return track.kind === 'subtitles' || track.kind === 'captions';\n        }).map(function (track) {\n          return {\n            id: trackId(),\n            name: track.label,\n            track: track\n          };\n        });\n      }\n    }, {\n      key: \"closedCaptionsTrackId\",\n      get: function get() {\n        return this._ccTrackId;\n      },\n      set: function set(trackId) {\n        if (!isNumber(trackId)) return;\n        var tracks = this.closedCaptionsTracks;\n        var showingTrack; // Note: -1 is for hide all tracks\n\n        if (trackId !== -1) {\n          showingTrack = tracks.find(function (track) {\n            return track.id === trackId;\n          });\n          if (!showingTrack) return; // Track id not found\n\n          if (showingTrack.track.mode === 'showing') return; // Track already showing\n        } // Since it is possible to display multiple tracks,\n        // ensure that all tracks are hidden.\n\n\n        tracks.filter(function (track) {\n          return track.track.mode !== 'hidden';\n        }).forEach(function (track) {\n          return track.track.mode = 'hidden';\n        });\n        showingTrack && (showingTrack.track.mode = 'showing');\n        this._ccTrackId = trackId;\n        this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED, {\n          id: trackId\n        });\n      }\n    }, {\n      key: \"template\",\n      get: function get() {\n        return tmpl(tracksHTML);\n      }\n    }]);\n\n    return HTML5Video;\n  }(Playback);\n\n  HTML5Video._mimeTypesForUrl = function (resourceUrl, mimeTypesByExtension, mimeType) {\n    var extension = (resourceUrl.split('?')[0].match(/.*\\.(.*)$/) || [])[1];\n    var mimeTypes = mimeType || extension && mimeTypesByExtension[extension.toLowerCase()] || [];\n    return mimeTypes.constructor === Array ? mimeTypes : [mimeTypes];\n  };\n\n  HTML5Video._canPlay = function (type, mimeTypesByExtension, resourceUrl, mimeType) {\n    var mimeTypes = HTML5Video._mimeTypesForUrl(resourceUrl, mimeTypesByExtension, mimeType);\n\n    var media = document.createElement(type);\n    return !!mimeTypes.filter(function (mediaType) {\n      return !!media.canPlayType(mediaType).replace(/no/, '');\n    })[0];\n  };\n\n  HTML5Video.canPlay = function (resourceUrl, mimeType) {\n    return HTML5Video._canPlay('audio', AUDIO_MIMETYPES, resourceUrl, mimeType) || HTML5Video._canPlay('video', MIMETYPES, resourceUrl, mimeType);\n  };\n\n  var HTML5Audio = /*#__PURE__*/function (_HTML5Video) {\n    _inherits(HTML5Audio, _HTML5Video);\n\n    var _super = _createSuper(HTML5Audio);\n\n    function HTML5Audio() {\n      _classCallCheck(this, HTML5Audio);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(HTML5Audio, [{\n      key: \"updateSettings\",\n      value: function updateSettings() {\n        this.settings.left = ['playpause', 'position', 'duration'];\n        this.settings.seekEnabled = this.isSeekEnabled();\n        this.trigger(Events.PLAYBACK_SETTINGSUPDATE);\n      }\n    }, {\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return Playback.AOD;\n      }\n    }, {\n      key: \"name\",\n      get: function get() {\n        return 'html5_audio';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"tagName\",\n      get: function get() {\n        return 'audio';\n      }\n    }, {\n      key: \"isAudioOnly\",\n      get: function get() {\n        return true;\n      }\n    }]);\n\n    return HTML5Audio;\n  }(HTML5Video);\n\n  HTML5Audio.canPlay = function (resourceUrl, mimeType) {\n    var mimetypes = {\n      'wav': ['audio/wav'],\n      'mp3': ['audio/mp3', 'audio/mpeg;codecs=\"mp3\"'],\n      'aac': ['audio/mp4;codecs=\"mp4a.40.5\"'],\n      'oga': ['audio/ogg']\n    };\n    return HTML5Video._canPlay('audio', mimetypes, resourceUrl, mimeType);\n  };\n\n  var css_248z$4 = \"[data-html-img] {\\n  max-width: 100%;\\n  max-height: 100%; }\\n\";\n\n  var HTMLImg = /*#__PURE__*/function (_Playback) {\n    _inherits(HTMLImg, _Playback);\n\n    var _super = _createSuper(HTMLImg);\n\n    _createClass(HTMLImg, [{\n      key: \"getPlaybackType\",\n      value: function getPlaybackType() {\n        return Playback.NO_OP;\n      }\n    }, {\n      key: \"name\",\n      get: function get() {\n        return 'html_img';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"tagName\",\n      get: function get() {\n        return 'img';\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-html-img': ''\n        };\n      }\n    }, {\n      key: \"events\",\n      get: function get() {\n        return {\n          'load': '_onLoad',\n          'abort': '_onError',\n          'error': '_onError'\n        };\n      }\n    }]);\n\n    function HTMLImg(params) {\n      var _this;\n\n      _classCallCheck(this, HTMLImg);\n\n      _this = _super.call(this, params);\n      _this.el.src = params.src;\n      return _this;\n    }\n\n    _createClass(HTMLImg, [{\n      key: \"render\",\n      value: function render() {\n        var style = Styler.getStyleFor(css_248z$4.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.trigger(Events.PLAYBACK_READY, this.name);\n        return this;\n      }\n    }, {\n      key: \"_onLoad\",\n      value: function _onLoad() {\n        this.trigger(Events.PLAYBACK_ENDED, this.name);\n      }\n    }, {\n      key: \"_onError\",\n      value: function _onError(evt) {\n        var m = evt.type === 'error' ? 'load error' : 'loading aborted';\n        this.trigger(Events.PLAYBACK_ERROR, {\n          message: m\n        }, this.name);\n      }\n    }]);\n\n    return HTMLImg;\n  }(Playback);\n\n  HTMLImg.canPlay = function (resource) {\n    return /\\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\\?.*)$/i.test(resource);\n  };\n\n  var noOpHTML = \"<canvas data-no-op-canvas></canvas>\\n<p data-no-op-msg><%=message%></p><p>\\n</p>\";\n\n  var css_248z$5 = \"[data-no-op] {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  text-align: center; }\\n\\n[data-no-op] p[data-no-op-msg] {\\n  position: absolute;\\n  text-align: center;\\n  font-size: 25px;\\n  left: 0;\\n  right: 0;\\n  color: white;\\n  padding: 10px;\\n  /* center vertically */\\n  top: 50%;\\n  transform: translateY(-50%);\\n  max-height: 100%;\\n  overflow: auto; }\\n\\n[data-no-op] canvas[data-no-op-canvas] {\\n  background-color: #777;\\n  height: 100%;\\n  width: 100%; }\\n\";\n\n  var NoOp = /*#__PURE__*/function (_Playback) {\n    _inherits(NoOp, _Playback);\n\n    var _super = _createSuper(NoOp);\n\n    _createClass(NoOp, [{\n      key: \"name\",\n      get: function get() {\n        return 'no_op';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }, {\n      key: \"template\",\n      get: function get() {\n        return tmpl(noOpHTML);\n      }\n    }, {\n      key: \"attributes\",\n      get: function get() {\n        return {\n          'data-no-op': ''\n        };\n      }\n    }]);\n\n    function NoOp() {\n      var _this;\n\n      _classCallCheck(this, NoOp);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this._noiseFrameNum = -1;\n      return _this;\n    }\n\n    _createClass(NoOp, [{\n      key: \"render\",\n      value: function render() {\n        var playbackNotSupported = this.options.playbackNotSupportedMessage || this.i18n.t('playback_not_supported');\n        var style = Styler.getStyleFor(css_248z$5.toString(), {\n          baseUrl: this.options.baseUrl\n        });\n        this.$el.append(style[0]);\n        this.$el.html(this.template({\n          message: playbackNotSupported\n        }));\n        this.trigger(Events.PLAYBACK_READY, this.name);\n        var showForNoOp = !!(this.options.poster && this.options.poster.showForNoOp);\n        if (this.options.autoPlay || !showForNoOp) this._animate();\n        return this;\n      }\n    }, {\n      key: \"_noise\",\n      value: function _noise() {\n        this._noiseFrameNum = (this._noiseFrameNum + 1) % 5;\n\n        if (this._noiseFrameNum) {\n          // only update noise every 5 frames to save cpu\n          return;\n        }\n\n        var idata = this.context.createImageData(this.context.canvas.width, this.context.canvas.height);\n        var buffer32;\n\n        try {\n          buffer32 = new Uint32Array(idata.data.buffer);\n        } catch (err) {\n          buffer32 = new Uint32Array(this.context.canvas.width * this.context.canvas.height * 4);\n          var data = idata.data;\n\n          for (var i = 0; i < data.length; i++) {\n            buffer32[i] = data[i];\n          }\n        }\n\n        var len = buffer32.length,\n            m = Math.random() * 6 + 4;\n        var run = 0,\n            color = 0;\n\n        for (var _i = 0; _i < len;) {\n          if (run < 0) {\n            run = m * Math.random();\n            var p = Math.pow(Math.random(), 0.4);\n            color = 255 * p << 24;\n          }\n\n          run -= 1;\n          buffer32[_i++] = color;\n        }\n\n        this.context.putImageData(idata, 0, 0);\n      }\n    }, {\n      key: \"_loop\",\n      value: function _loop() {\n        var _this2 = this;\n\n        if (this._stop) return;\n\n        this._noise();\n\n        this._animationHandle = requestAnimationFrame(function () {\n          return _this2._loop();\n        });\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (this._animationHandle) {\n          cancelAnimationFrame(this._animationHandle);\n          this._stop = true;\n        }\n      }\n    }, {\n      key: \"_animate\",\n      value: function _animate() {\n        this.canvas = this.$el.find('canvas[data-no-op-canvas]')[0];\n        this.context = this.canvas.getContext('2d');\n\n        this._loop();\n      }\n    }]);\n\n    return NoOp;\n  }(Playback);\n\n  NoOp.canPlay = function (source) {\n    // eslint-disable-line no-unused-vars\n    return true;\n  };\n\n  /**\n   * The internationalization (i18n) plugin\n   * @class Strings\n   * @constructor\n   * @extends CorePlugin\n   * @module plugins\n   */\n\n  var Strings = /*#__PURE__*/function (_CorePlugin) {\n    _inherits(Strings, _CorePlugin);\n\n    var _super = _createSuper(Strings);\n\n    _createClass(Strings, [{\n      key: \"name\",\n      get: function get() {\n        return 'strings';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }]);\n\n    function Strings(core) {\n      var _this;\n\n      _classCallCheck(this, Strings);\n\n      _this = _super.call(this, core);\n\n      _this._initializeMessages();\n\n      return _this;\n    }\n    /**\n     * Gets a translated string for the given key.\n     * @method t\n     * @param {String} key the key to all messages\n     * @return {String} translated label\n     */\n\n\n    _createClass(Strings, [{\n      key: \"t\",\n      value: function t(key) {\n        var lang = this._language();\n\n        var fallbackLang = this._messages['en'];\n        var i18n = lang && this._messages[lang] || fallbackLang;\n        return i18n[key] || fallbackLang[key] || key;\n      }\n    }, {\n      key: \"_language\",\n      value: function _language() {\n        return this.core.options.language || getBrowserLanguage();\n      }\n    }, {\n      key: \"_initializeMessages\",\n      value: function _initializeMessages() {\n        var defaultMessages = {\n          'en': {\n            'live': 'live',\n            'back_to_live': 'back to live',\n            'disabled': 'Disabled',\n            'playback_not_supported': 'Your browser does not support the playback of this video. Please try using a different browser.',\n            'default_error_title': 'Could not play video.',\n            'default_error_message': 'There was a problem trying to load the video.'\n          },\n          'pt': {\n            'live': 'ao vivo',\n            'back_to_live': 'voltar para o ao vivo',\n            'disabled': 'Desativado',\n            'playback_not_supported': 'Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.',\n            'default_error_title': 'Não foi possível reproduzir o vídeo.',\n            'default_error_message': 'Ocorreu um problema ao tentar carregar o vídeo.'\n          },\n          'es': {\n            'live': 'vivo',\n            'back_to_live': 'volver en vivo',\n            'disabled': 'Discapacitado',\n            'playback_not_supported': 'Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente.'\n          },\n          'ru': {\n            'live': 'прямой эфир',\n            'back_to_live': 'к прямому эфиру',\n            'disabled': 'Отключено',\n            'playback_not_supported': 'Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер.'\n          },\n          'fr': {\n            'live': 'en direct',\n            'back_to_live': 'retour au direct',\n            'disabled': 'Désactivé',\n            'playback_not_supported': 'Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.',\n            'default_error_title': 'Impossible de lire la vidéo.',\n            'default_error_message': 'Un problème est survenu lors du chargement de la vidéo.'\n          },\n          'tr': {\n            'live': 'canlı',\n            'back_to_live': 'canlı yayına dön',\n            'disabled': 'Engelli',\n            'playback_not_supported': 'Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin.'\n          },\n          'et': {\n            'live': 'Otseülekanne',\n            'back_to_live': 'Tagasi otseülekande juurde',\n            'disabled': 'Keelatud',\n            'playback_not_supported': 'Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit.'\n          },\n          'ar': {\n            'live': 'مباشر',\n            'back_to_live': 'الرجوع إلى المباشر',\n            'disabled': 'معطّل',\n            'playback_not_supported': 'المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.',\n            'default_error_title': 'غير قادر الى التشغيل.',\n            'default_error_message': 'حدثت مشكلة أثناء تحميل الفيديو.'\n          }\n        };\n        this._messages = zepto.extend(true, defaultMessages, this.core.options.strings || {});\n        this._messages['pt-BR'] = this._messages['pt'];\n        this._messages['en-US'] = this._messages['en'];\n        this._messages['es-419'] = this._messages['es'];\n        this._messages['fr-FR'] = this._messages['fr'];\n        this._messages['tr-TR'] = this._messages['tr'];\n        this._messages['et-EE'] = this._messages['et'];\n        this._messages['ar-IQ'] = this._messages['ar'];\n      }\n    }]);\n\n    return Strings;\n  }(CorePlugin);\n\n  var SourcesPlugin = /*#__PURE__*/function (_CorePlugin) {\n    _inherits(SourcesPlugin, _CorePlugin);\n\n    var _super = _createSuper(SourcesPlugin);\n\n    function SourcesPlugin() {\n      _classCallCheck(this, SourcesPlugin);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(SourcesPlugin, [{\n      key: \"bindEvents\",\n      value: function bindEvents() {\n        this.listenTo(this.core, Events.CORE_CONTAINERS_CREATED, this.onContainersCreated);\n      }\n    }, {\n      key: \"onContainersCreated\",\n      value: function onContainersCreated() {\n        var firstValidSource = this.core.containers.filter(function (container) {\n          return container.playback.name !== 'no_op';\n        })[0] || this.core.containers[0];\n        firstValidSource && this.core.containers.forEach(function (container) {\n          if (container !== firstValidSource) container.destroy();\n        });\n      }\n    }, {\n      key: \"name\",\n      get: function get() {\n        return 'sources';\n      }\n    }, {\n      key: \"supportedVersion\",\n      get: function get() {\n        return {\n          min: \"0.4.17\"\n        };\n      }\n    }]);\n\n    return SourcesPlugin;\n  }(CorePlugin);\n\n  // Copyright 2014 Globo.com Player authors. All rights reserved.\n  var version = \"0.4.17\"; // Built-in Plugins/Playbacks\n\n  Loader.registerPlugin(Strings);\n  Loader.registerPlugin(SourcesPlugin);\n  Loader.registerPlayback(NoOp);\n  Loader.registerPlayback(HTMLImg);\n  Loader.registerPlayback(HTML5Audio);\n  Loader.registerPlayback(HTML5Video);\n  var main = {\n    Player: Player,\n    Events: Events,\n    Browser: Browser,\n    ContainerPlugin: ContainerPlugin,\n    UIContainerPlugin: UIContainerPlugin,\n    CorePlugin: CorePlugin,\n    UICorePlugin: UICorePlugin,\n    Playback: Playback,\n    Container: Container,\n    Core: Core,\n    PlayerError: PlayerError,\n    Loader: Loader,\n    BaseObject: BaseObject,\n    UIObject: UIObject,\n    Utils: Utils,\n    HTML5Audio: HTML5Audio,\n    HTML5Video: HTML5Video,\n    HTMLImg: HTMLImg,\n    Log: Log,\n    Styler: Styler,\n    version: version,\n    template: tmpl,\n    $: zepto\n  };\n\n  exports.$ = zepto;\n  exports.BaseObject = BaseObject;\n  exports.Browser = Browser;\n  exports.Container = Container;\n  exports.ContainerPlugin = ContainerPlugin;\n  exports.Core = Core;\n  exports.CorePlugin = CorePlugin;\n  exports.Events = Events;\n  exports.HTML5Audio = HTML5Audio;\n  exports.HTML5Video = HTML5Video;\n  exports.HTMLImg = HTMLImg;\n  exports.Loader = Loader;\n  exports.Log = Log;\n  exports.Playback = Playback;\n  exports.Player = Player;\n  exports.PlayerError = PlayerError;\n  exports.Styler = Styler;\n  exports.UIContainerPlugin = UIContainerPlugin;\n  exports.UICorePlugin = UICorePlugin;\n  exports.UIObject = UIObject;\n  exports.Utils = Utils;\n  exports.default = main;\n  exports.template = tmpl;\n  exports.version = version;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=clappr-core.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/@clappr/core/dist/clappr-core.js","module.exports = \"<param name=movie value=\\\"<%= swfPath %>?inline=1\\\"> <param name=quality value=autohigh> <param name=swliveconnect value=true> <param name=allowScriptAccess value=always> <param name=allownetworking value=all> <param name=bgcolor value=#000000> <param name=allowFullScreen value=false> <param name=wmode value=\\\"<%= wmode %>\\\"> <param name=tabindex value=1> <param name=FlashVars value=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\"/> <embed name=\\\"<%= cid %>\\\" type=application/x-shockwave-flash disabled=disabled tabindex=-1 enablecontextmenu=false allowscriptaccess=always allownetworking=all quality=autohigh pluginspage=http://www.macromedia.com/go/getflashplayer wmode=\\\"<%= wmode %>\\\" swliveconnect=true allowfullscreen=false bgcolor=#000000 flashvars=\\\"playbackId=<%= playbackId %>&scaling=<%= scaling %>&bufferTime=<%= bufferTime %>&playbackType=<%= playbackType %>&startLevel=<%= startLevel %>&useAppInstance=<%= useAppInstance %>&proxyType=<%= proxyType %>&autoSwitch=<%= autoSwitch %>&switchRules=<%= switchRules %>\\\" data=\\\"<%= swfPath %>\\\" src=\\\"<%= swfPath %>\\\" width=100% height=100%> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/html-loader!./public/flash.html\n// module id = 3\n// module chunks = 0","module.exports = \".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./~/sass-loader!./public/flash.scss\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}